/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 90827:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87537);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23645);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "body.zen-mode #chapter-commands{display:none}#chapter-commands{position:absolute;top:1em;right:0;display:flex;align-items:flex-start;color:#828282;z-index:1}#chapter-commands>button{margin:0;background:none;border:none;color:inherit;cursor:pointer}#chapter-commands>button:hover{color:#757575}#chapter-commands>button:active{color:dimgray}#chapter-commands ._separator{background:#e0e0e0;height:30px;width:1px;margin:0 10px}#chapter-commands .chapter-commands-label{font-size:10px;line-height:16px;color:inherit;font-size:inherit;font-weight:bold;color:#828282}", "",{"version":3,"sources":["webpack://./src/ts/features/bookEnchancements/chapterCommands/chapter-commands.scss"],"names":[],"mappings":"AAAA,gCACI,YAAA,CAGJ,kBACI,iBAAA,CACA,OAAA,CACA,OAAA,CACA,YAAA,CACA,sBAAA,CACA,aAAA,CACA,SAAA,CAEA,yBACI,QAAA,CACA,eAAA,CACA,WAAA,CACA,aAAA,CACA,cAAA,CAEA,+BACI,aAAA,CAGJ,gCACI,aAAA,CAIR,8BACI,kBAAA,CACA,WAAA,CACA,SAAA,CACA,aAAA,CAGJ,0CACI,cAAA,CACA,gBAAA,CACA,aAAA,CACA,iBAAA,CACA,gBAAA,CACA,aAAA","sourcesContent":["body.zen-mode #chapter-commands {\n    display: none;\n}\n\n#chapter-commands {\n    position: absolute;\n    top: 1em;\n    right: 0;\n    display: flex;\n    align-items: flex-start;\n    color: #828282;\n    z-index: 1;\n\n    & > button {\n        margin: 0;\n        background: none;\n        border: none;\n        color: inherit;\n        cursor: pointer;\n\n        &:hover {\n            color: darken(#828282, 5);\n        }\n\n        &:active {\n            color: darken(#828282, 10);\n        }\n    }\n    \n    ._separator {\n        background: #E0E0E0;\n        height: 30px;\n        width: 1px;\n        margin: 0 10px;\n    }\n\n    .chapter-commands-label {\n        font-size: 10px;\n        line-height: 16px;\n        color: inherit;\n        font-size: inherit;\n        font-weight: bold;\n        color: #828282;\n    }\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 49070:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87537);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23645);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "#pointing-info-box{display:none;width:310px;position:fixed;background-color:gray;bottom:46px;left:50%;transform:translateX(-50%);border-radius:3px;z-index:95;background-color:#fff;border:solid 1px #666;font-size:14px;transition:transform .2s ease-in-out}#pointing-info-box .pointing-info-box-wrapper{display:flex}#pointing-info-box:not(.shown){transform:translate(-50%, 150%)}#pointing-info-box.shown{transform:translate(-50%, 0)}#pointing-info-box .fa,#pointing-info-box .fal,#pointing-info-box .fas,#pointing-info-box .far,#pointing-info-box .add-to-cart-button{user-select:none;-webkit-user-select:none;-moz-user-select:moz-none;-ms-user-select:none}#pointing-info-box input{height:37px;display:inline-block}#pointing-info-box .pointing-info-right-container,#pointing-info-box .pointing-info-left-container{font-size:20px;display:inline-block;cursor:pointer;margin:5px 0;width:40px;height:35px;text-align:center}#pointing-info-box .pointing-info-right-container{float:right;color:gray}#pointing-info-box .pointing-info-left-container{float:left}#pointing-info-box .pointing-info-middle-container{line-height:35px;height:35px;padding:3px 0;display:flex;gap:5px;width:220px;text-align:center}#pointing-info-box .pointing-info-middle-container a{width:100%}", "",{"version":3,"sources":["webpack://./src/ts/features/bookEnchancements/textSelection/pointing-selection.scss"],"names":[],"mappings":"AAAA,mBACI,YAAA,CACA,WAAA,CACA,cAAA,CACA,qBAAA,CACA,WAAA,CACA,QAAA,CACA,0BAAA,CACA,iBAAA,CACA,UAAA,CACA,qBAAA,CACA,qBAAA,CAEA,cAAA,CAEA,oCAAA,CAEA,8CACI,YAAA,CAGJ,+BACI,+BAAA,CAGJ,yBACI,4BAAA,CAGJ,sIACI,gBAAA,CACA,wBAAA,CACA,yBAAA,CACA,oBAAA,CAGJ,yBACI,WAAA,CACA,oBAAA,CAGJ,mGACI,cAAA,CACA,oBAAA,CACA,cAAA,CACA,YAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CAGJ,kDACI,WAAA,CACA,UAAA,CAGJ,iDACI,UAAA,CAGJ,mDACI,gBAAA,CACA,WAAA,CACA,aAAA,CACA,YAAA,CACA,OAAA,CACA,WAAA,CACA,iBAAA,CAEA,qDACI,UAAA","sourcesContent":["#pointing-info-box {\n    display: none;\n    width: 310px;\n    position: fixed;\n    background-color: gray;\n    bottom: 46px;\n    left: 50%;\n    transform: translateX(-50%);\n    border-radius: 3px;\n    z-index: 95;\n    background-color: #fff;\n    border: solid 1px #666;\n\n    font-size: 14px;\n\n    transition: transform 0.2s ease-in-out;\n\n    .pointing-info-box-wrapper {\n        display: flex;\n    }\n\n    &:not(.shown){\n        transform: translate(-50%, 150%);\n    }\n\n    &.shown{\n        transform: translate(-50%, 0);\n    }\n\n    .fa, .fal, .fas, .far, .add-to-cart-button {\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: moz-none;\n        -ms-user-select: none;\n    }\n\n    input {\n        height: 37px;\n        display: inline-block;\n    }\n\n    .pointing-info-right-container, .pointing-info-left-container {\n        font-size: 20px;\n        display: inline-block;\n        cursor: pointer;\n        margin: 5px 0;\n        width: 40px;\n        height: 35px;\n        text-align: center;\n    }\n\n    .pointing-info-right-container {\n        float: right;\n        color: gray;\n    }\n\n    .pointing-info-left-container {\n        float: left;\n    }\n\n    .pointing-info-middle-container {\n        line-height: 35px;\n        height: 35px;\n        padding: 3px 0;\n        display: flex;\n        gap: 5px;\n        width: 220px;\n        text-align: center;\n\n        a {\n            width: 100%;\n        }\n    }\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 43843:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87537);
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23645);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".free-preview-promo-container{background:#fff !important;box-shadow:0px 0px 10px rgba(0,0,0,.15);margin-top:2em !important;margin-bottom:2em !important;padding:20px !important;color:#333;border-radius:5px;font-family:Lato !important}.free-preview-promo-container ._heading{margin-bottom:1em;font-weight:300;font-size:18px;line-height:30px}.free-preview-promo-container ._content{font-weight:300;font-size:16px;line-height:20px}.free-preview-promo-container ._footer{margin-top:1em;text-align:right}.free-preview-footer-promo-container{position:relative;background:#fff !important;padding:20px !important;box-shadow:0px 0px 10px rgba(0,0,0,.15)}.free-preview-footer-promo-container ._content{margin:0 auto;max-width:600px;font-size:14px}@media(min-width: 1440px){.free-preview-footer-promo-container ._content{max-width:734px}}@media(min-width: 1640px){.free-preview-footer-promo-container ._content{max-width:894px}}@media(max-width: 750px){.free-preview-footer-promo-container ._content{padding:0 8%}}.free-preview-footer-promo-container ._footer{position:absolute;top:20px;right:calc(50vw - 500px)}@media(max-width: 1030px){.free-preview-footer-promo-container ._footer{display:none}}@media(min-width: 1440px){.free-preview-footer-promo-container ._footer{right:calc(50vw - 560px)}}@media(min-width: 1640px){.free-preview-footer-promo-container ._footer{right:calc(50vw - 650px)}}@media(max-width: 470px){.free-preview-footer-promo-container .hideable-text{display:none}}.free-preview-footer-promo-container ._close-button{position:absolute;top:.5em;right:.5em;cursor:pointer;padding:.5em}.scrambled-word-wrapper{margin-right:.2em;padding:5px;display:inline-block;font-family:Merriweather,\"serif\";border:1px solid #747474;width:94px;text-align:center;border-radius:5px;font-size:14px;line-height:12px;color:#747474;background-color:rgba(218,218,218,.25)}.scrambled-word-wrapper.unscrambled-word{color:#22222d;background:none}.free-preview-promo-container ._sign-in,.free-preview-promo-container ._add-to-cart,.free-preview-footer-promo-container ._sign-in,.free-preview-footer-promo-container ._add-to-cart{box-sizing:border-box;border-radius:4px;user-select:none;margin:0;cursor:pointer;border:1px solid #407fbf;height:24px;line-height:24px;padding:0 1em;font-family:inherit;font-size:14px;display:none;box-sizing:content-box}.free-preview-promo-container ._sign-in,.free-preview-footer-promo-container ._sign-in{background:#fff;color:#407fbf}.free-preview-promo-container ._sign-in:hover,.free-preview-footer-promo-container ._sign-in:hover{background:#f2f2f2}.free-preview-promo-container ._sign-in:active,.free-preview-footer-promo-container ._sign-in:active{background:#e6e6e6}.free-preview-promo-container ._add-to-cart,.free-preview-footer-promo-container ._add-to-cart{background:#407fbf;color:#fff;margin-left:.5em}.free-preview-promo-container ._add-to-cart ._view-in-cart-message,.free-preview-footer-promo-container ._add-to-cart ._view-in-cart-message{display:none}.free-preview-promo-container ._add-to-cart:hover,.free-preview-footer-promo-container ._add-to-cart:hover{background:#3a72ac}.free-preview-promo-container ._add-to-cart:active,.free-preview-footer-promo-container ._add-to-cart:active{background:#369}body.user-not-logged-in .free-preview-promo-container ._sign-in,body.user-not-logged-in .free-preview-footer-promo-container ._sign-in{display:inline-block}body.user-doesnt-own-book .free-preview-promo-container ._add-to-cart,body.user-doesnt-own-book .free-preview-footer-promo-container ._add-to-cart{display:inline-block}body.book-in-cart .free-preview-promo-container ._add-to-cart,body.book-in-cart .free-preview-footer-promo-container ._add-to-cart{background:#67a73d;border-color:#67a73d}body.book-in-cart .free-preview-promo-container ._add-to-cart ._add-to-cart-message,body.book-in-cart .free-preview-footer-promo-container ._add-to-cart ._add-to-cart-message{display:none}body.book-in-cart .free-preview-promo-container ._add-to-cart ._view-in-cart-message,body.book-in-cart .free-preview-footer-promo-container ._add-to-cart ._view-in-cart-message{display:inline-block}body.book-in-cart .free-preview-promo-container ._add-to-cart:hover,body.book-in-cart .free-preview-footer-promo-container ._add-to-cart:hover{background:#5b9436}body.book-in-cart .free-preview-promo-container ._add-to-cart:active,body.book-in-cart .free-preview-footer-promo-container ._add-to-cart:active{background:#50822f}", "",{"version":3,"sources":["webpack://./src/ts/features/onboarding/freePreviewInfoManager/free-preview-info.scss"],"names":[],"mappings":"AAAA,8BACI,0BAAA,CACA,uCAAA,CACA,yBAAA,CACA,4BAAA,CACA,uBAAA,CACA,UAAA,CACA,iBAAA,CACA,2BAAA,CAEA,wCACI,iBAAA,CACA,eAAA,CACA,cAAA,CACA,gBAAA,CAGJ,wCACI,eAAA,CACA,cAAA,CACA,gBAAA,CAGJ,uCACI,cAAA,CACA,gBAAA,CAIR,qCACI,iBAAA,CACA,0BAAA,CACA,uBAAA,CACA,uCAAA,CAEA,+CACI,aAAA,CACA,eAAA,CACA,cAAA,CAEA,0BALJ,+CAMQ,eAAA,CAAA,CAGJ,0BATJ,+CAUQ,eAAA,CAAA,CAGJ,yBAbJ,+CAcQ,YAAA,CAAA,CAIR,8CACI,iBAAA,CACA,QAAA,CACA,wBAAA,CAEA,0BALJ,8CAMQ,YAAA,CAAA,CAGJ,0BATJ,8CAUQ,wBAAA,CAAA,CAGJ,0BAbJ,8CAcQ,wBAAA,CAAA,CAIR,yBACI,oDACI,YAAA,CAAA,CAIR,oDACI,iBAAA,CACA,QAAA,CACA,UAAA,CACA,cAAA,CACA,YAAA,CAIR,wBACI,iBAAA,CACA,WAAA,CACA,oBAAA,CACA,gCAAA,CACA,wBAAA,CACA,UAAA,CACA,iBAAA,CACA,iBAAA,CACA,cAAA,CACA,gBAAA,CAEA,aAAA,CACA,sCAAA,CAEA,yCACI,aAAA,CACA,eAAA,CAKJ,sLACI,qBAAA,CACA,iBAAA,CACA,gBAAA,CACA,QAAA,CACA,cAAA,CACA,wBAAA,CACA,WAAA,CACA,gBAAA,CACA,aAAA,CACA,mBAAA,CACA,cAAA,CACA,YAAA,CACA,sBAAA,CAGJ,uFACI,eAAA,CACA,aAAA,CAEA,mGACI,kBAAA,CAGJ,qGACI,kBAAA,CAIR,+FACI,kBAAA,CACA,UAAA,CACA,gBAAA,CAEA,6IAAA,YAAA,CAEA,2GACI,kBAAA,CAGJ,6GACI,eAAA,CAOJ,uIAAA,oBAAA,CAMA,mJAAA,oBAAA,CAMA,mIAII,kBAAA,CACA,oBAAA,CAJA,+KAAA,YAAA,CACA,iLAAA,oBAAA,CAKA,+IACI,kBAAA,CAGJ,iJACI,kBAAA","sourcesContent":[".free-preview-promo-container {\n    background: #FFFFFF !important;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.15);\n    margin-top: 2em !important;\n    margin-bottom: 2em !important;\n    padding: 20px !important;\n    color: #333;\n    border-radius: 5px;\n    font-family: Lato !important;\n\n    ._heading {\n        margin-bottom: 1em;\n        font-weight: 300;\n        font-size: 18px;\n        line-height: 30px;\n    }\n\n    ._content {\n        font-weight: 300;\n        font-size: 16px;\n        line-height: 20px;\n    }\n\n    ._footer {\n        margin-top: 1em;\n        text-align: right;\n    }\n}\n\n.free-preview-footer-promo-container {\n    position: relative;\n    background: #FFFFFF !important;\n    padding: 20px !important;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.15);\n\n    ._content {\n        margin: 0 auto;\n        max-width: 600px;\n        font-size: 14px;\n\n        @media (min-width: 1440px) {\n            max-width: 734px;\n        }\n\n        @media (min-width: 1640px) {\n            max-width: 894px;\n        }\n\n        @media (max-width: 750px) {\n            padding: 0 8%;\n        }\n    }\n\n    ._footer {\n        position: absolute;\n        top: 20px;\n        right: calc(50vw - 500px);\n\n        @media (max-width: 1030px) {\n            display: none;\n        }\n\n        @media (min-width: 1440px) {\n            right: calc(50vw - 560px);\n        }\n        \n        @media (min-width: 1640px) {\n            right: calc(50vw - 650px);\n        }\n    }\n\n    @media (max-width: 470px) {\n        .hideable-text {\n            display: none;\n        }\n    }\n\n    ._close-button {\n        position: absolute;\n        top: 0.5em;\n        right: 0.5em;\n        cursor: pointer;\n        padding: 0.5em;\n    }\n}\n\n.scrambled-word-wrapper {\n    margin-right: 0.2em;\n    padding: 5px;\n    display: inline-block;\n    font-family: Merriweather,\"serif\";\n    border: 1px solid #747474;\n    width: 94px;\n    text-align: center;\n    border-radius: 5px;\n    font-size: 14px;\n    line-height: 12px;\n\n    color: #747474;\n    background-color: rgba(218, 218, 218, 0.25);\n    \n    &.unscrambled-word {\n        color: rgb(34, 34, 45);\n        background:none;\n    }\n}\n\n.free-preview-promo-container, .free-preview-footer-promo-container {\n    ._sign-in, ._add-to-cart {\n        box-sizing: border-box;\n        border-radius: 4px;\n        user-select: none;\n        margin: 0;\n        cursor: pointer;\n        border: 1px solid #407FBF;\n        height: 24px;\n        line-height: 24px;\n        padding: 0 1em;\n        font-family: inherit;\n        font-size: 14px;\n        display: none;\n        box-sizing: content-box;\n    }\n    \n    ._sign-in {\n        background: white;\n        color: #407FBF;\n\n        &:hover {\n            background: darken(white, 5);\n        }\n\n        &:active {\n            background: darken(white, 10);\n        }\n    }\n\n    ._add-to-cart {\n        background: #407FBF;\n        color: white;\n        margin-left: 0.5em;\n\n        ._view-in-cart-message { display: none; }\n\n        &:hover {\n            background: darken(#407FBF, 5);\n        }\n\n        &:active {\n            background: darken(#407FBF, 10);\n        }\n    }\n}\n\nbody.user-not-logged-in {\n    .free-preview-promo-container, .free-preview-footer-promo-container {\n        ._sign-in { display: inline-block; }\n    }\n}\n\nbody.user-doesnt-own-book {\n    .free-preview-promo-container, .free-preview-footer-promo-container {\n        ._add-to-cart { display: inline-block; }\n    }\n}\n\nbody.book-in-cart {\n    .free-preview-promo-container, .free-preview-footer-promo-container {\n        ._add-to-cart {\n            ._add-to-cart-message { display: none; }\n            ._view-in-cart-message { display: inline-block; }\n            \n            background: #67a73d;\n            border-color: #67a73d;\n\n            &:hover {\n                background: darken(#67a73d, 5);\n            }   \n\n            &:active {\n                background: darken(#67a73d, 10);\n            }\n        } \n    }\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ 23645:
/***/ ((module) => {



/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
module.exports = function (cssWithMappingToString) {
  var list = [];

  // return the list of modules as css string
  list.toString = function toString() {
    return this.map(function (item) {
      var content = "";
      var needLayer = typeof item[5] !== "undefined";
      if (item[4]) {
        content += "@supports (".concat(item[4], ") {");
      }
      if (item[2]) {
        content += "@media ".concat(item[2], " {");
      }
      if (needLayer) {
        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
      }
      content += cssWithMappingToString(item);
      if (needLayer) {
        content += "}";
      }
      if (item[2]) {
        content += "}";
      }
      if (item[4]) {
        content += "}";
      }
      return content;
    }).join("");
  };

  // import a list of modules into the list
  list.i = function i(modules, media, dedupe, supports, layer) {
    if (typeof modules === "string") {
      modules = [[null, modules, undefined]];
    }
    var alreadyImportedModules = {};
    if (dedupe) {
      for (var k = 0; k < this.length; k++) {
        var id = this[k][0];
        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }
    for (var _k = 0; _k < modules.length; _k++) {
      var item = [].concat(modules[_k]);
      if (dedupe && alreadyImportedModules[item[0]]) {
        continue;
      }
      if (typeof layer !== "undefined") {
        if (typeof item[5] === "undefined") {
          item[5] = layer;
        } else {
          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
          item[5] = layer;
        }
      }
      if (media) {
        if (!item[2]) {
          item[2] = media;
        } else {
          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
          item[2] = media;
        }
      }
      if (supports) {
        if (!item[4]) {
          item[4] = "".concat(supports);
        } else {
          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
          item[4] = supports;
        }
      }
      list.push(item);
    }
  };
  return list;
};

/***/ }),

/***/ 87537:
/***/ ((module) => {



module.exports = function (item) {
  var content = item[1];
  var cssMapping = item[3];
  if (!cssMapping) {
    return content;
  }
  if (typeof btoa === "function") {
    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
    var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
    var sourceMapping = "/*# ".concat(data, " */");
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || "").concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join("\n");
  }
  return [content].join("\n");
};

/***/ }),

/***/ 64448:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
var aa=__webpack_require__(67294),ca=__webpack_require__(63840);function p(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+"Capture",b)}
function ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}
var ia=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la=
{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}
function qa(a,b,c,d){if(null===b||"undefined"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});
["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});
["checked","multiple","muted","selected"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}
"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace(ra,
sa);z[b]=new v(b,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});
z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});
function ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}
var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");
var Ia=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var Ja=Symbol.iterator;function Ka(a){if(null===a||"object"!==typeof a)return null;a=Ja&&a[Ja]||a["@@iterator"];return"function"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\n( *(at )?)/);La=b&&b[1]||""}return"\n"+La+a}var Na=!1;
function Oa(a,b){if(!a||Na)return"";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&"string"===typeof l.stack){for(var e=l.stack.split("\n"),
f=d.stack.split("\n"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k="\n"+e[g].replace(" at new "," at ");a.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?Ma(a):""}
function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}
function Qa(a){if(null==a)return null;if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||
b.name||"",a=""!==a?"ForwardRef("+a+")":"ForwardRef");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||"Memo";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}
function Ra(a){var b=a.type;switch(a.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=b.render,a=a.displayName||a.name||"",b.displayName||(""!==a?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(b);case 8:return b===za?"StrictMode":"Mode";case 22:return"Offscreen";
case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof b)return b.displayName||b.name||null;if("string"===typeof b)return b}return null}function Sa(a){switch(typeof a){case "boolean":case "number":case "string":case "undefined":return a;case "object":return a;default:return""}}
function Ta(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}
function Ua(a){var b=Ta(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=
null;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ta(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}
function Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,"checked",b,!1)}
function bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?cb(a,b.type,c):b.hasOwnProperty("defaultValue")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}
function db(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}
function cb(a,b,c){if("number"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}var eb=Array.isArray;
function fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}
function gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:Sa(c)}}
function ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&""!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}
function lb(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?kb(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}
var mb,nb=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{mb=mb||document.createElement("div");mb.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});
function ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}
var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,
zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(""+b).trim():b+"px"}
function sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=rb(c,b[c],d);"float"===c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});
function ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if("object"!==typeof b.dangerouslySetInnerHTML||!("__html"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(p(62));}}
function vb(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;
function Bb(a){if(a=Cb(a)){if("function"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}
function Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==
typeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}});window.addEventListener("test",Mb,Mb);window.removeEventListener("test",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}
function Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}
function Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===
c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}
var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&"function"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}
var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;
function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;
default:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}
function vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}
function wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}
function Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}
function Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
function Sc(a,b){switch(a){case "focusin":case "focusout":Lc=null;break;case "dragenter":case "dragleave":Mc=null;break;case "mouseover":case "mouseout":Nc=null;break;case "pointerover":case "pointerout":Oc.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Pc.delete(b.pointerId)}}
function Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}
function Uc(a,b,c,d,e){switch(b){case "focusin":return Lc=Tc(Lc,a,b,c,d,e),!0;case "dragenter":return Mc=Tc(Mc,a,b,c,d,e),!0;case "mouseover":return Nc=Tc(Nc,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}
function Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}
function Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}
function ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}
function bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;
function ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}
function fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;
function Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}
function jd(a){switch(a){case "cancel":case "click":case "close":case "contextmenu":case "copy":case "cut":case "auxclick":case "dblclick":case "dragend":case "dragstart":case "drop":case "focusin":case "focusout":case "input":case "invalid":case "keydown":case "keypress":case "keyup":case "mousedown":case "mouseup":case "paste":case "pause":case "play":case "pointercancel":case "pointerdown":case "pointerup":case "ratechange":case "reset":case "resize":case "seeked":case "submit":case "touchcancel":case "touchend":case "touchstart":case "volumechange":case "change":case "selectionchange":case "textInput":case "compositionstart":case "compositionend":case "compositionupdate":case "beforeblur":case "afterblur":case "beforeinput":case "blur":case "fullscreenchange":case "focus":case "hashchange":case "popstate":case "select":case "selectstart":return 1;case "drag":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "mousemove":case "mouseout":case "mouseover":case "pointermove":case "pointerout":case "pointerover":case "scroll":case "toggle":case "touchmove":case "wheel":case "mouseenter":case "mouseleave":case "pointerenter":case "pointerleave":return 4;
case "message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e="value"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}
function od(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}
function rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&
(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}
var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if("movementX"in
a)return a.movementX;a!==yd&&(yd&&"mousemove"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",
Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",
119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}
var Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=od(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return"keypress"===a.type?od(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?od(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},
deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;
function ge(a,b){switch(a){case "keyup":return-1!==$d.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "focusout":return!0;default:return!1}}function he(a){a=a.detail;return"object"===typeof a&&"data"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case "compositionend":return he(b);case "keypress":if(32!==b.which)return null;fe=!0;return ee;case "textInput":return a=b.data,a===ee&&fe?null:a;default:return null}}
function ke(a,b){if(ie)return"compositionend"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case "compositionend":return de&&"ko"!==b.locale?null:b.data;default:return null}}
var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!le[a.type]:"textarea"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,"onChange");0<b.length&&(c=new td("onChange","change",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}
function ve(a,b){if("change"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;");ye="function"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if("value"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}
function Ce(a,b,c){"focusin"===a?(Ae(),pe=b,qe=c,pe.attachEvent("onpropertychange",Be)):"focusout"===a&&Ae()}function De(a){if("selectionchange"===a||"keyup"===a||"keydown"===a)return te(qe)}function Ee(a,b){if("click"===a)return te(b)}function Fe(a,b){if("input"===a||"change"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He="function"===typeof Object.is?Object.is:Ge;
function Ie(a,b){if(He(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}
function Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}
function Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}
function Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),"selectionStart"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,
d);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});"function"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}
var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;
function Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(b=new td("onSelect","select",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}
function Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};
ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");
function ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);
ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));
fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));
function nf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}
function se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}
function D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+"__bubble";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){"selectionchange"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf("selectionchange",!1,b))}}
function pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||"touchstart"!==b&&"touchmove"!==b&&"wheel"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}
function hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];
a:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case "keypress":if(0===od(c))break a;case "keydown":case "keyup":k=Rd;break;case "focusin":n="focus";k=Fd;break;case "focusout":n="blur";k=Fd;break;case "beforeblur":case "afterblur":k=Fd;break;case "click":if(2===c.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":k=Bd;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":k=
Dd;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case "scroll":k=vd;break;case "wheel":k=Zd;break;case "copy":case "cut":case "paste":k=Jd;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":k=Td}var t=0!==(b&4),J=!t&&"scroll"===a,x=t?null!==h?h+"Capture":null:h;t=[];for(var w=d,u;null!==
w;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h="mouseover"===a||"pointerover"===a;k="mouseout"===a||"pointerout"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==
n&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F="onMouseLeave";x="onMouseEnter";w="mouse";if("pointerout"===a||"pointerover"===a)t=Td,F="onPointerLeave",x="onPointerEnter",w="pointer";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+"leave",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+"enter",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=
vf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if("select"===k||"input"===k&&"file"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&"input"===k.toLowerCase()&&("checkbox"===h.type||"radio"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);"focusout"===a&&(xa=h._wrapperState)&&
xa.controlled&&"number"===h.type&&cb(h,"number",h.value)}xa=d?ue(d):window;switch(a){case "focusin":if(me(xa)||"true"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case "focusout":Se=Re=Qe=null;break;case "mousedown":Te=!0;break;case "contextmenu":case "mouseup":case "dragend":Te=!1;Ue(g,c,e);break;case "selectionchange":if(Pe)break;case "keydown":case "keyup":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case "compositionstart":var ba="onCompositionStart";break b;case "compositionend":ba="onCompositionEnd";
break b;case "compositionupdate":ba="onCompositionUpdate";break b}ba=void 0}else ie?ge(a,c)&&(ba="onCompositionEnd"):"keydown"===a&&229===c.keyCode&&(ba="onCompositionStart");ba&&(de&&"ko"!==c.locale&&(ie||"onCompositionStart"!==ba?"onCompositionEnd"===ba&&ie&&($a=nd()):(kd=e,ld="value"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,"onBeforeInput"),
0<d.length&&(e=new Ld("onBeforeInput","beforeinput",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+"Capture",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}
function wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return("string"===typeof a?a:""+a).replace(xf,"\n").replace(yf,"")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}
var Cf=null,Df=null;function Ef(a,b){return"textarea"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}
var Ff="function"===typeof setTimeout?setTimeout:void 0,Gf="function"===typeof clearTimeout?clearTimeout:void 0,Hf="function"===typeof Promise?Promise:void 0,Jf="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}
function Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,"/$"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else"$"!==c&&"$?"!==c&&"$!"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if("$"===b||"$!"===b||"$?"===b)break;if("/$"===b)return null}}return a}
function Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if("$"===c||"$!"===c||"$?"===c){if(0===b)return a;b--}else"/$"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;
function Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}
function E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}
function Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||"Unknown",e));return A({},c,d)}
function cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}
function jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}
function ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;
function Ag(a,b){var c=Bg(5,null,null,0);c.elementType="DELETED";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}
function Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=
null,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}
function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b="head"!==b&&"body"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if("/$"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else"$"!==c&&"$!"!==c&&"$?"!==c||b++}a=a.nextSibling}yg=
null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var b=Mg.current;E(Mg);a._currentValue=b}
function Sg(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}function Tg(a,b){Ng=a;Pg=Og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(Ug=!0),a.firstContext=null)}
function Vg(a){var b=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:b,next:null},null===Og){if(null===Ng)throw Error(p(308));Og=a;Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return b}var Wg=null;function Xg(a){null===Wg?Wg=[a]:Wg.push(a)}function Yg(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,Xg(b)):(c.next=e.next,e.next=c);b.interleaved=c;return Zg(a,d)}
function Zg(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}
function bh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}
function dh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return Zg(a,c)}e=d.interleaved;null===e?(b.next=b,Xg(d)):(b.next=e.next,e.next=b);d.interleaved=b;return Zg(a,c)}function eh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}
function fh(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=
b;c.lastBaseUpdate=b}
function gh(a,b,c,d){var e=a.updateQueue;$g=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,
next:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if("function"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r="function"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:$g=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;
h=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);hh|=g;a.lanes=g;a.memoizedState=q}}
function ih(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if("function"!==typeof e)throw Error(p(191,e));e.call(d)}}}var jh=(new aa.Component).refs;function kh(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}
var nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=L(),e=lh(a),f=ch(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=dh(a,f,e);null!==b&&(mh(b,a,e,d),eh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=L(),e=lh(a),f=ch(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=dh(a,f,e);null!==b&&(mh(b,a,e,d),eh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=L(),d=
lh(a),e=ch(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=dh(a,e,d);null!==b&&(mh(b,a,d,c),eh(b,a,d))}};function oh(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}
function ph(a,b,c){var d=!1,e=Vf;var f=b.contextType;"object"===typeof f&&null!==f?f=Vg(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=nh;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}
function qh(a,b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&nh.enqueueReplaceState(b,b.state,null)}
function rh(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=jh;ah(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=Vg(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;"function"===typeof f&&(kh(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,
"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&nh.enqueueReplaceState(e,e.state,null),gh(a,c,e,d),e.state=a.memoizedState);"function"===typeof e.componentDidMount&&(a.flags|=4194308)}
function sh(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;b===jh&&(b=e.refs={});null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if("string"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}
function th(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,"[object Object]"===a?"object with keys {"+Object.keys(b).join(", ")+"}":a));}function uh(a){var b=a._init;return b(a._payload)}
function vh(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=wh(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&
null===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=xh(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||"object"===typeof f&&null!==f&&f.$$typeof===Ha&&uh(f)===b.type))return d=e(b,c.props),d.ref=sh(a,b,c),d.return=a,d;d=yh(c.type,c.key,c.props,null,a.mode,d);d.ref=sh(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||
b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=zh(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ah(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if("string"===typeof b&&""!==b||"number"===typeof b)return b=xh(""+b,a.mode,c),b.return=a,b;if("object"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=yh(b.type,b.key,b.props,null,a.mode,c),
c.ref=sh(a,null,b),c.return=a,c;case wa:return b=zh(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Ah(b,a.mode,c,null),b.return=a,b;th(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c&&""!==c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,
b,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);th(a,c)}return null}function y(a,b,c,d,e){if("string"===typeof d&&""!==d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);th(b,d)}return null}
function n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===
x.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if("function"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,
m),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){"object"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if("object"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=
f.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||"object"===typeof k&&null!==k&&k.$$typeof===Ha&&uh(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=sh(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Ah(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=yh(f.type,f.key,f.props,null,a.mode,h),h.ref=sh(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==
d;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=zh(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);th(a,f)}return"string"===typeof f&&""!==f||"number"===typeof f?(f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):
(c(a,d),d=xh(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p(174));return a}function Ih(a,b){G(Gh,b);G(Fh,a);G(Eh,Dh);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(Eh);G(Eh,b)}function Jh(){E(Eh);E(Fh);E(Gh)}
function Kh(a){Hh(Gh.current);var b=Hh(Eh.current);var c=lb(b,a.type);b!==c&&(G(Fh,a),G(Eh,c))}function Lh(a){Fh.current===a&&(E(Eh),E(Fh))}var M=Uf(0);
function Mh(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||"$?"===c.data||"$!"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Nh=[];
function Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321));}function Wh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}
function Xh(a,b,c,d,e,f){Rh=f;N=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Ph.current=null===a||null===a.memoizedState?Yh:Zh;a=c(d,e);if(Th){f=0;do{Th=!1;Uh=0;if(25<=f)throw Error(p(301));f+=1;P=O=null;b.updateQueue=null;Ph.current=$h;a=c(d,e)}while(Th)}Ph.current=ai;b=null!==O&&null!==O.next;Rh=0;P=O=N=null;Sh=!1;if(b)throw Error(p(300));return a}function bi(){var a=0!==Uh;Uh=0;return a}
function ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===P?N.memoizedState=P=a:P=P.next=a;return P}function di(){if(null===O){var a=N.alternate;a=null!==a?a.memoizedState:null}else a=O.next;var b=null===P?N.memoizedState:P.next;if(null!==b)P=b,O=a;else{if(null===a)throw Error(p(310));O=a;a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null};null===P?N.memoizedState=P=a:P=P.next=a}return P}
function ei(a,b){return"function"===typeof b?b(a):b}
function fi(a){var b=di(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=O,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Rh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,
eagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;N.lanes|=m;hh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(Ug=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,N.lanes|=f,hh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}
function gi(a){var b=di(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(Ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function hi(){}
function ii(a,b){var c=N,d=di(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,Ug=!0);d=d.queue;ji(ki.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==P&&P.memoizedState.tag&1){c.flags|=2048;li(9,mi.bind(null,c,d,e,b),void 0,null);if(null===R)throw Error(p(349));0!==(Rh&30)||ni(c,b,e)}return e}function ni(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=N.updateQueue;null===b?(b={lastEffect:null,stores:null},N.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}
function mi(a,b,c,d){b.value=c;b.getSnapshot=d;oi(b)&&pi(a)}function ki(a,b,c){return c(function(){oi(b)&&pi(a)})}function oi(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function pi(a){var b=Zg(a,1);null!==b&&mh(b,a,1,-1)}
function qi(a){var b=ci();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a};b.queue=a;a=a.dispatch=ri.bind(null,N,a);return[b.memoizedState,a]}
function li(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=N.updateQueue;null===b?(b={lastEffect:null,stores:null},N.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function si(){return di().memoizedState}function ti(a,b,c,d){var e=ci();N.flags|=a;e.memoizedState=li(1|b,c,void 0,void 0===d?null:d)}
function ui(a,b,c,d){var e=di();d=void 0===d?null:d;var f=void 0;if(null!==O){var g=O.memoizedState;f=g.destroy;if(null!==d&&Wh(d,g.deps)){e.memoizedState=li(b,c,f,d);return}}N.flags|=a;e.memoizedState=li(1|b,c,f,d)}function vi(a,b){return ti(8390656,8,a,b)}function ji(a,b){return ui(2048,8,a,b)}function wi(a,b){return ui(4,2,a,b)}function xi(a,b){return ui(4,4,a,b)}
function yi(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function zi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ui(4,4,yi.bind(null,b,a),c)}function Ai(){}function Bi(a,b){var c=di();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Wh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}
function Ci(a,b){var c=di();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Wh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Di(a,b,c){if(0===(Rh&21))return a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=c;He(c,b)||(c=yc(),N.lanes|=c,hh|=c,a.baseState=!0);return b}function Ei(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Qh.transition;Qh.transition={};try{a(!1),b()}finally{C=c,Qh.transition=d}}function Fi(){return di().memoizedState}
function Gi(a,b,c){var d=lh(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(b,c);else if(c=Yg(a,b,c,d),null!==c){var e=L();mh(c,a,d,e);Ji(c,b,d)}}
function ri(a,b,c){var d=lh(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,Xg(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=Yg(a,b,e,d);null!==c&&(e=L(),mh(c,a,d,e),Ji(c,b,d))}}
function Hi(a){var b=a.alternate;return a===N||null!==b&&b===N}function Ii(a,b){Th=Sh=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Ji(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}
var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,b){ci().memoizedState=[a,void 0===b?null:b];return a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ti(4194308,
4,yi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ti(4194308,4,a,b)},useInsertionEffect:function(a,b){return ti(4,2,a,b)},useMemo:function(a,b){var c=ci();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=ci();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=Gi.bind(null,N,a);return[d.memoizedState,a]},useRef:function(a){var b=
ci();a={current:a};return b.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),b=a[0];a=Ei.bind(null,a[1]);ci().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=N,e=ci();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===R)throw Error(p(349));0!==(Rh&30)||ni(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;vi(ki.bind(null,d,
f,a),[a]);d.flags|=2048;li(9,mi.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=ci(),b=R.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=":"+b+"R"+c;c=Uh++;0<c&&(b+="H"+c.toString(32));b+=":"}else c=Vh++,b=":"+b+"r"+c.toString(32)+":";return a.memoizedState=b},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},
useDebugValue:Ai,useDeferredValue:function(a){var b=di();return Di(b,O.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],b=di().memoizedState;return[a,b]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var b=di();return null===
O?b.memoizedState=a:Di(b,O.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],b=di().memoizedState;return[a,b]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,b){try{var c="",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e="\nError generating stack: "+f.message+"\n"+f.stack}return{value:a,source:b,stack:e,digest:null}}function Li(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}
function Mi(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Ni="function"===typeof WeakMap?WeakMap:Map;function Oi(a,b,c){c=ch(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Pi||(Pi=!0,Qi=d);Mi(a,b)};return c}
function Ri(a,b,c){c=ch(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Mi(a,b)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){Mi(a,b);"function"!==typeof d&&(null===Si?Si=new Set([this]):Si.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}
function Ti(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Ni;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ui.bind(null,a,b,c),b.then(a,a))}function Vi(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}
function Wi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=ch(-1,1),b.tag=2,dh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(a,b,c,d){b.child=null===a?Ch(b,null,c,d):Bh(b,a.child,c,d)}
function Zi(a,b,c,d,e){c=c.render;var f=b.ref;Tg(b,e);d=Xh(a,b,c,d,f,e);c=bi();if(null!==a&&!Ug)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,$i(a,b,e);I&&c&&vg(b);b.flags|=1;Yi(a,b,d,e);return b.child}
function aj(a,b,c,d,e){if(null===a){var f=c.type;if("function"===typeof f&&!bj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,cj(a,b,f,d,e);a=yh(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return $i(a,b,e)}b.flags|=1;a=wh(f,d);a.ref=b.ref;a.return=b;return b.child=a}
function cj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(Ug=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(Ug=!0);else return b.lanes=a.lanes,$i(a,b,e)}return dj(a,b,c,d,e)}
function ej(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if("hidden"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(fj,gj),gj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(fj,gj);gj|=d}else null!==
f?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(fj,gj),gj|=d;Yi(a,b,e,c);return b.child}function hj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function dj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);Tg(b,e);c=Xh(a,b,c,d,f,e);d=bi();if(null!==a&&!Ug)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,$i(a,b,e);I&&d&&vg(b);b.flags|=1;Yi(a,b,c,e);return b.child}
function ij(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;Tg(b,e);if(null===b.stateNode)jj(a,b),ph(b,c,d),rh(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;"object"===typeof l&&null!==l?l=Vg(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q="function"===typeof m||"function"===typeof g.getSnapshotBeforeUpdate;q||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||
(h!==d||k!==l)&&qh(b,g,d,l);$g=!1;var r=b.memoizedState;g.state=r;gh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||$g?("function"===typeof m&&(kh(b,c,m,d),k=b.memoizedState),(h=$g||oh(b,c,h,d,r,k,l))?(q||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.flags|=4194308)):
("function"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):("function"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;bh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Lg(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;"object"===typeof k&&null!==k?k=Vg(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m="function"===typeof y||"function"===typeof g.getSnapshotBeforeUpdate)||
"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&qh(b,g,d,k);$g=!1;r=b.memoizedState;g.state=r;gh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||$g?("function"===typeof y&&(kh(b,c,y,d),n=b.memoizedState),(l=$g||oh(b,c,l,d,r,n,k)||!1)?(m||"function"!==typeof g.UNSAFE_componentWillUpdate&&"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),"function"===typeof g.UNSAFE_componentWillUpdate&&
g.UNSAFE_componentWillUpdate(d,n,k)),"function"===typeof g.componentDidUpdate&&(b.flags|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===
a.memoizedState||(b.flags|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return kj(a,b,c,d,f,e)}
function kj(a,b,c,d,e,f){hj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),$i(a,b,f);d=b.stateNode;Xi.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Bh(b,a.child,null,f),b.child=Bh(b,null,h,f)):Yi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function lj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);Ih(a,b.containerInfo)}
function mj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Yi(a,b,c,d);return b.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}
function pj(a,b,c){var d=b.pendingProps,e=M.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(M,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:"$!"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:"hidden",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=
g):f=qj(g,d,0,null),a=Ah(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=oj(c),b.memoizedState=nj,a):rj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return sj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:"hidden",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=wh(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=wh(h,f):(f=Ah(f,g,c,null),f.flags|=2);f.return=
b;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?oj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=nj;return d}f=a.child;a=f.sibling;d=wh(f,{mode:"visible",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}
function rj(a,b){b=qj({mode:"visible",children:b},a.mode,0,null);b.return=a;return a.child=b}function tj(a,b,c,d){null!==d&&Jg(d);Bh(b,a.child,null,c);a=rj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}
function sj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Li(Error(p(422))),tj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=qj({mode:"visible",children:d.children},e,0,null);f=Ah(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Bh(b,a.child,null,g);b.child.memoizedState=oj(g);b.memoizedState=nj;return f}if(0===(b.mode&1))return tj(a,b,g,null);if("$!"===e.data){d=e.nextSibling&&e.nextSibling.dataset;
if(d)var h=d.dgst;d=h;f=Error(p(419));d=Li(f,d,void 0);return tj(a,b,g,d)}h=0!==(g&a.childLanes);if(Ug||h){d=R;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;
0!==e&&e!==f.retryLane&&(f.retryLane=e,Zg(a,e),mh(d,a,e,-1))}uj();d=Li(Error(p(421)));return tj(a,b,g,d)}if("$?"===e.data)return b.flags|=128,b.child=a.child,b=vj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=rj(b,d.children);b.flags|=4096;return b}function wj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);Sg(a.return,b,c)}
function xj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}
function yj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Yi(a,b,d.children,c);d=M.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&wj(a,c,b);else if(19===a.tag)wj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(M,d);if(0===(b.mode&1))b.memoizedState=
null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Mh(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);xj(b,!1,e,c,f);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Mh(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}xj(b,!0,c,null,f);break;case "together":xj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}
function jj(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function $i(a,b,c){null!==a&&(b.dependencies=a.dependencies);hh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=wh(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=wh(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function zj(a,b,c){switch(b.tag){case 3:lj(b);Ig();break;case 5:Kh(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:Ih(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Mg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(M,M.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return pj(a,b,c);G(M,M.current&1);a=$i(a,b,c);return null!==a?a.sibling:null}G(M,M.current&1);break;case 19:d=0!==(c&
b.childLanes);if(0!==(a.flags&128)){if(d)return yj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(M,M.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,ej(a,b,c)}return $i(a,b,c)}var Aj,Bj,Cj,Dj;
Aj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Bj=function(){};
Cj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;Hh(Eh.current);var f=null;switch(c){case "input":e=Ya(a,e);d=Ya(a,d);f=[];break;case "select":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case "textarea":e=gb(a,e);d=gb(a,d);f=[];break;default:"function"!==typeof e.onClick&&"function"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if("style"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&
(c||(c={}),c[g]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if("style"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]="");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,
c)),c=k;else"dangerouslySetInnerHTML"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):"children"===l?"string"!==typeof k&&"number"!==typeof k||(f=f||[]).push(l,""+k):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(ea.hasOwnProperty(l)?(null!=k&&"onScroll"===l&&D("scroll",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push("style",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Dj=function(a,b,c,d){c!==d&&(b.flags|=4)};
function Ej(a,b){if(!I)switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}
function S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}
function Fj(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;Jh();E(Wf);E(H);Oh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Gj(zg),zg=null));Bj(a,b);S(b);return null;case 5:Lh(b);var e=Hh(Gh.current);
c=b.type;if(null!==a&&null!=b.stateNode)Cj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=Hh(Eh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case "dialog":D("cancel",d);D("close",d);break;case "iframe":case "object":case "embed":D("load",d);break;case "video":case "audio":for(e=0;e<lf.length;e++)D(lf[e],d);break;case "source":D("error",d);break;case "img":case "image":case "link":D("error",
d);D("load",d);break;case "details":D("toggle",d);break;case "input":Za(d,f);D("invalid",d);break;case "select":d._wrapperState={wasMultiple:!!f.multiple};D("invalid",d);break;case "textarea":hb(d,f),D("invalid",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,
h,a),e=["children",""+h]):ea.hasOwnProperty(g)&&null!=h&&"onScroll"===g&&D("scroll",d)}switch(c){case "input":Va(d);db(d,f,!0);break;case "textarea":Va(d);jb(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=kb(c));"http://www.w3.org/1999/xhtml"===a?"script"===c?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):
"string"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),"select"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;Aj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case "dialog":D("cancel",a);D("close",a);e=d;break;case "iframe":case "object":case "embed":D("load",a);e=d;break;case "video":case "audio":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case "source":D("error",a);e=d;break;case "img":case "image":case "link":D("error",
a);D("load",a);e=d;break;case "details":D("toggle",a);e=d;break;case "input":Za(a,d);e=Ya(a,d);D("invalid",a);break;case "option":e=d;break;case "select":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D("invalid",a);break;case "textarea":hb(a,d);e=gb(a,d);D("invalid",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];"style"===f?sb(a,k):"dangerouslySetInnerHTML"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):"children"===f?"string"===typeof k?("textarea"!==
c||""!==k)&&ob(a,k):"number"===typeof k&&ob(a,""+k):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(ea.hasOwnProperty(f)?null!=k&&"onScroll"===f&&D("scroll",a):null!=k&&ta(a,f,k,g))}switch(c){case "input":Va(a);db(a,d,!1);break;case "textarea":Va(a);jb(a);break;case "option":null!=d.value&&a.setAttribute("value",""+Sa(d.value));break;case "select":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,
!0);break;default:"function"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case "button":case "input":case "select":case "textarea":d=!!d.autoFocus;break a;case "img":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Dj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(p(166));c=Hh(Gh.current);Hh(Eh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=
xg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(M);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===
a){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Gj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(M.current&1)?0===T&&(T=3):uj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return Jh(),
Bj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return Rg(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(M);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Ej(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Mh(a);if(null!==g){b.flags|=128;Ej(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,
g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(M,M.current&1|2);return b.child}a=
a.sibling}null!==f.tail&&B()>Hj&&(b.flags|=128,d=!0,Ej(f,!1),b.lanes=4194304)}else{if(!d)if(a=Mh(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Ej(f,!0),null===f.tail&&"hidden"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Hj&&1073741824!==c&&(b.flags|=128,d=!0,Ej(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=
b,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=M.current,G(M,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Ij(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(gj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}
function Jj(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return Jh(),E(Wf),E(H),Oh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Lh(b),null;case 13:E(M);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(b.type._context),null;case 22:case 23:return Ij(),
null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj="function"===typeof WeakSet?WeakSet:Set,V=null;function Mj(a,b){var c=a.ref;if(null!==c)if("function"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Nj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Oj=!1;
function Pj(a,b){Cf=dd;a=Me();if(Ne(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=
q.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;
case 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Lg(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent="":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Oj;Oj=!1;return n}
function Qj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Nj(b,c,f)}e=e.next}while(e!==d)}}function Rj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Sj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}"function"===typeof b?b(a):b.current=a}}
function Tj(a){var b=a.alternate;null!==b&&(a.alternate=null,Tj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Uj(a){return 5===a.tag||3===a.tag||4===a.tag}
function Vj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Uj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}
function Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}
function Xj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Xj(a,b,c),a=a.sibling;null!==a;)Xj(a,b,c),a=a.sibling}var X=null,Yj=!1;function Zj(a,b,c){for(c=c.child;null!==c;)ak(a,b,c),c=c.sibling}
function ak(a,b,c){if(lc&&"function"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Mj(c,b);case 6:var d=X,e=Yj;X=null;Zj(a,b,c);X=d;Yj=e;null!==X&&(Yj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Yj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Yj;X=c.stateNode.containerInfo;Yj=!0;
Zj(a,b,c);X=d;Yj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Nj(c,b,g):0!==(f&4)&&Nj(c,b,g));e=e.next}while(e!==d)}Zj(a,b,c);break;case 1:if(!U&&(Mj(c,b),d=c.stateNode,"function"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Zj(a,b,c);break;case 21:Zj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==
c.memoizedState,Zj(a,b,c),U=d):Zj(a,b,c);break;default:Zj(a,b,c)}}function bk(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Lj);b.forEach(function(b){var d=ck.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}
function dk(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Yj=!1;break a;case 3:X=h.stateNode.containerInfo;Yj=!0;break a;case 4:X=h.stateNode.containerInfo;Yj=!0;break a}h=h.return}if(null===X)throw Error(p(160));ak(f,g,e);X=null;Yj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)ek(b,a),b=b.sibling}
function ek(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:dk(b,a);fk(a);if(d&4){try{Qj(3,a,a.return),Rj(3,a)}catch(t){W(a,a.return,t)}try{Qj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:dk(b,a);fk(a);d&512&&null!==c&&Mj(c,c.return);break;case 5:dk(b,a);fk(a);d&512&&null!==c&&Mj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,"")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;
a.updateQueue=null;if(null!==k)try{"input"===h&&"radio"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];"style"===m?sb(e,q):"dangerouslySetInnerHTML"===m?nb(e,q):"children"===m?ob(e,q):ta(e,m,q,l)}switch(h){case "input":bb(e,f);break;case "textarea":ib(e,f);break;case "select":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,
f.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:"",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:dk(b,a);fk(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:dk(b,a);fk(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:dk(b,a);fk(a);break;case 13:dk(b,a);fk(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||
null!==e.alternate&&null!==e.alternate.memoizedState||(gk=B()));d&4&&bk(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,dk(b,a),U=l):dk(b,a);fk(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Qj(4,r,r.return);break;case 1:Mj(r,r.return);var n=r.stateNode;if("function"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=
b.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Mj(r,r.return);break;case 22:if(null!==r.memoizedState){hk(q);continue}}null!==y?(y.return=r,V=y):hk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty("display")?k.display:null,h.style.display=
rb("display",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?"":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:dk(b,a);fk(a);d&4&&bk(a);break;case 21:break;default:dk(b,
a),fk(a)}}function fk(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Uj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,""),d.flags&=-33);var f=Vj(a);Xj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Vj(a);Wj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function ik(a,b,c){V=a;jk(a,b,c)}
function jk(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Kj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Kj;var l=U;Kj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?kk(e):null!==k?(k.return=g,V=k):kk(e);for(;null!==f;)V=f,jk(f,b,c),f=f.sibling;V=e;Kj=h;U=l}lk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):lk(a,b,c)}}
function lk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Rj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Lg(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&ih(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=
b.child.stateNode;break;case 1:c=b.child.stateNode}ih(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case "button":case "input":case "select":case "textarea":k.autoFocus&&c.focus();break;case "img":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;
default:throw Error(p(163));}U||b.flags&512&&Sj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function hk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}
function kk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Rj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if("function"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Sj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Sj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}
var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=Infinity,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return 0!==(K&6)?B():-1!==Bk?Bk:Bk=B()}
function lh(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Ck&&(Ck=yc()),Ck;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function mh(a,b,c,d){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==R)a===R&&(0===(K&2)&&(rk|=c),4===T&&Dk(a,Z)),Ek(a,d),1===c&&0===K&&0===(b.mode&1)&&(Hj=B()+500,fg&&jg())}
function Ek(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===R?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Gk(c,Hk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}
function Hk(a,b){Bk=-1;Ck=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Ik()&&a.callbackNode!==c)return null;var d=uc(a,a===R?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Jk(a,d);else{b=d;var e=K;K|=2;var f=Kk();if(R!==a||Z!==b)vk=null,Hj=B()+500,Lk(a,b);do try{Mk();break}catch(h){Nk(a,h)}while(1);Qg();nk.current=f;K=e;null!==Y?b=0:(R=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Ok(a,e)));if(1===b)throw c=qk,Lk(a,0),Dk(a,d),Ek(a,B()),c;if(6===b)Dk(a,d);
else{e=a.current.alternate;if(0===(d&30)&&!Pk(e)&&(b=Jk(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Ok(a,f))),1===b))throw c=qk,Lk(a,0),Dk(a,d),Ek(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Qk(a,uk,vk);break;case 3:Dk(a,d);if((d&130023424)===d&&(b=gk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){L();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),b);break}Qk(a,uk,vk);break;case 4:Dk(a,d);if((d&4194240)===
d)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*mk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),d);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p(329));}}}Ek(a,B());return a.callbackNode===c?Hk.bind(null,a):null}
function Ok(a,b){var c=tk;a.current.memoizedState.isDehydrated&&(Lk(a,b).flags|=256);a=Jk(a,b);2!==a&&(b=uk,uk=c,null!==b&&Gj(b));return a}function Gj(a){null===uk?uk=a:uk.push.apply(uk,a)}
function Pk(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}
function Dk(a,b){b&=~sk;b&=~rk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Fk(a){if(0!==(K&6))throw Error(p(327));Ik();var b=uc(a,0);if(0===(b&1))return Ek(a,B()),null;var c=Jk(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Ok(a,d))}if(1===c)throw c=qk,Lk(a,0),Dk(a,b),Ek(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Qk(a,uk,vk);Ek(a,B());return null}
function Rk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Hj=B()+500,fg&&jg())}}function Sk(a){null!==xk&&0===xk.tag&&0===(K&6)&&Ik();var b=K;K|=1;var c=pk.transition,d=C;try{if(pk.transition=null,C=1,a)return a()}finally{C=d,pk.transition=c,K=b,0===(K&6)&&jg()}}function Ij(){gj=fj.current;E(fj)}
function Lk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:Jh();E(Wf);E(H);Oh();break;case 5:Lh(d);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(d.type._context);break;case 22:case 23:Ij()}c=c.return}R=a;Y=a=wh(a.current,null);Z=gj=b;T=0;qk=null;sk=rk=hh=0;uk=tk=null;if(null!==Wg){for(b=
0;b<Wg.length;b++)if(c=Wg[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}Wg=null}return a}
function Nk(a,b){do{var c=Y;try{Qg();Ph.current=ai;if(Sh){for(var d=N.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Sh=!1}Rh=0;P=O=N=null;Th=!1;Uh=0;ok.current=null;if(null===c||null===c.return){T=1;qk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&"object"===typeof k&&"function"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,
m.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Vi(g);if(null!==y){y.flags&=-257;Wi(y,g,h,f,b);y.mode&1&&Ti(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Ti(f,l,b);uj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Vi(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Wi(J,g,h,f,b);Jg(Ki(k,h));break a}}f=k=Ki(k,h);4!==T&&(T=2);null===tk?tk=[f]:tk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;
b&=-b;f.lanes|=b;var x=Oi(f,k,b);fh(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&("function"===typeof w.getDerivedStateFromError||null!==u&&"function"===typeof u.componentDidCatch&&(null===Si||!Si.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Ri(f,h,b);fh(f,F);break a}}f=f.return}while(null!==f)}Tk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Kk(){var a=nk.current;nk.current=ai;return null===a?ai:a}
function uj(){if(0===T||3===T||2===T)T=4;null===R||0===(hh&268435455)&&0===(rk&268435455)||Dk(R,Z)}function Jk(a,b){var c=K;K|=2;var d=Kk();if(R!==a||Z!==b)vk=null,Lk(a,b);do try{Uk();break}catch(e){Nk(a,e)}while(1);Qg();K=c;nk.current=d;if(null!==Y)throw Error(p(261));R=null;Z=0;return T}function Uk(){for(;null!==Y;)Vk(Y)}function Mk(){for(;null!==Y&&!cc();)Vk(Y)}function Vk(a){var b=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps;null===b?Tk(a):Y=b;ok.current=null}
function Tk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Fj(c,b,gj),null!==c){Y=c;return}}else{c=Jj(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Qk(a,b,c){var d=C,e=pk.transition;try{pk.transition=null,C=1,Xk(a,b,c,d)}finally{pk.transition=e,C=d}return null}
function Xk(a,b,c,d){do Ik();while(null!==xk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===R&&(Y=R=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||wk||(wk=!0,Gk(hc,function(){Ik();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=pk.transition;pk.transition=null;
var g=C;C=1;var h=K;K|=4;ok.current=null;Pj(a,c);ek(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;ik(c,a,e);dc();K=h;C=g;pk.transition=f}else a.current=c;wk&&(wk=!1,xk=a,yk=e);f=a.pendingLanes;0===f&&(Si=null);mc(c.stateNode,d);Ek(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;0!==(yk&1)&&0!==a.tag&&Ik();f=a.pendingLanes;0!==(f&1)?a===Ak?zk++:(zk=0,Ak=a):zk=0;jg();return null}
function Ik(){if(null!==xk){var a=Dc(yk),b=pk.transition,c=C;try{pk.transition=null;C=16>a?16:a;if(null===xk)var d=!1;else{a=xk;xk=null;yk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Qj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Tj(m);if(m===
l){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Qj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==
u)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Rj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&"function"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,pk.transition=b}}return!1}function Yk(a,b,c){b=Ki(c,b);b=Oi(a,b,1);a=dh(a,b,1);b=L();null!==a&&(Ac(a,1,b),Ek(a,b))}
function W(a,b,c){if(3===a.tag)Yk(a,a,c);else for(;null!==b;){if(3===b.tag){Yk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if("function"===typeof b.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===Si||!Si.has(d))){a=Ki(c,a);a=Ri(b,a,1);b=dh(b,a,1);a=L();null!==b&&(Ac(b,1,a),Ek(b,a));break}}b=b.return}}
function Ui(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=L();a.pingedLanes|=a.suspendedLanes&c;R===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-gk?Lk(a,0):sk|=c);Ek(a,b)}function Zk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=L();a=Zg(a,b);null!==a&&(Ac(a,b,c),Ek(a,c))}function vj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Zk(a,c)}
function ck(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Zk(a,c)}var Wk;
Wk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)Ug=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return Ug=!1,zj(a,b,c);Ug=0!==(a.flags&131072)?!0:!1}else Ug=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;jj(a,b);a=b.pendingProps;var e=Yf(b,H.current);Tg(b,c);e=Xh(null,b,d,a,e,c);var f=bi();b.flags|=1;"object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=
null,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,ah(b),e.updater=nh,b.stateNode=e,e._reactInternals=b,rh(b,d,a,c),b=kj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Yi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{jj(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=$k(d);a=Lg(d,a);switch(e){case 0:b=dj(null,b,d,a,c);break a;case 1:b=ij(null,b,d,a,c);break a;case 11:b=Zi(null,b,d,a,c);break a;case 14:b=aj(null,b,d,Lg(d.type,a),c);break a}throw Error(p(306,
d,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),dj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),ij(a,b,d,e,c);case 3:a:{lj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;bh(a,b);gh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=
f,b.memoizedState=f,b.flags&256){e=Ki(Error(p(423)),b);b=mj(a,b,d,c,e);break a}else if(d!==e){e=Ki(Error(p(424)),b);b=mj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Ch(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=$i(a,b,c);break a}Yi(a,b,d,c)}b=b.child}return b;case 5:return Kh(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),
hj(a,b),Yi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return pj(a,b,c);case 4:return Ih(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Bh(b,null,d,c):Yi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),Zi(a,b,d,e,c);case 7:return Yi(a,b,b.pendingProps,c),b.child;case 8:return Yi(a,b,b.pendingProps.children,c),b.child;case 12:return Yi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;
g=e.value;G(Mg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=$i(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=ch(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);Sg(f.return,
c,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);Sg(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Yi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,Tg(b,c),e=Vg(e),d=d(e),b.flags|=1,Yi(a,b,d,c),
b.child;case 14:return d=b.type,e=Lg(d,b.pendingProps),e=Lg(d.type,e),aj(a,b,d,e,c);case 15:return cj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Lg(d,e),jj(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,Tg(b,c),ph(b,d,e),rh(b,d,e,c),kj(null,b,d,!0,a,c);case 19:return yj(a,b,c);case 22:return ej(a,b,c)}throw Error(p(156,b.tag));};function Gk(a,b){return ac(a,b)}
function al(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new al(a,b,c,d)}function bj(a){a=a.prototype;return!(!a||!a.isReactComponent)}
function $k(a){if("function"===typeof a)return bj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}
function wh(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};
c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}
function yh(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)bj(a)&&(g=1);else if("string"===typeof a)g=5;else a:switch(a){case ya:return Ah(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return qj(c,e,f,b);default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;
break a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,""));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Ah(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function qj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function xh(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}
function zh(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}
function bl(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=
null}function cl(a,b,c,d,e,f,g,h,k){a=new bl(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};ah(f);return a}function dl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}
function el(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}
function fl(a,b,c,d,e,f,g,h,k){a=cl(c,d,!0,a,e,f,g,h,k);a.context=el(null);c=a.current;d=L();e=lh(c);f=ch(d,e);f.callback=void 0!==b&&null!==b?b:null;dh(c,f,e);a.current.lanes=e;Ac(a,e,d);Ek(a,d);return a}function gl(a,b,c,d){var e=b.current,f=L(),g=lh(e);c=el(c);null===b.context?b.context=c:b.pendingContext=c;b=ch(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=dh(e,b,g);null!==a&&(mh(a,e,g,f),eh(a,e,g));return g}
function hl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function jl(a,b){il(a,b);(a=a.alternate)&&il(a,b)}function kl(){return null}var ll="function"===typeof reportError?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}
nl.prototype.render=ml.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));gl(a,b,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Sk(function(){gl(null,a,null,null)});b[uf]=null}};function nl(a){this._internalRoot=a}
nl.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function pl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function ql(){}
function rl(a,b,c,d,e){if(e){if("function"===typeof d){var f=d;d=function(){var a=hl(g);f.call(a)}}var g=fl(b,d,a,0,null,!1,!1,"",ql);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Sk();return g}for(;e=a.lastChild;)a.removeChild(e);if("function"===typeof d){var h=d;d=function(){var a=hl(k);h.call(a)}}var k=cl(a,0,!1,null,null,!1,!1,"",ql);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Sk(function(){gl(b,k,c,d)});return k}
function sl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if("function"===typeof e){var h=e;e=function(){var a=hl(g);h.call(a)}}gl(b,g,a,e)}else g=rl(c,b,a,e,d);return hl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Ek(b,B()),0===(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var b=Zg(a,1);if(null!==b){var c=L();mh(b,a,1,c)}}),jl(a,1)}};
Fc=function(a){if(13===a.tag){var b=Zg(a,134217728);if(null!==b){var c=L();mh(b,a,134217728,c)}jl(a,134217728)}};Gc=function(a){if(13===a.tag){var b=lh(a),c=Zg(a,b);if(null!==c){var d=L();mh(c,a,b,d)}jl(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};
yb=function(a,b,c){switch(b){case "input":bb(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case "textarea":ib(a,c);break;case "select":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Rk;Hb=Sk;
var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"};
var vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||
kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;
exports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ol(b))throw Error(p(200));return dl(a,b,null,c)};exports.createRoot=function(a,b){if(!ol(a))throw Error(p(299));var c=!1,d="",e=ll;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=cl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ml(b)};
exports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if("function"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(",");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Sk(a)};exports.hydrate=function(a,b,c){if(!pl(b))throw Error(p(200));return sl(null,a,b,!0,c)};
exports.hydrateRoot=function(a,b,c){if(!ol(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f="",g=ll;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=fl(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,
e);return new nl(b)};exports.render=function(a,b,c){if(!pl(b))throw Error(p(200));return sl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Rk;
exports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!pl(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return sl(a,b,c,!1,d)};exports.version="18.2.0-next-9e3b772b8-20220608";


/***/ }),

/***/ 20745:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

var __webpack_unused_export__;


var m = __webpack_require__(73935);
if (true) {
  exports.s = m.createRoot;
  __webpack_unused_export__ = m.hydrateRoot;
} else { var i; }


/***/ }),

/***/ 73935:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



function checkDCE() {
  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */
  if (
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||
    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'
  ) {
    return;
  }
  if (false) {}
  try {
    // Verify that the code above has been dead code eliminated (DCE'd).
    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
  } catch (err) {
    // DevTools shouldn't crash React, no matter what.
    // We should still report in case we break this code.
    console.error(err);
  }
}

if (true) {
  // DCE check should happen before ReactDOM bundle executes so that
  // DevTools can report bad minification during injection.
  checkDCE();
  module.exports = __webpack_require__(64448);
} else {}


/***/ }),

/***/ 72408:
/***/ ((__unused_webpack_module, exports) => {

/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z=Symbol.iterator;function A(a){if(null===a||"object"!==typeof a)return null;a=z&&a[z]||a["@@iterator"];return"function"===typeof a?a:null}
var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};
E.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,b,"setState")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;
H.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};
function M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=""+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}
function N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return"object"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\/+/g;function Q(a,b){return"object"===typeof a&&null!==a&&null!=a.key?escape(""+a.key):b.toString(36)}
function R(a,b,e,d,c){var k=typeof a;if("undefined"===k||"boolean"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case "string":case "number":h=!0;break;case "object":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=""===d?"."+Q(h,0):d,I(c)?(e="",null!=a&&(e=a.replace(P,"$&/")+"/"),R(c,b,e,"",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?"":(""+c.key).replace(P,"$&/")+"/")+a)),b.push(c)),1;h=0;d=""===d?".":d+":";if(I(a))for(var g=0;g<a.length;g++){k=
a[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),"function"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if("object"===k)throw b=String(a),Error("Objects are not valid as a React child (found: "+("[object Object]"===b?"object with keys {"+Object.keys(a).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return h}
function S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,"","",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}
var U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};exports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};exports.Component=E;exports.Fragment=p;
exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;
exports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=""+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);
for(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};
exports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.");};
exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};exports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};
exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};exports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};
exports.useTransition=function(){return U.current.useTransition()};exports.version="18.2.0";


/***/ }),

/***/ 67294:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



if (true) {
  module.exports = __webpack_require__(72408);
} else {}


/***/ }),

/***/ 60053:
/***/ ((__unused_webpack_module, exports) => {

/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}
function g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D="function"===typeof setTimeout?setTimeout:null,E="function"===typeof clearTimeout?clearTimeout:null,F="undefined"!==typeof setImmediate?setImmediate:null;
"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}
function J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if("function"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();"function"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;
function M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if("function"===typeof F)S=function(){F(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}
exports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};
exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};
exports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};
exports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();"object"===typeof c&&null!==c?(c=c.delay,c="number"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};
exports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};


/***/ }),

/***/ 63840:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



if (true) {
  module.exports = __webpack_require__(60053);
} else {}


/***/ }),

/***/ 93379:
/***/ ((module) => {



var stylesInDOM = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDOM.length; i++) {
    if (stylesInDOM[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var indexByIdentifier = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3],
      supports: item[4],
      layer: item[5]
    };

    if (indexByIdentifier !== -1) {
      stylesInDOM[indexByIdentifier].references++;
      stylesInDOM[indexByIdentifier].updater(obj);
    } else {
      var updater = addElementStyle(obj, options);
      options.byIndex = i;
      stylesInDOM.splice(i, 0, {
        identifier: identifier,
        updater: updater,
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function addElementStyle(obj, options) {
  var api = options.domAPI(options);
  api.update(obj);

  var updater = function updater(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
        return;
      }

      api.update(obj = newObj);
    } else {
      api.remove();
    }
  };

  return updater;
}

module.exports = function (list, options) {
  options = options || {};
  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDOM[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDOM[_index].references === 0) {
        stylesInDOM[_index].updater();

        stylesInDOM.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ 90569:
/***/ ((module) => {



var memo = {};
/* istanbul ignore next  */

function getTarget(target) {
  if (typeof memo[target] === "undefined") {
    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
      try {
        // This will throw an exception if access to iframe is blocked
        // due to cross-origin restrictions
        styleTarget = styleTarget.contentDocument.head;
      } catch (e) {
        // istanbul ignore next
        styleTarget = null;
      }
    }

    memo[target] = styleTarget;
  }

  return memo[target];
}
/* istanbul ignore next  */


function insertBySelector(insert, style) {
  var target = getTarget(insert);

  if (!target) {
    throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
  }

  target.appendChild(style);
}

module.exports = insertBySelector;

/***/ }),

/***/ 19216:
/***/ ((module) => {



/* istanbul ignore next  */
function insertStyleElement(options) {
  var element = document.createElement("style");
  options.setAttributes(element, options.attributes);
  options.insert(element, options.options);
  return element;
}

module.exports = insertStyleElement;

/***/ }),

/***/ 3565:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {



/* istanbul ignore next  */
function setAttributesWithoutAttributes(styleElement) {
  var nonce =  true ? __webpack_require__.nc : 0;

  if (nonce) {
    styleElement.setAttribute("nonce", nonce);
  }
}

module.exports = setAttributesWithoutAttributes;

/***/ }),

/***/ 7795:
/***/ ((module) => {



/* istanbul ignore next  */
function apply(styleElement, options, obj) {
  var css = "";

  if (obj.supports) {
    css += "@supports (".concat(obj.supports, ") {");
  }

  if (obj.media) {
    css += "@media ".concat(obj.media, " {");
  }

  var needLayer = typeof obj.layer !== "undefined";

  if (needLayer) {
    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
  }

  css += obj.css;

  if (needLayer) {
    css += "}";
  }

  if (obj.media) {
    css += "}";
  }

  if (obj.supports) {
    css += "}";
  }

  var sourceMap = obj.sourceMap;

  if (sourceMap && typeof btoa !== "undefined") {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  options.styleTagTransform(css, styleElement, options.options);
}

function removeStyleElement(styleElement) {
  // istanbul ignore if
  if (styleElement.parentNode === null) {
    return false;
  }

  styleElement.parentNode.removeChild(styleElement);
}
/* istanbul ignore next  */


function domAPI(options) {
  var styleElement = options.insertStyleElement(options);
  return {
    update: function update(obj) {
      apply(styleElement, options, obj);
    },
    remove: function remove() {
      removeStyleElement(styleElement);
    }
  };
}

module.exports = domAPI;

/***/ }),

/***/ 44589:
/***/ ((module) => {



/* istanbul ignore next  */
function styleTagTransform(css, styleElement) {
  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css;
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild);
    }

    styleElement.appendChild(document.createTextNode(css));
  }
}

module.exports = styleTagTransform;

/***/ }),

/***/ 36538:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$X": () => (/* binding */ SourceApp),
/* harmony export */   "ZP": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "mO": () => (/* binding */ DeploymentType)
/* harmony export */ });
var DeploymentType;
(function (DeploymentType) {
    DeploymentType[DeploymentType["dev"] = 0] = "dev";
    DeploymentType[DeploymentType["qa"] = 1] = "qa";
    DeploymentType[DeploymentType["prod"] = 2] = "prod";
    DeploymentType[DeploymentType["docker"] = 3] = "docker";
    DeploymentType[DeploymentType["test"] = 4] = "test";
})(DeploymentType || (DeploymentType = {}));
var SourceApp;
(function (SourceApp) {
    SourceApp[SourceApp["demo"] = 0] = "demo";
    SourceApp[SourceApp["marketplace"] = 1] = "marketplace";
    SourceApp[SourceApp["livebook"] = 2] = "livebook";
    SourceApp[SourceApp["livevideo"] = 3] = "livevideo";
    SourceApp[SourceApp["pbc"] = 4] = "pbc";
})(SourceApp || (SourceApp = {}));
//const localhost = "http://192.168.0.11:3001"; 
var localhost = "http://localhost:3001";
//const localhost = "https://lb-qa-ui.s3-us-west-2.amazonaws.com/ui-components"
var testConfig = {
    backend: {
        demo: localhost,
        marketplace: "https://dev.manning.com:8443/Marketplace",
        // marketplace: "http://localhost:8080/Marketplace",
        livebook: "http://localhost:8080",
        livevideo: "http://localhost:8080",
        pbc: "http://localhost:8080",
        base: ""
    },
    client: {
        demo: "http://localhost:8080",
        marketplace: "https://dev.manning.com:8443/Marketplace",
        //marketplace: "http://localhost:8080/Marketplace",
        livebook: "http://localhost:3000",
        livevideo: "http://lv-test-ui.s3-website-us-west-2.amazonaws.com",
        pbc: "http://lp-test-ui.s3-website-us-west-2.amazonaws.com",
        base: ""
    },
    aws: {
        livebook: "https://d1557jsc07ldhk.cloudfront.net"
    },
    images: {
        livebook: "https://d1557jsc07ldhk.cloudfront.net",
        marketplace: "https://images-qa.manning.com"
    }
};
var devConfig = {
    backend: {
        demo: localhost,
        marketplace: "https://dev.manning.com:8443/Marketplace",
        //marketplace: "http://localhost:8080/Marketplace",
        livebook: "http://localhost:8080",
        livevideo: "https://livevideo-be-dev.manning.com",
        pbc: "https://livevideo-be-dev.manning.com",
        base: ""
    },
    client: {
        demo: "http://localhost:8080",
        marketplace: "https://dev.manning.com:8443/Marketplace",
        //marketplace: "http://localhost:8080/Marketplace",
        livebook: "http://localhost:3000",
        livevideo: "https://livevideo-qa.manning.com",
        pbc: "https://liveproject-qa.manning.com",
        base: ""
    },
    aws: {
        livebook: "https://d1557jsc07ldhk.cloudfront.net"
    },
    images: {
        livebook: "https://d1557jsc07ldhk.cloudfront.net",
        marketplace: "https://images-qa.manning.com"
    }
};
var qaConfig = {
    backend: {
        demo: localhost,
        marketplace: "https://www-qa.manning.com",
        livebook: "https://livebook-qa.manning.com",
        livevideo: "https://livevideo-be-dev.manning.com",
        pbc: "https://livevideo-be-dev.manning.com",
        base: ""
    },
    client: {
        demo: "http://localhost:8080",
        marketplace: "https://www-qa.manning.com",
        livebook: "https://livebook-qa.manning.com",
        livevideo: "https://livevideo-qa.manning.com",
        pbc: "https://liveproject-qa.manning.com",
        base: ""
    },
    aws: {
        livebook: "https://d1557jsc07ldhk.cloudfront.net"
    },
    images: {
        livebook: "https://d1557jsc07ldhk.cloudfront.net",
        marketplace: "https://images-qa.manning.com"
    }
};
var prodConfig = {
    backend: {
        demo: localhost,
        marketplace: "https://www.manning.com",
        livebook: "https://livebook.manning.com",
        livevideo: "https://livevideo-be.manning.com",
        pbc: "https://livevideo-be.manning.com",
        base: ""
    },
    client: {
        demo: "http://localhost:8080",
        marketplace: "https://www.manning.com",
        livebook: "https://livebook.manning.com",
        livevideo: "https://livevideo.manning.com",
        pbc: "https://liveproject.manning.com/",
        base: ""
    },
    aws: {
        livebook: "https://drek4537l1klr.cloudfront.net"
    },
    images: {
        livebook: "https://drek4537l1klr.cloudfront.net",
        marketplace: "https://images.manning.com"
    }
};
var dockerConfig = {
    backend: {
        demo: localhost,
        marketplace: "http://search-test.manning.com",
        livebook: "https://livebook-qa.manning.com",
        livevideo: "https://livevideo-be-dev.manning.com",
        pbc: "https://livevideo-be-dev.manning.com",
        base: ""
    },
    client: {
        demo: "http://localhost:8080",
        marketplace: "http://search-test.manning.com",
        livebook: "https://livebook.manning.com",
        livevideo: "https://livevideo.manning.com",
        pbc: "https://liveproject.manning.com",
        base: ""
    },
    aws: {
        livebook: "https://drek4537l1klr.cloudfront.net"
    },
    images: {
        livebook: "https://drek4537l1klr.cloudfront.net",
        marketplace: "https://images-qa.manning.com"
    }
};
var ConfigUtils = /** @class */ (function () {
    function ConfigUtils() {
    }
    ConfigUtils.prototype.getLocalhostLocation = function () {
        return localhost;
    };
    ConfigUtils.prototype.getConfig = function (sourceApp, deploymentType) {
        var config = this.getConfigByDeploymentType(deploymentType);
        switch (sourceApp) {
            case SourceApp.livebook:
                config.backend.base = config.backend.livebook;
                config.client.base = config.client.livebook;
                break;
            case SourceApp.livevideo:
                config.backend.base = config.backend.livevideo;
                config.client.base = config.client.livevideo;
                break;
            case SourceApp.marketplace:
                config.backend.base = config.backend.marketplace;
                config.client.base = config.client.marketplace;
                break;
            case SourceApp.pbc:
                config.backend.base = config.backend.pbc;
                config.client.base = config.client.pbc;
                break;
            case SourceApp.demo:
            default:
                config.backend.base = config.backend.demo;
                config.client.base = config.client.livebook;
        }
        return config;
    };
    ConfigUtils.prototype.getConfigByDeploymentType = function (deploymentType) {
        switch (deploymentType) {
            case DeploymentType.qa:
                return qaConfig;
            case DeploymentType.prod:
                return prodConfig;
            case DeploymentType.docker:
                return dockerConfig;
            case DeploymentType.test:
                return testConfig;
            case DeploymentType.dev:
            default:
                return devConfig;
        }
    };
    return ConfigUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new ConfigUtils());


/***/ }),

/***/ 86506:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);
/* harmony import */ var _features_onboarding_feedback_FeedbackModule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24646);


var $document = $(document);
var $window = $(window);
var Footer = /** @class */ (function () {
    function Footer() {
        var _this = this;
        this.isDisabled = true;
        this.$footer = $("#footer");
        $document.on("disableToolbarHiding", function () {
            if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
                return;
            }
            _this.disableHiding();
            if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
                _this.hideFooter();
            }
        });
        $document.on("enableToolbarHiding", function () {
            if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
                return;
            }
            _this.enableHiding();
            if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
                _this.showFooter();
            }
        });
        $window.on("scrollstop", { latency: 100 }, function () {
            if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
                return;
            }
            var scrollHeight = $document.height();
            var scrollPosition = $window.height() + $window.scrollTop();
            if ((scrollHeight - scrollPosition) / scrollHeight === 0) { //at page bottom
                _this.showFooter();
            }
        });
    }
    Footer.prototype.initialize = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.isDisabled ? this.disableHiding() : this.enableHiding();
    };
    Footer.prototype.disableHiding = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.isDisabled = true;
    };
    Footer.prototype.enableHiding = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.isDisabled = false;
    };
    Footer.prototype.registerEvents = function () {
        $("#subscriptions-feedback-button").on("click", function () {
            _features_onboarding_feedback_FeedbackModule__WEBPACK_IMPORTED_MODULE_1__/* .FeedbackModule.showSubscriptionsFeedback */ .e.showSubscriptionsFeedback();
        });
    };
    Footer.prototype.hideFooter = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.$footer.removeClass("headroom--pinned").addClass("headroom--unpinned");
    };
    Footer.prototype.showFooter = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.$footer.removeClass("headroom--unpinned").addClass("headroom--pinned");
    };
    Footer.prototype.makeFooterTransparent = function () {
        this.$footer.css({ opacity: 0 });
    };
    Footer.prototype.makeFooterOpaque = function () {
        this.$footer.css({ opacity: 1 });
    };
    Footer.prototype.disableAndRevert = function () {
        this.disableHiding();
        this.$footer.removeClass("headroom--unpinned").addClass("headroom-pinned");
    };
    return Footer;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new Footer());


/***/ }),

/***/ 22259:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "h": () => (/* binding */ Header)
/* harmony export */ });
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67463);
/* harmony import */ var _modules_LoginModule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29755);
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(93292);
/* harmony import */ var _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37168);
/* harmony import */ var _modules_ShoppingCartModule__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(58300);
/* harmony import */ var _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(98498);
/* harmony import */ var _managers_NotificationsManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(54273);








var $document = $(document);
var HeaderClass = /** @class */ (function () {
    function HeaderClass() {
        var _this = this;
        this.isDisabled = true;
        this.hideBrowseHeader = this.hideBrowseHeader.bind(this);
        this.$header = $("#header");
        $document.on("disableToolbarHiding", function () { return _this.disableHiding(); });
        $document.on("enableToolbarHiding", function () { return _this.enableHiding(); });
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].onDescendantEventWithCooldown */ .Z.onDescendantEventWithCooldown(this.$header, "click touchstart", ".header-sign-in-button-container", function () {
            _modules_LoginModule__WEBPACK_IMPORTED_MODULE_2__/* .LoginModule.requestLogin */ .r.requestLogin();
        });
        this.toggleBrowseHeader = this.toggleBrowseHeader.bind(this);
        $document.on("click", "#header-browse-container .buy-link", function (e) {
            if (!_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_6__/* .GlobalStateInfo.book */ .UU.book) {
                return;
            }
            if (_modules_ShoppingCartModule__WEBPACK_IMPORTED_MODULE_5__/* .ShoppingCartModule.isEbookInShoppingCart */ .f.isEbookInShoppingCart(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_6__/* .GlobalStateInfo.book */ .UU.book)
                || _modules_ShoppingCartModule__WEBPACK_IMPORTED_MODULE_5__/* .ShoppingCartModule.isComboInShoppingCart */ .f.isComboInShoppingCart(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_6__/* .GlobalStateInfo.book */ .UU.book)) {
                _modules_ShoppingCartModule__WEBPACK_IMPORTED_MODULE_5__/* .ShoppingCartModule.requestMenuOpen */ .f.requestMenuOpen();
            }
            else {
                _managers_NotificationsManager__WEBPACK_IMPORTED_MODULE_7__/* ["default"].showTemporaryNotification */ .Z.showTemporaryNotification("adding to cart ...");
                _modules_ShoppingCartModule__WEBPACK_IMPORTED_MODULE_5__/* .ShoppingCartModule.requestAddBookToCart */ .f.requestAddBookToCart(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_6__/* .GlobalStateInfo.book */ .UU.book, false, "", false, false);
            }
        });
    }
    ;
    HeaderClass.prototype.registerEvents = function () {
        var $browseItemContainer = $("#header .browse-item-container");
        $browseItemContainer.on("click", this.toggleBrowseHeader);
        $(document).on("click", ".settings-menu-browse-item", this.toggleBrowseHeader);
        $("#header-browse-container a").on("click", this.hideBrowseHeader);
        $(document).on("searchOpen", this.hideBrowseHeader);
    };
    HeaderClass.prototype.toggleBrowseHeader = function () {
        var $browseItemContainer = $("#header .browse-item-container");
        var $browseContainer = $("#header-browse-container");
        $browseContainer.toggleClass("collapsed");
        $browseContainer.is(".collapsed") ? $browseItemContainer.find(".header-icon-label").text("browse")
            : $browseItemContainer.find(".header-icon-label").text("close");
        if (!$browseContainer.is(".collapsed")) {
            $(document).trigger("searchHideRequested")
                .trigger("slideMenuCloseRequested");
        }
    };
    HeaderClass.prototype.isBrowserHeaderShown = function () {
        return !$("#header-browse-container").is(".collapsed");
    };
    HeaderClass.prototype.showBrowserHeaderIfNecessary = function () {
        var _this = this;
        _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_4__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                _this.showBrowserHeader();
                return;
            }
            if (data.userDetails.showBrowseHeader
                || data.userDetails.showBrowseHeader === null) {
                _this.showBrowserHeader();
            }
        });
    };
    HeaderClass.prototype.showBrowserHeader = function () {
        var $browseItemContainer = $("#header .browse-item-container");
        var $browseContainer = $("#header-browse-container");
        $browseContainer.removeClass("collapsed");
        $browseItemContainer.find(".header-icon-label").text("close");
        $(document.body).addClass("browse-header-shown");
    };
    HeaderClass.prototype.hideBrowseHeader = function () {
        var $browseContainer = $("#header-browse-container");
        $browseContainer.addClass("collapsed");
        $("#header .browse-item-container .header-icon-label").text("browse");
        $(document.body).removeClass("browse-header-shown");
    };
    HeaderClass.prototype.fillWithNewBrowseHeader = function () {
        var $browseContainer = $("#header-browse-container");
        $browseContainer.addClass("new-browse-header");
        $browseContainer.html("\n            <a class=\"header-browse-link all-link\" href=\"https://www.manning.com/catalog\">catalog</a>\n            <a class=\"header-browse-link books-link same-site-ignore\" href=\"https://livebook.manning.com/\">books</a>\n            <a class=\"header-browse-link videos-link\" href=\"https://livevideo.manning.com/\">video</a>\n            <a class=\"header-browse-link projects-link\" href=\"https://liveproject.manning.com/\">projects</a>\n            <a class=\"header-browse-link audio-books-link\" href=\"https://www.manning.com/liveaudio-landing\">audio</a>\n            <a class=\"header-browse-link free-content-link hide-on-all-subscriber-pages\" href=\"http://freecontent.manning.com/\">free <span class='hideable'>content</span></a>\n            <a class=\"header-browse-link register-pbook-link hide-on-all-subscriber-pages\" href=\"https://www.manning.com/freebook\">register pBook</a>\n            <a class=\"header-browse-link subscribe-link hide-on-all-subscriber-pages\" href=\"https://www.manning.com/subscription\">subscribe</a>\n        ");
    };
    HeaderClass.prototype.updateBrowseLinksForSubscribers = function () {
        var $browseContainer = $("#header-browse-container");
        $browseContainer.html("\n            <a class=\"header-browse-link all-link same-site-ignore\" href=\"".concat(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getLivebookBaseUrl */ .Z.getLivebookBaseUrl(), "manning-online?show-library\">all</a>\n            <a class=\"header-browse-link books-link same-site-ignore\" href=\"").concat(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getLivebookBaseUrl */ .Z.getLivebookBaseUrl(), "manning-online?show-books-library\">books</a>\n            <a class=\"header-browse-link videos-link same-site-ignore\" href=\"").concat(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getLivebookBaseUrl */ .Z.getLivebookBaseUrl(), "manning-online?show-lv-library\">video</a>\n            <a class=\"header-browse-link projects-link same-site-ignore\" href=\"").concat(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getLivebookBaseUrl */ .Z.getLivebookBaseUrl(), "manning-online?show-lp-library\">projects</a>\n            <a class=\"header-browse-link audio-books-link same-site-ignore\" href=\"").concat(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getLivebookBaseUrl */ .Z.getLivebookBaseUrl(), "manning-online?show-audio\">audio <span class='hideable'>books</span></a>\n            <a class=\"header-browse-link buy-link\" href=\"javascript:void(0)\">\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M8.95228 7.32248C8.58133 7.22974 8.21038 7.04426 7.93216 6.76605C7.65395 6.67331 7.56121 6.3951 7.56121 6.20962C7.56121 6.02414 7.65395 5.74593 7.83943 5.65319C8.11764 5.46772 8.39585 5.28224 8.67407 5.37498C9.2305 5.37498 9.69419 5.65319 9.9724 6.02414L10.807 4.91129C10.5288 4.63307 10.2506 4.4476 9.9724 4.26212C9.69419 4.07664 9.32324 3.98391 8.95228 3.98391V2.68557H7.83943V3.98391C7.37574 4.07664 6.91205 4.35486 6.54109 4.72581C6.17014 5.1895 5.89193 5.74593 5.98466 6.30236C5.98466 6.85879 6.17014 7.41522 6.54109 7.78617C7.00478 8.24986 7.65395 8.52807 8.21038 8.80629C8.48859 8.89903 8.85955 9.0845 9.13776 9.26998C9.32324 9.45545 9.41597 9.73367 9.41597 10.0119C9.41597 10.2901 9.32324 10.5683 9.13776 10.8465C8.85955 11.1247 8.48859 11.2175 8.21038 11.2175C7.83943 11.2175 7.37574 11.1247 7.09752 10.8465C6.81931 10.661 6.54109 10.3828 6.35562 10.1046L5.42824 11.1247C5.70645 11.4957 5.98466 11.7739 6.35562 12.0521C6.81931 12.3303 7.37574 12.6085 7.93216 12.6085V13.8141H8.95228V12.4231C9.50871 12.3303 9.9724 12.0521 10.3434 11.6812C10.807 11.2175 11.0853 10.4756 11.0853 9.82641C11.0853 9.26998 10.8998 8.62081 10.4361 8.24986C9.9724 7.78617 9.50871 7.50795 8.95228 7.32248ZM8.39585 0.830811C4.31538 0.830811 0.976807 4.16938 0.976807 8.24986C0.976807 12.3303 4.31538 15.6689 8.39585 15.6689C12.4763 15.6689 15.8149 12.3303 15.8149 8.24986C15.8149 4.16938 12.4763 0.830811 8.39585 0.830811ZM8.39585 14.8391C4.87181 14.8391 1.80619 11.7739 1.80619 8.24986C1.80619 4.72581 4.87181 1.66055 8.39585 1.66055C11.9199 1.66055 15.0829 4.72581 15.0829 8.24986C15.0829 11.7739 11.9199 14.8391 8.39585 14.8391Z\" fill=\"currentColor\"/>\n                </svg>\n\n                buy\n            </a>\n        "));
    };
    HeaderClass.prototype.updateBrowseLinksAccordingToUserSubscriptionStatus = function () {
        var _this = this;
        _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_4__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
            if (data.loggedIn
                && _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_6__/* .GlobalStateInfo.hasSubscription */ .UU.hasSubscription(data.userDetails)) {
                _this.updateBrowseLinksForSubscribers();
            }
        });
    };
    HeaderClass.prototype.initialize = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.isDisabled ? this.disableHiding() : this.enableHiding();
    };
    HeaderClass.prototype.disableHiding = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.isDisabled = true;
    };
    HeaderClass.prototype.enableHiding = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.isDisabled = false;
    };
    HeaderClass.prototype.disableAndRevert = function () {
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isIOS */ .Z.isIOS()) {
            return;
        }
        this.disableHiding();
    };
    return HeaderClass;
}());
var Header = new HeaderClass();


/***/ }),

/***/ 75645:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67463);
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87876);
/* harmony import */ var _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69619);
/* harmony import */ var _managers_MenuDragManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40225);




var $document = $(document);
var $window = $(window);
var isIE = _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isIE */ .Z.isIE(), isIOS = _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isIOS */ .Z.isIOS();
var SlideMenu = /** @class */ (function () {
    function SlideMenu($button, $menu, beforeOpenMenuCallback, afterMenuOpenedCallback, dontHandleScrolling, onMenuClosedCallback, $additionalAssociatedElements) {
        var _this = this;
        this.isMenuOpening = false;
        this.isPinned = false;
        this.$button = $button;
        this.$menu = $menu;
        this.$additionalAssociatedElements = $additionalAssociatedElements;
        this.beforeOpenMenuCallback = beforeOpenMenuCallback;
        this.afterMenuOpenedCallback = afterMenuOpenedCallback;
        this.onMenuClosedCallback = onMenuClosedCallback;
        this.$input = this.$menu.find("input").filter(function (index, element) { return element.type === "text"; });
        if (this.$input.length) {
            if (isIOS) {
                this.$input.on("touchstart", function () { return window.scrollTo(0, 0); });
            }
        }
        if (this.$menu.is(".closed")) {
            if (this.isOnLeftSide()) {
                this.$menu.css("transform", "translateX(-".concat(this.$menu.width(), "px)"));
            }
            else {
                this.$menu.css("transform", "translateX(".concat(this.$menu.width(), "px)"));
            }
        }
        if (!dontHandleScrolling) {
            this.$menu.children().first().on("mousewheel DOMMouseScroll", function (e) { return _this.handleScroll(e); });
        }
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].onEventWithCooldown */ .Z.onEventWithCooldown(this.$menu.find(".pin"), "click touchstart", function (e) {
            var $currentTarget = $(e.currentTarget);
            _this.isPinned = !_this.isPinned;
            $currentTarget.toggleClass("unpinned", !_this.isPinned);
        });
        $document.on("topbarToggled", function () {
            if (_this.dontCloseOnTopBarToggle) {
                return;
            }
            _this.closeMenu(true);
        });
        $document.on("click", function (e) { return _this.handleDocumentClick(e.target); });
        $document.on("slideMenuOpened", function (e, $openedMenu) { return _this.handleSlideMenuOpened($openedMenu); });
        $document.on("slideMenuCloseRequested textSlideBoxShowStart", function () { return _this.isMenuOpened() && _this.closeMenu(); });
        $document.on("slideMenuOpenRequested", function (e, menuButton) { return menuButton === _this.$button[0] && _this.openMenu(); });
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].onEventWithCooldown */ .Z.onEventWithCooldown($button, "click touchstart", function () { return _this.handleToggleMenuButtonClick(); });
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isTouchDevice */ .Z.isTouchDevice()) {
            this.menuDragManager = new _managers_MenuDragManager__WEBPACK_IMPORTED_MODULE_3__/* .MenuDragManager */ .C(this.$menu, function (delta) {
                if (_this.isOnLeftSide() && delta.x > 0) {
                    return;
                }
                if (_this.isOnRightSide() && delta.x < 0) {
                    return;
                }
                _this.$menu.css("transform", "translateX(".concat(delta.x, "px)"));
            }, function (delta, isQuickDrag) {
                if ((_this.isOnLeftSide() && delta.x > 0)
                    || (_this.isOnRightSide() && delta.x < 0)) {
                    _this.$menu.velocity({ translateX: 0 }, { duration: 100 });
                    return;
                }
                _this.$menu.velocity({ translateX: delta.x }, { duration: 0 });
                if (Math.abs(delta.x) >= _this.$menu.width() / 2 || isQuickDrag) {
                    _this.closeMenu(false, true);
                }
                else {
                    _this.$menu.velocity({ translateX: 0 }, { duration: 100 });
                }
            }, {
                isOnLeftSide: this.isOnLeftSide(),
                isOnRightSide: this.isOnRightSide()
            });
        }
    }
    SlideMenu.prototype.setAssociatedElement = function ($additionalAssociatedElements) {
        this.$additionalAssociatedElements = $additionalAssociatedElements;
    };
    SlideMenu.prototype.openMenu = function (openedCallback) {
        var _this = this;
        if (this.isMenuOpened()) {
            return;
        }
        this.beforeOpenMenuCallback && this.beforeOpenMenuCallback();
        if (this.isOnLeftSide()) {
            this.$menu.velocity({ translateX: -this.$menu.width() }, { duration: 0 });
        }
        else {
            this.$menu.velocity({ translateX: this.$menu.width() }, { duration: 0 });
        }
        //Safari iOs doesn't update the top property on time
        //So there's a weird effect.
        //To fix it, allow it to update first
        (isIOS || isIE) ? setTimeout(function () { return _this.performActualOpening(openedCallback); }, 5)
            : this.performActualOpening(openedCallback);
    };
    SlideMenu.prototype.performActualOpening = function (openedCallback) {
        var _this = this;
        this.isMenuOpening = true;
        $document.trigger("slideMenuStartOpening", [this.$menu]);
        $document.trigger("slideMenuOpened", [this.$menu]);
        this.$button.addClass("selected");
        this.$menu.removeClass("closed");
        this.$menu.velocity({
            translateX: 0,
            opacity: 1
        }, {
            duration: 300,
            complete: function () {
                SlideMenu.isSideMenuOpened = true;
                SlideMenu.$openedMenu = _this.$menu;
                _this.isMenuOpening = false;
                _this.afterMenuOpenedCallback && _this.afterMenuOpenedCallback();
                openedCallback && openedCallback();
                _this.menuDragManager && _this.menuDragManager.enable();
            }
        });
        SlideMenu.isSideMenuOpened = true;
        SlideMenu.$openedMenu = this.$menu;
    };
    SlideMenu.prototype.isOnLeftSide = function () {
        return this.$menu.is(".slide-in-menu-left");
    };
    SlideMenu.prototype.isOnRightSide = function () {
        return this.$menu.is(".slide-in-menu-right");
    };
    SlideMenu.prototype.closeMenu = function (closeImmediately, forceAnimation) {
        var _this = this;
        if (forceAnimation === void 0) { forceAnimation = false; }
        this.menuDragManager && this.menuDragManager.disable();
        this.$button.removeClass("selected");
        if (this.isMenuClosed() && !this.isMenuOpening && !forceAnimation) {
            return;
        }
        $document.trigger("slideMenuClosed");
        this.$button.removeClass("selected");
        var currentTranslateX = _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getComputedTranslateX */ .Z.getComputedTranslateX(this.$menu.get(0));
        if (currentTranslateX != 0) {
            this.$menu.velocity({ translateX: currentTranslateX }, { duration: 0 });
        }
        this.$menu.velocity({
            translateX: this.isOnLeftSide() ? -this.$menu.width() : this.$menu.width(),
            opacity: 0
        }, {
            duration: closeImmediately ? 0 : 150,
            complete: function () {
                _this.$menu.addClass("closed");
                SlideMenu.isSideMenuOpened = false;
                SlideMenu.$openedMenu = null;
                _this.onMenuClosedCallback && _this.onMenuClosedCallback();
            }
        });
    };
    SlideMenu.prototype.isMenuClosed = function () {
        if (!this.$menu[0]) {
            return true;
        }
        var menuOffset = this.$menu.offset();
        return menuOffset.left < 0 || menuOffset.left > $window.width() || this.$menu.is(".closed");
    };
    SlideMenu.prototype.isMenuOpened = function () {
        if (!this.$menu[0]) {
            return true;
        }
        var menuOffset = this.$menu.offset();
        return menuOffset.left >= 0 && menuOffset.left <= $window.width() && !this.$menu.is(".closed");
    };
    SlideMenu.prototype.handleToggleMenuButtonClick = function () {
        this.isMenuOpened() ? this.closeMenu() : this.openMenu();
    };
    SlideMenu.prototype.handleDocumentClick = function (clickedOnElement) {
        var $menu = this.$menu, $button = this.$button, $additionalAssociatedElements = this.$additionalAssociatedElements || $(null);
        if (!$menu.is(clickedOnElement) && $menu.has(clickedOnElement).length === 0
            && !$button.is(clickedOnElement) && $button.has(clickedOnElement).length === 0
            && this.isMenuOpened()
            && !$(clickedOnElement).is(".hopscotch-next")
            && !$additionalAssociatedElements.is(clickedOnElement)
            && $additionalAssociatedElements.has(clickedOnElement).length === 0
            && !this.isPinned) {
            this.closeMenu();
        }
    };
    SlideMenu.prototype.handleSlideMenuOpened = function ($openedMenu) {
        if ($openedMenu !== this.$menu) {
            this.closeMenu(true);
        }
    };
    SlideMenu.prototype.handleScroll = function (e) {
        var event = e.originalEvent;
        var scrolledElement = e.currentTarget;
        var delta = event.wheelDelta || -event.detail, bottomOverflow = (scrolledElement.scrollTop + $(scrolledElement).outerHeight() - scrolledElement.scrollHeight) >= -5, topOverflow = scrolledElement.scrollTop <= 0;
        if ((delta < 0 && bottomOverflow) || (delta > 0 && topOverflow)) {
            e.preventDefault();
            return false;
        }
    };
    return SlideMenu;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SlideMenu);


/***/ }),

/***/ 67596:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67463);
/* harmony import */ var _utils_RouteUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95964);
/* harmony import */ var _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24279);
/* harmony import */ var _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37168);
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(93292);
/* harmony import */ var _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(98498);






var $document = $(document);
var Progress = /** @class */ (function () {
    function Progress() {
        var _this = this;
        this.noOfUnsyncedItems = 0;
        this.noOfUnsyncedItemsLimit = 5;
        this.isDataSynced = true;
        this.progressMap = {};
        $document.on("readableTextListened", function (e, refId) { return _this.handleParagraphListened(refId); });
        $document.on("readableElementScrolled", function (e, refId) { return _this.handleParagraphScrolled(refId); });
        $document.on("progressSavedRequested", function () {
            if (_this.bookElement == null) {
                return;
            }
            if (!_this.isDataSynced) {
                _this.storeProgress();
            }
        });
    }
    Progress.prototype.initialize = function (book, bookElement) {
        this.clean();
        this.book = book;
        this.bookElement = bookElement;
        this.fetchAudioProgress();
        this.periodicallySyncProgressIfNecessary();
        this.storeLatestPage();
    };
    Progress.prototype.clean = function () {
        if (!this.isDataSynced) {
            this.storeProgressIfBookChanges();
        }
        this.book = null;
        this.bookElement = null;
        this.completedContentItemIDs = null;
        this.lastContentItemID = null;
        this.noOfUnsyncedItems = 0;
        this.isDataSynced = true;
    };
    Progress.prototype.storeProgressIfBookChanges = function () {
        if (!_services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isCurrentlyLoggedIn */ .H.isCurrentlyLoggedIn()) {
            return;
        }
        this.updateInternalProgressCache();
        var bookShortName = this.book != null ? this.book.shortName : "";
        var bookSlug = this.book != null ? this.book.slug : "";
        var bookElement = this.bookElement;
        var completedContentItemIDs = this.completedContentItemIDs;
        var lastContentItemID = this.lastContentItemID;
        setTimeout(function () {
            var currentRouteData = _utils_RouteUtils__WEBPACK_IMPORTED_MODULE_1__/* .RouteUtils.getCurrentRouteInfo */ .D.getCurrentRouteInfo();
            var shouldStore = currentRouteData == null;
            if (!shouldStore) {
                shouldStore = currentRouteData.book !== bookShortName && currentRouteData.book !== bookSlug;
            }
            if (shouldStore) {
                _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__/* .ProgressProvider.storeProgress */ .w.storeProgress(bookElement, completedContentItemIDs, lastContentItemID, false);
            }
        }, 250);
    };
    Progress.prototype.periodicallySyncProgressIfNecessary = function () {
        var _this = this;
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].setTimeout */ .Z.setTimeout(function () {
            if (!_this.isDataSynced) {
                _this.storeProgress();
                _this.isDataSynced = true;
            }
            _this.periodicallySyncProgressIfNecessary();
        }, 1000 * 30);
    };
    Progress.prototype.storeProgress = function () {
        if (!_services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isCurrentlyLoggedIn */ .H.isCurrentlyLoggedIn()) {
            return;
        }
        this.updateInternalProgressCache();
        this.storeLatestPage();
        _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__/* .ProgressProvider.storeProgress */ .w.storeProgress(this.bookElement, this.completedContentItemIDs, this.lastContentItemID);
    };
    Progress.prototype.fetchAudioProgress = function () {
        var _this = this;
        if (!this.book || !this.book.userOwnsBook || !this.book.userOwnsAudio
            || !this.book.hasAudio || !_services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isCurrentlyLoggedIn */ .H.isCurrentlyLoggedIn()) {
            $document.trigger("progressLoaded", {});
            return;
        }
        _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__/* .ProgressProvider.fetchAudioProgress */ .w.fetchAudioProgress(this.bookElement).then(function (completedContentItemIDs) {
            if (!completedContentItemIDs) {
                completedContentItemIDs = {};
            }
            _this.completedContentItemIDs = completedContentItemIDs;
            _this.lastContentItemID = _this.getLastCompletedContentItemId(completedContentItemIDs);
            $document.trigger("progressLoaded", completedContentItemIDs);
        }).catch(function (e) { return $document.trigger("progressLoaded", {}); });
    };
    Progress.prototype.syncData = function () {
        this.timerId = null;
        if (this.isDataSynced) {
            return;
        }
        this.noOfUnsyncedItems++;
        if (this.noOfUnsyncedItems >= this.noOfUnsyncedItemsLimit) {
            this.storeProgress();
            this.noOfUnsyncedItems = 0;
            this.isDataSynced = true;
        }
    };
    Progress.prototype.handleParagraphListened = function (refId) {
        var _this = this;
        if (!this.completedContentItemIDs || !this.book || !this.book.userOwnsBook || !this.book.userOwnsAudio || !refId) {
            return;
        }
        if (this.completedContentItemIDs && !this.completedContentItemIDs[refId]) {
            this.completedContentItemIDs[refId] = 1;
            this.isDataSynced = false;
        }
        if (this.lastContentItemID != refId) {
            var $element = $(document.getElementById(refId));
            if ($element.is(".readable-text")) {
                this.lastContentItemID = refId;
                this.isDataSynced = false;
            }
        }
        //Multiple readableTextListened can be notified in a batch
        //One paragraph + all browsables
        //Throttle thems
        if (!this.timerId) {
            this.timerId = _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].setTimeout */ .Z.setTimeout(function () { return _this.syncData(); }, 1000);
        }
    };
    Progress.prototype.handleParagraphScrolled = function (refId) {
        if (!this.book || !this.bookElement) {
            return;
        }
        if (!refId && this.bookElement.pdf) {
            refId = "1";
        }
        this.book.lastBookElementItem = refId;
        this.lastContentItemID = refId;
        this.isDataSynced = false;
        this.updateInternalProgressCache();
    };
    Progress.prototype.getLastCompletedContentItemId = function (completedContentItemIds) {
        if (!completedContentItemIds) {
            return "";
        }
        try {
            var maxId = -1;
            for (var id in completedContentItemIds) {
                if (!completedContentItemIds.hasOwnProperty(id)) {
                    continue;
                }
                var parsedId = parseInt(id);
                if (!isNaN(parsedId) && parsedId > maxId) {
                    maxId = parsedId;
                }
            }
            return maxId != -1 ? maxId : "";
        }
        catch (e) {
            return "";
        }
    };
    Progress.prototype.updateInternalProgressCache = function () {
        this.progressMap[this.book.shortName] = {
            bookElement: this.bookElement.shortName,
            position: this.lastContentItemID,
            lastAccessTime: Date.now(),
            meapVersion: this.bookElement.meapVersion,
            reviewVersion: this.bookElement.reviewVersion
        };
    };
    Progress.prototype.storeLatestPage = function (lastContentItemId) {
        var relativePath = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getBookPageUrl */ .Z.getBookPageUrl("book", _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book */ .UU.book && _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.slug */ .UU.book.slug, _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.bookElement */ .UU.bookElement && _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.bookElement.shortName */ .UU.bookElement.shortName, _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.bookElement */ .UU.bookElement && _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.bookElement.meapVersion */ .UU.bookElement.meapVersion ? _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.bookElement.meapVersion */ .UU.bookElement.meapVersion : 0, 0) + (lastContentItemId || this.lastContentItemID || "");
        if (relativePath.indexOf("#!/") == 0) {
            relativePath = relativePath.substring("#!/".length);
        }
        if (relativePath.indexOf("/") == 0) {
            relativePath = relativePath.substring(1);
        }
        _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__/* .ProgressProvider.storeLatestPage */ .w.storeLatestPage(relativePath);
    };
    Progress.prototype.getLatestPage = function () {
        return _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__/* .ProgressProvider.getLatestPage */ .w.getLatestPage();
    };
    Progress.prototype.resetLatestBookPage = function () {
        _services_progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_2__/* .ProgressProvider.storeLatestPage */ .w.storeLatestPage("");
    };
    Progress.prototype.getLatestLocation = function () {
        if (!this.progressMap || _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book */ .UU.book == null || !this.progressMap[_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.shortName */ .UU.book.shortName]) {
            return;
        }
        var item = this.progressMap[_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.shortName */ .UU.book.shortName];
        if (item.bookElement != _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.bookElement.shortName */ .UU.bookElement.shortName) {
            return;
        }
        return item.position;
    };
    return Progress;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new Progress());


/***/ }),

/***/ 30316:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "$": () => (/* binding */ ChapterCommands)
});

// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js
var injectStylesIntoStyleTag = __webpack_require__(93379);
var injectStylesIntoStyleTag_default = /*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleDomAPI.js
var styleDomAPI = __webpack_require__(7795);
var styleDomAPI_default = /*#__PURE__*/__webpack_require__.n(styleDomAPI);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertBySelector.js
var insertBySelector = __webpack_require__(90569);
var insertBySelector_default = /*#__PURE__*/__webpack_require__.n(insertBySelector);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js
var setAttributesWithoutAttributes = __webpack_require__(3565);
var setAttributesWithoutAttributes_default = /*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertStyleElement.js
var insertStyleElement = __webpack_require__(19216);
var insertStyleElement_default = /*#__PURE__*/__webpack_require__.n(insertStyleElement);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleTagTransform.js
var styleTagTransform = __webpack_require__(44589);
var styleTagTransform_default = /*#__PURE__*/__webpack_require__.n(styleTagTransform);
// EXTERNAL MODULE: ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/ts/features/bookEnchancements/chapterCommands/chapter-commands.scss
var chapter_commands = __webpack_require__(90827);
;// CONCATENATED MODULE: ./src/ts/features/bookEnchancements/chapterCommands/chapter-commands.scss

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (styleTagTransform_default());
options.setAttributes = (setAttributesWithoutAttributes_default());

      options.insert = insertBySelector_default().bind(null, "head");
    
options.domAPI = (styleDomAPI_default());
options.insertStyleElement = (insertStyleElement_default());

var update = injectStylesIntoStyleTag_default()(chapter_commands/* default */.Z, options);




       /* harmony default export */ const chapterCommands_chapter_commands = (chapter_commands/* default */.Z && chapter_commands/* default.locals */.Z.locals ? chapter_commands/* default.locals */.Z.locals : undefined);

// EXTERNAL MODULE: ./src/ts/features/discussions/DiscussionModule.ts
var DiscussionModule = __webpack_require__(76043);
// EXTERNAL MODULE: ./src/ts/utils/GlobalStateInfo.ts
var GlobalStateInfo = __webpack_require__(98498);
// EXTERNAL MODULE: ./src/ts/features/bookEnchancements/textSelection/PointingSelection.tsx + 1 modules
var PointingSelection = __webpack_require__(44056);
// EXTERNAL MODULE: ./src/ts/services/PointingLinkProvider.ts
var PointingLinkProvider = __webpack_require__(6422);
;// CONCATENATED MODULE: ./src/ts/features/bookEnchancements/chapterCommands/ChapterCommands.ts





var ChapterCommandsClass = /** @class */ (function () {
    function ChapterCommandsClass() {
        var _this = this;
        $(document).on("click", "#chapter-commands .chapter-discussions-button", function () {
            $(document).trigger("chapterCommands", "discussions");
            DiscussionModule/* DiscussionModule.requestOpen */.R.requestOpen(GlobalStateInfo/* GlobalStateInfo.book */.UU.book, GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement);
        });
        $(document).on("click", "#chapter-commands .chapter-share-button", function () {
            $(document).trigger("chapterCommands", "share");
            PointingSelection.PointingSelection.createPointingSelection(GlobalStateInfo/* GlobalStateInfo.book */.UU.book, GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement, {
                $selectedParagraphs: _this.getAllParagraphs(),
                createAction: function (paragraphIds) {
                    return PointingLinkProvider/* default.createPointingLink */.Z.createPointingLink(GlobalStateInfo/* GlobalStateInfo.book */.UU.book, GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement, paragraphIds, false);
                }
            });
        });
        $(document).on("chapterCommandsSetForumCount", function (e, totalCount) {
            $("#chapter-commands .chapter-discussions-button .chapter-commands-label").html(totalCount || "&nbsp;");
        });
    }
    ChapterCommandsClass.prototype.insertChapterCommands = function () {
        return;
        if ($("#chapter-commands").length > 0) {
            return;
        }
        var $introductionSummary = $(".introduction-summary");
        if ($introductionSummary.length == 0) {
            return;
        }
        $introductionSummary.append(this.getHtml());
    };
    ChapterCommandsClass.prototype.getAllParagraphs = function () {
        var result = [];
        var $all = $("#book-markup-container .readable-text");
        for (var i = 0; i < $all.length; i++) {
            result.push($all.eq(i));
        }
        return result;
    };
    ChapterCommandsClass.prototype.getHtml = function () {
        return /*html */ "\n        <div id=\"chapter-commands\">\n            <button class=\"chapter-discussions-button\" title=\"discussions in this chapter\">\n                <svg width=\"25\" height=\"23\" viewBox=\"0 0 25 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M0.443717 21.8455C0.536061 21.8944 0.636353 21.9481 0.832775 21.9481C1.45724 21.9473 3.05396 21.4122 8.43833 18.5071C8.75926 18.5794 8.93676 18.6335 9.18087 18.7088L9.54306 18.8182C9.95217 18.9363 10.3753 18.7051 10.4953 18.3009C10.6141 17.8982 10.3813 17.4743 9.97601 17.3555L9.63351 17.2529C9.30992 17.1541 9.0556 17.0754 8.47466 16.9581C8.29678 16.921 8.11361 16.949 7.95465 17.0349C6.09717 18.0397 3.99065 19.1123 2.54153 19.7776C2.76103 19.4949 2.98508 19.2114 3.17696 18.9681C4.83273 16.8703 5.21157 16.3242 5.1355 15.7746C5.10749 15.571 4.96973 15.336 4.80321 15.2138C2.72016 13.6954 1.57229 11.6608 1.57229 9.48537C1.57229 5.09522 6.30116 1.52368 12.1136 1.52368C17.926 1.52368 22.6548 5.09522 22.6548 9.48499C22.6548 9.90622 22.9985 10.2472 23.4208 10.2472C23.844 10.2472 24.1876 9.9066 24.1876 9.48499C24.1876 4.25542 18.7707 0 12.1128 0C5.45492 0 0.0391419 4.25542 0.0391419 9.48499C0.0391419 11.9514 1.27028 14.3304 3.43848 16.0903C3.10846 16.5861 2.4454 17.4251 1.97005 18.0276C0.257892 20.1977 -0.0993748 20.7166 0.0213542 21.2831C0.0679049 21.5034 0.244646 21.7392 0.443717 21.8455Z\" fill=\"currentColor\"/>\n                    <path d=\"M24.1695 15.4458C24.1695 12.6649 21.336 10.4028 17.853 10.4028C14.3704 10.4028 11.5369 12.6653 11.5369 15.4458C11.5369 18.1473 14.2096 20.3594 17.5555 20.4843C18.1982 21.0164 20.0931 22.3524 23.3244 22.7619C23.3566 22.7656 23.3922 22.7679 23.4243 22.7679C23.6998 22.7679 23.9682 22.6146 24.1044 22.3773C24.3728 21.9137 24.2074 21.6348 23.2957 20.0869C23.0792 19.719 22.7616 19.1786 22.5648 18.8119C23.5916 17.893 24.1695 16.6921 24.1695 15.4458ZM21.2111 17.944C20.5439 18.4292 20.8746 18.9916 21.9722 20.8555C21.9949 20.8942 22.0168 20.9316 22.0414 20.971C19.6091 20.3522 18.4082 19.2021 18.3965 19.1911C18.2527 19.0476 18.0566 18.9663 17.853 18.9663C15.2159 18.9663 13.0704 17.387 13.0704 15.4458C13.0704 13.5051 15.2159 11.9261 17.853 11.9261C20.4905 11.9261 22.6368 13.5051 22.6368 15.4458C22.6364 16.3867 22.1292 17.2746 21.2111 17.944Z\" fill=\"currentColor\"/>\n                </svg>\n                <div class=\"chapter-commands-label\">&nbsp;</div>\n            </button>\n            <div class=\"_separator\"></div>\n            <button class=\"chapter-share-button\">\n                <svg width=\"19\" height=\"23\" viewBox=\"0 0 19 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M13.7106 14.9364L13.7738 14.9732L13.828 14.9242C14.3315 14.4691 14.9882 14.18 15.7209 14.18C17.2757 14.18 18.5409 15.4452 18.5409 17C18.5409 18.5548 17.2757 19.82 15.7209 19.82C14.1662 19.82 12.9009 18.5548 12.9009 17C12.9009 16.7889 12.9297 16.5768 12.9782 16.3732L12.9954 16.3011L12.9314 16.2637L5.81139 12.1037L5.7474 12.0663L5.69301 12.1166C5.17007 12.6008 4.48389 12.9 3.72095 12.9C2.11618 12.9 0.820947 11.6048 0.820947 10C0.820947 8.39523 2.11618 7.1 3.72095 7.1C4.48389 7.1 5.17007 7.39918 5.69301 7.88338L5.74734 7.93369L5.81131 7.89639L12.8613 3.78639L12.9241 3.74978L12.9087 3.67876C12.8591 3.45094 12.8209 3.22922 12.8209 3C12.8209 1.39523 14.1162 0.1 15.7209 0.1C17.3257 0.1 18.6209 1.39523 18.6209 3C18.6209 4.60477 17.3257 5.9 15.7209 5.9C14.958 5.9 14.2718 5.60082 13.7489 5.11662L13.6946 5.06632L13.6306 5.10361L6.58058 9.21361L6.51779 9.25022L6.53323 9.32124C6.58275 9.54906 6.62095 9.77078 6.62095 10C6.62095 10.2292 6.58275 10.4509 6.53323 10.6788L6.51778 10.7498L6.58064 10.7864L13.7106 14.9364ZM16.8209 3C16.8209 2.39477 16.3262 1.9 15.7209 1.9C15.1157 1.9 14.6209 2.39477 14.6209 3C14.6209 3.60523 15.1157 4.1 15.7209 4.1C16.3262 4.1 16.8209 3.60523 16.8209 3ZM2.62095 10C2.62095 10.6052 3.11572 11.1 3.72095 11.1C4.32618 11.1 4.82095 10.6052 4.82095 10C4.82095 9.39477 4.32618 8.9 3.72095 8.9C3.11572 8.9 2.62095 9.39477 2.62095 10ZM14.6209 17.02C14.6209 17.6252 15.1157 18.12 15.7209 18.12C16.3262 18.12 16.8209 17.6252 16.8209 17.02C16.8209 16.4148 16.3262 15.92 15.7209 15.92C15.1157 15.92 14.6209 16.4148 14.6209 17.02Z\" fill=\"#828282\" stroke=\"currentColor\" stroke-width=\"0.2\"/>\n                </svg>\n                <div class=\"chapter-commands-label\">share</div>\n            </button>\n            <div class=\"proximity-container\"></div>\n        </div>";
    };
    return ChapterCommandsClass;
}());
var ChapterCommands = new ChapterCommandsClass();


/***/ }),

/***/ 75618:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "f": () => (/* binding */ LinkPreviewerModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var LinkPreviewerModuleClass = /** @class */ (function () {
    function LinkPreviewerModuleClass() {
    }
    LinkPreviewerModuleClass.prototype.showBrowsablePreview = function (link, $browsable) {
        if (!this.shouldShowLinkPreviewOnPage()) {
            return;
        }
        this.getSource().then(function (_a) {
            var LinkPreviewer = _a.LinkPreviewer;
            return LinkPreviewer.showBrowsablePreview(link, $browsable);
        });
    };
    LinkPreviewerModuleClass.prototype.showWithinChapterPreview = function (link, $readableText) {
        if (!this.shouldShowLinkPreviewOnPage()) {
            return;
        }
        this.getSource().then(function (_a) {
            var LinkPreviewer = _a.LinkPreviewer;
            return LinkPreviewer.showWithinChapterPreview(link, $readableText);
        });
    };
    LinkPreviewerModuleClass.prototype.showBookElementPreview = function (link, previewDetails) {
        if (!this.shouldShowLinkPreviewOnPage()) {
            return;
        }
        this.getSource().then(function (_a) {
            var LinkPreviewer = _a.LinkPreviewer;
            return LinkPreviewer.showBookElementPreview(link, previewDetails);
        });
    };
    LinkPreviewerModuleClass.prototype.hidePreview = function (dontHideIfAbovePopup, hideImmediately) {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var LinkPreviewer = _a.LinkPreviewer;
            return LinkPreviewer.hidePreview(dontHideIfAbovePopup, hideImmediately);
        });
    };
    LinkPreviewerModuleClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var LinkPreviewer = _a.LinkPreviewer;
            return LinkPreviewer.clean();
        });
    };
    LinkPreviewerModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
            _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.loadVelocityCode */ .j.loadVelocityCode();
        }
        return this.sourcePromise;
    };
    LinkPreviewerModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | linkPreviewer */ 2637).then(__webpack_require__.bind(__webpack_require__, 55512));
    };
    LinkPreviewerModuleClass.prototype.shouldShowLinkPreviewOnPage = function () {
        return !$(document.body).is(".scrapbook-page");
    };
    return LinkPreviewerModuleClass;
}());
var LinkPreviewerModule = new LinkPreviewerModuleClass();


/***/ }),

/***/ 44056:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "PointingSelection": () => (/* binding */ PointingSelection)
});

// EXTERNAL MODULE: ./src/ts/utils/EventUtils.ts
var EventUtils = __webpack_require__(67463);
// EXTERNAL MODULE: ./src/ts/utils/BookContentUtils.ts
var BookContentUtils = __webpack_require__(52810);
// EXTERNAL MODULE: ./src/ts/utils/BookViewDOMUtils.ts
var BookViewDOMUtils = __webpack_require__(69619);
// EXTERNAL MODULE: ./src/ts/managers/NotificationsManager.ts
var NotificationsManager = __webpack_require__(54273);
// EXTERNAL MODULE: ./src/ts/utils/DynamicCodeLoader.ts
var DynamicCodeLoader = __webpack_require__(83000);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js
var injectStylesIntoStyleTag = __webpack_require__(93379);
var injectStylesIntoStyleTag_default = /*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleDomAPI.js
var styleDomAPI = __webpack_require__(7795);
var styleDomAPI_default = /*#__PURE__*/__webpack_require__.n(styleDomAPI);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertBySelector.js
var insertBySelector = __webpack_require__(90569);
var insertBySelector_default = /*#__PURE__*/__webpack_require__.n(insertBySelector);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js
var setAttributesWithoutAttributes = __webpack_require__(3565);
var setAttributesWithoutAttributes_default = /*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertStyleElement.js
var insertStyleElement = __webpack_require__(19216);
var insertStyleElement_default = /*#__PURE__*/__webpack_require__.n(insertStyleElement);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleTagTransform.js
var styleTagTransform = __webpack_require__(44589);
var styleTagTransform_default = /*#__PURE__*/__webpack_require__.n(styleTagTransform);
// EXTERNAL MODULE: ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/ts/features/bookEnchancements/textSelection/pointing-selection.scss
var pointing_selection = __webpack_require__(49070);
;// CONCATENATED MODULE: ./src/ts/features/bookEnchancements/textSelection/pointing-selection.scss

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (styleTagTransform_default());
options.setAttributes = (setAttributesWithoutAttributes_default());

      options.insert = insertBySelector_default().bind(null, "head");
    
options.domAPI = (styleDomAPI_default());
options.insertStyleElement = (insertStyleElement_default());

var update = injectStylesIntoStyleTag_default()(pointing_selection/* default */.Z, options);




       /* harmony default export */ const textSelection_pointing_selection = (pointing_selection/* default */.Z && pointing_selection/* default.locals */.Z.locals ? pointing_selection/* default.locals */.Z.locals : undefined);

// EXTERNAL MODULE: ./src/ts/utils/ValueUtils.ts
var ValueUtils = __webpack_require__(3199);
// EXTERNAL MODULE: ./src/ts/utils/GlobalStateInfo.ts
var GlobalStateInfo = __webpack_require__(98498);
;// CONCATENATED MODULE: ./src/ts/features/bookEnchancements/textSelection/PointingSelection.tsx








var $document = $(document);
var $window = $(window);
var State;
(function (State) {
    State[State["Default"] = 0] = "Default";
    State[State["DisplayingActionResult"] = 1] = "DisplayingActionResult";
})(State || (State = {}));
var PointingSelectionClass = /** @class */ (function () {
    function PointingSelectionClass() {
        this.dragStartPosition = 0;
        this.$draggedPoint = null;
        this.singleSelectedParagraphIds = [];
        this.pointingInfoBox = document.getElementById("pointing-info-box");
        if (this.pointingInfoBox == null) {
            $(document.body).append("<div id=\"pointing-info-box\"></div>");
            this.pointingInfoBox = document.getElementById("pointing-info-box");
        }
        this.$pointingInfoBox = $(this.pointingInfoBox);
        this.handleBoxClose = this.handleBoxClose.bind(this);
        this.handleParagraphClick = this.handleParagraphClick.bind(this);
        this.handleActionClick = this.handleActionClick.bind(this);
        this.handleSecondaryActionClick = this.handleSecondaryActionClick.bind(this);
        this.handlePositionPointMouseDown = this.handlePositionPointMouseDown.bind(this);
        this.handleDocumentMouseMove = this.handleDocumentMouseMove.bind(this);
        this.handleDocumentMouseUp = this.handleDocumentMouseUp.bind(this);
        this.handleDragPaused = this.handleDragPaused.bind(this);
        this.handleResizeStop = this.handleResizeStop.bind(this);
        $document.on("mouseup", this.handleDocumentMouseUp);
        this.$pointingInfoBox.on("click", ".pointing-info-close", this.handleBoxClose);
        this.$pointingInfoBox.on("click", ".pointing-info-create-link-icon, .pointing-info-try-again-icon, .pointing-info-create-action-link", this.handleActionClick);
        this.$pointingInfoBox.on("click", ".pointing-info-secondary-action-link", this.handleSecondaryActionClick);
    }
    PointingSelectionClass.prototype.initialize = function () {
        this.clean();
    };
    PointingSelectionClass.prototype.isSelectingParagraphs = function () {
        return this.$pointingInfoBox != null && this.$pointingInfoBox.is(".shown");
    };
    PointingSelectionClass.prototype.clean = function () {
        this.startSectionParagraph = null;
        this.endSectionParagraph = null;
        this.$draggedPoint = null;
        this.error = "";
        this.pointingLink = "";
        this.config = null;
        this.state = State.Default;
        if (this.$pointingInfoBox.is(".shown")) {
            this.hideBox();
        }
        $document.off("mousemove", this.handleDocumentMouseMove);
        $window.off("resizestop", this.handleResizeStop);
        clearTimeout(this.dragPauseTimeoutId);
    };
    PointingSelectionClass.prototype.createPointingSelection = function (book, bookElement, config) {
        var $selectedParagraphs = config.$selectedParagraphs || [];
        if ($selectedParagraphs.length == 1
            && ($selectedParagraphs[0].attr("refid") == "1" || this.isHeading($selectedParagraphs[0]))) {
            try {
                var $newSelectedParagraphs = this.getAllContainedParagraphs($selectedParagraphs[0]);
                if ($newSelectedParagraphs != null && $newSelectedParagraphs.length > 1) {
                    $selectedParagraphs = $newSelectedParagraphs;
                }
            }
            catch (e) {
                console.log(e);
            }
        }
        this.singleSelectedParagraphIds = $selectedParagraphs.map(function (it) { return it.attr("id"); });
        this.startSectionParagraph = $selectedParagraphs && $selectedParagraphs.length ? $selectedParagraphs[0][0] : null;
        this.endSectionParagraph = $selectedParagraphs && $selectedParagraphs.length ? $selectedParagraphs[$selectedParagraphs.length - 1][0] : null;
        $("#track-point-column").addClass("shown").removeClass("hidden");
        this.$pointingStartPoint = $("#pointing-start-point");
        this.$pointingEndPoint = $("#pointing-end-point");
        this.$pointingStartPoint.off("mousedown", this.handlePositionPointMouseDown);
        this.$pointingEndPoint.off("mousedown", this.handlePositionPointMouseDown);
        this.$pointingStartPoint.on("mousedown", this.handlePositionPointMouseDown);
        this.$pointingEndPoint.on("mousedown", this.handlePositionPointMouseDown);
        var allTextFragments = BookContentUtils/* default.getTextFragmentElements */.Z.getTextFragmentElements();
        if (allTextFragments && allTextFragments[allTextFragments.length - 1]) {
            this.lastParagraphId = allTextFragments[allTextFragments.length - 1].id;
        }
        else {
            this.lastParagraphId = 1000;
        }
        this.state = State.Default;
        this.error = "";
        this.pointingLink = "";
        this.config = config;
        this.renderCurrentState();
        this.showBox();
        this.makeParagraphsClickable();
    };
    PointingSelectionClass.prototype.getAllContainedParagraphs = function ($element) {
        var headingIds = [];
        var sectionHeadingIds = [];
        var $paragraphs = [];
        var id = $element.attr("id");
        if (id == "1") {
            $("[refid]").each(function (index, element) { $paragraphs.push($(element)); });
            return $paragraphs;
        }
        var $headings = BookContentUtils/* default.getHeadings */.Z.getHeadings();
        var $sectionHeadings = BookContentUtils/* default.getSectionHeadings */.Z.getSectionHeadings();
        $headings.each(function (index, element) { headingIds.push($(element).attr("id")); });
        $sectionHeadings.each(function (index, element) { sectionHeadingIds.push($(element).attr("id")); });
        ValueUtils/* ValueUtils.removeItemFromArray */.d.removeItemFromArray(headingIds, id);
        if (sectionHeadingIds.indexOf(id) >= 0) {
            headingIds = headingIds.filter(function (it) { return sectionHeadingIds.indexOf(it) >= 0; });
        }
        for (var i = +id; i < 500; i++) {
            if (headingIds.indexOf("".concat(i)) >= 0) {
                break;
            }
            $paragraphs.push($("[refid='".concat(i, "']")));
        }
        return $paragraphs;
    };
    PointingSelectionClass.prototype.isHeading = function ($element) {
        var $headings = BookContentUtils/* default.getHeadings */.Z.getHeadings();
        var id = $element.attr("id");
        for (var i = 0; i < $headings.length; i++) {
            if ($headings.eq(i).attr("id") == id) {
                return true;
            }
        }
        return false;
    };
    PointingSelectionClass.prototype.handlePositionPointMouseDown = function (e) {
        var $currentTarget = $(e.currentTarget);
        this.$draggedPoint = $currentTarget;
        $document.on("mousemove", this.handleDocumentMouseMove);
        this.dragStartPosition = e.pageY;
        e.preventDefault();
        e.stopImmediatePropagation();
        return false;
    };
    PointingSelectionClass.prototype.handleDocumentMouseMove = function (e) {
        if (!this.$draggedPoint) {
            return;
        }
        clearTimeout(this.dragPauseTimeoutId);
        var currentChange = e.pageY - this.dragStartPosition;
        var currentTranslateY = BookViewDOMUtils/* default.getComputedTranslateY */.Z.getComputedTranslateY(this.$draggedPoint[0]);
        this.$draggedPoint.css("transform", "translateY(".concat(currentTranslateY + currentChange, "px)"));
        this.dragStartPosition = e.pageY;
        this.dragPauseTimeoutId = setTimeout(this.handleDragPaused, 100);
    };
    PointingSelectionClass.prototype.handleDocumentMouseUp = function (e) {
        $document.off("mousemove", this.handleDocumentMouseMove);
        this.handleDragPaused(e, true);
        this.dragStartPosition = 0;
        this.$draggedPoint = null;
    };
    PointingSelectionClass.prototype.handleDragPaused = function (e, animateToTarget) {
        if (!this.$draggedPoint) {
            return;
        }
        var $startSectionParagraph = $(this.startSectionParagraph);
        var $endSectionParagraph = $(this.endSectionParagraph);
        var isStartPointDragged = this.$draggedPoint.is("#pointing-start-point");
        var currentPointTranslateY = BookViewDOMUtils/* default.getComputedTranslateY */.Z.getComputedTranslateY(this.$draggedPoint[0]);
        var startParagraphReferenceY = this.getStartIconPosition();
        var endParagraphReferenceY = this.getEndIconPosition();
        var currentStartParagraphId = parseInt($startSectionParagraph.attr("id"));
        var currentEndParagraphId = parseInt($endSectionParagraph.attr("id"));
        var referentParagraph = null;
        if (currentPointTranslateY < startParagraphReferenceY) {
            for (var i = currentStartParagraphId; i >= 0; i--) {
                var paragraph = document.getElementById(i + "");
                var isReferentParagraph = this.isReferentParagraph(paragraph, currentPointTranslateY);
                if (isReferentParagraph) {
                    referentParagraph = paragraph;
                    break;
                }
            }
        }
        else if (currentPointTranslateY > endParagraphReferenceY) {
            var finalParagraphId = this.lastParagraphId;
            for (var i = currentEndParagraphId; i <= finalParagraphId; i++) {
                var paragraph = document.getElementById(i + "");
                var isReferentParagraph = this.isReferentParagraph(paragraph, currentPointTranslateY);
                if (isReferentParagraph) {
                    referentParagraph = paragraph;
                    break;
                }
            }
        }
        else {
            for (var i = currentStartParagraphId; i <= currentEndParagraphId; i++) {
                var paragraph = document.getElementById(i + "");
                var isReferentParagraph = this.isReferentParagraph(paragraph, currentPointTranslateY);
                if (isReferentParagraph) {
                    referentParagraph = paragraph;
                    break;
                }
            }
        }
        if (referentParagraph) {
            var referentParagraphId = parseInt(referentParagraph.id);
            if (isStartPointDragged) {
                if (referentParagraphId <= currentEndParagraphId) {
                    this.startSectionParagraph = referentParagraph;
                }
                else {
                    this.startSectionParagraph = this.endSectionParagraph;
                    this.endSectionParagraph = referentParagraph;
                }
            }
            else {
                if (referentParagraphId >= currentStartParagraphId) {
                    this.endSectionParagraph = referentParagraph;
                }
                else {
                    this.endSectionParagraph = this.startSectionParagraph;
                    this.startSectionParagraph = referentParagraph;
                }
            }
            if (animateToTarget === true) {
                this.error = "";
                this.state = State.Default;
                this.pointingLink = "";
                this.renderCurrentState();
            }
            else {
                this.highlightSelectedParagraphs();
            }
        }
        else {
            if (animateToTarget === true) {
                this.error = "";
                this.state = State.Default;
                this.pointingLink = "";
                this.renderStartEndIcons();
            }
        }
    };
    PointingSelectionClass.prototype.handleResizeStop = function () {
        if (!this.$pointingInfoBox || !this.$pointingInfoBox.is(".shown")) {
            return;
        }
        this.renderStartEndIcons();
    };
    PointingSelectionClass.prototype.isReferentParagraph = function (paragraph, referentPosition) {
        if (!paragraph) {
            return false;
        }
        var startPosition = this.getStartIconPositionForParagraph(paragraph);
        var endPosition = this.getEndIconPositionForParagraph(paragraph);
        return startPosition <= referentPosition && referentPosition <= endPosition;
    };
    PointingSelectionClass.prototype.renderCurrentState = function () {
        this.highlightSelectedParagraphs();
        this.renderStartEndIcons();
        this.$pointingInfoBox.html(Mustache.render(POINTING_TEMPLATE, {
            hideLinkIcon: this.config.hideLinkIcon,
            isDefault: this.state == State.Default,
            error: this.error,
            pointingLink: this.pointingLink,
            isLoading: this.state != State.Default && !this.error && !this.pointingLink,
            actionLabel: this.getActionLabel(),
            secondaryLabel: $("body.user-is-admin").length > 0 && this.getActionLabel() == "create link" ? "<i class='fa fa-download'/> md" : ""
        }));
        var $copyToClipboardButtons = this.$pointingInfoBox.find(".copy-to-clipboard");
        if ($copyToClipboardButtons.length) {
            this.handleCopyToCliboardElementCreated();
        }
        var $inputs = this.$pointingInfoBox.find("input");
        $inputs.select();
    };
    PointingSelectionClass.prototype.getActionLabel = function () {
        if (this.config && this.config.selectSingleParagraphs) {
            if (this.singleSelectedParagraphIds == null || this.singleSelectedParagraphIds.length == 0) {
                if (this.config != null && this.config.emptyLabel) {
                    return this.config.emptyLabel;
                }
            }
            return (this.config != null ? this.config.actionLabel : "") || "create link";
        }
        else {
            if (!this.startSectionParagraph && !this.endSectionParagraph) {
                if (this.config != null && this.config.emptyLabel) {
                    return this.config.emptyLabel;
                }
            }
            return (this.config != null ? this.config.actionLabel : "") || "create link";
        }
    };
    PointingSelectionClass.prototype.hideBox = function (callback) {
        var _this = this;
        $window.off("resizestop", this.handleResizeStop);
        $(document.body).removeClass("pointing-selection-shown");
        this.$pointingInfoBox.removeClass("shown");
        this.$pointingStartPoint.removeClass("shown");
        this.$pointingEndPoint.removeClass("shown");
        EventUtils/* default.setTimeout */.Z.setTimeout(function () {
            _this.$pointingInfoBox.css("display", "none");
            callback && callback();
        }, 250);
    };
    PointingSelectionClass.prototype.showBox = function () {
        $(document.body).addClass("pointing-selection-shown");
        this.renderCurrentState();
        this.$pointingInfoBox.css("display", "block");
        this.$pointingInfoBox.addClass("shown");
        $window.off("resizestop", this.handleResizeStop);
        $window.on("resizestop", this.handleResizeStop);
    };
    PointingSelectionClass.prototype.handleBoxClose = function () {
        var _this = this;
        this.unmakeParagraphsClickable();
        $(".paragraph-selected").removeClass("paragraph-selected");
        this.hideBox(function () { return _this.clean(); });
    };
    PointingSelectionClass.prototype.makeParagraphsClickable = function () {
        $(".readable-text").addClass("clickable");
        $document.off("click", ".readable-text", this.handleParagraphClick);
        $document.on("click", ".readable-text", this.handleParagraphClick);
    };
    PointingSelectionClass.prototype.unmakeParagraphsClickable = function () {
        $(".readable-text").removeClass("clickable");
        $document.off("click", ".readable-text", this.handleParagraphClick);
    };
    PointingSelectionClass.prototype.handleParagraphClick = function (e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        var currentClickedParagraph = e.currentTarget;
        var hasChanged = false;
        if (this.config && this.config.selectSingleParagraphs) {
            var currentClickedParagraphId = currentClickedParagraph.id;
            if (this.singleSelectedParagraphIds.indexOf(currentClickedParagraphId) == -1) {
                this.singleSelectedParagraphIds.push(currentClickedParagraphId);
            }
            else {
                ValueUtils/* ValueUtils.removeItemFromArray */.d.removeItemFromArray(this.singleSelectedParagraphIds, currentClickedParagraphId);
            }
            hasChanged = true;
        }
        else {
            if (this.startSectionParagraph == null) {
                this.startSectionParagraph = currentClickedParagraph;
            }
            if (this.endSectionParagraph == null) {
                this.endSectionParagraph = currentClickedParagraph;
            }
            var currentClickedParagraphId = parseInt(currentClickedParagraph.id);
            var startSectionParagraphId = parseInt(this.startSectionParagraph.id);
            var endSectionParagraphId = parseInt(this.endSectionParagraph.id);
            if (startSectionParagraphId + 1 == endSectionParagraphId
                && (currentClickedParagraphId === startSectionParagraphId
                    || currentClickedParagraphId === endSectionParagraphId)) {
                this.startSectionParagraph = currentClickedParagraph;
                this.endSectionParagraph = currentClickedParagraph;
                hasChanged = false;
            }
            else if (currentClickedParagraphId === startSectionParagraphId
                || currentClickedParagraphId === endSectionParagraphId) {
                this.startSectionParagraph = currentClickedParagraph;
                this.endSectionParagraph = currentClickedParagraph;
                hasChanged = false;
            }
            else {
                if (currentClickedParagraphId <= startSectionParagraphId) {
                    this.startSectionParagraph = currentClickedParagraph;
                    hasChanged = false;
                }
                if (currentClickedParagraphId >= endSectionParagraphId) {
                    this.endSectionParagraph = currentClickedParagraph;
                    hasChanged = false;
                }
            }
            if (startSectionParagraphId < currentClickedParagraphId
                && currentClickedParagraphId < endSectionParagraphId) {
                if (Math.abs(startSectionParagraphId - currentClickedParagraphId) < Math.abs(endSectionParagraphId - currentClickedParagraphId)) {
                    this.startSectionParagraph = currentClickedParagraph;
                    hasChanged = false;
                }
                else {
                    this.endSectionParagraph = currentClickedParagraph;
                    hasChanged = false;
                }
            }
        }
        if (hasChanged) {
            this.state = State.Default;
            this.error = "";
            this.pointingLink = "";
        }
        this.renderCurrentState();
        return false;
    };
    PointingSelectionClass.prototype.handleSecondaryActionClick = function () {
        var selectedParagraphs = this.getSelectedParagraphs();
        if (selectedParagraphs.length == 0) {
            this.handleBoxClose();
            return;
        }
        this.handleBoxClose();
        DynamicCodeLoader/* DynamicCodeLoader.loadTurndownCode */.j.loadTurndownCode().then(function () {
            var turndown = new window.TurndownService();
            var html = "";
            for (var _i = 0, selectedParagraphs_1 = selectedParagraphs; _i < selectedParagraphs_1.length; _i++) {
                var $p = selectedParagraphs_1[_i];
                if ($p.is(".readable-text")) {
                    html += $p.prop("outerHTML");
                }
                else if ($p.is(".figure-container")) {
                    if ($p.find("h5").length == 0) {
                        html += "\n\n<figure>\n                                    <img src=\"".concat($p.find("img").attr("src"), "\" alt=\"").concat($p.find("img").attr("alt"), "\">\n                                </figure>\n");
                    }
                    else {
                        html += "\n\n<figure>\n                                    <img src=\"".concat($p.find("img").attr("src"), "\" alt=\"").concat($p.find("img").attr("alt"), "\">\n                                    <figcaption>").concat($p.find("h5").html(), "</figcaption>\n                                </figure>\n");
                    }
                }
                else if ($p.is(".listing-container")) {
                    if ($p.find("h5").length) {
                        html += "\n<p>".concat($p.find("h5").html(), "</p>\n");
                    }
                    var $clone = $p.find("pre").clone();
                    $clone.find(".line-container, .hljs-line-numbers").remove();
                    html += "\n<pre>".concat($clone.text(), "</pre>\n");
                }
                else if ($p.is(".table-container")) {
                    if ($p.find("h5").length) {
                        html += "\n<p>".concat($p.find("h5").html(), "</p>\n");
                    }
                    html += $p.find("table").prop("outerHTML");
                }
            }
            console.log(html);
            turndown.addRule('pre', {
                filter: ['pre'],
                replacement: function (content, node) {
                    // Check if <pre> contains a <code> element
                    var codeElement = node.querySelector('code');
                    var codeContent = codeElement ? codeElement.textContent : node.textContent;
                    // Extract language from class (e.g., class="language-python")
                    if (codeElement && codeElement.className) {
                        var match = codeElement.className.match(/language-(\w+)/);
                    }
                    // Trim trailing newlines and ensure proper formatting
                    codeContent = codeContent.trim();
                    // Return fenced code block
                    return "```\n".concat(codeContent, "\n```\n");
                }
            });
            turndown.addRule('figure', {
                filter: ['figure'],
                replacement: function (content, node) {
                    // Extract <img> and <figcaption> from the figure
                    var img = node.querySelector('img');
                    var figcaption = node.querySelector('figcaption');
                    var markdown = '';
                    if (img) {
                        var src = img.getAttribute('src') || '';
                        var alt = img.getAttribute('alt') || '';
                        markdown += "![".concat(alt, "](").concat(src, ")\n");
                    }
                    if (figcaption) {
                        // Append caption as italicized text or custom format
                        markdown += "*".concat(figcaption.textContent.trim(), "*\n");
                    }
                    return markdown + '\n';
                }
            });
            var markdown = turndown.turndown(html);
            var blob = new Blob([markdown], { type: 'text/markdown' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = "".concat(GlobalStateInfo/* GlobalStateInfo.book.shortName */.UU.book.shortName, "-").concat(GlobalStateInfo/* GlobalStateInfo.bookElement.shortName */.UU.bookElement.shortName, "-").concat(selectedParagraphs[0].attr("refid"), ".md"); // File name for the download
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
    };
    PointingSelectionClass.prototype.handleActionClick = function () {
        var _this = this;
        if (this.config && this.config.selectSingleParagraphs) {
            if (this.singleSelectedParagraphIds == null || this.singleSelectedParagraphIds.length == 0) {
                return;
            }
        }
        else {
            if (this.startSectionParagraph == null || this.endSectionParagraph == null) {
                return;
            }
        }
        this.error = "";
        this.pointingLink = "";
        this.unmakeParagraphsClickable();
        this.state = State.DisplayingActionResult;
        this.config.createAction(this.getSelectedParagraphs().map(function ($it) { return $it.attr("id"); })).then(function (value) {
            if (_this.config.automaticallyCloseOnActionDone) {
                _this.handleBoxClose();
            }
            else {
                _this.pointingLink = value || "";
                _this.renderCurrentState();
            }
        }).catch(function (error) {
            _this.error = "Error when creating pointing link";
            _this.pointingLink = "";
            _this.renderCurrentState();
        });
        this.renderCurrentState();
    };
    PointingSelectionClass.prototype.highlightSelectedParagraphs = function () {
        $(".paragraph-selected").removeClass("paragraph-selected");
        this.getSelectedParagraphs().forEach(function ($it) { return $it.addClass("paragraph-selected"); });
    };
    PointingSelectionClass.prototype.renderStartEndIcons = function () {
        if (this.config && this.config.selectSingleParagraphs) {
            this.$pointingStartPoint.removeClass("shown");
            this.$pointingEndPoint.removeClass("shown");
            return;
        }
        if (!this.$pointingStartPoint || !this.$pointingEndPoint) {
            this.$pointingStartPoint.removeClass("shown");
            this.$pointingEndPoint.removeClass("shown");
            return;
        }
        this.$pointingStartPoint.addClass("shown");
        this.$pointingEndPoint.addClass("shown");
        if (this.$pointingStartPoint.is('.velocity-animating')) {
            return;
        }
        this.$pointingStartPoint.velocity({
            translateY: [this.getStartIconPosition(), BookViewDOMUtils/* default.getComputedTranslateY */.Z.getComputedTranslateY(this.$pointingStartPoint[0])]
        }, 250);
        this.$pointingEndPoint.velocity({
            translateY: [this.getEndIconPosition(), BookViewDOMUtils/* default.getComputedTranslateY */.Z.getComputedTranslateY(this.$pointingEndPoint[0])]
        }, 250);
    };
    PointingSelectionClass.prototype.getStartIconPosition = function () {
        return this.getStartIconPositionForParagraph(this.startSectionParagraph);
    };
    PointingSelectionClass.prototype.getStartIconPositionForParagraph = function (paragraph) {
        return BookContentUtils/* default.getTextElementPositionPointTop */.Z.getTextElementPositionPointTop($(paragraph)) - this.$pointingStartPoint.height() / 2;
    };
    PointingSelectionClass.prototype.getEndIconPosition = function () {
        return this.getEndIconPositionForParagraph(this.endSectionParagraph);
    };
    PointingSelectionClass.prototype.getEndIconPositionForParagraph = function (paragraph) {
        var $paragraph = $(paragraph);
        return BookContentUtils/* default.getTextElementPositionPointTop */.Z.getTextElementPositionPointTop($paragraph) + $paragraph.height() - 0.4 * this.$pointingEndPoint.height();
    };
    PointingSelectionClass.prototype.getSelectedParagraphs = function () {
        if (this.config && this.config.selectSingleParagraphs) {
            return (this.singleSelectedParagraphIds || []).map(function (it) { return $(document.getElementById(it)); });
        }
        if (!this.startSectionParagraph && !this.endSectionParagraph) {
            return [];
        }
        else if (this.startSectionParagraph && this.endSectionParagraph) {
            var startFragmentId = parseInt(this.startSectionParagraph.id);
            var endFragmentId = parseInt(this.endSectionParagraph.id);
            if (Number.isNaN(startFragmentId)
                || Number.isNaN(endFragmentId)) {
                return [];
            }
            var $selectedFragments = [];
            for (var i = startFragmentId; i <= endFragmentId; i++) {
                var currentFragment = document.getElementById(i + "");
                if (currentFragment) {
                    $selectedFragments.push($(currentFragment));
                }
            }
            return $selectedFragments;
        }
        else if (this.startSectionParagraph && !this.endSectionParagraph) {
            return [$(this.startSectionParagraph)];
        }
        else if (!this.startSectionParagraph && this.endSectionParagraph) {
            return [$(this.endSectionParagraph)];
        }
        else {
            console.log("Shouldn't be here");
            return [];
        }
    };
    PointingSelectionClass.prototype.handleCopyToCliboardElementCreated = function () {
        var _this = this;
        DynamicCodeLoader/* DynamicCodeLoader.loadClipboardCode */.j.loadClipboardCode().then(function () {
            var clipboard = new window.Clipboard("#pointing-info-box .copy-to-clipboard", {
                text: function () { return _this.pointingLink; }
            });
            clipboard.on('success', function (e) {
                return NotificationsManager/* default.showTemporaryNotification */.Z.showTemporaryNotification("Link copied to clipboard");
            });
            clipboard.on('error', function (e) {
                NotificationsManager/* default.showTemporaryNotification */.Z.showTemporaryNotification("Unfortunatly your environment doesn't support copying to clipboard");
            });
        });
    };
    return PointingSelectionClass;
}());
var POINTING_TEMPLATE = /*html */ "\n<div class='pointing-info-box-wrapper'>\n    <div class=\"pointing-info-left-container\">\n        {{#isDefault}}\n        {{^hideLinkIcon}}\n        <i class=\"fal fa-fw fa-link pointing-info-create-link-icon\" aria-hidden=\"true\" title=\"{{actionLabel}}\"></i>\n        {{/hideLinkIcon}}\n        {{/isDefault}}\n        {{#error}}\n        <i class=\"fal fa-fw fa-undo pointing-info-try-again-icon\" aria-hidden=\"true\" title=\"try again\"></i>\n        {{/error}}\n        {{#pointingLink}}\n        <i class=\"fal fa-fw fa-clipboard copy-to-clipboard\" title=\"copy to clipboard\" aria-hidden=\"true\"></i>\n        {{/pointingLink}}\n        {{#isLoading}}\n        <i class=\"fal fa-fw fa-spinner fa-spin\" title=\"loading...\" aria-hidden=\"true\"></i>\n        {{/isLoading}}\n    </div>\n    <div class=\"pointing-info-middle-container\">\n        {{#isDefault}}\n        <a href=\"javascript:void(0)\" class=\"pointing-info-create-action-link\">{{actionLabel}}</a>\n        {{#secondaryLabel}}\n        <a href=\"javascript:void(0)\" class=\"pointing-info-secondary-action-link\">{{{secondaryLabel}}}</a>\n        {{/secondaryLabel}}\n        {{/isDefault}}\n\n        {{#error}}\n        <span class=\"error-message\"> {{error}} </span>\n        {{/error}}\n        {{#pointingLink}}\n        <input readOnly type=\"text\" value=\"{{pointingLink}}\"/>\n        {{/pointingLink}}\n        {{#isCreatingLink}}\n        <span>Creating link ...</span>\n        {{/isCreatingLink}}\n    </div>\n    <div class=\"pointing-info-right-container\">\n        <i class=\"fal fa-times pointing-info-close\"></i>\n    </div>\n</div>";
var PointingSelection = new PointingSelectionClass();


/***/ }),

/***/ 76043:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "R": () => (/* binding */ DiscussionModule)
/* harmony export */ });
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);
/* harmony import */ var _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98498);
/* harmony import */ var _modules_LoginModule__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29755);
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(83000);
/* harmony import */ var _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37168);





var DiscussionModuleClass = /** @class */ (function () {
    function DiscussionModuleClass() {
    }
    DiscussionModuleClass.prototype.initalizeDiscussionNotificationParagraphs = function (book, bookElement) {
        this.getDiscussionParagraphNotificationsSource().then(function (_a) {
            var DiscussionParagraphNotifications = _a.DiscussionParagraphNotifications;
            DiscussionParagraphNotifications.initialize(book, bookElement);
        });
    };
    DiscussionModuleClass.prototype.initialize = function () {
        this.loadCodeOnInteraction = this.loadCodeOnInteraction.bind(this);
        $(document).on("click", ".text-margin-icon-bubble.forums-bubble", this.loadCodeOnInteraction);
    };
    DiscussionModuleClass.prototype.initializeIfNecessary = function (book, bookElement) {
        if (this.discussionsMenuSourcePromise == null
            || this.discussionsV2SidebarMenuSourcePromise == null) {
            return;
        }
        this.getDiscussionsMenuSource().then(function (_a) {
            var DiscussionsMenu = _a.DiscussionsMenu;
            return DiscussionsMenu.initialize(book, bookElement);
        });
    };
    DiscussionModuleClass.prototype.initializeAndOpen = function (book, bookElement) {
        this.getDiscussionsMenuSource().then(function (_a) {
            var DiscussionsMenu = _a.DiscussionsMenu;
            DiscussionsMenu.initialize(book, bookElement, bookElement != null ? bookElement.shortName : "", true);
        });
        $(document).off("click", ".text-margin-icon-bubble.forums-bubble", this.loadCodeOnInteraction);
    };
    DiscussionModuleClass.prototype.clean = function () {
        Promise.all([this.getDiscussionsMenuSource()]).then(function (_a) {
            var DiscussionsMenu = _a[0].DiscussionsMenu;
            return DiscussionsMenu.clean();
        });
    };
    DiscussionModuleClass.prototype.loadIfNotLoaded = function (bookElementShortName) {
        if (bookElementShortName === void 0) { bookElementShortName = ""; }
        if (this.discussionsMenuSourcePromise) {
            return;
        }
        this.load(bookElementShortName);
    };
    DiscussionModuleClass.prototype.load = function (bookElementShortName) {
        if (bookElementShortName === void 0) { bookElementShortName = ""; }
        this.getDiscussionsMenuSource().then(function (_a) {
            var DiscussionsMenu = _a.DiscussionsMenu;
            return DiscussionsMenu.initialize(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.book */ .UU.book, _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.bookElement */ .UU.bookElement, bookElementShortName);
        });
        $(document).off("click", ".text-margin-icon-bubble.forums-bubble", this.loadCodeOnInteraction);
    };
    DiscussionModuleClass.prototype.loadCodeOnInteraction = function (e) {
        var shouldImmediatelyOpen = e.type == "click" || _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isTouchEventOnTouchDevice */ .Z.isTouchEventOnTouchDevice(e.type);
        this.getDiscussionsMenuSource().then(function (_a) {
            var DiscussionsMenu = _a.DiscussionsMenu;
            DiscussionsMenu.initialize(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.book */ .UU.book, _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.bookElement */ .UU.bookElement);
            if (shouldImmediatelyOpen) {
                DiscussionsMenu.open();
            }
        });
        $(document).off("click", ".text-margin-icon-bubble.forums-bubble", this.loadCodeOnInteraction);
        e && e.stopImmediatePropagation();
    };
    DiscussionModuleClass.prototype.requestOpen = function (book, bookElement) {
        Promise.all([this.getDiscussionsMenuSource()]).then(function (_a) {
            var DiscussionsMenu = _a[0].DiscussionsMenu;
            if (book != null && bookElement != null) {
                DiscussionsMenu.initialize(book, bookElement, bookElement.shortName, true);
            }
            else if (book != null) {
                DiscussionsMenu.initialize(book, null, "", true);
            }
            else {
                DiscussionsMenu.initialize(null, null, "", true);
            }
        });
    };
    DiscussionModuleClass.prototype.requestShowCommentWhenReady = function (commentCommand, recursiveCount, callback, dontOpenDiscussionsMenu) {
        if (recursiveCount === void 0) { recursiveCount = 0; }
        var commentId = "", isMarkAsSpamCommand = false, isMarkAsNotSpamCommand = false, isMarkAsEditSuggestion = false;
        if (commentCommand.indexOf("not-spam-") == 0) {
            isMarkAsNotSpamCommand = true;
            commentId = commentCommand.substring("not-spam-".length);
        }
        else if (commentCommand.indexOf("spam-") == 0) {
            isMarkAsSpamCommand = true;
            commentId = commentCommand.substring("spam-".length);
        }
        else if (commentCommand.indexOf("edit-suggestion-") == 0) {
            isMarkAsEditSuggestion = true;
            commentId = commentCommand.substring("edit-suggestion-".length);
        }
        else {
            commentId = commentCommand;
        }
        Promise.all([
            this.getDiscussionsMenuSource()
        ]).then(function (_a) {
            var DiscussionsMenu = _a[0].DiscussionsMenu;
            if (isMarkAsSpamCommand || isMarkAsEditSuggestion || isMarkAsNotSpamCommand) {
                _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_4__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
                    if (data.loggedIn) {
                        if (isMarkAsSpamCommand) {
                            showCommentWhenReady(function () {
                                DiscussionsMenu.markAsSpam(commentId);
                                callback && callback();
                            });
                        }
                        else if (isMarkAsNotSpamCommand) {
                            showCommentWhenReady(function () {
                                $(document).trigger("requestNotification", "Removing spam flags");
                                DiscussionsMenu.clearSpamFlags(commentId).then(function () {
                                    $(document).trigger("requestNotification", "Spam flags removed!");
                                }).catch(function (e) { return $(document).trigger("requestNotification", "Error removing spam flags"); });
                            });
                        }
                        else if (isMarkAsEditSuggestion) {
                            DiscussionsMenu.markAsEditSuggestion(commentId)
                                .then(function () { return showCommentWhenReady(); })
                                .catch(function () { return showCommentWhenReady(); });
                        }
                    }
                    else {
                        _modules_LoginModule__WEBPACK_IMPORTED_MODULE_2__/* .LoginModule.requestLogin */ .r.requestLogin("sign in to discuss", "discussion");
                    }
                });
            }
            else {
                showCommentWhenReady();
            }
            function showCommentWhenReady(innerCallback) {
                if (innerCallback === void 0) { innerCallback = callback; }
                DiscussionsMenu.showCommentWhenReady(commentId, recursiveCount, innerCallback, dontOpenDiscussionsMenu);
            }
        });
    };
    DiscussionModuleClass.prototype.requestOpenParagraphSideMenu = function (paragraphBubble, commentId) {
        Promise.all([
            this.getDiscussionsMenuSource()
        ]).then(function (_a) {
            var DiscussionsMenu = _a[0].DiscussionsMenu;
            DiscussionsMenu.openParagraphSideMenu(paragraphBubble, commentId);
        });
    };
    DiscussionModuleClass.prototype.getDiscussionParagraphNotificationsSource = function () {
        if (!this.discussionParagraphSourcePromise) {
            this.discussionParagraphSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_3__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructDiscussionParagraphsNotificationsSourcePromise);
        }
        return this.discussionParagraphSourcePromise;
    };
    DiscussionModuleClass.prototype.constructDiscussionParagraphsNotificationsSourcePromise = function () {
        return Promise.all(/* import() | discussionParagraphNotificationsModule */[__webpack_require__.e(1029), __webpack_require__.e(6389), __webpack_require__.e(8494)]).then(__webpack_require__.bind(__webpack_require__, 56979));
    };
    DiscussionModuleClass.prototype.getDiscussionsMenuSource = function () {
        var _this = this;
        if (this.discussionsMenuSourcePromise) {
            return this.discussionsMenuSourcePromise;
        }
        if (this.discussionsV2SidebarMenuSourcePromise) {
            return this.discussionsV2SidebarMenuSourcePromise;
        }
        if (this.promiseSource) {
            return this.promiseSource;
        }
        this.promiseSource = new Promise(function (resolve, reject) {
            _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_4__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
                if (_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.getDiscussionsVersion */ .UU.getDiscussionsVersion() == _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .__DISCUSSIONS_V2__ */ .WS) {
                    _this.discussionsV2SidebarMenuSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_3__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(_this.constructdiscussionsV2SidebarMenuSourcePromise);
                    resolve(_this.discussionsV2SidebarMenuSourcePromise);
                }
                else {
                    _this.discussionsMenuSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_3__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(_this.constructDiscussionsMenuSourcePromise);
                    resolve(_this.discussionsMenuSourcePromise);
                }
            });
        });
        return this.promiseSource;
    };
    DiscussionModuleClass.prototype.constructDiscussionsMenuSourcePromise = function () {
        return Promise.all(/* import() | discussionModule */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7213), __webpack_require__.e(6706), __webpack_require__.e(9502), __webpack_require__.e(5557), __webpack_require__.e(8758), __webpack_require__.e(1389), __webpack_require__.e(8784), __webpack_require__.e(4491), __webpack_require__.e(4858), __webpack_require__.e(3006), __webpack_require__.e(55), __webpack_require__.e(271), __webpack_require__.e(7186)]).then(__webpack_require__.bind(__webpack_require__, 63346));
    };
    DiscussionModuleClass.prototype.constructdiscussionsV2SidebarMenuSourcePromise = function () {
        return Promise.all(/* import() | newDiscussionModule */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7213), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(3326), __webpack_require__.e(9502), __webpack_require__.e(5557), __webpack_require__.e(1389), __webpack_require__.e(8784), __webpack_require__.e(5788), __webpack_require__.e(4491), __webpack_require__.e(4858), __webpack_require__.e(3006), __webpack_require__.e(3861), __webpack_require__.e(3954), __webpack_require__.e(55), __webpack_require__.e(82), __webpack_require__.e(1018)]).then(__webpack_require__.bind(__webpack_require__, 71530));
    };
    return DiscussionModuleClass;
}());
var DiscussionModule = new DiscussionModuleClass();


/***/ }),

/***/ 53245:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "z": () => (/* binding */ BooksMenuModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var BooksMenuModuleClass = /** @class */ (function () {
    function BooksMenuModuleClass() {
    }
    BooksMenuModuleClass.prototype.initialize = function (book, bookElement) {
        this.getSource().then(function (_a) {
            var BooksMenu = _a.BooksMenu;
            return BooksMenu.initialize(book, bookElement);
        });
    };
    BooksMenuModuleClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var BooksMenu = _a.BooksMenu;
            return BooksMenu.clean();
        });
    };
    BooksMenuModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.loadVelocityCode */ .j.loadVelocityCode();
            _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.loadMustacheCode */ .j.loadMustacheCode();
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    BooksMenuModuleClass.prototype.open = function () {
        this.getSource().then(function (_a) {
            var BooksMenu = _a.BooksMenu;
            return BooksMenu.open();
        });
    };
    BooksMenuModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | booksModule */[__webpack_require__.e(3426), __webpack_require__.e(6746)]).then(__webpack_require__.bind(__webpack_require__, 72953));
    };
    return BooksMenuModuleClass;
}());
var BooksMenuModule = new BooksMenuModuleClass();


/***/ }),

/***/ 55293:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "S": () => (/* binding */ FaqModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var FaqModuleClass = /** @class */ (function () {
    function FaqModuleClass() {
    }
    FaqModuleClass.prototype.show = function () {
        this.getSource().then(function (_a) {
            var FaqModal = _a.FaqModal;
            return FaqModal.render(true);
        });
    };
    FaqModuleClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var FaqModal = _a.FaqModal;
            return FaqModal.clean();
        });
    };
    FaqModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    FaqModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | faqModule */[__webpack_require__.e(7034), __webpack_require__.e(7522)]).then(__webpack_require__.bind(__webpack_require__, 8872));
    };
    return FaqModuleClass;
}());
var FaqModule = new FaqModuleClass();


/***/ }),

/***/ 24646:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "e": () => (/* binding */ FeedbackModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);
/* harmony import */ var _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3199);


var FeedbackModuleClass = /** @class */ (function () {
    function FeedbackModuleClass() {
    }
    FeedbackModuleClass.prototype.showFeedbackModal = function () {
        this.getSource().then(function (_a) {
            var FeedbackModal = _a.FeedbackModal;
            return FeedbackModal.show();
        });
    };
    FeedbackModuleClass.prototype.showSubscriptionsFeedback = function () {
        this.getSource().then(function (_a) {
            var FeedbackModal = _a.FeedbackModal;
            return FeedbackModal.showSubscriptionsFeedback();
        });
    };
    FeedbackModuleClass.prototype.showSearchFeedback = function () {
        this.getSource().then(function (_a) {
            var FeedbackModal = _a.FeedbackModal;
            return FeedbackModal.showSearchFeedback();
        });
    };
    FeedbackModuleClass.prototype.showContentErrorReportModal = function (content, location) {
        if (content === void 0) { content = ""; }
        if (location === void 0) { location = ""; }
        Promise.all([
            this.getSource(),
            _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_1__/* .ValueUtils.getTimeoutPromise */ .d.getTimeoutPromise(300)
        ]).then(function (_a) {
            var FeedbackModal = _a[0].FeedbackModal;
            FeedbackModal.showContentErrorReport(content, location);
        });
    };
    FeedbackModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    FeedbackModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | feedbackModule */[__webpack_require__.e(9502), __webpack_require__.e(221), __webpack_require__.e(5536)]).then(__webpack_require__.bind(__webpack_require__, 19803));
    };
    return FeedbackModuleClass;
}());
var FeedbackModule = new FeedbackModuleClass();


/***/ }),

/***/ 48609:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "N": () => (/* binding */ HelpButtonModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var HelpButtonModuleClass = /** @class */ (function () {
    function HelpButtonModuleClass() {
    }
    HelpButtonModuleClass.prototype.load = function () {
        this.getSource();
    };
    HelpButtonModuleClass.prototype.showIntroVideo = function () {
        this.getSource().then(function (_a) {
            var HelpButtonManager = _a.HelpButtonManager;
            return HelpButtonManager.showIntroVideo();
        });
    };
    HelpButtonModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    HelpButtonModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | helpButtonModule */ 7611).then(__webpack_require__.bind(__webpack_require__, 19864));
    };
    return HelpButtonModuleClass;
}());
var HelpButtonModule = new HelpButtonModuleClass();


/***/ }),

/***/ 4734:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "N": () => (/* binding */ AppImpressionsModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var AppImpressionsModuleClass = /** @class */ (function () {
    function AppImpressionsModuleClass() {
    }
    AppImpressionsModuleClass.prototype.showModal = function () {
        this.getSource().then(function (_a) {
            var AppImpressionsModal = _a.AppImpressionsModal;
            return AppImpressionsModal.showModal();
        });
    };
    AppImpressionsModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    AppImpressionsModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | appImpressionsModule */ 8525).then(__webpack_require__.bind(__webpack_require__, 51182));
    };
    return AppImpressionsModuleClass;
}());
var AppImpressionsModule = new AppImpressionsModuleClass();


/***/ }),

/***/ 97788:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "o": () => (/* binding */ TourModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var TourModuleClass = /** @class */ (function () {
    function TourModuleClass() {
    }
    TourModuleClass.prototype.startTour = function () {
        this.getSource().then(function (_a) {
            var TourManager = _a.TourManager;
            return TourManager.startInfoTour();
        });
    };
    TourModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    TourModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | tourModule */ 5137).then(__webpack_require__.bind(__webpack_require__, 68450));
    };
    return TourModuleClass;
}());
var TourModule = new TourModuleClass();


/***/ }),

/***/ 73608:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "t": () => (/* binding */ SearchModule)
/* harmony export */ });
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67463);
/* harmony import */ var _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98498);
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(83000);



var SearchModuleClass = /** @class */ (function () {
    function SearchModuleClass() {
        this.setProperPlaceholder = this.setProperPlaceholder.bind(this);
        this.loadNewCodeOnInteraction = this.loadNewCodeOnInteraction.bind(this);
        $(window).on("resizestop", this.setProperPlaceholder);
    }
    SearchModuleClass.prototype.setProperPlaceholder = function () {
        var message = "search";
        if ($(window).width() > 440) {
            message = _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.book */ .UU.book == null ? "search for and inside books..."
                : "search inside this and other books";
        }
        $("#search-input").attr("placeholder", message);
    };
    SearchModuleClass.prototype.initialize = function () {
        this.initializeNewSearch();
    };
    SearchModuleClass.prototype.initializeNewSearch = function () {
        if (document.location.search
            && document.location.search.indexOf("search-query") >= 0) {
            this.loadNewCodeOnInteraction();
        }
        else {
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].onPassiveEvent */ .Z.onPassiveEvent(document.querySelectorAll("#search-input, .header-search-container button"), ["mouseenter", "touchstart", "click", "focus"], this.loadNewCodeOnInteraction);
        }
    };
    SearchModuleClass.prototype.initializeIfNecessary = function (book, bookElement) {
        if (this.newSourcePromise == null) {
            return;
        }
        this.initializeNewSearchIfNecessary(book, bookElement);
    };
    SearchModuleClass.prototype.initializeNewSearchIfNecessary = function (book, bookElement) {
        if (this.newSourcePromise == null) {
            return;
        }
        this.getNewSource().then(function (_a) {
            var NewSearchMenu = _a.NewSearchMenu;
            return NewSearchMenu.initialize(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.book */ .UU.book, _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.bookElement */ .UU.bookElement);
        });
    };
    SearchModuleClass.prototype.loadNewCodeOnInteraction = function () {
        var _this = this;
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].offPassiveEvent */ .Z.offPassiveEvent(document.querySelectorAll("#search-input, .header-search-container button"), ["mouseenter", "touchstart", "click", "focus"], this.loadNewCodeOnInteraction);
        if (this.newSourcePromise) {
            return null;
        }
        this.getNewSource().then(function (_a) {
            var NewSearchMenu = _a.NewSearchMenu;
            NewSearchMenu.initialize(_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.book */ .UU.book, _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.bookElement */ .UU.bookElement);
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].offPassiveEvent */ .Z.offPassiveEvent(document.querySelectorAll("#search-input, .header-search-container button"), ["mouseenter", "touchstart", "click", "focus"], _this.loadNewCodeOnInteraction);
        });
    };
    SearchModuleClass.prototype.getNewSource = function () {
        if (!this.newSourcePromise) {
            this.newSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_2__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructNewSourcePromise);
        }
        return this.newSourcePromise;
    };
    SearchModuleClass.prototype.constructNewSourcePromise = function () {
        return Promise.all(/* import() | newSearchModule */[__webpack_require__.e(611), __webpack_require__.e(7213), __webpack_require__.e(5557), __webpack_require__.e(3861), __webpack_require__.e(6663), __webpack_require__.e(3954), __webpack_require__.e(4221), __webpack_require__.e(8787), __webpack_require__.e(9694)]).then(__webpack_require__.bind(__webpack_require__, 66649));
    };
    return SearchModuleClass;
}());
var SearchModule = new SearchModuleClass();


/***/ }),

/***/ 93983:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "E": () => (/* binding */ AuthManager)
/* harmony export */ });
/* harmony import */ var _services_userService_UserService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70296);
/* harmony import */ var _modules_LoginModule__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29755);
/* harmony import */ var _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37168);
/* harmony import */ var _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23934);
/* harmony import */ var _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(98498);





var AuthManagerClass = /** @class */ (function () {
    function AuthManagerClass() {
    }
    AuthManagerClass.prototype.initialize = function () {
        var _this = this;
        $(document).on('click', ".sign-in-button", function (e) {
            var $currentTarget = $(e.currentTarget);
            var type = "signin";
            if ($currentTarget.is(".free-preview-sign-in")) {
                type = "free-preview-sign-in";
            }
            else if ($currentTarget.is(".micropurchase-sign-in")) {
                type = "microtransactions";
            }
            else if ($currentTarget.is("wish-list-sign-in-button")) {
                type = "wishlist";
            }
            _modules_LoginModule__WEBPACK_IMPORTED_MODULE_1__/* .LoginModule.requestOpenModal */ .r.requestOpenModal("signin", "", type);
        })
            .on('click', ".discussion-sign-in-button", function () { return _modules_LoginModule__WEBPACK_IMPORTED_MODULE_1__/* .LoginModule.requestOpenModal */ .r.requestOpenModal("signin", "", "discussion"); })
            .on("click", ".inline-promo-sign-in-button", function () { return _modules_LoginModule__WEBPACK_IMPORTED_MODULE_1__/* .LoginModule.requestOpenModal */ .r.requestOpenModal("signin", "", "free-preview-inline-login"); })
            .on('click', ".register-button", function (e) {
            var $currentTarget = $(e.currentTarget);
            var type = "register";
            if ($currentTarget.is(".free-preview-registration")) {
                type = "free-preview-registration";
            }
            _modules_LoginModule__WEBPACK_IMPORTED_MODULE_1__/* .LoginModule.requestOpenModal */ .r.requestOpenModal("register", "", type);
        })
            .on('click', ".sign-out-button", function () { return _modules_LoginModule__WEBPACK_IMPORTED_MODULE_1__/* .LoginModule.requestLogout */ .r.requestLogout(); })
            .on("requestAvatarUrlUpdate", function (e, avatarUrl) { return _this.updateAvatarImage(avatarUrl); });
        _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
            !!data.loggedIn ? _this.modifyUIWithLogin(data)
                : _this.notifyLoginNotAttempted();
        });
    };
    AuthManagerClass.prototype.modifyUIWithLogin = function (data) {
        var _this = this;
        if (data && data.userDetails && data.userDetails.isBetaUser) {
            $(document.body).addClass("user-is-beta-tester");
        }
        if (data && data.userDetails && data.userDetails.subscriptionInfo) {
            $(document.body).toggleClass("user-is-subscriber", _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_4__/* .GlobalStateInfo.hasSubscription */ .UU.hasSubscription(data.userDetails));
            if (_utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_4__/* .GlobalStateInfo.hasSubscription */ .UU.hasSubscription(data.userDetails)) {
                $(document.body).toggleClass("user-is-active-subscriber", !data.userDetails.subscriptionInfo.isPaused);
                $(document.body).toggleClass("user-is-paused-subscriber", data.userDetails.subscriptionInfo.isPaused);
            }
        }
        _services_userService_UserService__WEBPACK_IMPORTED_MODULE_0__/* .UserService.getUserEmail */ .K.getUserEmail().then(function (email) {
            $(".settings-menu-user-data-container-email").text(email);
            $(document.body).addClass("user-logged-in").removeClass("user-not-logged-in");
        });
        _services_userService_UserService__WEBPACK_IMPORTED_MODULE_0__/* .UserService.getUserFullname */ .K.getUserFullname().then(function (fullname) {
            $(".settings-menu-user-data-container-fullname").text(fullname);
        });
        _services_userService_UserService__WEBPACK_IMPORTED_MODULE_0__/* .UserService.getAvatarUrl */ .K.getAvatarUrl().then(function (avatarUrl) { return _this.updateAvatarImage(avatarUrl); });
        var $userInitialsContainer = $(".user-initials-container");
        _services_userService_UserService__WEBPACK_IMPORTED_MODULE_0__/* .UserService.getUserInitials */ .K.getUserInitials().then(function (initials) {
            if (initials) {
                $userInitialsContainer.removeClass("hidden");
                $userInitialsContainer.text(initials.toUpperCase());
            }
            else {
                $userInitialsContainer.addClass("hidden");
            }
        }).catch(function (e) {
            console.log("Couldn't get initials", e);
            $userInitialsContainer.addClass("hidden");
        });
    };
    AuthManagerClass.prototype.modifyUIWithLogout = function () {
        $(document.body).addClass("user-not-logged-in").removeClass("user-logged-in");
    };
    AuthManagerClass.prototype.notifyLoginNotAttempted = function () {
        this.modifyUIWithLogout();
        $(document).trigger("loginNotAttempted");
    };
    AuthManagerClass.prototype.updateAvatarImage = function (avatarUrl) {
        var _this = this;
        if (!avatarUrl) {
            return;
        }
        var image = new Image();
        image.onload = function () {
            _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].cacheImageIfNeeded */ .Z.cacheImageIfNeeded(image);
            _this.setAvatarBackground(avatarUrl);
        };
        image.onerror = function () {
            _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].loadFromCacheIfPossible */ .Z.loadFromCacheIfPossible(image, function (e) { }, function () {
                image.onload = null;
                _this.setAvatarBackground(image.src);
            });
        };
        image.src = avatarUrl;
    };
    AuthManagerClass.prototype.setAvatarBackground = function (avatarUrl) {
        var $avatarIcon = $(".lb-avatar-container .avatar-icon");
        if ($avatarIcon.length > 0) {
            $avatarIcon.replaceWith("<div class='avatar-image' style='background-image: url(".concat(avatarUrl, ")'></div>"));
        }
        else {
            $(".lb-avatar-container .avatar-image").attr("style", "background-image: url(".concat(avatarUrl, ")"));
        }
    };
    return AuthManagerClass;
}());
var AuthManager = new AuthManagerClass();


/***/ }),

/***/ 24684:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Q": () => (/* binding */ HelpInfoFeedbackManager)
});

// EXTERNAL MODULE: ./src/ts/utils/EventUtils.ts
var EventUtils = __webpack_require__(67463);
// EXTERNAL MODULE: ./src/ts/utils/LocalStorageUtils.ts
var LocalStorageUtils = __webpack_require__(67008);
// EXTERNAL MODULE: ./src/ts/managers/NotificationsManager.ts
var NotificationsManager = __webpack_require__(54273);
// EXTERNAL MODULE: ./src/ts/services/settingsService/SettingsProvider.ts + 2 modules
var SettingsProvider = __webpack_require__(43150);
// EXTERNAL MODULE: ./src/ts/utils/DeviceUtils.ts
var DeviceUtils = __webpack_require__(87876);
// EXTERNAL MODULE: ./src/ts/services/authService/AuthProvider.ts + 2 modules
var AuthProvider = __webpack_require__(37168);
// EXTERNAL MODULE: ./src/ts/features/onboarding/faq/FaqModule.ts
var FaqModule = __webpack_require__(55293);
// EXTERNAL MODULE: ./src/ts/utils/DynamicCodeLoader.ts
var DynamicCodeLoader = __webpack_require__(83000);
;// CONCATENATED MODULE: ./src/ts/features/onboarding/impressions/web/WebImpressionsModule.ts

var WebImpressionsModuleClass = /** @class */ (function () {
    function WebImpressionsModuleClass() {
    }
    WebImpressionsModuleClass.prototype.showImpressionsBox = function () {
        this.getSource().then(function (_a) {
            var WebImpressionsManager = _a.WebImpressionsManager;
            return WebImpressionsManager.showImpressionsBox();
        });
    };
    WebImpressionsModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    WebImpressionsModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | webImpressionsModule */ 9236).then(__webpack_require__.bind(__webpack_require__, 62740));
    };
    return WebImpressionsModuleClass;
}());
var WebImpressionsModule = new WebImpressionsModuleClass();

// EXTERNAL MODULE: ./src/ts/features/onboarding/impressions/app/AppImpressionsModule.ts
var AppImpressionsModule = __webpack_require__(4734);
;// CONCATENATED MODULE: ./src/ts/features/onboarding/app/getAppPopup/GetAppPopupModule.ts

var GetAppPopupModuleClass = /** @class */ (function () {
    function GetAppPopupModuleClass() {
    }
    GetAppPopupModuleClass.prototype.show = function () {
        this.getSource().then(function (_a) {
            var GetAppPopup = _a.GetAppPopup;
            return GetAppPopup.show();
        });
    };
    GetAppPopupModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    GetAppPopupModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | getAppModule */ 9338).then(__webpack_require__.bind(__webpack_require__, 66965));
    };
    return GetAppPopupModuleClass;
}());
var GetAppPopupModule = new GetAppPopupModuleClass();

// EXTERNAL MODULE: ./src/ts/utils/GlobalStateInfo.ts
var GlobalStateInfo = __webpack_require__(98498);
// EXTERNAL MODULE: ./src/ts/utils/ValueUtils.ts
var ValueUtils = __webpack_require__(3199);
;// CONCATENATED MODULE: ./src/ts/managers/HelpInfoFeedbackManager.ts












var $document = $(document);
var IMPRESSION_FEEDBACK_USAGE_DURATION_FIRST_LIMIT = 30;
var IMPRESSION_FEEDBACK_USAGE_DURATION_SECOND_LIMIT = 90;
var APP_OFFERRING_LIMIT = 20;
var impressionFeedbackDisabled = false;
var SHOULD_OFFER_APP_INSTALL = false;
var HelpInfoFeedbackManagerClass = /** @class */ (function () {
    function HelpInfoFeedbackManagerClass() {
    }
    HelpInfoFeedbackManagerClass.prototype.initialize = function () {
        var _this = this;
        $document.on("contentFullyConstructed", function (e, book) { return EventUtils/* default.setTimeout */.Z.setTimeout(function () {
            if (GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement != null && GlobalStateInfo/* GlobalStateInfo.bookElement.reviewVersion */.UU.bookElement.reviewVersion > 0) {
                return;
            }
            if (!SettingsProvider/* default.get */.Z.get("tour-offered") && !SettingsProvider/* default.get */.Z.get("tour-taken") && !DeviceUtils/* default.isSmallScreenSize */.Z.isSmallScreenSize()) {
                NotificationsManager/* default.showNotification */.Z.showNotification("<a href='javascript:void(0)' class='tour-link'>take the liveBook tour</a>");
                SettingsProvider/* default.set */.Z.set("tour-offered", true);
            }
        }, 5000); });
        if (SHOULD_OFFER_APP_INSTALL) {
            setTimeout(function () { return _this.trackApplicationUsageForAppOffering(); }, 5000);
        }
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                _this.scheduleTimeTrackingForImpressionFeedback();
            }
            else {
                var referentDate = null;
                var settingsDate = SettingsProvider/* default.get */.Z.get("dateCreated");
                if (settingsDate != null) {
                    try {
                        referentDate = ValueUtils/* ValueUtils.getDateFromString */.d.getDateFromString(settingsDate);
                    }
                    catch (error) {
                        console.log(error);
                    }
                }
                if (referentDate == null) {
                    referentDate = data.userDetails.firstLoginDate;
                }
                if (referentDate && ValueUtils/* ValueUtils.isThisWeek */.d.isThisWeek(referentDate)) {
                    _this.scheduleTimeTrackingForImpressionFeedback();
                }
            }
        });
    };
    HelpInfoFeedbackManagerClass.prototype.scheduleTimeTrackingForImpressionFeedback = function () {
        var _this = this;
        setTimeout(function () { return _this.trackApplicationUsageDurationForImpressionsFeedback(); }, 10000);
    };
    HelpInfoFeedbackManagerClass.prototype.clean = function () {
        var hopscotch = window.hopscotch;
        try {
            if (hopscotch && hopscotch.getCurrTour && hopscotch.getCurrTour() != null) {
                hopscotch.endTour && hopscotch.endTour();
            }
        }
        catch (e) {
            console.log("Error", e);
        }
        FaqModule/* FaqModule.clean */.S.clean();
    };
    HelpInfoFeedbackManagerClass.prototype.showAppFeedbackForm = function () {
        AppImpressionsModule/* AppImpressionsModule.showModal */.N.showModal();
    };
    HelpInfoFeedbackManagerClass.prototype.showAppInfoForm = function () {
        SettingsProvider/* default.set */.Z.set("appOffered", true);
        var appOfferingInfo = this.getCurrentAppOfferingInfo();
        appOfferingInfo.hasFeedbackBeenSent = true;
        LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("app-offering-info", JSON.stringify(appOfferingInfo));
        GetAppPopupModule.show();
    };
    HelpInfoFeedbackManagerClass.prototype.trackApplicationUsageForAppOffering = function () {
        var _this = this;
        if (DeviceUtils/* default.isApp */.Z.isApp() || this.hasAppBeenOffered() || !AuthProvider/* AuthProvider.isCurrentlyLoggedIn */.H.isCurrentlyLoggedIn()) {
            return;
        }
        if (GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement != null
            && GlobalStateInfo/* GlobalStateInfo.bookElement.reviewVersion */.UU.bookElement.reviewVersion > 0) {
            return;
        }
        var appOfferingInfo = this.getCurrentAppOfferingInfo();
        if (appOfferingInfo == null || appOfferingInfo.hasFeedbackBeenSent) {
            return;
        }
        setInterval(function () {
            var appOfferingInfo = _this.getCurrentAppOfferingInfo();
            appOfferingInfo.currentUsageDuration++;
            LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("app-offering-info", JSON.stringify(appOfferingInfo));
            if (appOfferingInfo.currentUsageDuration == APP_OFFERRING_LIMIT) {
                _this.showAppInfoForm();
            }
        }, 1000 * 60); //Every minute
    };
    HelpInfoFeedbackManagerClass.prototype.trackApplicationUsageDurationForImpressionsFeedback = function () {
        var _this = this;
        if (GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement != null
            && GlobalStateInfo/* GlobalStateInfo.bookElement.reviewVersion */.UU.bookElement.reviewVersion > 0) {
            return;
        }
        var impressionFeedbackInfo = this.getCurrentImpressionFeedbackInfo();
        if (impressionFeedbackDisabled
            || impressionFeedbackInfo.hasFeedbackBeenSent
            || impressionFeedbackInfo.hasBeenDismissedTwice) {
            return;
        }
        setInterval(function () {
            if ($(document.body).is(".zen-mode")
                || $("#paywall-login").length > 0) {
                return;
            }
            var impressionFeedbackInfo = _this.getCurrentImpressionFeedbackInfo();
            impressionFeedbackInfo.currentUsageDuration++;
            LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("impression-feedback-info", JSON.stringify(impressionFeedbackInfo));
            if (!impressionFeedbackInfo.hasBeenDissmissedOnce) {
                if (impressionFeedbackInfo.currentUsageDuration == IMPRESSION_FEEDBACK_USAGE_DURATION_FIRST_LIMIT) {
                    DeviceUtils/* default.isApp */.Z.isApp() ? _this.showAppFeedbackForm()
                        : WebImpressionsModule.showImpressionsBox();
                }
            }
            else {
                if (impressionFeedbackInfo.currentUsageDuration == IMPRESSION_FEEDBACK_USAGE_DURATION_SECOND_LIMIT) {
                    DeviceUtils/* default.isApp */.Z.isApp() ? _this.showAppFeedbackForm()
                        : WebImpressionsModule.showImpressionsBox();
                }
            }
        }, 1000 * 60); //Every minute
    };
    HelpInfoFeedbackManagerClass.prototype.getCurrentImpressionFeedbackInfo = function () {
        var impressionFeedbackInfo = null;
        var hasFeedbackBeenSent = this.hasFeedbackBeenSent();
        try {
            var impressionFeedbackString = LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("impression-feedback-info");
            if (impressionFeedbackString) {
                impressionFeedbackInfo = JSON.parse(impressionFeedbackString);
                impressionFeedbackInfo.hasFeedbackBeenSent = hasFeedbackBeenSent;
            }
        }
        catch (e) {
            console.log("Error getting current impression feedback", e);
        }
        if (impressionFeedbackInfo == null) {
            impressionFeedbackInfo = this.getInitialImpressionFeedbackInfo();
            LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("impression-feedback-info", JSON.stringify(impressionFeedbackInfo));
        }
        return impressionFeedbackInfo;
    };
    HelpInfoFeedbackManagerClass.prototype.getCurrentAppOfferingInfo = function () {
        var appOfferingInfo = null;
        var hasAppBeenOffered = this.hasAppBeenOffered();
        if (hasAppBeenOffered) {
            return null;
        }
        try {
            var appOfferingString = LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("app-offering-info");
            if (appOfferingString) {
                appOfferingInfo = JSON.parse(appOfferingString);
            }
        }
        catch (e) {
            console.log("Error getting current app offering info", e);
        }
        if (appOfferingInfo == null) {
            appOfferingInfo = this.getInitialAppOffering();
            LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("app-offering-info", JSON.stringify(appOfferingInfo));
        }
        return appOfferingInfo;
    };
    HelpInfoFeedbackManagerClass.prototype.getInitialImpressionFeedbackInfo = function () {
        return {
            currentUsageDuration: 0,
            hasFeedbackBeenSent: this.hasFeedbackBeenSent(),
            hasBeenDissmissedOnce: false,
            hasBeenDismissedTwice: false
        };
    };
    HelpInfoFeedbackManagerClass.prototype.hasFeedbackBeenSent = function () {
        return DeviceUtils/* default.isApp */.Z.isApp() ? LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("app-feedback-submitted")
            : SettingsProvider/* default.get */.Z.get('feedback-submitted');
    };
    HelpInfoFeedbackManagerClass.prototype.hasAppBeenOffered = function () {
        if (DeviceUtils/* default.isApp */.Z.isApp()) {
            return true;
        }
        return SettingsProvider/* default.get */.Z.get('feedback-submitted');
    };
    HelpInfoFeedbackManagerClass.prototype.getInitialAppOffering = function () {
        return {
            currentUsageDuration: 0,
            hasFeedbackBeenSent: this.hasAppBeenOffered(),
            hasBeenDissmissedOnce: false,
            hasBeenDismissedTwice: false
        };
    };
    return HelpInfoFeedbackManagerClass;
}());
var HelpInfoFeedbackManager = new HelpInfoFeedbackManagerClass();


/***/ }),

/***/ 40225:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "C": () => (/* binding */ MenuDragManager)
/* harmony export */ });
;
var MenuDragManager = /** @class */ (function () {
    function MenuDragManager($element, dragCallback, onDragFinish, config) {
        this.$element = $element;
        this.config = config;
        this.dragCallback = dragCallback;
        this.onDragFinishCallback = onDragFinish;
        this.handleDragStart = this.handleDragStart.bind(this);
        this.handleDragFinish = this.handleDragFinish.bind(this);
        this.handleDrag = this.handleDrag.bind(this);
    }
    MenuDragManager.prototype.enable = function () {
        this.$element.on("mousedown touchstart", this.handleDragStart);
    };
    MenuDragManager.prototype.disable = function () {
        this.startPosition = null;
        this.timedPoints = null;
        this.unregisterAllEvents();
    };
    MenuDragManager.prototype.handleDragStart = function (e) {
        var point = this.getPointFromEvent(e);
        if (!point) {
            return;
        }
        if ($(e.target).is("input")) {
            return;
        }
        this.startPosition = { x: point.x, y: point.y };
        this.timedPoints = [{ x: point.x, y: point.y, date: Date.now() }];
        this.initialTransition = this.$element.css("transition");
        if (this.initialTransition) {
            this.$element.css("transition", "none");
        }
        this.registerDragEvents();
    };
    MenuDragManager.prototype.handleDrag = function (e) {
        var point = this.getPointFromEvent(e);
        if (!point || !this.startPosition) {
            this.finishOnPoint(point);
            return;
        }
        var previousPoint = this.timedPoints && this.timedPoints.length >= 1 ? this.timedPoints[this.timedPoints.length - 1] : null;
        var deltaFromStart = { x: point.x - this.startPosition.x, y: point.y - this.startPosition.y };
        var deltaFromPreviousMovement = previousPoint != null ? { x: previousPoint.x - point.x, y: previousPoint.y - point.y } : deltaFromStart;
        if (Math.abs(deltaFromPreviousMovement.x) > Math.abs(deltaFromPreviousMovement.y)) {
            this.addTimedPoint({ x: point.x, y: point.y, date: Date.now() });
            this.dragCallback(deltaFromStart);
        }
        else if (this.timedPoints == null || this.timedPoints.length <= 1) {
            this.finishOnPoint(point);
        }
        else {
            this.addTimedPoint({ x: point.x, y: point.y, date: Date.now() });
            e.preventDefault();
            e.stopPropagation();
        }
    };
    MenuDragManager.prototype.handleDragFinish = function (e) {
        this.finishOnPoint(this.getPointFromEvent(e));
    };
    MenuDragManager.prototype.finishOnPoint = function (point) {
        if (!point || !this.startPosition) {
            if (!point && this.timedPoints != null && this.timedPoints.length) {
                point = this.timedPoints[this.timedPoints.length - 1];
                this.timedPoints[this.timedPoints.length - 1].date = Date.now();
            }
            if (!this.startPosition && this.timedPoints != null && this.timedPoints.length) {
                this.startPosition = this.timedPoints[0];
            }
            if (!point) {
                point = { x: 0, y: 0 };
            }
            if (!this.startPosition) {
                this.startPosition = { x: 0, y: 0 };
            }
        }
        if (this.initialTransition) {
            this.$element.css("transition", this.initialTransition);
            this.initialTransition = "";
        }
        var delta = { x: point.x - this.startPosition.x, y: point.y - this.startPosition.y };
        this.onDragFinishCallback(delta, this.areTimedPointsAllInProperDirectionAndFastEnough());
        this.unregisterDragEvents();
        this.startPosition = null;
        this.timedPoints = null;
    };
    MenuDragManager.prototype.unregisterAllEvents = function () {
        this.$element.off("mousedown touchstart", this.handleDragStart);
        this.unregisterDragEvents();
    };
    MenuDragManager.prototype.registerDragEvents = function () {
        this.$element.on("mousemove touchmove", this.handleDrag);
        this.$element.on("mouseup touchend touchcancel", this.handleDragFinish);
    };
    MenuDragManager.prototype.unregisterDragEvents = function () {
        this.$element.off("mousemove touchmove", this.handleDrag);
        this.$element.off("mouseup touchend touchcancel", this.handleDragFinish);
    };
    MenuDragManager.prototype.addTimedPoint = function (timedPoint) {
        this.timedPoints.push(timedPoint);
        if (this.timedPoints.length > 7) {
            this.timedPoints.shift();
        }
    };
    MenuDragManager.prototype.areTimedPointsAllInProperDirectionAndFastEnough = function () {
        if (!this.timedPoints || this.timedPoints.length < 2) {
            return false;
        }
        for (var i = 1; i < this.timedPoints.length; i++) {
            var previousTimedPoint = this.timedPoints[i - 1];
            var currentTimedPoint = this.timedPoints[i];
            if (this.config.isOnRightSide && currentTimedPoint.x < previousTimedPoint.x) {
                return false;
            }
            else if (this.config.isOnLeftSide && currentTimedPoint.x > previousTimedPoint.x) {
                return false;
            }
        }
        var firstTimedPoint = this.timedPoints[0];
        var lastTimedPoint = this.timedPoints[this.timedPoints.length - 1];
        var xDiff = Math.abs(lastTimedPoint.x - firstTimedPoint.x);
        var timeDiff = lastTimedPoint.date - firstTimedPoint.date;
        return xDiff / timeDiff > 0.1;
    };
    MenuDragManager.prototype.getPointFromEvent = function (e) {
        if (e.pageX || e.pageY) {
            return { x: e.pageX, y: e.pageY };
        }
        if (e.originalEvent && e.originalEvent.touches && e.originalEvent.touches.length == 1) {
            return { x: e.originalEvent.touches[0].pageX, y: e.originalEvent.touches[0].pageY };
        }
        return null;
    };
    return MenuDragManager;
}());



/***/ }),

/***/ 54273:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(23934);
/* harmony import */ var _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69619);


var $document = $(document);
var NotificationsManager = /** @class */ (function () {
    function NotificationsManager() {
        var _this = this;
        this.$notificationBox = $("#notification-box");
        if (this.$notificationBox.length == 0) {
            $(document.body).append("<div id=\"notification-box\" class=\"alert-box success radius hover-box\">\n                    <span class=\"notification-content\"></span>\n                    <a href=\"javascript:void(0)\" class=\"close\">&times;</a>\n                </div>");
            this.$notificationBox = $("#notification-box");
        }
        this.$notificationContent = this.$notificationBox.find(".notification-content");
        this.$notificationBox.on("click", "a", function () { return _this.hideNotificationBox(); });
        $document.on("requestNotification", function (e, message) { return _this.showTemporaryNotification(message); });
        $document.on("requestPermanentNotification", function (e, message) { return _this.showNotification(message); });
        $document.on("requestLongNotification", function (e, message, additionalCloseClass) { return _this.showLongNotification(message, additionalCloseClass); });
        $document.on("requestNotificationTextChange", function (e, message) { return _this.setNotificationMessage(message); });
        $document.on("hideNotification", function (e) { return _this.hideNotificationBox(); });
        $document.on("modalClosed", function (e, modal) {
            var $modal = $(modal);
            if (!$modal.is("#notifications-modal")) {
                return;
            }
            $modal.find(".notifications-modal-message").html("");
        });
    }
    NotificationsManager.prototype.showNotificationModal = function (title, htmlContent, showCommands, commandActionCallback, fullWidth, dataType) {
        if (showCommands === void 0) { showCommands = true; }
        if (fullWidth === void 0) { fullWidth = false; }
        if (dataType === void 0) { dataType = ""; }
        var $notificationsModal = $("#notifications-modal");
        $notificationsModal.attr("data-type", dataType);
        $notificationsModal.toggleClass("full-width", fullWidth);
        if (fullWidth) {
            $notificationsModal.find(".notifications-modal-content-wrapper").html(FULL_WIDTH_MODAL_CONTENT);
        }
        else {
            $notificationsModal.find(".notifications-modal-content-wrapper").html(MODAL_CONTENT);
        }
        var $title = $notificationsModal.find(".notifications-modal-title");
        $title.text(title);
        if ((title || "").trim()) {
            $title.removeClass("hidden");
        }
        else {
            $title.addClass("hidden");
        }
        $notificationsModal.find(".notifications-modal-message").html(htmlContent);
        $notificationsModal.find(".modal-command-row").toggleClass("hidden", !showCommands);
        if (commandActionCallback) {
            $notificationsModal.find(".modal-action-button").one("click", function () {
                commandActionCallback && commandActionCallback($notificationsModal);
            });
        }
        _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].showFoundationModal */ .Z.showFoundationModal($notificationsModal);
    };
    NotificationsManager.prototype.hideNotificationModal = function () {
        var $notificationsModal = $("#notifications-modal");
        $notificationsModal.find(".modal-action-button").off("click");
        _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].hideFoundationModal */ .Z.hideFoundationModal($notificationsModal);
    };
    NotificationsManager.prototype.showNotification = function (messageHTML) {
        this.setNotificationMessage(messageHTML);
        this.showNotificationBox();
    };
    NotificationsManager.prototype.hideNotification = function () {
        this.hideNotificationBox();
    };
    NotificationsManager.prototype.showTemporaryNotification = function (messageHTML) {
        var _this = this;
        this.showNotification(messageHTML);
        if (this.hideNotificationTimeout) {
            clearTimeout(this.hideNotificationTimeout);
        }
        this.hideNotificationTimeout = setTimeout(function () { return _this.hideNotificationBox(); }, 5000);
    };
    NotificationsManager.prototype.showLongNotification = function (messageHTML, additionalCloseClass) {
        var _this = this;
        this.showNotification(messageHTML);
        if (additionalCloseClass) {
            this.$notificationBox.find(".close").addClass(additionalCloseClass);
        }
        if (this.hideNotificationTimeout) {
            clearTimeout(this.hideNotificationTimeout);
        }
        this.hideNotificationTimeout = setTimeout(function () { return _this.hideNotificationBox(); }, 15000);
    };
    NotificationsManager.prototype.setNotificationMessage = function (messageHTML) {
        this.$notificationContent.html(messageHTML);
    };
    NotificationsManager.prototype.showNotificationBox = function () {
        $(document.body).addClass("notification-shown");
        this.$notificationBox.css({
            display: "block",
            bottom: "".concat(1.2 * _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getFooterHeight */ .Z.getFooterHeight(), "px")
        });
    };
    NotificationsManager.prototype.hideNotificationBox = function () {
        $(document.body).removeClass("notification-shown");
        this.$notificationBox.css({ display: "none" });
        this.$notificationBox.find(".close").attr("class", "close");
        this.hideNotificationTimeout = null;
    };
    return NotificationsManager;
}());
var MODAL_CONTENT = "<div class=\"row\"> <div class=\"small-12 columns\"> <h3 class=\"notifications-modal-title\"></h3> <div class=\"notifications-modal-message\"></div></div></div><div class=\"row modal-command-row\"> <div class=\"small-12 columns\"> <button class=\"close-reveal-modal-button pull-right emphasized-button modal-action-button\">OK</button></div></div>";
var FULL_WIDTH_MODAL_CONTENT = "<h3 class=\"notifications-modal-title\"></h3> <div class=\"notifications-modal-message\"></div></div></div><div class=\"row modal-command-row\"> <div class=\"small-12 columns\"> <button class=\"close-reveal-modal-button pull-right emphasized-button modal-action-button\">OK</button>";
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new NotificationsManager());


/***/ }),

/***/ 22550:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67463);
/* harmony import */ var _utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52810);
/* harmony import */ var _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69619);
/* harmony import */ var _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23934);
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87876);
/* harmony import */ var _components_misc_SlideMenu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(75645);
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(83000);







var $window = $(window);
var $document = $(document);
var ScreenScrollManager = /** @class */ (function () {
    function ScreenScrollManager() {
        var _this = this;
        this.isInAudioVideoMode = false;
        this.shouldAutomaticallyScroll = true;
        $window.on('wheel DOMMouseScroll mousewheel', function () {
            _this.shouldAutomaticallyScroll = false;
        });
        $document.on("textSlideBoxOpened", function () {
            _this.isTextSlideBoxOpened = true;
            _this.shouldAutomaticallyScroll = false;
        });
        $document.on("textSlideBoxClosed", function () {
            _this.isTextSlideBoxOpened = false;
            _this.shouldAutomaticallyScroll = true;
        });
        $document.on("tooltipOpened", function () {
            _this.isTextSelectionMenuOpened = true;
            _this.shouldAutomaticallyScroll = false;
        });
        $document.on("tooltipClosed", function () {
            _this.isTextSelectionMenuOpened = false;
            _this.shouldAutomaticallyScroll = true;
        });
        $document.on("audioModeLeft videoModeLeft", function () {
            _this.isInAudioVideoMode = false;
            _this.shouldAutomaticallyScroll = true;
            $document.trigger("restoreAutomaticScrolling", _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(_this.currentTextFragment));
        });
        $document.on("audioModeEntered videoModeEntered", function () {
            _this.isInAudioVideoMode = true;
            _this.shouldAutomaticallyScroll = false;
        });
        $document.on("restoreAutomaticScrolling", function (e, shouldScrollToElement) {
            if (_this.isInAudioVideoMode || _this.isTextSlideBoxOpened || _this.isTextSelectionMenuOpened) {
                return;
            }
            _this.shouldAutomaticallyScroll = true;
            if (shouldScrollToElement) {
                _this.scrollToElement(_this.currentTextFragment);
            }
        });
        $document.on("playingTextFragmentChange", function (e, textFragment) {
            _this.currentTextFragment = textFragment;
        });
        $document.on("positionPointPositionReached", function (e, $element) {
            if (!_this.currentTextFragment) {
                return;
            }
            _this.scrollToElementIfNeeded(($element && $element[0]) || _this.currentTextFragment);
        });
        $document.on("browsableReached exerciseReached videoReached", function (e, browsable) {
            if (!_this.shouldAutomaticallyScroll) {
                return;
            }
            if (!browsable) {
                return;
            }
            if (!_utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(browsable)) {
                _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].setTimeout */ .Z.setTimeout(function () {
                    if (!_this.isScrolling) {
                        _this.scrollToElement(browsable);
                    }
                }, 400);
            }
        });
        $document.on("requestScrollToElement", function (e, element) {
            _this.scrollToElement(element);
        });
    }
    ScreenScrollManager.prototype.initialize = function () {
        this.clean();
    };
    ScreenScrollManager.prototype.clean = function () {
        this.currentTextFragment = null;
    };
    ScreenScrollManager.prototype.scrollToElement = function (element, callback, modifier) {
        if (modifier === void 0) { modifier = 1.5; }
        if (!element) {
            return;
        }
        this.scrollToPosition($(element).offset().top - modifier * _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getTopNavBarHeight */ .Z.getTopNavBarHeight(), callback);
    };
    ScreenScrollManager.prototype.scrollToPosition = function (position, callback) {
        var _this = this;
        var duration = 1000;
        var changeDelta = Math.abs(window.scrollY - position);
        duration = Math.min(changeDelta * 3, duration);
        this.isScrolling = true;
        var $element = $('html,body');
        if (_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isIOSCordova */ .Z.isIOSCordova()) {
            window.scrollTo(0, position);
            callback && callback();
        }
        else {
            _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_6__/* .DynamicCodeLoader.loadVelocityCode */ .j.loadVelocityCode().then(function () {
                $element.velocity("scroll", { duration: duration, offset: position, mobileHA: false });
                //velocity complete not triggered, so do it manually
                _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].setTimeout */ .Z.setTimeout(function () {
                    _this.isScrolling = false;
                    callback && callback();
                }, duration);
            });
        }
    };
    ScreenScrollManager.prototype.scrollToElementIfNeeded = function (textFragment) {
        if (!this.shouldAutomaticallyScroll) {
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].triggerDocumentEventAsync */ .Z.triggerDocumentEventAsync("playingElementInView", textFragment);
        }
        else if (_components_misc_SlideMenu__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isSideMenuOpened */ .Z.isSideMenuOpened) {
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].triggerDocumentEventAsync */ .Z.triggerDocumentEventAsync("playingElementInView", textFragment);
        }
        else {
            if (_utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].hasBrowsables */ .Z.hasBrowsables(textFragment)) {
                var browsable = _utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getMostImportantBrowsable */ .Z.getMostImportantBrowsable(textFragment.browsables);
                var canFitIntoScreen = _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].canBothElementsFitIntoScreen */ .Z.canBothElementsFitIntoScreen(textFragment, browsable);
                if (canFitIntoScreen) {
                    this.scrollToElementWithBrowsablesIfNeeded(textFragment);
                }
                else {
                    this.scrollToElementWithoutBrowsablesIfNeeded(textFragment);
                }
            }
            else {
                this.scrollToElementWithoutBrowsablesIfNeeded(textFragment);
            }
        }
    };
    ScreenScrollManager.prototype.scrollToElementWithBrowsablesIfNeeded = function (textFragment) {
        var mostImportantBrowsable = _utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getMostImportantBrowsable */ .Z.getMostImportantBrowsable(textFragment.browsables);
        var browsableTop = mostImportantBrowsable;
        if (_utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(textFragment)
            && _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(mostImportantBrowsable)
            && _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(browsableTop)) {
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].triggerDocumentEventAsync */ .Z.triggerDocumentEventAsync("playingElementInView", textFragment);
            return;
        }
        var canFitIntoScreen = _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].canBothElementsFitIntoScreen */ .Z.canBothElementsFitIntoScreen(textFragment, browsableTop);
        canFitIntoScreen ? this.positionScreenThatBothFit(textFragment, browsableTop)
            : this.scrollToElementWithoutBrowsablesIfNeeded(textFragment);
    };
    ScreenScrollManager.prototype.positionScreenThatBothFit = function (textFragment, browsable) {
        var topElement = _utils_DOMUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].precedesElement */ .Z.precedesElement(textFragment, browsable)
            ? browsable
            : textFragment;
        this.scrollToElementAfterPause(topElement, textFragment);
    };
    ScreenScrollManager.prototype.scrollToElementWithoutBrowsablesIfNeeded = function (textFragment) {
        var scrollToElement = textFragment;
        var isVisible = _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(textFragment);
        if (scrollToElement.previousHeading != null) {
            isVisible = isVisible && _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(scrollToElement.previousHeading);
            scrollToElement = scrollToElement.previousHeading;
        }
        else if (scrollToElement.nodeName === "LI") {
            //we should try to keep all list items in view
            var firstSibling = scrollToElement.parentElement.firstElementChild;
            if (_utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].canBothElementsFitIntoScreen */ .Z.canBothElementsFitIntoScreen(scrollToElement, firstSibling)) {
                isVisible = isVisible && _utils_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isElementVisible */ .Z.isElementVisible(firstSibling);
                scrollToElement = firstSibling;
            }
        }
        if (isVisible) {
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].triggerDocumentEventAsync */ .Z.triggerDocumentEventAsync("playingElementInView", textFragment);
            return;
        }
        this.scrollToElementAfterPause(scrollToElement, textFragment);
    };
    ScreenScrollManager.prototype.scrollToElementAfterPause = function (scrollToElement, textFragment) {
        var _this = this;
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].setTimeout */ .Z.setTimeout(function () {
            if (!_this.isScrolling) {
                _this.scrollToElement(scrollToElement, function () {
                    _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].triggerDocumentEventAsync */ .Z.triggerDocumentEventAsync("playingElementInView", textFragment);
                });
            }
            else {
                _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].triggerDocumentEventAsync */ .Z.triggerDocumentEventAsync("playingElementInView", textFragment);
            }
        }, 400);
    };
    return ScreenScrollManager;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new ScreenScrollManager());


/***/ }),

/***/ 91098:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3199);

var Book = /** @class */ (function () {
    function Book(id, manningId, title, shortName, description, lastUpdateDate, exercisesComingSoon, programmingLanguage, userOwnsBook, userOwnsAudio, bookCoverPath, bookUrl, isMeap, isOpen, latestMeapVersion, highResolutionCover) {
        if (id === void 0) { id = -1; }
        if (manningId === void 0) { manningId = -1; }
        if (title === void 0) { title = ""; }
        if (shortName === void 0) { shortName = ""; }
        if (description === void 0) { description = ""; }
        if (lastUpdateDate === void 0) { lastUpdateDate = null; }
        if (exercisesComingSoon === void 0) { exercisesComingSoon = false; }
        if (programmingLanguage === void 0) { programmingLanguage = ""; }
        if (userOwnsBook === void 0) { userOwnsBook = false; }
        if (userOwnsAudio === void 0) { userOwnsAudio = false; }
        if (bookCoverPath === void 0) { bookCoverPath = ""; }
        if (bookUrl === void 0) { bookUrl = ""; }
        if (isMeap === void 0) { isMeap = false; }
        if (isOpen === void 0) { isOpen = false; }
        if (latestMeapVersion === void 0) { latestMeapVersion = 0; }
        if (highResolutionCover === void 0) { highResolutionCover = ""; }
        this.openChapters = [];
        this.id = id;
        this.manningId = manningId;
        this.shortName = shortName;
        this.title = title;
        this.isMeap = isMeap;
        this.isOpen = isOpen;
        this.latestMeapVersion = latestMeapVersion;
        this.description = description;
        this.lastUpdateDate = _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_0__/* .ValueUtils.getDateFromString */ .d.getDateFromString(lastUpdateDate);
        this.exercisesComingSoon = exercisesComingSoon;
        this.userOwnsBook = userOwnsBook;
        this.userOwnsAudio = userOwnsAudio;
        this.programmingLanguage = programmingLanguage;
        this.bookCoverPath = bookCoverPath;
        this.bookPath = bookUrl;
        this.highResolutionCover = highResolutionCover;
        this.offlineFileSizes = {
            audioHighQuality: "",
            audioMediumQuality: "",
            audioLowQuality: "",
            contentSize: ""
        };
    }
    Book.sortBooksDefault = function (books) {
        if (books === void 0) { books = []; }
        books.sort(function (book1, book2) {
            return (Math.max(book2.lastAccessedTime, book2.lastUpdateDate != null ? book2.lastUpdateDate.getTime() : 0)
                - Math.max(book1.lastAccessedTime, book1.lastUpdateDate != null ? book1.lastUpdateDate.getTime() : 0));
        });
    };
    Book.sortBooksAlphabetically = function (books) {
        if (books === void 0) { books = []; }
        books.sort(function (a, b) {
            if (a.title < b.title)
                return -1;
            if (a.title > b.title)
                return 1;
            return 0;
        });
    };
    Book.sortBooksByLastUpdateDate = function (books) {
        if (books === void 0) { books = []; }
        books.sort(function (a, b) { return b.lastUpdateDate.getTime() - a.lastUpdateDate.getTime(); });
    };
    Book.sortBooksByLastAccess = function (books) {
        if (books === void 0) { books = []; }
        books.sort(function (a, b) { return b.lastAccessedTime - a.lastAccessedTime; });
    };
    return Book;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Book);


/***/ }),

/***/ 87721:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var BookElement = /** @class */ (function () {
    function BookElement(book, id, title, shortName, userOwnsBookElement, ordinal, wordCount, freeWordCount, audioLocation, subtitlesLocation, isOpen, meapVersion, location, isBookOverview, isFrontMatter) {
        this.book = book;
        this.id = id;
        this.title = title;
        this.shortName = shortName;
        this.userOwnsBookElement = userOwnsBookElement;
        this.ordinal = ordinal;
        this.wordCount = Math.max(wordCount || 0, 0);
        this.freeWordCount = Math.max(freeWordCount || 0, 0);
        this.audioLocation = audioLocation;
        this.subtitlesLocation = subtitlesLocation;
        this.isOpen = isOpen;
        this.meapVersion = meapVersion;
        this.location = location;
        this.isBookOverview = isBookOverview;
        this.isFrontMatter = isFrontMatter;
    }
    return BookElement;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookElement);


/***/ }),

/***/ 28672:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_LinksUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68577);

var NeighboringBookElement = /** @class */ (function () {
    function NeighboringBookElement(shortName, title, link, introItems) {
        if (introItems === void 0) { introItems = []; }
        this.shortName = shortName;
        this.title = title;
        this.link = _utils_LinksUtils__WEBPACK_IMPORTED_MODULE_0__/* .LinksUtils.adjustBookLink */ .r.adjustBookLink(link || "");
        this.introItems = introItems;
    }
    return NeighboringBookElement;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NeighboringBookElement);


/***/ }),

/***/ 3296:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "x": () => (/* binding */ Product)
/* harmony export */ });
var Product = /** @class */ (function () {
    function Product(shortName, title, productType, price, partialBookOwnership) {
        this.shortName = shortName;
        this.title = title;
        this.productType = productType;
        this.price = price;
        this.partialBookOwnership = partialBookOwnership;
    }
    Product.prototype.isAudio = function () {
        return this.productType === "AUDIO";
    };
    Product.prototype.isBook = function () {
        return this.productType === "EBOOK" || this.productType === "COMBO" || this.productType === "PDF" || this.productType == "LIVEBOOK";
    };
    Product.isAcceptableProductType = function (productType) {
        productType = (productType || "").toUpperCase();
        return productType === "AUDIO" || productType === "EBOOK" || productType === "COMBO" || productType === "PDF" || productType == "LIVEBOOK" || productType == "LIVEAUDIO";
    };
    return Product;
}());

var ProductOffering = /** @class */ (function () {
    //id: it.id, price: it.price, productType: it.productType, externalId: it.externalId
    function ProductOffering(id, manningId, price, productType, unitAmountDiscounted, isbn) {
        this.id = id;
        this.manningId = manningId;
        this.price = price;
        this.productType = productType;
        this.unitAmountDiscounted = unitAmountDiscounted;
        this.isbn = isbn;
    }
    ProductOffering.prototype.isAudioOffering = function () {
        return this.productType === "AUDIO" || this.productType === "LIVEAUDIO" || this.productType === "liveAudio";
    };
    ProductOffering.prototype.isEBookOffering = function () {
        return this.productType === "EBOOK";
    };
    ProductOffering.prototype.isComboOffering = function () {
        return this.productType === "COMBO";
    };
    ProductOffering.prototype.isSubscriptionOffering = function () {
        return this.productType === "SUBSCRIPTION";
    };
    ProductOffering.prototype.createCopy = function () {
        return new ProductOffering(this.id, this.manningId, this.price, this.productType, this.unitAmountDiscounted, this.isbn);
    };
    ProductOffering.productTypes = ["EBOOK", "AUDIO", "LIVEAUDIO", "liveAudio", "COMBO", "SUBSCRIPTION"];
    return ProductOffering;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ProductOffering);


/***/ }),

/***/ 70933:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": () => (/* binding */ ActivityModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67463);


var ActivityModuleClass = /** @class */ (function () {
    function ActivityModuleClass() {
    }
    ActivityModuleClass.prototype.initialize = function () {
        var _this = this;
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].onUserHasInteracted */ .Z.onUserHasInteracted(function () {
            _this.getSource().then(function (_a) {
                var ActivityManager = _a.ActivityManager;
                return ActivityManager.initialize();
            });
        });
    };
    ActivityModuleClass.prototype.initalizeFreePreviewActivityTracker = function (onInactive, onActive) {
        this.getSource().then(function (_a) {
            var ActivityManager = _a.ActivityManager;
            return ActivityManager.initalizeFreePreviewActivityTracker(onInactive, onActive);
        });
    };
    ActivityModuleClass.prototype.destroyFreePreviewActivityTracker = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var ActivityManager = _a.ActivityManager;
            return ActivityManager.destroyFreePreviewActivityTracker();
        });
    };
    ActivityModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ActivityModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | activityManager */ 3857).then(__webpack_require__.bind(__webpack_require__, 52715));
    };
    return ActivityModuleClass;
}());
var ActivityModule = new ActivityModuleClass();


/***/ }),

/***/ 72988:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "e": () => (/* binding */ DeviceSyncModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var DeviceSyncModuleClass = /** @class */ (function () {
    function DeviceSyncModuleClass() {
    }
    DeviceSyncModuleClass.prototype.initializeDownloadManager = function () {
        this.getDownloadManagerSource().then(function (_a) {
            var DownloadManager = _a.DownloadManager;
            return DownloadManager.initialize();
        });
    };
    DeviceSyncModuleClass.prototype.requestBookDeletion = function (book) {
        this.getDownloadManagerSource().then(function (_a) {
            var DownloadManager = _a.DownloadManager;
            return DownloadManager.requestBookDeletion(book);
        });
    };
    DeviceSyncModuleClass.prototype.requestBookCancel = function (bookShortName) {
        this.getDownloadManagerSource().then(function (_a) {
            var DownloadManager = _a.DownloadManager;
            return DownloadManager.requestBookCancel(bookShortName);
        });
    };
    DeviceSyncModuleClass.prototype.requestBookDownload = function (book, reviewVersion) {
        this.getDownloadManagerSource().then(function (_a) {
            var DownloadManager = _a.DownloadManager;
            return DownloadManager.requestBookDownload(book, reviewVersion);
        });
    };
    DeviceSyncModuleClass.prototype.initilizeOfflineOperationsModal = function () {
        this.getOfflineOperationsModalSource().then(function (_a) {
            var OfflineOperationsModal = _a.OfflineOperationsModal;
            return OfflineOperationsModal.initialize();
        });
    };
    DeviceSyncModuleClass.prototype.initializeUpdateManager = function () {
        this.getUpdateManagerSource().then(function (_a) {
            var UpdateManager = _a.UpdateManager;
            return UpdateManager.initialize();
        });
    };
    DeviceSyncModuleClass.prototype.synchronizeUserCreatedData = function () {
        this.getSynchronizerProviderSource().then(function (_a) {
            var SynchronizerProvider = _a.SynchronizerProvider;
            return SynchronizerProvider.triggerSynchronization();
        });
    };
    DeviceSyncModuleClass.prototype.initializeDownloadProgressButtons = function ($carausel) {
        this.getDownloadProgressButtonsSource().then(function (_a) {
            var DownloadProgressButton = _a.DownloadProgressButton;
            $carausel.find(".download-status-container").each(function (index, element) {
                var $element = $(element);
                if ($element.find(".download-progress-button").length == 0) {
                    var downloadProgressButton = new DownloadProgressButton(element);
                    element.downloadProgressButton = downloadProgressButton;
                    if ($element.hasClass("downloaded")) {
                        downloadProgressButton.markAsDownloaded();
                    }
                }
            });
        });
    };
    DeviceSyncModuleClass.prototype.getDownloadManagerSource = function () {
        if (!this.downloadManagerSourcePromise) {
            this.downloadManagerSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructDownloadManagerSourcePromise);
        }
        return this.downloadManagerSourcePromise;
    };
    DeviceSyncModuleClass.prototype.constructDownloadManagerSourcePromise = function () {
        return Promise.all(/* import() | downloadManager */[__webpack_require__.e(2063), __webpack_require__.e(4744)]).then(__webpack_require__.bind(__webpack_require__, 28735));
    };
    DeviceSyncModuleClass.prototype.getOfflineOperationsModalSource = function () {
        if (!this.offlineOperationsModalSourcePromise) {
            this.offlineOperationsModalSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructOfflineOperationsModalSourcePromise);
        }
        return this.offlineOperationsModalSourcePromise;
    };
    DeviceSyncModuleClass.prototype.constructOfflineOperationsModalSourcePromise = function () {
        return __webpack_require__.e(/* import() | offlineOperationsModal */ 2063).then(__webpack_require__.bind(__webpack_require__, 85973));
    };
    DeviceSyncModuleClass.prototype.getUpdateManagerSource = function () {
        if (!this.updateManagerSourcePromise) {
            this.updateManagerSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructUpdateManagerSourcePromise);
        }
        return this.updateManagerSourcePromise;
    };
    DeviceSyncModuleClass.prototype.constructUpdateManagerSourcePromise = function () {
        return Promise.all(/* import() | updateModule */[__webpack_require__.e(2063), __webpack_require__.e(3153)]).then(__webpack_require__.bind(__webpack_require__, 84778));
    };
    DeviceSyncModuleClass.prototype.getSynchronizerProviderSource = function () {
        if (!this.synchronizerProviderSourcePromise) {
            this.synchronizerProviderSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSynchronizerProviderSourcePromise);
        }
        return this.synchronizerProviderSourcePromise;
    };
    DeviceSyncModuleClass.prototype.constructSynchronizerProviderSourcePromise = function () {
        return Promise.all(/* import() | synchronizerProviderModule */[__webpack_require__.e(1029), __webpack_require__.e(221), __webpack_require__.e(3737)]).then(__webpack_require__.bind(__webpack_require__, 50554));
    };
    DeviceSyncModuleClass.prototype.getDownloadProgressButtonsSource = function () {
        if (!this.downloadProgressButtonsSourcePromise) {
            this.downloadProgressButtonsSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructDownloadProgressButtonsSourcePromise);
        }
        return this.downloadProgressButtonsSourcePromise;
    };
    DeviceSyncModuleClass.prototype.constructDownloadProgressButtonsSourcePromise = function () {
        return __webpack_require__.e(/* import() | downloadProgressButtonsModule */ 482).then(__webpack_require__.bind(__webpack_require__, 48601));
    };
    return DeviceSyncModuleClass;
}());
var DeviceSyncModule = new DeviceSyncModuleClass();


/***/ }),

/***/ 3723:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "G": () => (/* binding */ HelpInfoFeedbackModule)
});

// EXTERNAL MODULE: ./src/ts/utils/EventUtils.ts
var EventUtils = __webpack_require__(67463);
// EXTERNAL MODULE: ./src/ts/utils/DynamicCodeLoader.ts
var DynamicCodeLoader = __webpack_require__(83000);
// EXTERNAL MODULE: ./src/ts/features/onboarding/helpButton/HelpButtonModule.ts
var HelpButtonModule = __webpack_require__(48609);
// EXTERNAL MODULE: ./src/ts/features/onboarding/faq/FaqModule.ts
var FaqModule = __webpack_require__(55293);
// EXTERNAL MODULE: ./src/ts/features/onboarding/tour/TourModule.ts
var TourModule = __webpack_require__(97788);
// EXTERNAL MODULE: ./src/ts/features/onboarding/impressions/app/AppImpressionsModule.ts
var AppImpressionsModule = __webpack_require__(4734);
;// CONCATENATED MODULE: ./src/ts/features/onboarding/about/AboutModule.ts

var AboutModuleClass = /** @class */ (function () {
    function AboutModuleClass() {
    }
    AboutModuleClass.prototype.showModal = function () {
        this.getSource().then(function (_a) {
            var AboutModal = _a.AboutModal;
            return AboutModal.showModal();
        });
    };
    AboutModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    AboutModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | aboutModule */ 4358).then(__webpack_require__.bind(__webpack_require__, 58697));
    };
    return AboutModuleClass;
}());
var AboutModule = new AboutModuleClass();

// EXTERNAL MODULE: ./src/ts/features/onboarding/feedback/FeedbackModule.ts
var FeedbackModule = __webpack_require__(24646);
// EXTERNAL MODULE: ./src/ts/managers/HelpInfoFeedbackManager.ts + 2 modules
var HelpInfoFeedbackManager = __webpack_require__(24684);
;// CONCATENATED MODULE: ./src/ts/modules/HelpInfoFeedbackModule.ts









var HelpInfoFeedbackModuleClass = /** @class */ (function () {
    function HelpInfoFeedbackModuleClass() {
        this.loadHelpButtonCodeOnInteraction = this.loadHelpButtonCodeOnInteraction.bind(this);
    }
    HelpInfoFeedbackModuleClass.prototype.initialize = function () {
        $(document).on("click", ".faq-link", function () { return FaqModule/* FaqModule.show */.S.show(); })
            .on("click", ".tour-link", function () { return TourModule/* TourModule.startTour */.o.startTour(); })
            .on("click", ".submit-app-feedback-link", function () { return AppImpressionsModule/* AppImpressionsModule.showModal */.N.showModal(); })
            .on("click", ".more-information-link", function () { return AboutModule.showModal(); });
        EventUtils/* default.onPassiveEvent */.Z.onPassiveEvent(document.querySelectorAll(".help-button"), ["mouseenter", "touchstart"], this.loadHelpButtonCodeOnInteraction);
        $(document).on("click", ".more-information-link", this.loadHelpButtonCodeOnInteraction);
        HelpInfoFeedbackManager/* HelpInfoFeedbackManager.initialize */.Q.initialize();
    };
    HelpInfoFeedbackModuleClass.prototype.loadHelpButtonCodeOnInteraction = function () {
        HelpButtonModule/* HelpButtonModule.load */.N.load();
        EventUtils/* default.offPassiveEvent */.Z.offPassiveEvent(document.querySelectorAll(".help-button"), ["mouseenter", "touchstart"], this.loadHelpButtonCodeOnInteraction);
    };
    HelpInfoFeedbackModuleClass.prototype.renderErrorReportModal = function () {
        DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromiseErrorManager).then(function (_a) {
            var ErrorReportManager = _a.ErrorReportManager;
            ErrorReportManager.render(true);
        });
    };
    HelpInfoFeedbackModuleClass.prototype.showContentErrorReportModal = function (content, location) {
        if (content === void 0) { content = ""; }
        if (location === void 0) { location = ""; }
        FeedbackModule/* FeedbackModule.showContentErrorReportModal */.e.showContentErrorReportModal(content, location);
    };
    HelpInfoFeedbackModuleClass.prototype.constructSourcePromiseErrorManager = function () {
        return Promise.all(/* import() | errorReportManagerModule */[__webpack_require__.e(7034), __webpack_require__.e(5225)]).then(__webpack_require__.bind(__webpack_require__, 52229));
    };
    HelpInfoFeedbackModuleClass.prototype.clean = function () {
        HelpInfoFeedbackManager/* HelpInfoFeedbackManager.clean */.Q.clean();
    };
    return HelpInfoFeedbackModuleClass;
}());
var HelpInfoFeedbackModule = new HelpInfoFeedbackModuleClass();


/***/ }),

/***/ 29755:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "r": () => (/* binding */ LoginModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var LoginModuleClass = /** @class */ (function () {
    function LoginModuleClass() {
    }
    LoginModuleClass.prototype.requestLoginWithEmailAndPassword = function (email, password) {
        this.getSource().then(function (_a) {
            var LoginManager = _a.LoginManager;
            return LoginManager.requestLoginWithEmailAndPassword(email, password);
        });
    };
    LoginModuleClass.prototype.requestLogin = function (message, type) {
        this.getSource().then(function (_a) {
            var LoginManager = _a.LoginManager;
            return LoginManager.requestLogin(message, type);
        });
    };
    LoginModuleClass.prototype.requestOpenModal = function (tab, message, type, defaultEmail) {
        if (defaultEmail === void 0) { defaultEmail = ""; }
        this.getSource().then(function (_a) {
            var LoginManager = _a.LoginManager;
            return LoginManager.openModal(tab, message, false, type, defaultEmail);
        });
    };
    LoginModuleClass.prototype.showRegistrationSuccessfulModal = function () {
        this.getSource().then(function (_a) {
            var LoginManager = _a.LoginManager;
            return LoginManager.renderRegistrationSuccessfulModal();
        });
    };
    LoginModuleClass.prototype.requestLogout = function () {
        this.getSource().then(function (_a) {
            var LoginManager = _a.LoginManager;
            return LoginManager.performLogout();
        });
    };
    LoginModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    LoginModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | loginManager */[__webpack_require__.e(7034), __webpack_require__.e(7227)]).then(__webpack_require__.bind(__webpack_require__, 15091));
    };
    return LoginModuleClass;
}());
var LoginModule = new LoginModuleClass();


/***/ }),

/***/ 68993:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "H": () => (/* binding */ MainMenuModule)
});

// EXTERNAL MODULE: ./src/ts/utils/DynamicCodeLoader.ts
var DynamicCodeLoader = __webpack_require__(83000);
// EXTERNAL MODULE: ./src/ts/services/authService/AuthProvider.ts + 2 modules
var AuthProvider = __webpack_require__(37168);
;// CONCATENATED MODULE: ./src/ts/features/menus/manningMenu/ManningMenuModule.ts


var ManningMenuModuleClass = /** @class */ (function () {
    function ManningMenuModuleClass() {
    }
    ManningMenuModuleClass.prototype.initialize = function () {
        var _this = this;
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (data && data.loggedIn) {
                _this.getSource().then(function (_a) {
                    var ManningMenuManager = _a.ManningMenuManager;
                    ManningMenuManager.initialize();
                });
            }
        });
    };
    ManningMenuModuleClass.prototype.clean = function () {
        var _this = this;
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (data && data.loggedIn) {
                _this.getSource().then(function (_a) {
                    var ManningMenuManager = _a.ManningMenuManager;
                    ManningMenuManager.clean();
                });
            }
        });
    };
    ManningMenuModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            DynamicCodeLoader/* DynamicCodeLoader.loadVelocityCode */.j.loadVelocityCode();
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ManningMenuModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | manningMenu */[__webpack_require__.e(611), __webpack_require__.e(7213), __webpack_require__.e(5557), __webpack_require__.e(8784), __webpack_require__.e(8579), __webpack_require__.e(4160)]).then(__webpack_require__.bind(__webpack_require__, 12681));
    };
    return ManningMenuModuleClass;
}());
var ManningMenuModule = new ManningMenuModuleClass();

;// CONCATENATED MODULE: ./src/ts/modules/MainMenuModule.ts


var MainMenuModuleClass = /** @class */ (function () {
    function MainMenuModuleClass() {
    }
    MainMenuModuleClass.prototype.initialize = function () {
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (data && data.loggedIn) {
                ManningMenuModule.initialize();
            }
        });
    };
    MainMenuModuleClass.prototype.clean = function () {
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (data && data.loggedIn) {
                ManningMenuModule.clean();
            }
        });
    };
    return MainMenuModuleClass;
}());
var MainMenuModule = new MainMenuModuleClass();


/***/ }),

/***/ 11126:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ MicropurchaseModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var MicropurchaseModuleClass = /** @class */ (function () {
    function MicropurchaseModuleClass() {
        this.loadCodeOnInteraction = this.loadCodeOnInteraction.bind(this);
        $(document).on("click", ".main-token-status-container", this.loadCodeOnInteraction);
    }
    MicropurchaseModuleClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var TokenModal = _a.TokenModal;
            return TokenModal.initialize();
        });
    };
    MicropurchaseModuleClass.prototype.showTokensModal = function () {
        this.getSource().then(function (_a) {
            var TokenModal = _a.TokenModal;
            TokenModal.initialize();
            TokenModal.show();
        });
    };
    MicropurchaseModuleClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var TokenModal = _a.TokenModal;
            return TokenModal.clean();
        });
    };
    MicropurchaseModuleClass.prototype.loadCodeOnInteraction = function (e) {
        $(document).off("click", ".main-token-status-container", this.loadCodeOnInteraction);
        this.getSource().then(function (_a) {
            var TokenModal = _a.TokenModal;
            return TokenModal.show();
        });
        e && e.stopImmediatePropagation();
    };
    MicropurchaseModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    MicropurchaseModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | micropurchase */[__webpack_require__.e(7034), __webpack_require__.e(7213), __webpack_require__.e(7147), __webpack_require__.e(5788), __webpack_require__.e(7678), __webpack_require__.e(4775)]).then(__webpack_require__.bind(__webpack_require__, 72125));
    };
    return MicropurchaseModuleClass;
}());
var MicropurchaseModule = new MicropurchaseModuleClass();


/***/ }),

/***/ 58300:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "f": () => (/* binding */ ShoppingCartModule)
/* harmony export */ });
/* harmony import */ var _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67463);
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87876);
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(83000);
/* harmony import */ var _utils_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67008);
/* harmony import */ var _services_bookContentService_BookContentProvider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75107);
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(93292);






var ShoppingCartModuleClass = /** @class */ (function () {
    function ShoppingCartModuleClass() {
        var _this = this;
        this.bookShortNameNewestEditionMap = {};
        this.loadCodeOnInteraction = this.loadCodeOnInteraction.bind(this);
        $(document).on("requestShoppingCartOpen", function () {
            _this.requestMenuOpen();
        });
    }
    ShoppingCartModuleClass.prototype.initialize = function () {
        _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].onPassiveEvent */ .Z.onPassiveEvent(document.querySelectorAll(".shopping-cart-button"), ["mouseenter", "touchstart", "click"], this.loadCodeOnInteraction);
    };
    ShoppingCartModuleClass.prototype.loadCodeOnInteraction = function (e) {
        var shouldImmediatelyOpen = e.type == "click" || _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].isTouchEventOnTouchDevice */ .Z.isTouchEventOnTouchDevice(e.type);
        if (!shouldImmediatelyOpen) {
            _utils_EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].offPassiveEvent */ .Z.offPassiveEvent(document.querySelectorAll(".shopping-cart-button"), [e.type], this.loadCodeOnInteraction);
        }
        this.getSource().then(function (_a) {
            var ShoppingCartManager = _a.ShoppingCartManager;
            if (shouldImmediatelyOpen) {
                ShoppingCartManager.requestMenuOpen();
            }
        });
    };
    ShoppingCartModuleClass.prototype.requestMenuOpen = function () {
        Promise.all([
            this.getSource()
        ]).then(function (_a) {
            var ShoppingCartManager = _a[0].ShoppingCartManager;
            ShoppingCartManager && ShoppingCartManager.requestMenuOpen();
        });
    };
    ShoppingCartModuleClass.prototype.addBookBookProductOfferingAndSubscriptionOffering = function (book, bookProductOffering, subscriptionOffering, audioSelected) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                ShoppingCartManager.addBookBookProductOfferingAndSubscriptionOffering(book, bookProductOffering, subscriptionOffering, audioSelected)
                    .then(function () { return resolve(); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.requestAddBookAndSubscriptionToCart = function (book, isAudioSelected, discountCode, fromWishList, isCombo, subscriptionOffering) {
        if (fromWishList === void 0) { fromWishList = false; }
        if (isCombo === void 0) { isCombo = false; }
        if (subscriptionOffering === void 0) { subscriptionOffering = null; }
        Promise.all([
            this.getSource()
        ]).then(function (_a) {
            var ShoppingCartManager = _a[0].ShoppingCartManager;
            ShoppingCartManager && ShoppingCartManager.requestAddBookAndSubscriptionToCart(book, isAudioSelected, discountCode, fromWishList, isCombo, subscriptionOffering);
        });
    };
    ShoppingCartModuleClass.prototype.requestAddBookToCartByBookShortName = function (bookShortName, discountCode) {
        return Promise.all([
            this.getSource(),
            _services_bookContentService_BookContentProvider__WEBPACK_IMPORTED_MODULE_4__/* .BookContentProvider.getMediumCatalog */ .$.getMediumCatalog()
        ]).then(function (_a) {
            var ShoppingCartManager = _a[0].ShoppingCartManager, books = _a[1];
            var book = books != null && books.length > 0 ? books.find(function (it) { return it.shortName == bookShortName; }) : null;
            if (book != null) {
                ShoppingCartManager && ShoppingCartManager.requestAddBookToCart(book, false, discountCode);
            }
        });
    };
    ShoppingCartModuleClass.prototype.requestAddBookToCart = function (book, isAudioSelected, discountCode, fromWishList, isCombo, showInterstitial) {
        var _this = this;
        if (fromWishList === void 0) { fromWishList = false; }
        if (isCombo === void 0) { isCombo = false; }
        if (showInterstitial === void 0) { showInterstitial = true; }
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                if (!ShoppingCartManager) {
                    reject();
                    return;
                }
                ShoppingCartManager.requestAddBookToCart(book, isAudioSelected, discountCode, fromWishList, isCombo, showInterstitial)
                    .then(function () { return resolve(); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.requestAddNewerEditionToCart = function (productManningId) {
        Promise.all([
            this.getSource()
        ]).then(function (_a) {
            var ShoppingCartManager = _a[0].ShoppingCartManager;
            ShoppingCartManager.requestAddNewerEditionToCart(productManningId);
        });
    };
    ShoppingCartModuleClass.prototype.getProductOfferings = function (book) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.getProductOfferings(book));
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.getNewestEditionProduct = function (book) {
        var _this = this;
        if (!book || !book.manningId) {
            return Promise.resolve(null);
        }
        if (this.bookShortNameNewestEditionMap[book.shortName]) {
            return Promise.resolve(this.bookShortNameNewestEditionMap[book.shortName]);
        }
        return new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/cart/getNewestEditionProduct"), function (data) {
                if (!data || !data.newestEditionProduct || !data.newestEditionProduct.title) {
                    resolve(_this.bookShortNameNewestEditionMap[book.shortName] = null);
                    return;
                }
                resolve(_this.bookShortNameNewestEditionMap[book.shortName] = data);
            }, function (e) { return resolve(null); }, { manningId: book.manningId });
        });
    };
    ShoppingCartModuleClass.prototype.getProductDiscounts = function (book, code) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.getProductDiscounts(book, code));
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.isDotd = function (book) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.isDotd(book));
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.getTokenProductOffering = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.getTokenProductOffering());
            });
        });
    };
    ShoppingCartModuleClass.prototype.addTokensToCart = function (numberOfTokens) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.addTokensToCart(numberOfTokens));
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.getBookPrice = function (book) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.getBookPrice(book));
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.initializeShoppingCartStore = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.initializeShoppingCartStore());
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.getProductSpendingInfo = function (book) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.getProductSpendingInfo(book));
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.isEbookInShoppingCart = function (book) {
        if (!book) {
            return;
        }
        return this.getShoppingCartItems().find(function (it) { return it.productId === book.manningId && !it.isCombo; }) != null;
    };
    ShoppingCartModuleClass.prototype.isComboInShoppingCart = function (book) {
        if (!book) {
            return;
        }
        return this.getShoppingCartItems().find(function (it) { return it.productId === book.manningId && it.isCombo; }) != null;
    };
    ShoppingCartModuleClass.prototype.isAudioInShoppingCart = function (book) {
        if (!book) {
            return;
        }
        return this.getShoppingCartItems().find(function (it) { return it.productId === book.manningId && it.childItems != null && it.childItems.length > 0 && it.childItems.find(function (item) { return item.isSelected; }) != null; }) != null;
    };
    ShoppingCartModuleClass.prototype.isSubscriptionInCart = function () {
        return this.getShoppingCartItems().find(function (it) { return it.isSubscription; }) != null;
    };
    ShoppingCartModuleClass.prototype.isInShoppingCartByManningId = function (productId) {
        if (!productId) {
            return false;
        }
        return this.getShoppingCartItems().find(function (it) { return it.productId == productId; }) != null;
    };
    ShoppingCartModuleClass.prototype.getShoppingCartItems = function () {
        return JSON.parse(_utils_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_3__/* .LocalStorageUtils.getItem */ .f.getItem("shopping-cart-items") || "[]");
    };
    ShoppingCartModuleClass.prototype.requestOpenLogin = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var ShoppingCartManager = _a[0].ShoppingCartManager;
                resolve(ShoppingCartManager.showLoginModal());
            }).catch(function (e) { return reject(e); });
        });
    };
    ShoppingCartModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_2__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ShoppingCartModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | shoppingCartModule */[__webpack_require__.e(611), __webpack_require__.e(296), __webpack_require__.e(6702)]).then(__webpack_require__.bind(__webpack_require__, 75235));
    };
    return ShoppingCartModuleClass;
}());
var ShoppingCartModule = new ShoppingCartModuleClass();


/***/ }),

/***/ 57658:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "O": () => (/* binding */ UnlockModule)
});

// UNUSED EXPORTS: UnlockModuleClass

// EXTERNAL MODULE: ./src/ts/utils/DynamicCodeLoader.ts
var DynamicCodeLoader = __webpack_require__(83000);
// EXTERNAL MODULE: ./src/ts/modules/ShoppingCartModule.ts
var ShoppingCartModule = __webpack_require__(58300);
// EXTERNAL MODULE: ./src/ts/utils/ValueUtils.ts
var ValueUtils = __webpack_require__(3199);
// EXTERNAL MODULE: ./src/ts/services/discountService/DiscountProvider.ts
var DiscountProvider = __webpack_require__(26280);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js
var injectStylesIntoStyleTag = __webpack_require__(93379);
var injectStylesIntoStyleTag_default = /*#__PURE__*/__webpack_require__.n(injectStylesIntoStyleTag);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleDomAPI.js
var styleDomAPI = __webpack_require__(7795);
var styleDomAPI_default = /*#__PURE__*/__webpack_require__.n(styleDomAPI);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertBySelector.js
var insertBySelector = __webpack_require__(90569);
var insertBySelector_default = /*#__PURE__*/__webpack_require__.n(insertBySelector);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js
var setAttributesWithoutAttributes = __webpack_require__(3565);
var setAttributesWithoutAttributes_default = /*#__PURE__*/__webpack_require__.n(setAttributesWithoutAttributes);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/insertStyleElement.js
var insertStyleElement = __webpack_require__(19216);
var insertStyleElement_default = /*#__PURE__*/__webpack_require__.n(insertStyleElement);
// EXTERNAL MODULE: ./node_modules/style-loader/dist/runtime/styleTagTransform.js
var styleTagTransform = __webpack_require__(44589);
var styleTagTransform_default = /*#__PURE__*/__webpack_require__.n(styleTagTransform);
// EXTERNAL MODULE: ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/ts/features/onboarding/freePreviewInfoManager/free-preview-info.scss
var free_preview_info = __webpack_require__(43843);
;// CONCATENATED MODULE: ./src/ts/features/onboarding/freePreviewInfoManager/free-preview-info.scss

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (styleTagTransform_default());
options.setAttributes = (setAttributesWithoutAttributes_default());

      options.insert = insertBySelector_default().bind(null, "head");
    
options.domAPI = (styleDomAPI_default());
options.insertStyleElement = (insertStyleElement_default());

var update = injectStylesIntoStyleTag_default()(free_preview_info/* default */.Z, options);




       /* harmony default export */ const freePreviewInfoManager_free_preview_info = (free_preview_info/* default */.Z && free_preview_info/* default.locals */.Z.locals ? free_preview_info/* default.locals */.Z.locals : undefined);

// EXTERNAL MODULE: ./src/ts/utils/EventUtils.ts
var EventUtils = __webpack_require__(67463);
// EXTERNAL MODULE: ./src/ts/modules/LoginModule.ts
var LoginModule = __webpack_require__(29755);
// EXTERNAL MODULE: ./src/ts/utils/GlobalStateInfo.ts
var GlobalStateInfo = __webpack_require__(98498);
// EXTERNAL MODULE: ./src/ts/utils/LocalStorageUtils.ts
var LocalStorageUtils = __webpack_require__(67008);
// EXTERNAL MODULE: ./src/ts/utils/VisibilityUtils.ts
var VisibilityUtils = __webpack_require__(30546);
;// CONCATENATED MODULE: ./src/ts/features/onboarding/freePreviewInfoManager/FreePreviewInfoManager.ts







//import { AuthProvider } from "../../../services/authService/AuthProvider";
var FreePreviewInfoManagerClass = /** @class */ (function () {
    function FreePreviewInfoManagerClass() {
        this.hasRegisteredEvents = false;
        this.scrambledWords = ["yatplciqd", "enibgsyat", "plciqdatc"];
        this.handleSignInClick = this.handleSignInClick.bind(this);
        this.handleAddToCartClick = this.handleAddToCartClick.bind(this);
        this.handleFooterCloseClick = this.handleFooterCloseClick.bind(this);
    }
    FreePreviewInfoManagerClass.prototype.initialize = function (book, bookElement) {
        var _this = this;
        if (GlobalStateInfo/* GlobalStateInfo.showSummariesInsteadOfScrambledText */.UU.showSummariesInsteadOfScrambledText()) {
            return;
        }
        var $scrambled = $(".readable-text.scrambled");
        if ($scrambled.length == 0) {
            return;
        }
        if (book != null && bookElement != null && book.latestMeapVersion != bookElement.meapVersion) {
            return;
        }
        if (book != null && book.cancelled) {
            return;
        }
        var $referentScrambledElement = $scrambled.eq(0);
        if ($referentScrambledElement.prev().is(".inline-ask-manning-root")
            && $scrambled.length >= 2) {
            $referentScrambledElement = $scrambled.eq(1);
        }
        if ($(".free-preview-promo-container").length == 0) {
            $(this.generateInlineHtml()).insertBefore($referentScrambledElement);
        }
        /*if($("#footer-promo-container").children().length == 0 && !LocalStorageUtils.getItem("FOOTER_FREE_PREVIEW_INFO_DISMISSED")){
            $("#footer-promo-container").append(this.generateFooterHtml()).removeClass("hidden");
        }*/
        EventUtils/* default.setTimeout */.Z.setTimeout(function () { return _this.animateScrambledWord(); }, 2000);
        if (!this.hasRegisteredEvents) {
            $(document).on("click", ".free-preview-promo-container ._sign-in, .free-preview-footer-promo-container ._sign-in", this.handleSignInClick);
            $(document).on("click", ".free-preview-promo-container ._add-to-cart, .free-preview-footer-promo-container ._add-to-cart", this.handleAddToCartClick);
            $(document).on("click", ".free-preview-footer-promo-container ._close-button", this.handleFooterCloseClick);
            this.hasRegisteredEvents = true;
        }
        $(document).trigger("free-preview-info", "shown");
    };
    FreePreviewInfoManagerClass.prototype.clean = function () {
        $("#footer-promo-container").html("").addClass("hidden");
    };
    FreePreviewInfoManagerClass.prototype.generateInlineHtml = function () {
        return /*html*/ "<div class='callout-container free-preview-promo-container'>\n                    <div class='_heading'>\n                        Livebook feature - Free preview\n                    </div>\n                    <div class='_content'>\n                        In livebook, text is <span class='scrambled-word-wrapper'><span class='scrambled-word-animated unscrambled-word'>scrambled</span></span> in books you do not own<span class=\"hideable-text\">, \n                        but our free preview unlocks it for a couple of minutes</span>.\n                    </div>\n\n                    <div class=\"_footer\">\n                        <button class=\"_sign-in\"> unlock </button>\n                        <button class=\"_add-to-cart\"> \n                            <span class=\"_add-to-cart-message\">buy</span>\n                            <span class=\"_view-in-cart-message\">view</span>\n                        </button>                        \n                    </div>\n                </div>";
    };
    FreePreviewInfoManagerClass.prototype.generateFooterHtml = function () {
        return /*html*/ "<div class='free-preview-footer-promo-container'>\n                    <div class='_content'>\n                        In livebook, text is <span class='scrambled-word-wrapper'><span class='scrambled-word-animated unscrambled-word'>scrambled</span></span> in books you do not own<span class=\"hideable-text\">, \n                        but our free preview unlocks it for a couple of minutes</span>.\n                    </div>\n                    <div class=\"_footer\">\n                        <button class=\"_sign-in _in-footer\"> unlock </button>\n                        <button class=\"_add-to-cart _in-footer\"> \n                            <span class=\"_add-to-cart-message\">buy</span>\n                            <span class=\"_view-in-cart-message\">view</span>\n                        </button>\n                    </div>\n                    <div class=\"_close-button\">\n                        <i class=\"fa fw fa-times\"></i>\n                    </div>\n                </div>";
    };
    FreePreviewInfoManagerClass.prototype.animateScrambledWord = function () {
        var _this = this;
        if (this.animationTimeout) {
            clearTimeout(this.animationTimeout);
        }
        VisibilityUtils/* VisibilityUtils.isVisible */.J.isVisible().then(function (isVisible) {
            if (isVisible) {
                var hasFadeOutBeenHandled_1 = false;
                $(".scrambled-word-animated").fadeOut(750, function () {
                    if (hasFadeOutBeenHandled_1) {
                        return;
                    }
                    hasFadeOutBeenHandled_1 = true;
                    var $el = $(".scrambled-word-animated");
                    var currentWord = $el.eq(0).text().trim();
                    var nextWord = _this.scrambledWords[_this.scrambledWords.indexOf(currentWord) + 1];
                    if (!nextWord) {
                        nextWord = "scrambled";
                    }
                    $el.text(nextWord);
                    $el.parent().toggleClass("unscrambled-word", nextWord == "scrambled");
                    var hasFadeInBeenHandled = false;
                    $el.fadeIn(750, function () {
                        if (hasFadeInBeenHandled) {
                            return;
                        }
                        hasFadeInBeenHandled = true;
                        _this.animationTimeout = EventUtils/* default.setTimeout */.Z.setTimeout(function () {
                            _this.animateScrambledWord();
                        }, nextWord == "scrambled" ? 2000 : 500);
                    });
                });
            }
            else {
                EventUtils/* default.setTimeout */.Z.setTimeout(function () { return _this.animateScrambledWord(); }, 10000);
            }
        });
    };
    FreePreviewInfoManagerClass.prototype.handleSignInClick = function (e) {
        $(document).trigger("free-preview-info", $(e.currentTarget).is("._in-footer") ? "sign-in-footer" : "sign-in-main-content");
        LoginModule/* LoginModule.requestLogin */.r.requestLogin("", "free-preview-info");
    };
    FreePreviewInfoManagerClass.prototype.handleFooterCloseClick = function () {
        $("#footer-promo-container").remove();
        $(document).trigger("free-preview-info", "footer-close");
        LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("FOOTER_FREE_PREVIEW_INFO_DISMISSED", true);
    };
    FreePreviewInfoManagerClass.prototype.handleAddToCartClick = function (e) {
        $(document).trigger("free-preview-info", $(e.currentTarget).is("._in-footer") ? "add-to-cart-in-footer" : "add-to-cart-in-main-content");
        if (ShoppingCartModule/* ShoppingCartModule.isEbookInShoppingCart */.f.isEbookInShoppingCart(GlobalStateInfo/* GlobalStateInfo.book */.UU.book)
            || ShoppingCartModule/* ShoppingCartModule.isComboInShoppingCart */.f.isComboInShoppingCart(GlobalStateInfo/* GlobalStateInfo.book */.UU.book)) {
            ShoppingCartModule/* ShoppingCartModule.requestMenuOpen */.f.requestMenuOpen();
        }
        else {
            ShoppingCartModule/* ShoppingCartModule.requestAddBookToCartByBookShortName */.f.requestAddBookToCartByBookShortName(GlobalStateInfo/* GlobalStateInfo.book.shortName */.UU.book.shortName);
        }
    };
    return FreePreviewInfoManagerClass;
}());
var FreePreviewInfoManager = new FreePreviewInfoManagerClass();

;// CONCATENATED MODULE: ./src/ts/modules/UnlockModule.ts





var UnlockModuleClass = /** @class */ (function () {
    function UnlockModuleClass() {
    }
    UnlockModuleClass.prototype.initialize = function (book, bookElement, initialElement) {
        var _this = this;
        this.getUnlockManagerSource().then(function (_a) {
            var UnlockContentManager = _a.UnlockContentManager;
            return UnlockContentManager.initialize(book, bookElement);
        });
        this.getModalSource().then(function (_a) {
            var UnlockModal = _a.UnlockModal;
            return UnlockModal.initialize(book, bookElement);
        });
        this.getUnlockTextSource().then(function (_a) {
            var UnlockText = _a.UnlockText;
            UnlockText.initialize(book, bookElement);
        });
        var freePreviewManagerPromise = this.getFreePreviewManagerSource();
        FreePreviewInfoManager.initialize(book, bookElement);
        if (book.isOpen) {
            freePreviewManagerPromise.then(function (_a) {
                var FreePreviewManager = _a.FreePreviewManager;
                return FreePreviewManager.initialize(book, bookElement);
            });
        }
        else {
            Promise.all([
                freePreviewManagerPromise,
                ShoppingCartModule/* ShoppingCartModule.getProductDiscounts */.f.getProductDiscounts(book, DiscountProvider/* DiscountProvider.getNewUserDiscountCode */.U.getNewUserDiscountCode())
            ]).then(function (data) {
                var FreePreviewManager = data[0].FreePreviewManager;
                book.isOpen = !ValueUtils/* ValueUtils.isEmptyObject */.d.isEmptyObject(data[1]) && _this.isNotNewUserDiscount(data[1]);
                FreePreviewManager.initialize(book, bookElement);
            }).catch(function (e) {
                freePreviewManagerPromise.then(function (_a) {
                    var FreePreviewManager = _a.FreePreviewManager;
                    return FreePreviewManager.initialize(book, bookElement);
                });
            });
        }
    };
    UnlockModuleClass.prototype.clean = function () {
        if (!this.unlockManagerSourcePromise) {
            return;
        }
        this.getUnlockManagerSource().then(function (_a) {
            var UnlockContentManager = _a.UnlockContentManager;
            return UnlockContentManager.clean();
        });
        this.getModalSource().then(function (_a) {
            var UnlockModal = _a.UnlockModal;
            return UnlockModal.clean();
        });
        this.getUnlockTextSource().then(function (_a) {
            var UnlockText = _a.UnlockText;
            return UnlockText.clean();
        });
        this.getFreePreviewManagerSource().then(function (_a) {
            var FreePreviewManager = _a.FreePreviewManager;
            return FreePreviewManager.clean();
        });
    };
    UnlockModuleClass.prototype.tryToSearchUnlockFragmentInCurrentBookElement = function (targetParagraphs) {
        this.getUnlockManagerSource().then(function (_a) {
            var UnlockContentManager = _a.UnlockContentManager;
            return UnlockContentManager.tryToSearchUnlockFragmentInCurrentBookElement(targetParagraphs);
        });
    };
    UnlockModuleClass.prototype.refreshTokenStateInToolbar = function (tokenCountInfo) {
        this.getUnlockManagerSource().then(function (_a) {
            var UnlockContentManager = _a.UnlockContentManager;
            return UnlockContentManager.refreshTokenStateInToolbar(tokenCountInfo);
        });
    };
    UnlockModuleClass.prototype.fetchAndDisplayLatestTokenInfo = function (forceRequest) {
        this.getUnlockManagerSource().then(function (_a) {
            var UnlockContentManager = _a.UnlockContentManager;
            return UnlockContentManager.fetchAndDisplayLatestTokenInfo(forceRequest);
        });
    };
    UnlockModuleClass.prototype.tryToUnlockPointedParagraph = function (book, bookElement, poitingArgumentParts, originalLinkLocation) {
        this.getUnlockManagerSource().then(function (_a) {
            var UnlockContentManager = _a.UnlockContentManager;
            return UnlockContentManager.tryToUnlockPointedParagraph(book, bookElement, poitingArgumentParts, originalLinkLocation);
        });
    };
    UnlockModuleClass.prototype.unlockFragments = function (book, bookElement, unlockType, optionalUnlockContentId, targetParagraphs, originalLinkLocation, priceHint, additionalParameters) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getUnlockManagerSource().then(function (_a) {
                var UnlockContentManager = _a.UnlockContentManager;
                return resolve(UnlockContentManager.unlockFragments(book, bookElement, unlockType, optionalUnlockContentId, targetParagraphs, originalLinkLocation, priceHint, additionalParameters));
            });
        });
    };
    UnlockModuleClass.prototype.showModalForCurrentBookElementPurchases = function ($heading, optionalTargetParagraphs) {
        if (optionalTargetParagraphs === void 0) { optionalTargetParagraphs = null; }
        this.getModalSource().then(function (_a) {
            var UnlockModal = _a.UnlockModal;
            return UnlockModal.showModalForCurrentBookElementPurchases($heading, optionalTargetParagraphs);
        });
    };
    UnlockModuleClass.prototype.getUnlockManagerSource = function () {
        if (!this.unlockManagerSourcePromise) {
            this.unlockManagerSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructUnlockManagerSourcePromise);
        }
        return this.unlockManagerSourcePromise;
    };
    UnlockModuleClass.prototype.constructUnlockManagerSourcePromise = function () {
        return Promise.all(/* import() | unlockManager */[__webpack_require__.e(7034), __webpack_require__.e(7213), __webpack_require__.e(7147), __webpack_require__.e(5788), __webpack_require__.e(7678), __webpack_require__.e(8683), __webpack_require__.e(199)]).then(__webpack_require__.bind(__webpack_require__, 48683));
    };
    UnlockModuleClass.prototype.getFreePreviewManagerSource = function () {
        if (!this.freePreviewManagerSourcePromise) {
            this.freePreviewManagerSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructFreePreviewSourcePromise);
        }
        return this.freePreviewManagerSourcePromise;
    };
    UnlockModuleClass.prototype.constructFreePreviewSourcePromise = function () {
        return Promise.all(/* import() | freePreviewManager */[__webpack_require__.e(7034), __webpack_require__.e(5211), __webpack_require__.e(9691), __webpack_require__.e(2877)]).then(__webpack_require__.bind(__webpack_require__, 29691));
    };
    UnlockModuleClass.prototype.getModalSource = function () {
        if (!this.modalSourcePromise) {
            this.modalSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructUnlockModalSourcePromise);
        }
        return this.modalSourcePromise;
    };
    UnlockModuleClass.prototype.constructUnlockModalSourcePromise = function () {
        return Promise.all(/* import() | unlockModal */[__webpack_require__.e(7034), __webpack_require__.e(7213), __webpack_require__.e(7147), __webpack_require__.e(5788), __webpack_require__.e(7678), __webpack_require__.e(4479), __webpack_require__.e(8683), __webpack_require__.e(7683)]).then(__webpack_require__.bind(__webpack_require__, 18879));
    };
    UnlockModuleClass.prototype.getUnlockTextSource = function () {
        if (!this.unlockTextSourcePromise) {
            this.unlockTextSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructUnlockTextSourcePromise);
        }
        return this.unlockTextSourcePromise;
    };
    UnlockModuleClass.prototype.constructUnlockTextSourcePromise = function () {
        return __webpack_require__.e(/* import() | unlockText */ 8302).then(__webpack_require__.bind(__webpack_require__, 15797));
    };
    UnlockModuleClass.prototype.isNotNewUserDiscount = function (productDiscount) {
        if (productDiscount == null) {
            return true;
        }
        try {
            for (var code in productDiscount) {
                if (productDiscount[code] && productDiscount[code].isNewCustomerDiscount) {
                    return false;
                }
            }
        }
        catch (e) {
            return true;
        }
        return true;
    };
    return UnlockModuleClass;
}());

var UnlockModule = new UnlockModuleClass();


/***/ }),

/***/ 90360:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Q": () => (/* binding */ UserActionTrackerModule)
/* harmony export */ });
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var UserActionTrackerModuleClass = /** @class */ (function () {
    function UserActionTrackerModuleClass() {
    }
    UserActionTrackerModuleClass.prototype.processSubscriptionsAction = function (data, productId) {
        if (productId === void 0) { productId = -1; }
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processSubscriptionsAction(data, productId);
        });
    };
    UserActionTrackerModuleClass.prototype.processRelatedSectionAction = function (data, productId) {
        if (productId === void 0) { productId = -1; }
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processRelatedSectionAction(data, productId);
        });
    };
    UserActionTrackerModuleClass.prototype.processSummariesAction = function (data, productId) {
        if (productId === void 0) { productId = -1; }
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processSummariesAction(data, productId);
        });
    };
    UserActionTrackerModuleClass.prototype.processThisChapterCoversAction = function (data) {
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processThisChapterCoversAction(data);
        });
    };
    UserActionTrackerModuleClass.prototype.processGenericAction = function (actionType, data) {
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processGenericAction(actionType, data);
        });
    };
    UserActionTrackerModuleClass.prototype.processCodeCopiedAction = function (data) {
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processCodeCopiedAction(data);
        });
    };
    UserActionTrackerModuleClass.prototype.processGoToShoppingCartAction = function () {
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processGoToShoppingCartAction();
        });
    };
    UserActionTrackerModuleClass.prototype.processLoginModalAction = function (data) {
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processLoginModalAction(data);
        });
    };
    UserActionTrackerModuleClass.prototype.processSimplifiedLoginModalAction = function (data) {
        this.getSource().then(function (_a) {
            var UserActionTrackerManager = _a.UserActionTrackerManager;
            UserActionTrackerManager.processSimplifiedLoginModalAction(data);
        });
    };
    UserActionTrackerModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    UserActionTrackerModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | userActionTrackerManager */[__webpack_require__.e(3996), __webpack_require__.e(4168)]).then(__webpack_require__.bind(__webpack_require__, 78986));
    };
    return UserActionTrackerModuleClass;
}());
var UserActionTrackerModule = new UserActionTrackerModuleClass();


/***/ }),

/***/ 68651:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Y": () => (/* binding */ UserProfileModule)
/* harmony export */ });
/* unused harmony export UserProfileModuleClass */
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var $document = $(document);
var UserProfileModuleClass = /** @class */ (function () {
    function UserProfileModuleClass() {
    }
    UserProfileModuleClass.prototype.setShowChat = function (showChat) {
        this.getSource().then(function (_a) {
            var UserProfileModal = _a.UserProfileModal;
            return UserProfileModal.saveShowChat(showChat);
        });
    };
    UserProfileModuleClass.prototype.prefetchData = function () {
        this.getSource().then(function (_a) {
            var UserProfileModal = _a.UserProfileModal;
            return UserProfileModal.prefetchData();
        });
    };
    UserProfileModuleClass.prototype.showUserProfileModal = function (fillForBeta) {
        $document.trigger("requestNotification", "opening user profile menu ...");
        this.getSource().then(function (_a) {
            var UserProfileModal = _a.UserProfileModal;
            return UserProfileModal.show(fillForBeta);
        });
    };
    UserProfileModuleClass.prototype.showPublicProfile = function (userId) {
        $document.trigger("requestNotification", "opening user profile ...");
        this.getSource().then(function (_a) {
            var UserProfileModal = _a.UserProfileModal;
            return UserProfileModal.showPublicProfile(userId);
        });
    };
    UserProfileModuleClass.prototype.hide = function () {
        this.getSource().then(function (_a) {
            var UserProfileModal = _a.UserProfileModal;
            return UserProfileModal.hide();
        });
    };
    UserProfileModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    UserProfileModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | userProfile */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(7213), __webpack_require__.e(3326), __webpack_require__.e(5557), __webpack_require__.e(1389), __webpack_require__.e(8784), __webpack_require__.e(4858), __webpack_require__.e(1353), __webpack_require__.e(3523), __webpack_require__.e(873)]).then(__webpack_require__.bind(__webpack_require__, 34379));
    };
    return UserProfileModuleClass;
}());

var UserProfileModule = new UserProfileModuleClass();


/***/ }),

/***/ 46079:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "X": () => (/* binding */ generateBookPageTemplate)
/* harmony export */ });
function generateBookPageTemplate(bookElementTitle) {
    return /*html*/ "<div class=\"row\" id=\"book-content-main-row\">\n<div class=\"large-12 columns\">\n    <div id=\"book-main-content-container\">\n        <div id=\"track-point-column\" class=\"hidden\">\n            <div class=\"track-point-wrapper\" id=\"pointing-start-point\">\n                <i class=\"fal fa-level-down fa-flip-horizontal\" aria-hidden=\"true\"></i>\n            </div>\n            <div class=\"track-point-wrapper\" id=\"pointing-end-point\">\n                <i class=\"fal fa-level-up fa-flip-horizontal\" aria-hidden=\"true\"></i>\n            </div>\n            <div class=\"track-point-wrapper\" id=\"play-point\"  title=\"play\">\n                <div class=\"track-point\">\n                    <i class=\"icon-i-play-triangle icon-i\"></i>\n                </div>\n            </div>\n            <div class=\"track-point-wrapper\" id=\"current-position-point\" title=\"play\">\n                <div class=\"track-point\">\n                    <div class=\"track-point-play\">\n                        <i></i>\n                    </div>\n                </div>\n            </div>\n            <div class=\"track-point-wrapper\" id=\"off-screen-position-point\" title=\"jump to audio\">\n                <div class=\"track-point\">\n                    <div class=\"off-screen-position-point-arrow-container\">\n                        <i class=\"icon-i\"></i>\n                    </div>\n                </div>\n            </div>\n            <div class=\"track-point-wrapper\" id=\"restart-paragraph-point\" title=\"restart paragraph\">\n                <div class=\"track-point\">\n                    <i class=\"fa fa-redo\"></i>\n                </div>\n            </div>\n        </div>\n        <div id=\"book-markup-container\">\n            <div class=\"readable-text\">\n                <h1>".concat(bookElementTitle, "</h1>\n            </div>\n            <div class=\"introduction-summary\">\n                <h3>This chapter covers</h3>\n                <ul>\n                    <li class=\"readable-text\"><span class=\"placeholder\" style=\"margin-right: 30px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span></li>\n                    <li class=\"readable-text\"><span class=\"placeholder\"><span class=\"placeholder-animated-background\">&nbsp;</span></span></li>\n                    <li class=\"readable-text\"><span class=\"placeholder\" style=\"margin-right: 60px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span></li>\n                </ul>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 30px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 10px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 70px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"loading-page-image-placeholder\"></div>\n\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 30px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 10px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 80px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"loading-page-image-placeholder\"></div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 30px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 10px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 70px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 10px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"loading-page-image-placeholder\"></div>\n\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 30px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 10px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 80px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 30px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 10px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"readable-text\">\n                <span class=\"placeholder\" style=\"margin-right: 80px\"><span class=\"placeholder-animated-background\">&nbsp;</span></span>\n            </div>\n            <div class=\"loading-page-image-placeholder\"></div>\n        </div>\n        <div id=\"right-margin-column\"></div>\n        <div id=\"right-margin-menu-column\"></div>\n    </div>\n</div>\n</div>");
}
;


/***/ }),

/***/ 6422:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* unused harmony export PointingLinkProvider */
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93292);
/* harmony import */ var _utils_LinksUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68577);


var PointingLinkProvider = /** @class */ (function () {
    function PointingLinkProvider() {
    }
    PointingLinkProvider.prototype.createSimpleLink = function (book, bookElement, paragraphIds) {
        return "";
    };
    PointingLinkProvider.prototype.createPointingLink = function (book, bookElement, paragraphIds, shortenLink) {
        if (shortenLink === void 0) { shortenLink = true; }
        var simpleLink = this.createSimpleLink(book, bookElement, paragraphIds);
        return new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/pointing/create"), function (data) {
                data.link = _utils_LinksUtils__WEBPACK_IMPORTED_MODULE_1__/* .LinksUtils.adjustBookLink */ .r.adjustBookLink(data.link || "");
                var link = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getClientAbsoluteUrl */ .Z.getClientAbsoluteUrl(data.link);
                if (shortenLink) {
                    $.ajax({
                        url: "https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyBX77QKufqi8RxQeDQ4ziGbcl1XuZ9Uayw",
                        method: "post",
                        contentType: "application/json; charset=utf-8",
                        data: '{ longUrl: "' + link + '"}'
                    }).done(function (googleData) {
                        resolve(googleData && googleData.id ? googleData.id : link);
                    }).fail(function (error) {
                        resolve(link);
                    });
                }
                else {
                    resolve(link);
                }
            }, function (error) {
                console.log("Error when producing the pointing link", error);
                resolve(simpleLink);
            }, {
                bookShortName: book.shortName,
                bookElementShortName: bookElement.shortName,
                meapVersion: bookElement.meapVersion,
                paragraphIds: paragraphIds.join(",")
            });
        });
    };
    return PointingLinkProvider;
}());

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new PointingLinkProvider());


/***/ }),

/***/ 37168:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "H": () => (/* binding */ AuthProvider)
});

// UNUSED EXPORTS: AuthProviderClass

// EXTERNAL MODULE: ./src/ts/utils/DeviceUtils.ts
var DeviceUtils = __webpack_require__(87876);
// EXTERNAL MODULE: ./src/ts/utils/WebUtils.ts
var WebUtils = __webpack_require__(93292);
// EXTERNAL MODULE: ./src/ts/services/userService/UserService.ts
var UserService = __webpack_require__(70296);
// EXTERNAL MODULE: ./src/ts/utils/ValueUtils.ts
var ValueUtils = __webpack_require__(3199);
;// CONCATENATED MODULE: ./src/ts/services/authService/AuthServiceWeb.ts



var isCurrentlyLoggedIn = false;
var isCurrentUserAdmin = false;
var AuthServiceWeb = /** @class */ (function () {
    function AuthServiceWeb() {
    }
    AuthServiceWeb.prototype.isLoggedIn = function (forceRequest) {
        var _this = this;
        if (forceRequest === void 0) { forceRequest = false; }
        if (forceRequest) {
            this.isLoggedInPromise = null;
            UserService/* UserService.setAuthInfo */.K.setAuthInfo(null);
        }
        if (UserService/* UserService.getAuthInfo */.K.getAuthInfo() != null) {
            return Promise.resolve(UserService/* UserService.getAuthInfo */.K.getAuthInfo());
        }
        if (this.isLoggedInPromise) {
            return this.isLoggedInPromise;
        }
        return this.isLoggedInPromise = new Promise(function (resolve, reject) {
            WebUtils/* default.getFromOurBackend */.Z.getFromOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("auth/userIsLoggedIn"), function (data) {
                isCurrentlyLoggedIn = !!data.loggedIn;
                if (data.userDetails && data.userDetails.firstLoginDate) {
                    data.userDetails.firstLoginDate = ValueUtils/* ValueUtils.getDateFromString */.d.getDateFromString(data.userDetails.firstLoginDate);
                }
                if (data.userDetails) {
                    isCurrentUserAdmin = !!data.userDetails.isAdmin;
                    if (isCurrentUserAdmin) {
                        $(document.body).addClass("user-is-admin");
                    }
                }
                UserService/* UserService.setAuthInfo */.K.setAuthInfo(data);
                resolve(data);
            }, function () {
                UserService/* UserService.setAuthInfo */.K.setAuthInfo(null);
                isCurrentlyLoggedIn = false;
                isCurrentUserAdmin = false;
                resolve({ loggedIn: false, status: "not", userDetails: _this.getEmptyUserDetails() });
            });
        });
    };
    AuthServiceWeb.prototype.createAuthorizedProductsMap = function (authorizedProductIds) {
        var map = {};
        if (!authorizedProductIds || !authorizedProductIds.length) {
            return map;
        }
        for (var _i = 0, authorizedProductIds_1 = authorizedProductIds; _i < authorizedProductIds_1.length; _i++) {
            var id = authorizedProductIds_1[_i];
            map[id] = true;
        }
        return map;
    };
    AuthServiceWeb.prototype.getEmptyUserDetails = function () {
        return { id: -1, firstName: '', lastName: '', email: '', avatarUrl: "", tokenInfo: null, name: "", votes: [], spamCommentIds: [], authorizedProductIds: {}, isNewCustomer: true, organization: "", title: "", location: "", userInfo: "", willParticipateInChat: false, isBetaUser: false, hasAccessToEverything: false };
    };
    AuthServiceWeb.prototype.attemptPasswordResetLogin = function (username, password, passwordResetToken, chapterToken) {
        var _this = this;
        this.lastEmail = username;
        if (this.loginAttemptPromise != null) {
            return this.loginAttemptPromise;
        }
        return this.loginAttemptPromise = new Promise(function (resolve, reject) {
            WebUtils/* default.attemptLogin */.Z.attemptLogin(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/auth/loginAndSetPassword"), function (data) {
                resolve(data);
                _this.loginAttemptPromise = null;
            }, function (error) {
                reject(error);
                _this.loginAttemptPromise = null;
            }, {
                username: username,
                password: password,
                passwordResetToken: passwordResetToken,
                chapterToken: chapterToken
            });
        });
    };
    AuthServiceWeb.prototype.attemptLogin = function (username, password) {
        var _this = this;
        this.lastEmail = username;
        if (this.loginAttemptPromise != null) {
            return this.loginAttemptPromise;
        }
        return this.loginAttemptPromise = new Promise(function (resolve, reject) {
            WebUtils/* default.attemptLogin */.Z.attemptLogin(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/auth/login"), function (data) {
                resolve(data);
                _this.loginAttemptPromise = null;
            }, function (error) {
                reject(error);
                _this.loginAttemptPromise = null;
            }, {
                username: username,
                password: password
            });
        });
    };
    AuthServiceWeb.prototype.logout = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            WebUtils/* default.getFromOurBackend */.Z.getFromOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/auth/logout"), function () {
                _this.deleteAuthCookies();
                resolve();
            }, function () {
                _this.deleteAuthCookies();
                reject();
            }, {}, false);
        });
    };
    AuthServiceWeb.prototype.isCurrentlyLoggedIn = function () {
        return isCurrentlyLoggedIn;
    };
    AuthServiceWeb.prototype.isCurrentUserAdmin = function () {
        return isCurrentUserAdmin;
    };
    AuthServiceWeb.prototype.isExistingUser = function () {
        try {
            var authInfo = UserService/* UserService.getAuthInfo */.K.getAuthInfo();
            if (!authInfo || !authInfo.userDetails) {
                return false;
            }
            return !authInfo.userDetails.isNewCustomer;
        }
        catch (e) { }
        return false;
    };
    AuthServiceWeb.prototype.getUserAccountStatus = function (email) {
        return new Promise(function (resolve, reject) {
            WebUtils/* default.getFromOurBackend */.Z.getFromOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/registration/userAccountStatus"), function (data) {
                console.log("userAccountStatus: ", data);
                resolve(data.userAccountStatus);
            }, function (error) {
                resolve('UNKNOWN');
                console.log("Error retrieving user account status", error);
            }, {
                email: email
            });
        });
    };
    AuthServiceWeb.prototype.registerUser = function (firstName, lastName, email, password, subscribe) {
        var _this = this;
        this.lastEmail = email;
        if (this.registerUserPromise != null) {
            return this.registerUserPromise;
        }
        return this.registerUserPromise = new Promise(function (resolve, reject) {
            WebUtils/* default.postToOurBackend */.Z.postToOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/registration/createNewUserAccount"), function () {
                $(document).trigger("registrationSubscribeInfo", subscribe);
                _this.registerUserPromise = null;
                resolve();
            }, function () {
                _this.registerUserPromise = null;
                reject();
            }, {
                firstName: firstName,
                lastName: lastName,
                email: email,
                password: password,
                subscribe: subscribe
            });
        });
    };
    AuthServiceWeb.prototype.deleteAuthCookies = function () {
        WebUtils/* default.clearCookies */.Z.clearCookies();
    };
    return AuthServiceWeb;
}());
/* harmony default export */ const authService_AuthServiceWeb = (AuthServiceWeb);

;// CONCATENATED MODULE: ./src/ts/services/authService/AuthServiceFileSystem.ts



var AuthServiceFileSystem_isCurrentlyLoggedIn = false;
var AuthServiceFileSystem_isCurrentUserAdmin = false;
var AuthServiceFileSystem = /** @class */ (function () {
    function AuthServiceFileSystem() {
        this.webService = new authService_AuthServiceWeb();
    }
    AuthServiceFileSystem.prototype.isLoggedIn = function (forceRequest) {
        var _this = this;
        if (forceRequest === void 0) { forceRequest = false; }
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return this.loadAuthInfo();
        }
        return new Promise(function (resolve, reject) {
            return _this.webService.isLoggedIn(forceRequest).then(function (authInfo) {
                _this.storeAuthInfo(authInfo);
                AuthServiceFileSystem_isCurrentlyLoggedIn = authInfo && authInfo.loggedIn;
                AuthServiceFileSystem_isCurrentUserAdmin = !!(authInfo && authInfo.userDetails && authInfo.userDetails.isAdmin);
                resolve(authInfo);
            });
        });
    };
    AuthServiceFileSystem.prototype.attemptPasswordResetLogin = function (username, password, passwordResetToken, chapterToken) {
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return this.loadAuthInfo();
        }
        return this.webService.attemptPasswordResetLogin(username, password, passwordResetToken, chapterToken);
    };
    AuthServiceFileSystem.prototype.attemptLogin = function (username, password) {
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return this.loadAuthInfo();
        }
        return this.webService.attemptLogin(username, password);
    };
    AuthServiceFileSystem.prototype.logout = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.webService.logout();
            _this.getFsUtils().writeToFile(_this.getFsUtils().getAuthInfoLocation(), "").then(resolve);
        });
    };
    AuthServiceFileSystem.prototype.isCurrentlyLoggedIn = function () {
        return AuthServiceFileSystem_isCurrentlyLoggedIn;
    };
    AuthServiceFileSystem.prototype.isCurrentUserAdmin = function () {
        return AuthServiceFileSystem_isCurrentUserAdmin;
    };
    AuthServiceFileSystem.prototype.isExistingUser = function () {
        try {
            var authInfo = UserService/* UserService.getAuthInfo */.K.getAuthInfo();
            if (!authInfo || !authInfo.userDetails) {
                return false;
            }
            return !authInfo.userDetails.isNewCustomer;
        }
        catch (e) { }
        return false;
    };
    AuthServiceFileSystem.prototype.getUserAccountStatus = function (email) {
        var _this = this;
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return new Promise(function (resolve, reject) {
                return _this.loadAuthInfo().then(function (authInfo) {
                    return authInfo ? resolve(authInfo.status) : reject("No authentication information found");
                });
            });
        }
        return this.webService.getUserAccountStatus(email);
    };
    AuthServiceFileSystem.prototype.registerUser = function (firstName, lastName, email, password, subscribe) {
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            throw Error("Device needs connection to internet to register a new user");
        }
        return this.webService.registerUser(firstName, lastName, email, password, subscribe);
    };
    AuthServiceFileSystem.prototype.loadAuthInfo = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.getFsUtils().readFile(_this.getFsUtils().getAuthInfoLocation()).then(function (authInfoResponse) {
                var authInfo = JSON.parse(authInfoResponse);
                AuthServiceFileSystem_isCurrentUserAdmin = authInfo && authInfo.userDetails && !!authInfo.userDetails.isAdmin;
                AuthServiceFileSystem_isCurrentlyLoggedIn = authInfo && authInfo.loggedIn;
                resolve(authInfo);
            });
        });
    };
    AuthServiceFileSystem.prototype.storeAuthInfo = function (authInfo) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.getFsUtils().writeToFile(_this.getFsUtils().getAuthInfoLocation(), JSON.stringify(authInfo)).then(resolve);
        });
    };
    AuthServiceFileSystem.prototype.getFsUtils = function () {
        return window.fileSystemUtils;
    };
    return AuthServiceFileSystem;
}());
/* harmony default export */ const authService_AuthServiceFileSystem = (AuthServiceFileSystem);

// EXTERNAL MODULE: ./src/ts/utils/LocalStorageUtils.ts
var LocalStorageUtils = __webpack_require__(67008);
;// CONCATENATED MODULE: ./src/ts/services/authService/AuthProvider.ts




var AuthProviderClass = /** @class */ (function () {
    function AuthProviderClass() {
        var _this = this;
        this.currentlyLoggedIn = false;
        this.existingUser = false;
        this.authServicePromise = new Promise(function (resolve, reject) {
            DeviceUtils/* default.loadDeviceInfo */.Z.loadDeviceInfo().then(function (deviceInfo) {
                resolve(getAuthService(deviceInfo.platform));
            }).catch(function (e) { return reject(e); });
        });
        this.authServicePromise.then(function (authService) {
            _this.currentlyLoggedIn = authService.isCurrentlyLoggedIn();
            _this.existingUser = authService.isExistingUser();
        });
    }
    AuthProviderClass.prototype.getLatestUserFirstName = function () {
        return LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("latestUserFirstName") || "";
    };
    AuthProviderClass.prototype.isLoggedIn = function (forceRequest) {
        var _this = this;
        if (forceRequest === void 0) { forceRequest = false; }
        return new Promise(function (resolve, reject) {
            return _this.authServicePromise.then(function (authService) {
                return authService.isLoggedIn(forceRequest).then(function (authInfo) {
                    _this.currentlyLoggedIn = authInfo.loggedIn;
                    _this.currentUserInfo = authInfo;
                    if (authInfo != null && authInfo.userDetails != null) {
                        if (authInfo.userDetails.firstName) {
                            LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("latestUserFirstName", authInfo.userDetails.firstName);
                        }
                        AuthProvider.lastEmail = authInfo.userDetails.email;
                    }
                    /*authInfo.userDetails.subscriptionInfo = {
                        hasSubscription: true,
                        isPaused: false
                    };*/
                    resolve(authInfo);
                });
            });
        });
    };
    AuthProviderClass.prototype.isCurrentlyLoggedIn = function () {
        return this.currentlyLoggedIn;
    };
    AuthProviderClass.prototype.getCurrentUserInfo = function () {
        return this.currentUserInfo;
    };
    AuthProviderClass.prototype.isCurrentUserAdmin = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.authServicePromise.then(function (authService) {
                resolve(authService.isCurrentUserAdmin());
            }).catch(function (e) { return resolve(false); });
        });
    };
    AuthProviderClass.prototype.isExistingUser = function () {
        return this.existingUser;
    };
    AuthProviderClass.prototype.passwordResetLogin = function (username, password, passwordToken, chapterToken) {
        var _this = this;
        this.lastEmail = username;
        return new Promise(function (resolve, reject) {
            return _this.authServicePromise.then(function (authService) {
                return authService.attemptPasswordResetLogin(username, password, passwordToken, chapterToken).then(function (loginResponse) {
                    return resolve(loginResponse);
                }).catch(function (e) { return reject(e); });
            });
        });
    };
    AuthProviderClass.prototype.attemptLogin = function (username, password) {
        var _this = this;
        this.lastEmail = username;
        return new Promise(function (resolve, reject) {
            return _this.authServicePromise.then(function (authService) {
                return authService.attemptLogin(username, password).then(function (loginResponse) {
                    return resolve(loginResponse);
                }).catch(function (e) { return reject(e); });
            });
        });
    };
    AuthProviderClass.prototype.logout = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.authServicePromise.then(function (authService) {
                return authService.logout().then(function () { return resolve(); })
                    .catch(function () { return reject(); });
            }).catch(function () { return reject(); });
        });
    };
    AuthProviderClass.prototype.registerUser = function (firstName, lastName, email, firstPassword, subscribe) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.authServicePromise.then(function (authService) {
                return authService.registerUser(firstName, lastName, email, firstPassword, subscribe).then(function () {
                    return resolve();
                });
            });
        });
    };
    AuthProviderClass.prototype.getUserAccountStatus = function (email) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.authServicePromise.then(function (authService) {
                return authService.getUserAccountStatus(email).then(function (statusResponse) {
                    return resolve(statusResponse);
                });
            });
        });
    };
    return AuthProviderClass;
}());

function getAuthService(platform) {
    switch (platform) {
        case DeviceUtils/* Platform.Cordova */.t.Cordova:
        case DeviceUtils/* Platform.Electron */.t.Electron:
            return new authService_AuthServiceFileSystem();
        case DeviceUtils/* Platform.Browser */.t.Browser:
        default:
            return new authService_AuthServiceWeb();
    }
}
var AuthProvider = new AuthProviderClass();


/***/ }),

/***/ 75107:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$": () => (/* binding */ BookContentProvider)
/* harmony export */ });
/* unused harmony export BookContentProviderClass */
/* harmony import */ var _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);
/* harmony import */ var _models_Book__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91098);
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(93292);
/* harmony import */ var _progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24279);
/* harmony import */ var _models_ProductOffering__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3296);
/* harmony import */ var _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3199);
/* harmony import */ var _utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(52810);
/* harmony import */ var _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(98498);
/* harmony import */ var _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(83000);









var BookContentProviderClass = /** @class */ (function () {
    function BookContentProviderClass() {
        this.bookElementIntroPromiseMap = {};
        this.tocOwnershipInfoPromiseMap = {};
        this.bookChapterOwnership = {};
        this.startTime = Date.now();
    }
    BookContentProviderClass.prototype.resetCache = function () {
        this.relatedProductsPromiseMap = {};
        this.customersAlsoBoughtPromiseMap = {};
        this.bookElementIntroPromiseMap = {};
        this.userEditorBooksShortNamesPromise = null;
        this.tocOwnershipInfoPromiseMap = {};
        this.bookChapterOwnership = {};
        this.userLibraryPromise = null;
        this.userLibrary = null;
        this.userLibraryAndCatalog = null;
        this.userLibraryAndCatalogPromise = null;
        this.userLibraryAndSimpleCatalog = null;
        this.userLibraryAndSimpleCatalogPromise = null;
        this.bestSellersPromise = null;
        this.catalogBooks = null;
        this.catalogPromise = null;
        this.simpleCatalogBooks = null;
        this.simpleCatalogPromise = null;
        this.startTime = Date.now();
    };
    BookContentProviderClass.prototype.markBookAsDownloaded = function (bookShortName) {
        var currentBook = null;
        if (this.userLibrary != null) {
            for (var _i = 0, _a = this.userLibrary; _i < _a.length; _i++) {
                var book = _a[_i];
                if (book.shortName == bookShortName) {
                    currentBook = book;
                    book.hasBeenDownloaded = true;
                    break;
                }
            }
        }
        if (this.userLibraryAndCatalog != null) {
            if (this.userLibraryAndCatalog.userLibrary != null) {
                for (var _b = 0, _c = this.userLibraryAndCatalog.userLibrary; _b < _c.length; _b++) {
                    var book = _c[_b];
                    if (book.shortName == bookShortName) {
                        currentBook = book;
                        book.hasBeenDownloaded = true;
                        break;
                    }
                }
            }
            if (this.userLibraryAndCatalog.catalog != null) {
                for (var _d = 0, _e = this.userLibraryAndCatalog.catalog; _d < _e.length; _d++) {
                    var book = _e[_d];
                    if (book.shortName == bookShortName) {
                        currentBook = book;
                        book.hasBeenDownloaded = true;
                        break;
                    }
                }
            }
        }
        this.getService().then(function (bookContentService) {
            bookContentService.markBookAsDownloaded(bookShortName, currentBook != null ? currentBook.slug : "");
        });
    };
    BookContentProviderClass.prototype.unmarkBookAsDownloaded = function (bookShortName) {
        var currentBook = null;
        if (this.userLibrary != null) {
            for (var _i = 0, _a = this.userLibrary; _i < _a.length; _i++) {
                var book = _a[_i];
                if (book.shortName == bookShortName) {
                    currentBook = book;
                    book.hasBeenDownloaded = false;
                    break;
                }
            }
        }
        if (this.userLibraryAndCatalog != null) {
            if (this.userLibraryAndCatalog.userLibrary != null) {
                for (var _b = 0, _c = this.userLibraryAndCatalog.userLibrary; _b < _c.length; _b++) {
                    var book = _c[_b];
                    if (book.shortName == bookShortName) {
                        currentBook = book;
                        book.hasBeenDownloaded = false;
                        break;
                    }
                }
            }
            if (this.userLibraryAndCatalog.catalog != null) {
                for (var _d = 0, _e = this.userLibraryAndCatalog.catalog; _d < _e.length; _d++) {
                    var book = _e[_d];
                    if (book.shortName == bookShortName) {
                        currentBook = book;
                        book.hasBeenDownloaded = false;
                        break;
                    }
                }
            }
        }
        this.getService().then(function (bookContentService) {
            bookContentService.unmarkBookAsDownloaded(bookShortName, currentBook != null ? currentBook.slug : "");
        });
        $(document).trigger("bookDeleted", bookShortName);
    };
    BookContentProviderClass.prototype.getBookElement = function (bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getBookElement(bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getBookElementIntro = function (bookShortNameOrSlug, bookElementShortName, meapVersion) {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        var key = "".concat(bookShortNameOrSlug || "", "-").concat(bookElementShortName || "", "-").concat(meapVersion || "");
        if (this.bookElementIntroPromiseMap[key] != null) {
            return this.bookElementIntroPromiseMap[key];
        }
        return this.bookElementIntroPromiseMap[key] = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getBookElementIntro(bookShortNameOrSlug, bookElementShortName, meapVersion)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getBookElementTokenPrice = function (bookShortName, bookElementShortName, meapVersion) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getBookElementTokenPrice(bookShortName, bookElementShortName, meapVersion)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.deleteBook = function (bookShortName) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.deleteBook(bookShortName)
                    .then(function (data) { return resolve(); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getUserEditorBooksShortNames = function () {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.userEditorBooksShortNamesPromise) {
            return this.userEditorBooksShortNamesPromise;
        }
        return this.userEditorBooksShortNamesPromise = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getUserEditorBooksShortNames()
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getUsersLibrary = function () {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.userLibrary != null) {
            return Promise.resolve(this.userLibrary);
        }
        if (this.userLibraryPromise) {
            return this.userLibraryPromise;
        }
        return this.userLibraryPromise = new Promise(function (resolve, reject) {
            Promise.all([
                _this.getUserOwnedProducts(),
                _this.getSimpleCatalog(),
                _progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_3__/* .ProgressProvider.fetchAllBooksProgress */ .w.fetchAllBooksProgress(),
                _this.getDownloadedBooksShortNamesAndSlugs(),
                _this.getDownloadableBooksShortNames()
            ]).then(function (data) {
                var ownedProducts = data[0];
                var catalogBooks = data[1];
                var allBooksProgress = data[2];
                var downloadedBooksMap = data[3];
                var downloadableBooksShortNames = data[4] || [];
                var ownedCatalogBooks = [];
                var ownedCatalogBookMap = {};
                for (var _i = 0, catalogBooks_1 = catalogBooks; _i < catalogBooks_1.length; _i++) {
                    var catalogBook = catalogBooks_1[_i];
                    _this.assignBookProgress(catalogBook, allBooksProgress);
                    for (var _a = 0, ownedProducts_1 = ownedProducts; _a < ownedProducts_1.length; _a++) {
                        var ownedProduct = ownedProducts_1[_a];
                        if (ownedProduct.shortName === catalogBook.shortName) {
                            catalogBook.userOwnsBook = !ownedProduct.partialBookOwnership;
                            if (downloadedBooksMap[catalogBook.shortName]) {
                                catalogBook.hasBeenDownloaded = true;
                            }
                            if (!ownedCatalogBookMap[catalogBook.shortName]) {
                                ownedCatalogBookMap[catalogBook.shortName] = true;
                                ownedCatalogBooks.push(catalogBook);
                            }
                            catalogBook.partialBookOwnership = ownedProduct.partialBookOwnership;
                            if (ownedProduct.isAudio()) {
                                catalogBook.userOwnsAudio = true;
                            }
                        }
                    }
                }
                var canDownloadAllBooks = downloadableBooksShortNames != null && downloadableBooksShortNames.length == 1 && downloadableBooksShortNames[0] == "*";
                ownedCatalogBooks.forEach(function (book) {
                    book.lastAccessedTime = Number.isNaN(book.lastAccessedTime) ? 0 : (book.lastAccessedTime || 0);
                    book.userCanDownloadBook = canDownloadAllBooks || downloadableBooksShortNames.indexOf(book.shortName) >= 0;
                });
                _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sortBooksDefault */ .Z.sortBooksDefault(ownedCatalogBooks);
                _this.userLibrary = ownedCatalogBooks;
                resolve(ownedCatalogBooks);
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getUsersLibraryAndSimpleCatalog = function (isLoggedIn) {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.userLibraryAndSimpleCatalog != null) {
            return Promise.resolve(this.userLibraryAndSimpleCatalog);
        }
        if (this.userLibraryAndSimpleCatalogPromise) {
            return this.userLibraryAndSimpleCatalogPromise;
        }
        return this.userLibraryAndSimpleCatalogPromise = new Promise(function (resolve, reject) {
            Promise.all([
                isLoggedIn ? _this.getUserOwnedProducts() : Promise.resolve([]),
                _this.getSimpleCatalog(),
                isLoggedIn ? _progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_3__/* .ProgressProvider.fetchAllBooksProgress */ .w.fetchAllBooksProgress() : Promise.resolve({}),
                _this.getDownloadedBooksShortNamesAndSlugs(),
                _this.getDownloadableBooksShortNames()
            ]).then(function (_a) {
                var ownedProducts = _a[0], catalogBooks = _a[1], allBooksProgress = _a[2], downloadedBooksMap = _a[3], downloadableBooksShortNames = _a[4];
                var ownedCatalogBooks = [];
                var ownedCatalogBookMap = {};
                for (var _i = 0, catalogBooks_2 = catalogBooks; _i < catalogBooks_2.length; _i++) {
                    var catalogBook = catalogBooks_2[_i];
                    if (downloadedBooksMap[catalogBook.shortName]) {
                        catalogBook.hasBeenDownloaded = true;
                    }
                    _this.assignBookProgress(catalogBook, allBooksProgress);
                    for (var _b = 0, ownedProducts_2 = ownedProducts; _b < ownedProducts_2.length; _b++) {
                        var ownedProduct = ownedProducts_2[_b];
                        if (ownedProduct.shortName === catalogBook.shortName) {
                            catalogBook.userOwnsBook = !ownedProduct.partialBookOwnership;
                            catalogBook.partialBookOwnership = ownedProduct.partialBookOwnership;
                            if (!ownedCatalogBookMap[catalogBook.shortName]) {
                                ownedCatalogBookMap[catalogBook.shortName] = true;
                                ownedCatalogBooks.push(catalogBook);
                            }
                            if (ownedProduct.isAudio()) {
                                catalogBook.userOwnsAudio = true;
                            }
                        }
                    }
                }
                var canDownloadAllBooks = downloadableBooksShortNames != null && downloadableBooksShortNames.length == 1 && downloadableBooksShortNames[0] == "*";
                ownedCatalogBooks.forEach(function (book) {
                    book.lastAccessedTime = Number.isNaN(book.lastAccessedTime) ? 0 : (book.lastAccessedTime || 0);
                    book.userCanDownloadBook = canDownloadAllBooks || downloadableBooksShortNames.indexOf(book.shortName) >= 0;
                });
                _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sortBooksDefault */ .Z.sortBooksDefault(ownedCatalogBooks);
                _this.userLibraryAndSimpleCatalog = { userLibrary: ownedCatalogBooks, catalog: catalogBooks };
                resolve(_this.userLibraryAndSimpleCatalog);
            }).catch(function (e) {
                reject(e);
            });
        });
    };
    BookContentProviderClass.prototype.getUsersLibraryAndCatalog = function (isLoggedIn) {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.userLibraryAndCatalog != null) {
            return Promise.resolve(this.userLibraryAndCatalog);
        }
        if (this.userLibraryAndCatalogPromise) {
            return this.userLibraryAndCatalogPromise;
        }
        return this.userLibraryAndCatalogPromise = new Promise(function (resolve, reject) {
            Promise.all([
                isLoggedIn ? _this.getUserOwnedProducts() : Promise.resolve([]),
                _this.getCatalog(),
                isLoggedIn ? _progressService_ProgressProvider__WEBPACK_IMPORTED_MODULE_3__/* .ProgressProvider.fetchAllBooksProgress */ .w.fetchAllBooksProgress() : Promise.resolve({}),
                _this.getDownloadedBooksShortNamesAndSlugs(),
                _this.getDownloadableBooksShortNames()
            ]).then(function (_a) {
                var ownedProducts = _a[0], catalogBooks = _a[1], allBooksProgress = _a[2], downloadedBooksMap = _a[3], downloadableBooksShortNames = _a[4];
                var ownedCatalogBooks = [];
                var ownedCatalogBookMap = {};
                for (var _i = 0, catalogBooks_3 = catalogBooks; _i < catalogBooks_3.length; _i++) {
                    var catalogBook = catalogBooks_3[_i];
                    if (downloadedBooksMap[catalogBook.shortName]) {
                        catalogBook.hasBeenDownloaded = true;
                    }
                    _this.assignBookProgress(catalogBook, allBooksProgress);
                    for (var _b = 0, ownedProducts_3 = ownedProducts; _b < ownedProducts_3.length; _b++) {
                        var ownedProduct = ownedProducts_3[_b];
                        if (ownedProduct.shortName === catalogBook.shortName) {
                            catalogBook.userOwnsBook = !ownedProduct.partialBookOwnership;
                            catalogBook.partialBookOwnership = ownedProduct.partialBookOwnership;
                            if (!ownedCatalogBookMap[catalogBook.shortName]) {
                                ownedCatalogBookMap[catalogBook.shortName] = true;
                                ownedCatalogBooks.push(catalogBook);
                            }
                            if (ownedProduct.isAudio()) {
                                catalogBook.userOwnsAudio = true;
                            }
                        }
                    }
                }
                var canDownloadAllBooks = downloadableBooksShortNames != null && downloadableBooksShortNames.length == 1 && downloadableBooksShortNames[0] == "*";
                ownedCatalogBooks.forEach(function (book) {
                    book.lastAccessedTime = Number.isNaN(book.lastAccessedTime) ? 0 : (book.lastAccessedTime || 0);
                    book.userCanDownloadBook = canDownloadAllBooks || downloadableBooksShortNames.indexOf(book.shortName) >= 0;
                });
                _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sortBooksDefault */ .Z.sortBooksDefault(ownedCatalogBooks);
                _this.userLibraryAndCatalog = { userLibrary: ownedCatalogBooks, catalog: catalogBooks };
                resolve(_this.userLibraryAndCatalog);
            }).catch(function (e) {
                reject(e);
            });
        });
    };
    BookContentProviderClass.prototype.getUserOwnedProducts = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getUserOwnedProducts().then(function (data) {
                    var acceptedProducts = data.map(function (it) { return new _models_ProductOffering__WEBPACK_IMPORTED_MODULE_4__/* .Product */ .x(it.externalId, it.title, it.productType, it.productPrice, it.partialBookOwnership); });
                    resolve(acceptedProducts);
                })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getDownloadableBooksShortNames = function () {
        var _this = this;
        if (!_utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isApp */ .Z.isApp()) {
            return Promise.resolve([]);
        }
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getDownloadableBooksShortNames()
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return resolve([]); });
            }).catch(function (e) { return resolve([]); });
        });
    };
    BookContentProviderClass.prototype.getBestsellers = function () {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.bestSellersPromise) {
            return this.bestSellersPromise;
        }
        return this.bestSellersPromise = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                Promise.all([
                    BookContentProvider.getSimpleCatalog(),
                    bookContentService.getBestsellers()
                ]).then(function (_a) {
                    var catalogBooks = _a[0], rawBestsellers = _a[1];
                    var rawBestsellersMap = {};
                    for (var _i = 0, rawBestsellers_1 = rawBestsellers; _i < rawBestsellers_1.length; _i++) {
                        var rawBestseller = rawBestsellers_1[_i];
                        rawBestsellersMap[rawBestseller.id] = true;
                    }
                    resolve(catalogBooks.filter(function (it) { return rawBestsellersMap[it.manningId]; }));
                });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getCompleteBookElementPriceInfo = function (bookShortName, bookElementShortName, meapVersion) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getCompleteBookElementPriceInfo(bookShortName, bookElementShortName, meapVersion)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
                ;
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getBook = function (bookShortName, productId, webPriority) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getBook(bookShortName, productId, webPriority)
                    .then(function (data) { return resolve(_utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_6__/* ["default"].createBookFromBookData */ .Z.createBookFromBookData(data)); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getFreePreviewStatus = function (bookShortName) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getFreePreviewStatus(bookShortName).then(function (data) { return resolve(data); }).catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getMeaps = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getSimpleCatalog().then(function (catalogBooks) {
                var meaps = catalogBooks.filter(function (it) { return it.title.indexOf("MEAP") !== -1; });
                _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sortBooksByLastUpdateDate */ .Z.sortBooksByLastUpdateDate(meaps);
                resolve(meaps);
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getPublished = function (offset) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getSimpleCatalog().then(function (catalogBooks) {
                var latestPublishedBooks = catalogBooks.filter(function (it) { return !it.isMeap && !it.isFreeEbook && !it.isReview; });
                _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sortBooksByLastUpdateDate */ .Z.sortBooksByLastUpdateDate(latestPublishedBooks);
                latestPublishedBooks = latestPublishedBooks.slice(0, 30);
                resolve(latestPublishedBooks);
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getLatestBooks = function (offset) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getSimpleCatalog().then(function (catalogBooks) {
                _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"].sortBooksByLastUpdateDate */ .Z.sortBooksByLastUpdateDate(catalogBooks);
                catalogBooks = catalogBooks.slice(0, 30).filter(function (it) {
                    if (it.isReview && !it.isMeap) {
                        return false;
                    }
                    return true;
                });
                resolve(catalogBooks);
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getSimpleCatalog = function () {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.simpleCatalogBooks && this.simpleCatalogBooks.length > 0) {
            return Promise.resolve(this.simpleCatalogBooks);
        }
        if (this.simpleCatalogPromise) {
            return this.simpleCatalogPromise;
        }
        return this.simpleCatalogPromise = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getSimpleCatalog().then(function (data) {
                    _this.simpleCatalogBooks = data.map(function (it) { return _this.createCatalogBookFromWebData(it); });
                    _this.simpleCatalogBooks.sort(function (a, b) {
                        if (a.lastUpdateDate > b.lastUpdateDate)
                            return -1;
                        if (a.lastUpdateDate < b.lastUpdateDate)
                            return 1;
                        return 0;
                    });
                    resolve(_this.simpleCatalogBooks);
                }).catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getMediumCatalog = function () {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.mediumCatalogBooks && this.mediumCatalogBooks.length > 0) {
            return Promise.resolve(this.mediumCatalogBooks);
        }
        if (this.mediumCatalogPromise) {
            return this.mediumCatalogPromise;
        }
        return this.mediumCatalogPromise = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getMediumCatalog().then(function (data) {
                    _this.mediumCatalogBooks = data.map(function (it) { return _this.createCatalogBookFromWebData(it); });
                    _this.mediumCatalogBooks.sort(function (a, b) {
                        if (a.lastUpdateDate > b.lastUpdateDate)
                            return -1;
                        if (a.lastUpdateDate < b.lastUpdateDate)
                            return 1;
                        return 0;
                    });
                    resolve(_this.mediumCatalogBooks);
                }).catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getCatalog = function () {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (this.catalogBooks && this.catalogBooks.length > 0) {
            return Promise.resolve(this.catalogBooks);
        }
        if (this.catalogPromise) {
            return this.catalogPromise;
        }
        return this.catalogPromise = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getCatalog().then(function (data) {
                    _this.catalogBooks = data.map(function (it) { return _this.createCatalogBookFromWebData(it); });
                    _this.catalogBooks.sort(function (a, b) {
                        if (a.lastUpdateDate > b.lastUpdateDate)
                            return -1;
                        if (a.lastUpdateDate < b.lastUpdateDate)
                            return 1;
                        return 0;
                    });
                    resolve(_this.catalogBooks);
                }).catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getGeneralProducts = function (slugs) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getGeneralProducts(slugs).then(function (data) { return resolve(data); }).catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getBooksFromCatalog = function (bookShortNames) {
        return new Promise(function (resolve, reject) {
            var map = {};
            for (var _i = 0, bookShortNames_1 = bookShortNames; _i < bookShortNames_1.length; _i++) {
                var bookShortName = bookShortNames_1[_i];
                map[bookShortName] = true;
            }
            BookContentProvider.getCatalog().then(function (data) { return resolve(data.filter(function (it) { return map[it.shortName]; })); }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getRelatedProducts = function (bookShortName) {
        var _this = this;
        if (this.shouldReset()) {
            this.resetCache();
        }
        if (!this.relatedProductsPromiseMap) {
            this.relatedProductsPromiseMap = {};
        }
        if (this.relatedProductsPromiseMap[bookShortName]) {
            return this.relatedProductsPromiseMap[bookShortName];
        }
        return this.relatedProductsPromiseMap[bookShortName] = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getRelatedProducts(bookShortName).then(function (data) {
                    resolve(_this.expandRelatedProducts(data));
                }).catch(function (e) { return resolve([]); });
            });
        });
    };
    BookContentProviderClass.prototype.getCustomersAlsoBoughtProducts = function (bookShortName) {
        var _this = this;
        if (!this.customersAlsoBoughtPromiseMap) {
            this.customersAlsoBoughtPromiseMap = {};
        }
        if (this.customersAlsoBoughtPromiseMap[bookShortName]) {
            return this.customersAlsoBoughtPromiseMap[bookShortName];
        }
        return this.customersAlsoBoughtPromiseMap[bookShortName] = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getCustomersAlsoBoughtProducts(bookShortName).then(function (data) {
                    return resolve(_this.expandCustomersAlsoBought(data));
                }).catch(function (e) { return resolve([]); });
            });
        });
    };
    BookContentProviderClass.prototype.getChapterOwnership = function (bookShortName) {
        var _this = this;
        if (this.bookChapterOwnership[bookShortName]) {
            return this.bookChapterOwnership[bookShortName];
        }
        return this.bookChapterOwnership[bookShortName] = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getChapterOwnership().then(function (data) {
                    updateBookOwnership(data[bookShortName], bookShortName);
                    resolve(data[bookShortName]);
                }).catch(function (e) {
                    reject(e);
                });
            });
        });
    };
    BookContentProviderClass.prototype.getTocOwnership = function (bookShortName) {
        var _this = this;
        if (this.tocOwnershipInfoPromiseMap[bookShortName]) {
            return this.tocOwnershipInfoPromiseMap[bookShortName];
        }
        return this.tocOwnershipInfoPromiseMap[bookShortName] = new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getTocOwnership(bookShortName).then(function (data) {
                    updateBookOwnership(data, bookShortName);
                    resolve(data);
                });
            });
        });
    };
    BookContentProviderClass.prototype.getBooksDetails = function (bookShortNames) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getBooksDetails(bookShortNames)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getBookDates = function (manningId) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getBookDates(manningId).then(function (fetchedDates) {
                    resolve({
                        meapStart: fetchedDates.meapStart || "",
                        publishedDate: fetchedDates.publishedDate || "",
                        expectedPublishDate: fetchedDates.expectedPublishDate || "",
                        pbookAvailabilityDate: fetchedDates.pbookAvailabilityDate || "",
                        ebookAvailabilityDate: fetchedDates.ebookAvailabilityDate || "",
                        expectedPbookAvailabilityDate: fetchedDates.expectedPbookAvailabilityDate || "",
                        expectedEbookAvailabilityDate: fetchedDates.expectedEbookAvailabilityDate || ""
                    });
                }).catch(function (e) { return reject(); });
            });
        });
    };
    BookContentProviderClass.prototype.getDownloadedBooksShortNamesAndSlugs = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getDownloadedBooksShortNamesAndSlugs().then(function (data) { return resolve(data); }).catch(function (e) { return reject(e); });
            });
        });
    };
    BookContentProviderClass.prototype.getVideoEditionTimeline = function (bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getService().then(function (bookContentService) {
                bookContentService.getVideoEditionTimeline(bookShortNameOrSlug, bookElementShortName)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.assignBookProgress = function (book, allBooksProgress) {
        var bookProgress = allBooksProgress[book.shortName];
        if (bookProgress) {
            book.progressBookElement = bookProgress.bookElementShortName;
            book.lastBookElementItem = bookProgress.contentItemID || "";
            if (bookProgress.reviewVersion) {
                book.bookPath = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(book.slug, book.progressBookElement, bookProgress.meapVersion, bookProgress.reviewVersion) + book.lastBookElementItem;
            }
            else {
                book.bookPath = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(book.slug, book.progressBookElement, book.latestMeapVersion) + book.lastBookElementItem;
            }
            book.lastAccessedTime = parseInt("".concat(bookProgress.timeStamp || 0));
        }
        else {
            book.progressBookElement = "";
            book.lastBookElementItem = "";
            book.bookPath = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(book.slug, book.progressBookElement, book.latestMeapVersion);
            book.lastAccessedTime = 0;
        }
    };
    BookContentProviderClass.prototype.createCatalogBookFromWebData = function (data) {
        var book = new _models_Book__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z();
        book.manningId = data.manningId;
        book.shortName = data.shortName;
        book.title = data.title;
        book.subtitle = data.subtitle;
        book.cleanTitle = _utils_BookContentUtils__WEBPACK_IMPORTED_MODULE_6__/* ["default"].cleanBookTitle */ .Z.cleanBookTitle(book.title);
        book.isReview = !!data.isReview;
        book.isMeap = !!data.meap;
        book.isFreeEbook = !!data.isFreeEbook;
        book.latestMeapVersion = data.latestMeapVersion || 0;
        book.slug = data.slug;
        book.authors = data.authors;
        book.userCanViewReviews = !!data.userCanViewReviews;
        book.userIsReviewer = !!data.userIsReviewer;
        book.userIsAuthor = !!data.userIsAuthor;
        book.userIsEditor = !!data.userIsEditor;
        book.categories = data.categories;
        book.description = data.description;
        book.lastUpdateDate = _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_5__/* .ValueUtils.getDateFromString */ .d.getDateFromString(data.lastUpdateDate);
        book.exercisesComingSoon = data.exercisesComingSoon;
        book.annotationsCanBeSplit = data.annotationsCanBeSplit;
        book.reviewTechnologyLabel = data.reviewTechnologyLabel;
        book.bookPath = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(data.slug, "chapter-1", book.latestMeapVersion);
        book.bookCoverPath = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookCoverUrl */ .Z.getBookCoverUrl(data.shortName);
        book.hasAudio = data.hasAudio;
        book.hasVideo = data.hasVideo;
        book.hasExercises = data.hasExercises;
        book.hasTextAddendums = data.hasTextAddendums;
        book.hasKnowledgeGraph = data.hasKnowledgeGraph;
        book.hasWiki = data.hasWiki;
        book.isKnowledgeGraphAccessible = data.isKnowledgeGraphAccessible;
        book.categories = data.categories || "";
        book.isbn = data.isbn;
        book.customCss = data.customCss;
        book.amazonReviewUrl = data.amazonReviewUrl;
        book.listingCopyRegex = data.listingCopyRegex;
        book.manuscriptOrigin = data.manuscriptOrigin;
        book.wideScreenCoverBackground = data.wideScreenCoverBackground;
        book.wideScreenCoverUrl = data.wideScreenCoverUrl;
        book.useKlipseListings = data.useKlipseListings;
        book.assistantId = data.assistantId;
        book.annotationsCanBeSplit = data.annotationsCanBeSplit;
        book.reviewTechnologyLabel = data.reviewTechnologyLabel;
        book.cancelled = data.cancelled;
        book.disableFreePreviewUnlocking = data.disableFreePreviewUnlocking;
        book.showOnlyUnscrambledText = data.showOnlyUnscrambledText;
        book.hasNewspaperLikePaywall = data.hasNewspaperLikePaywall;
        book.hasVideo = data.hasVideo;
        if (data.offlineFileSizes != null) {
            book.offlineFileSizes = data.offlineFileSizes;
        }
        if (data.lastSignificantDate) {
            book.lastSignificantDate = new Date(data.lastSignificantDate);
        }
        if (data.publishedDate) {
            book.publishedDate = new Date(data.publishedDate);
        }
        if (data.expectedPublishDate) {
            book.expectedPublishDate = new Date(data.expectedPublishDate);
        }
        if (data.expectedEbookAvailabilityDate) {
            book.expectedEbookAvailabilityDate = new Date(data.expectedEbookAvailabilityDate);
        }
        return book;
    };
    BookContentProviderClass.prototype.expandCustomersAlsoBought = function (items) {
        items = (items || []);
        items = items.filter(function (it) { return it && it.livebook; });
        items.forEach(function (it) {
            it.imageUrl = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookCoverUrl */ .Z.getBookCoverUrl(it.externalId);
            it.link = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookUrl */ .Z.getBookUrl(it.slug);
        });
        return items;
    };
    BookContentProviderClass.prototype.expandRelatedProducts = function (relatedProducts) {
        relatedProducts = (relatedProducts || []);
        relatedProducts = relatedProducts.filter(function (it) { return it; });
        relatedProducts.forEach(function (it) {
            if (it.livebook) {
                it.imageUrl = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookCoverUrl */ .Z.getBookCoverUrl(it.externalId);
                it.link = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getBookUrl */ .Z.getBookUrl(it.slug);
            }
            else {
                if (!it.imageUrl.startsWith("http")) {
                    it.imageUrl = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getMarketplaceProductCoverUrl */ .Z.getMarketplaceProductCoverUrl(it.imageUrl);
                }
                it.link = _utils_WebUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getMarketplaceProductUrl */ .Z.getMarketplaceProductUrl(it.slug, it.livevideo);
            }
        });
        return relatedProducts;
    };
    BookContentProviderClass.prototype.shouldReset = function () {
        return _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isConnected */ .Z.isConnected() && ((Date.now() - this.startTime) > _utils_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_7__/* .GlobalStateInfo.refreshDataAfter */ .UU.refreshDataAfter);
    };
    BookContentProviderClass.prototype.getService = function () {
        var _this = this;
        if (this.bookContentProviderService != null) {
            return this.bookContentProviderService;
        }
        return this.bookContentProviderService = new Promise(function (resolve, reject) {
            _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].loadDeviceInfo */ .Z.loadDeviceInfo().then(function (deviceInfo) {
                switch (deviceInfo.platform) {
                    case _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* .Platform.Browser */ .t.Browser:
                        _this.getWebSource().then(function (_a) {
                            var BookContentServiceWeb = _a.BookContentServiceWeb;
                            resolve(BookContentServiceWeb);
                        }).catch(function (e) {
                            _this.bookContentProviderService = null;
                            console.log("Couldn't load book content service web");
                        });
                        break;
                    case _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* .Platform.Cordova */ .t.Cordova:
                    case _utils_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* .Platform.Electron */ .t.Electron:
                        _this.getFsSource().then(function (_a) {
                            var BookContentServiceFileSystem = _a.BookContentServiceFileSystem;
                            resolve(BookContentServiceFileSystem);
                        }).catch(function (e) {
                            _this.bookContentProviderService = null;
                            console.log("Couldn't load content feedback service fs");
                        });
                        break;
                }
            }).catch(function (e) { return reject(e); });
        });
    };
    BookContentProviderClass.prototype.getWebSource = function () {
        if (!this.webSourcePromise) {
            this.webSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_8__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructWebSourcePromise);
        }
        return this.webSourcePromise;
    };
    BookContentProviderClass.prototype.constructWebSourcePromise = function () {
        return __webpack_require__.e(/* import() | bookContentProviderWeb */ 5465).then(__webpack_require__.bind(__webpack_require__, 22093));
    };
    BookContentProviderClass.prototype.getFsSource = function () {
        if (!this.fsSourcePromise) {
            this.fsSourcePromise = _utils_DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_8__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructFsSourcePromise);
        }
        return this.fsSourcePromise;
    };
    BookContentProviderClass.prototype.constructFsSourcePromise = function () {
        return Promise.all(/* import() | bookContentProviderFs */[__webpack_require__.e(5465), __webpack_require__.e(5201)]).then(__webpack_require__.bind(__webpack_require__, 91788));
    };
    return BookContentProviderClass;
}());

var BookContentProvider = new BookContentProviderClass();
var bookBookElementsMap = {};
$(document).on("unlockSectionSubsectionSuccess", function (e, bookShortName, bookElementShortName, contentItemId) {
    if (!bookBookElementsMap[bookShortName]) {
        bookBookElementsMap[bookShortName] = {};
    }
    if (!bookBookElementsMap[bookShortName][bookElementShortName]) {
        bookBookElementsMap[bookShortName][bookElementShortName] = {};
    }
    if (contentItemId) {
        bookBookElementsMap[bookShortName][bookElementShortName][contentItemId] = true;
    }
});
function updateBookOwnership(bookOwnershipData, bookShortName) {
    if (bookOwnershipData == null || bookOwnershipData.partialChapterOwnership == null) {
        return;
    }
    try {
        var unlockedChapterMap = bookBookElementsMap[bookShortName];
        if (unlockedChapterMap) {
            var _loop_1 = function (purchasedBookElementShortName) {
                var chapterOwnershipInfo = bookOwnershipData.partialChapterOwnership.find(function (it) { return it.shortName == purchasedBookElementShortName; });
                if (chapterOwnershipInfo != null) {
                    chapterOwnershipInfo.userOwned = true;
                }
            };
            for (var purchasedBookElementShortName in unlockedChapterMap) {
                _loop_1(purchasedBookElementShortName);
            }
        }
    }
    catch (e) {
        console.log(e);
    }
}


/***/ }),

/***/ 26280:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "U": () => (/* binding */ DiscountProvider)
/* harmony export */ });
/* unused harmony export DiscountProviderClass */
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93292);
/* harmony import */ var _utils_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67008);
/* harmony import */ var _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3199);
/* harmony import */ var _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37168);




var DiscountProviderClass = /** @class */ (function () {
    function DiscountProviderClass() {
        var _this = this;
        this.discountedProductsPromiseMap = {};
        $(document).on("appActivatedAfterLongTime", function () {
            _this.dotdProductsPromise = null;
            _this.dotdPromoInfoPromise = null;
            _this.discountedProductsPromiseMap = {};
        });
    }
    DiscountProviderClass.prototype.getNewUserDiscountCode = function () {
        if (_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isCurrentlyLoggedIn */ .H.isCurrentlyLoggedIn() && _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isExistingUser */ .H.isExistingUser()) {
            return "";
        }
        if (_utils_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_1__/* .LocalStorageUtils.getItem */ .f.getItem("isBuyer")) {
            return "";
        }
        return "lb-new-user-30";
    };
    DiscountProviderClass.prototype.getFreePreviewDiscountCode = function () {
        return "lbpreview20";
    };
    DiscountProviderClass.prototype.getNewUserProductDiscounts = function (productIds, code) {
        var _this = this;
        if (productIds == null || productIds.length == 0 || !code) {
            return Promise.resolve([]);
        }
        var key = "".concat(productIds.join(","), " - ").concat(code);
        if (this.discountedProductsPromiseMap[key] != null) {
            return this.discountedProductsPromiseMap[key];
        }
        return this.discountedProductsPromiseMap[key] = new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].postToOurBackend */ .Z.postToOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/cart/newUserProductDeals"), function (data) {
                var items = [];
                for (var code_1 in data) {
                    for (var id in data[code_1]) {
                        data[code_1][id].discountCode = code_1;
                        items.push(data[code_1][id]);
                    }
                }
                resolve(items);
            }, function (e) {
                _this.dotdProductsPromise = null;
                reject(e);
            }, {
                productIds: productIds.join(","),
                code: code
            });
        });
    };
    DiscountProviderClass.prototype.getDotdPromoInfo = function () {
        var _this = this;
        if (this.dotdPromoInfoPromise != null) {
            return this.dotdPromoInfoPromise;
        }
        return this.dotdPromoInfoPromise = new Promise(function (resolve, reject) {
            Promise.all([
                _this.getDotdProducts(),
                _this.getDotdBrief(),
                _this.getDotdFullInfo()
            ]).then(function (_a) {
                var dotdProducts = _a[0], brief = _a[1], dotdFullInfo = _a[2];
                var mainDotdProduct = dotdProducts.find(function (it) { return (brief.brief || "").indexOf(it.title) >= 0; });
                if (mainDotdProduct == null) {
                    resolve(null);
                    return;
                }
                var ebookOffering = mainDotdProduct.productOfferings.find(function (it) { return it.productType == "EBOOK"; });
                if (ebookOffering == null) {
                    resolve(null);
                    return;
                }
                var priceMessage = "$".concat(_utils_ValueUtils__WEBPACK_IMPORTED_MODULE_2__/* .ValueUtils.formatMoney */ .d.formatMoney(ebookOffering.price - ebookOffering.discount), " until ").concat(_utils_ValueUtils__WEBPACK_IMPORTED_MODULE_2__/* .ValueUtils.getShortMonthName */ .d.getShortMonthName(dotdFullInfo.expirationDate), " ").concat(dotdFullInfo.expirationDate.getDate());
                resolve({
                    headerMessage: "Save 50%! Get the eBook of ".concat(mainDotdProduct.title, " for only ").concat(priceMessage),
                    shortMessage: "".concat(mainDotdProduct.title, " for ").concat(priceMessage),
                    notificationMessage: "Don't miss out! The eBook of ".concat(mainDotdProduct.title, " is only ").concat(priceMessage, "."),
                    priceMessage: priceMessage,
                    categories: "",
                    productLink: mainDotdProduct.isLivebook ? _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getBookUrl */ .Z.getBookUrl(mainDotdProduct.slug)
                        : (mainDotdProduct.isLiveVideo ? _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getLiveVideoUrl */ .Z.getLiveVideoUrl("course/".concat(mainDotdProduct.externalId, "/").concat(mainDotdProduct.slug))
                            : _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getMarketplaceProductUrl */ .Z.getMarketplaceProductUrl(mainDotdProduct.slug, mainDotdProduct.isLiveVideo)),
                    productExternalId: mainDotdProduct.externalId,
                    discountCode: dotdFullInfo.code
                });
            }).catch(function (e) {
                _this.dotdPromoInfoPromise = null;
                resolve(null);
            });
        });
    };
    DiscountProviderClass.prototype.getDotdBrief = function () {
        return new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/cart/dotdBrief"), function (data) { return resolve(data); }, function (e) { return reject(e); });
        });
    };
    DiscountProviderClass.prototype.getDotdFullInfo = function () {
        return new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/cart/dotdFullInfo"), function (data) {
                if (data.expirationDate) {
                    data.expirationDate = _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_2__/* .ValueUtils.getDateFromString */ .d.getDateFromString(data.expirationDate);
                }
                if (data.activationDate) {
                    data.activationDate = _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_2__/* .ValueUtils.getDateFromString */ .d.getDateFromString(data.activationDate);
                }
                resolve(data);
            }, function (e) { return reject(e); });
        });
    };
    DiscountProviderClass.prototype.getDotdProducts = function () {
        var _this = this;
        if (this.dotdProductsPromise != null) {
            return this.dotdProductsPromise;
        }
        return this.dotdProductsPromise = new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].postToOurBackend */ .Z.postToOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/cart/todaysDealsAndProducts"), function (data) {
                var items = [];
                for (var code in data) {
                    for (var id in data[code]) {
                        data[code][id].discountCode = code;
                        items.push(data[code][id]);
                    }
                }
                resolve(items);
            }, function (e) {
                _this.dotdProductsPromise = null;
                reject(e);
            });
        });
    };
    return DiscountProviderClass;
}());

var DiscountProvider = new DiscountProviderClass();


/***/ }),

/***/ 24279:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "w": () => (/* binding */ ProgressProvider)
});

// UNUSED EXPORTS: ProgressProviderClass

// EXTERNAL MODULE: ./src/ts/utils/WebUtils.ts
var WebUtils = __webpack_require__(93292);
// EXTERNAL MODULE: ./src/ts/utils/ValueUtils.ts
var ValueUtils = __webpack_require__(3199);
// EXTERNAL MODULE: ./src/ts/utils/LocalStorageUtils.ts
var LocalStorageUtils = __webpack_require__(67008);
;// CONCATENATED MODULE: ./src/ts/services/progressService/ProgressServiceWeb.ts



var ProgressServiceWeb = /** @class */ (function () {
    function ProgressServiceWeb() {
        this.timeoutInterval = 250;
    }
    ProgressServiceWeb.prototype.getLatestPage = function () {
        return Promise.resolve(LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("LATEST_BOOK_PAGE"));
    };
    ProgressServiceWeb.prototype.storeLatestPage = function (location) {
        LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("LATEST_BOOK_PAGE", location);
        return Promise.resolve();
    };
    ProgressServiceWeb.prototype.fetchAllBooksProgress = function () {
        return new Promise(function (resolve, reject) {
            WebUtils/* default.getFromOurBackend */.Z.getFromOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/progress/getAllBooksProgress"), function (data) { return resolve(data); }, function (e) { return reject(e); });
        });
    };
    ProgressServiceWeb.prototype.fetchAudioProgress = function (bookElement) {
        return new Promise(function (resolve, reject) {
            WebUtils/* default.getFromOurBackend */.Z.getFromOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/progress/getBookElementProgress"), function (data) {
                if (!data || data == "null" || !data.text || data.text == "null") {
                    resolve({});
                }
                try {
                    var parsedData = JSON.parse(data.text);
                    if (!ValueUtils/* ValueUtils.hasNumberProperties */.d.hasNumberProperties(parsedData)) {
                        if (parsedData.text) {
                            parsedData = JSON.parse(parsedData.text);
                            if (!ValueUtils/* ValueUtils.hasNumberProperties */.d.hasNumberProperties(parsedData)) {
                                resolve({});
                            }
                            else {
                                resolve(parsedData);
                                return;
                            }
                        }
                        else {
                            resolve({});
                            return;
                        }
                    }
                    resolve(parsedData);
                }
                catch (e) {
                    resolve({});
                }
            }, function (e) { return reject(e); }, {
                book: bookElement.book.shortName,
                bookElement: bookElement.shortName,
                meapVersion: bookElement.meapVersion
            });
        });
    };
    ProgressServiceWeb.prototype.storeProgress = function (bookElement, contentItemIDs, lastContentItemID, sync) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (sync || !_this.isStoringProgress) {
                _this.postProgress(bookElement, contentItemIDs, lastContentItemID, sync, resolve, reject);
            }
            else {
                console.log("Overlapping store progress, waiting for:", _this.timeoutInterval, "ms");
                setTimeout(function () { return _this.postProgress(bookElement, contentItemIDs, lastContentItemID, sync, resolve, reject); }, _this.timeoutInterval);
                _this.timeoutInterval = Math.min(_this.timeoutInterval + 100, 750);
            }
        });
    };
    ProgressServiceWeb.prototype.postProgress = function (bookElement, contentItemIDs, lastContentItemID, sync, resolve, reject) {
        var _this = this;
        this.isStoringProgress = true;
        return WebUtils/* default.postToOurBackend */.Z.postToOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/progress/save"), function () {
            _this.isStoringProgress = false;
            resolve();
        }, function (e) {
            _this.isStoringProgress = false;
            reject(e);
        }, {
            book: bookElement.book.shortName,
            bookElement: bookElement.shortName,
            contentItemIDs: JSON.stringify(contentItemIDs),
            contentItemID: lastContentItemID,
            meapVersion: bookElement.meapVersion,
            reviewVersion: bookElement.reviewVersion
        }, false, !sync //Necessary if progress syncing is done on page close
        );
    };
    ProgressServiceWeb.prototype.syncProgressWithServer = function (syncItems) {
        if (syncItems === void 0) { syncItems = undefined; }
        if (!syncItems) {
            return Promise.resolve(true);
        } // comes from web app
        return new Promise(function (resolve, reject) {
            return WebUtils/* default.postToOurBackend */.Z.postToOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/progress/syncProgress"), function () { return resolve(true); }, function (e) { return document.dispatchEvent(new CustomEvent("sync-error", { detail: { error: e } })); }, { items: syncItems }, true, true, false, true // ajax, async, isRecursive, sendJson
            );
        });
    };
    return ProgressServiceWeb;
}());
/* harmony default export */ const progressService_ProgressServiceWeb = (ProgressServiceWeb);

// EXTERNAL MODULE: ./src/ts/utils/DeviceUtils.ts
var DeviceUtils = __webpack_require__(87876);
;// CONCATENATED MODULE: ./src/ts/services/progressService/ProgressServiceFileSystem.ts



var ProgressServiceFileSystem = /** @class */ (function () {
    function ProgressServiceFileSystem() {
        this.webService = new progressService_ProgressServiceWeb();
    }
    ProgressServiceFileSystem.prototype.getLatestPage = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getFsUtils().readFile(_this.getFsUtils().getLatestProgressLocation())
                .then(function (data) { return resolve(data); })
                .catch(function (e) { return reject(e); });
        });
    };
    ProgressServiceFileSystem.prototype.storeLatestPage = function (location) {
        return this.getFsUtils().writeToFile(this.getFsUtils().getLatestProgressLocation(), location);
    };
    ProgressServiceFileSystem.prototype.loadSyncProgressFromFileSystem = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getFsUtils().readFile(_this.getFsUtils().getSyncProgressLocation())
                .then(function (data) { return resolve(data ? JSON.parse(data) : []); })
                .catch(function (e) { return reject(e); });
        });
    };
    ProgressServiceFileSystem.prototype.loadAllBooksProgressFromFileSystem = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getFsUtils().readFile(_this.getFsUtils().getBookProgressLocation())
                .then(function (data) { return resolve(JSON.parse(data)); })
                .catch(function (e) { return reject(e); });
        });
    };
    ProgressServiceFileSystem.prototype.loadBookElementAudioProgressFromFileSystem = function (bookShortName, bookElementShortName) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.getFsUtils().readFile(_this.getFsUtils().getBookElementAudioProgressLocation(bookShortName, bookElementShortName)).then(function (data) {
                if (!data || data == "null") {
                    resolve({});
                }
                var parsedData = JSON.parse(data);
                if (!ValueUtils/* ValueUtils.hasNumberProperties */.d.hasNumberProperties(parsedData)) {
                    resolve({});
                }
                resolve(parsedData);
            }).catch(function (e) {
                resolve({});
            });
        });
    };
    ProgressServiceFileSystem.prototype.fetchAllBooksProgress = function () {
        var _this = this;
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return this.loadAllBooksProgressFromFileSystem();
        }
        return new Promise(function (resolve, reject) {
            _this.webService.fetchAllBooksProgress().then(function (data) {
                _this.getFsUtils().writeToFile(_this.getFsUtils().getBookProgressLocation(), JSON.stringify(data));
                resolve(data);
            }).catch(function (e) {
                _this.loadAllBooksProgressFromFileSystem().then(function (data) { return resolve(data); });
            });
        });
    };
    ProgressServiceFileSystem.prototype.fetchAudioProgress = function (bookElement) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var deviceProgress = _this.loadBookElementAudioProgressFromFileSystem(bookElement.book.shortName, bookElement.shortName);
            var webProgress = _this.webService.fetchAudioProgress(bookElement);
            Promise.all([deviceProgress, webProgress]).then(function (progresses) {
                var allData = Object.assign({}, progresses[0], progresses[1]);
                _this.storeProgress(bookElement, allData, _this.getMaxPropertyNumber(allData));
                resolve(allData);
            }).catch(function (e) {
                return _this.loadBookElementAudioProgressFromFileSystem(bookElement.book.shortName, bookElement.shortName)
                    .then(function (data) { return resolve(data); })
                    .catch(function (e) { return reject(e); });
            });
        });
    };
    ProgressServiceFileSystem.prototype.storeProgress = function (bookElement, contentItemIDs, lastContentItemID) {
        var _this = this;
        return this.getUpdatedStoredProgress(this.loadAllBooksProgressFromFileSystem(), bookElement.shortName, bookElement.book.shortName, bookElement.reviewVersion, lastContentItemID).then(function (allBookProgress) {
            _this.getFsUtils().writeToFile(_this.getFsUtils().getBookProgressLocation(), JSON.stringify(allBookProgress));
            if (DeviceUtils/* default.isConnected */.Z.isConnected()) {
                _this.webService.storeProgress(bookElement, contentItemIDs, lastContentItemID).catch(function (e) { return console.log("Couldn't save book progress to central server"); });
            }
            else {
                if (!ValueUtils/* ValueUtils.isEmptyObject */.d.isEmptyObject(contentItemIDs)) {
                    _this.getFsUtils().writeToFile(_this.getFsUtils().getBookElementAudioProgressLocation(bookElement.book.shortName, bookElement.shortName), JSON.stringify(contentItemIDs));
                }
                _this.getUpdatedStoredProgress(_this.loadSyncProgressFromFileSystem(), bookElement.shortName, bookElement.book.shortName, bookElement.reviewVersion, lastContentItemID).then(function (allSyncBookProgress) {
                    _this.getFsUtils().writeToFile(_this.getFsUtils().getSyncProgressLocation(), JSON.stringify(allSyncBookProgress));
                });
            }
        });
    };
    ProgressServiceFileSystem.prototype.syncProgressWithServer = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.loadSyncProgressFromFileSystem().then(function (syncItems) {
                if (!syncItems.length) {
                    resolve(true);
                }
                else {
                    _this.webService.syncProgressWithServer(syncItems).then(function (response) {
                        _this.getFsUtils().writeToFile(_this.getFsUtils().getSyncProgressLocation(), ''); // clean syncing file
                        resolve(response);
                    }).catch(function (e) { return reject(false); });
                }
            });
        });
    };
    ProgressServiceFileSystem.prototype.getUpdatedStoredProgress = function (bookProgressFromFileSystemPromise, bookElementShortName, bookShortName, reviewVersion, contentItemID) {
        return new Promise(function (resolve, reject) {
            return bookProgressFromFileSystemPromise.then(function (allBookProgress) {
                var bookProgress = allBookProgress && allBookProgress.find(function (it) { return it.bookShortName === bookShortName; });
                if (bookProgress) {
                    bookProgress.bookElementShortName = bookElementShortName;
                    bookProgress.contentItemID = contentItemID;
                    bookProgress.timeStamp = Date.now();
                    bookProgress.reviewVersion = reviewVersion;
                }
                else {
                    allBookProgress.push({
                        bookShortName: bookShortName,
                        bookElementShortName: bookElementShortName,
                        contentItemID: contentItemID,
                        reviewVersion: reviewVersion,
                        timeStamp: Date.now()
                    });
                }
                resolve(allBookProgress);
            });
        });
    };
    ProgressServiceFileSystem.prototype.getMaxPropertyNumber = function (obj) {
        var maxPropertyNumber = 1;
        for (var prop in obj) {
            var value = parseInt(prop);
            if (!Number.isNaN(value) && value > maxPropertyNumber) {
                maxPropertyNumber = value;
            }
        }
        return "".concat(maxPropertyNumber);
    };
    ProgressServiceFileSystem.prototype.getFsUtils = function () {
        return window.fileSystemUtils;
    };
    return ProgressServiceFileSystem;
}());
/* harmony default export */ const progressService_ProgressServiceFileSystem = (ProgressServiceFileSystem);

;// CONCATENATED MODULE: ./src/ts/services/progressService/ProgressProvider.ts



var ProgressProviderClass = /** @class */ (function () {
    function ProgressProviderClass() {
        var _this = this;
        this.progressServicePromise = new Promise(function (resolve, reject) {
            DeviceUtils/* default.loadDeviceInfo */.Z.loadDeviceInfo().then(function (deviceInfo) {
                resolve(getProgressService(deviceInfo.platform));
            }).catch(function (e) { return reject(e); });
        });
        $(document).on("appActivatedAfterLongTime", function () {
            _this.allBooksProgressPromise = null;
        });
    }
    ProgressProviderClass.prototype.fetchAllBooksProgress = function () {
        var _this = this;
        if (this.allBooksProgressPromise) {
            return this.allBooksProgressPromise;
        }
        return this.allBooksProgressPromise = new Promise(function (resolve, reject) {
            _this.progressServicePromise.then(function (progressService) {
                progressService.fetchAllBooksProgress()
                    .then(function (data) { return resolve(_this.transformBookProgress(data)); })
                    .catch(function (e) { return reject(e); });
            });
        });
    };
    ProgressProviderClass.prototype.clear = function () {
        this.allBooksProgressPromise = null;
    };
    ProgressProviderClass.prototype.getBookProgress = function (bookShortName) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.fetchAllBooksProgress().then(function (allBooksProgress) {
                resolve(allBooksProgress[bookShortName]);
            }).catch(function (e) { return reject(e); });
        });
    };
    ProgressProviderClass.prototype.fetchAudioProgress = function (bookElement) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.progressServicePromise.then(function (progressService) {
                progressService.fetchAudioProgress(bookElement).then(function (data) { return resolve(data); }).catch(function (e) { return reject(e); });
            });
        });
    };
    ProgressProviderClass.prototype.storeProgress = function (bookElement, contentItemIDs, lastContentItemID, sync) {
        var _this = this;
        $(document).trigger("progressStore", contentItemIDs);
        this.syncProgressWithServer();
        return new Promise(function (resolve, reject) {
            _this.progressServicePromise.then(function (progressService) {
                progressService.storeProgress(bookElement, contentItemIDs, lastContentItemID, sync)
                    .then(function (data) { return resolve(); })
                    .catch(function (e) { return reject(e); });
            });
        });
    };
    ProgressProviderClass.prototype.storeLatestPage = function (location) {
        var _this = this;
        new Promise(function (resolve, reject) {
            return _this.progressServicePromise.then(function (progressService) {
                return progressService.storeLatestPage(location);
            });
        });
    };
    ProgressProviderClass.prototype.getLatestPage = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.progressServicePromise.then(function (progressService) {
                return progressService.getLatestPage().then(function (page) { return resolve(page); }).catch(function (e) { return resolve(""); });
            });
        });
    };
    ProgressProviderClass.prototype.syncProgressWithServer = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            return _this.progressServicePromise.then(function (progressService) {
                return progressService.syncProgressWithServer().then(function (resp) { return resolve(resp); }).catch(function (e) {
                    console.error('Failed to synchronize progress with server, error: ', e);
                    reject(false);
                });
            });
        });
    };
    ProgressProviderClass.prototype.transformBookProgress = function (data) {
        var map = {};
        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
            var item = data_1[_i];
            map[item.bookShortName] = item;
        }
        return map;
    };
    return ProgressProviderClass;
}());

var ProgressProvider = new ProgressProviderClass();
function getProgressService(platform) {
    switch (platform) {
        case DeviceUtils/* Platform.Browser */.t.Browser:
            return new progressService_ProgressServiceWeb();
        case DeviceUtils/* Platform.Cordova */.t.Cordova:
        case DeviceUtils/* Platform.Electron */.t.Electron:
            return new progressService_ProgressServiceFileSystem();
    }
}


/***/ }),

/***/ 43150:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ settingsService_SettingsProvider)
});

// EXTERNAL MODULE: ./src/ts/utils/WebUtils.ts
var WebUtils = __webpack_require__(93292);
;// CONCATENATED MODULE: ./src/ts/services/settingsService/SettingsServiceWeb.ts

var SettingsServiceWeb = /** @class */ (function () {
    function SettingsServiceWeb() {
    }
    SettingsServiceWeb.prototype.fetch = function () {
        if (this.settingsPromise) {
            return this.settingsPromise;
        }
        return this.settingsPromise = new Promise(function (resolve, reject) {
            WebUtils/* default.postToOurBackend */.Z.postToOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/userInfo/getUserSettings"), function (data) {
                if (typeof data === "string") {
                    if (data === "[]") {
                        data = "{}";
                    }
                    data = JSON.parse(data);
                }
                resolve(data);
            }, function (error) {
                console.log("Getting settings failed", error);
                resolve({});
            });
        });
    };
    SettingsServiceWeb.prototype.update = function (settings) {
        return new Promise(function (resolve, reject) {
            WebUtils/* default.postToOurBackend */.Z.postToOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl("api/userInfo/storeUserSettings"), function (data) { return resolve(); }, function (error) { return reject(); }, settings);
        });
    };
    return SettingsServiceWeb;
}());
/* harmony default export */ const settingsService_SettingsServiceWeb = (SettingsServiceWeb);

// EXTERNAL MODULE: ./src/ts/utils/DeviceUtils.ts
var DeviceUtils = __webpack_require__(87876);
;// CONCATENATED MODULE: ./src/ts/services/settingsService/SettingsServiceFileSystem.ts


var SettingsServiceFileSystem = /** @class */ (function () {
    function SettingsServiceFileSystem() {
        this.webService = new settingsService_SettingsServiceWeb();
    }
    SettingsServiceFileSystem.prototype.fetch = function () {
        var _this = this;
        if (this.settingsPromise) {
            return this.settingsPromise;
        }
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return this.loadSettings();
        }
        return new Promise(function (resolve, reject) {
            return _this.webService.fetch().then(function () {
                return _this.loadSettings().then(resolve);
            });
        });
    };
    SettingsServiceFileSystem.prototype.update = function (settings) {
        if (!DeviceUtils/* default.isConnected */.Z.isConnected()) {
            return this.updateSettings(settings);
        }
        this.updateSettings(settings);
        return this.webService.update(settings);
    };
    SettingsServiceFileSystem.prototype.loadSettings = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getFsUtils().readFile(_this.getFsUtils().getSettingsLocation()).then(function (fileContent) {
                resolve(fileContent ? JSON.parse(fileContent) : {});
            }).catch(function (e) {
                console.log("No settings present - defaulting", e);
                resolve({});
            });
        });
    };
    SettingsServiceFileSystem.prototype.updateSettings = function (settings) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.getFsUtils().writeToFile(_this.getFsUtils().getSettingsLocation(), JSON.stringify(settings));
            resolve();
        });
    };
    SettingsServiceFileSystem.prototype.getFsUtils = function () {
        return window.fileSystemUtils;
    };
    return SettingsServiceFileSystem;
}());
/* harmony default export */ const settingsService_SettingsServiceFileSystem = (SettingsServiceFileSystem);

// EXTERNAL MODULE: ./src/ts/utils/LocalStorageUtils.ts
var LocalStorageUtils = __webpack_require__(67008);
// EXTERNAL MODULE: ./src/ts/services/authService/AuthProvider.ts + 2 modules
var AuthProvider = __webpack_require__(37168);
// EXTERNAL MODULE: ./src/ts/utils/BookViewDOMUtils.ts
var BookViewDOMUtils = __webpack_require__(69619);
;// CONCATENATED MODULE: ./src/ts/services/settingsService/SettingsProvider.ts






var $document = $(document);
var SettingsProvider = /** @class */ (function () {
    function SettingsProvider() {
        var _this = this;
        this.internalStorage = this.getDefaultSettings();
        this.settingsService = new Promise(function (resolve, reject) {
            DeviceUtils/* default.loadDeviceInfo */.Z.loadDeviceInfo().then(function (deviceInfo) {
                AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
                    if (!!data.loggedIn) {
                        _this.fetchSettings();
                    }
                    else {
                        BookViewDOMUtils/* default.showNightMode */.Z.showNightMode();
                    }
                });
                resolve(_this.getSettingsService(deviceInfo.platform));
            });
        });
    }
    SettingsProvider.prototype.fetchSettings = function () {
        var _this = this;
        if (this.initialSettingsPromise != null) {
            return this.initialSettingsPromise;
        }
        if (!AuthProvider/* AuthProvider.isCurrentlyLoggedIn */.H.isCurrentlyLoggedIn()) {
            return Promise.resolve(this.internalStorage);
        }
        return this.initialSettingsPromise = new Promise(function (resolve, reject) {
            _this.settingsService.then(function (settingsService) {
                settingsService.fetch().then(function (settings) {
                    _this.internalStorage = Object.assign(_this.internalStorage, settings);
                    resolve(_this.internalStorage);
                    $document.trigger("settingsUpdated", _this.internalStorage);
                }).catch(function (e) {
                    reject(e);
                    _this.initialSettingsPromise = null;
                });
            });
        });
    };
    SettingsProvider.prototype.set = function (key, value) {
        var _this = this;
        var oldValue = this.internalStorage[key];
        if (oldValue != value) {
            this.internalStorage[key] = value;
            clearTimeout(this.syncTimerID);
            this.syncTimerID = setTimeout(function () { return _this.sync(); }, 1500);
            $document.trigger("settingsUpdated", this.internalStorage);
        }
    };
    SettingsProvider.prototype.get = function (key) {
        return this.internalStorage[key];
    };
    SettingsProvider.prototype.getHighlightColor = function () {
        return this.get("highlightColor");
    };
    SettingsProvider.prototype.setHighlightColor = function (color) {
        this.set("highlightColor", color);
    };
    SettingsProvider.prototype.sync = function () {
        var _this = this;
        this.settingsService.then(function (settingsService) {
            settingsService.update(_this.internalStorage);
            LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("settings", JSON.stringify(_this.internalStorage));
        });
    };
    SettingsProvider.prototype.getSettingsService = function (platform) {
        switch (platform) {
            case DeviceUtils/* Platform.Browser */.t.Browser:
                return new settingsService_SettingsServiceWeb();
            case DeviceUtils/* Platform.Cordova */.t.Cordova:
            case DeviceUtils/* Platform.Electron */.t.Electron:
                return new settingsService_SettingsServiceFileSystem();
        }
    };
    SettingsProvider.prototype.getDefaultSettings = function () {
        var defaultSettings = {
            "browsable-pause-type": "browsable-pause-pause",
            "sound-effects-enabled": false,
            "night-mode": this.getDefaultNightMode(),
            "volume": 1,
            "speed": 1,
            "unread-text-visibility": "full-visible",
            "highlightColor": "yellow",
            "text-size": "standard",
            "feedback-submitted": false,
            "tour-taken": false,
            "tour-offered": false,
            "live-audio-disabled": false,
            "update-history-on-scroll": true,
            "discussions-offered": false,
            "discussions-email-notifications-offered": false,
            "discussions-code-of-conduct-shown": false,
            "stop-showing-error-reports-modal": false,
            "error-modal-last-shown": null,
            "assistant-feedback-form-last-shown": null,
            "email-subscription-offered": false,
            "email-subscription-taken": false,
            "settings-menu-highlighted": false,
            "position-and-reading-info-disabled": false,
            "hide-indexed-terms": false,
            "hide-other-readers": false,
            "appOffered": false,
            "manning-online-tour-offered": false,
            "manning-online-tour-state": "",
            "margin-summaries-disabled": false,
            "ai-assistant-introduced": false,
            language: this.getDefaultLanguage(),
            llm: this.getDefaultLlm(),
            hasAccessToEverything: false,
            dateCreated: new Date().toISOString(),
        };
        try {
            defaultSettings = Object.assign(defaultSettings, JSON.parse(LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("settings")));
        }
        catch (e) { }
        return defaultSettings;
    };
    SettingsProvider.prototype.getDefaultNightMode = function () {
        try {
            return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        }
        catch (e) {
            return false;
        }
    };
    SettingsProvider.prototype.getDefaultLanguage = function () {
        try {
            var firstNonEnglishLanguage = navigator.languages.find(function (it) { return it.indexOf("en") == -1; });
            if (firstNonEnglishLanguage) {
                return firstNonEnglishLanguage;
            }
            return "";
        }
        catch (e) {
            return "";
        }
    };
    SettingsProvider.prototype.getDefaultLlm = function () {
        return "gpt";
    };
    return SettingsProvider;
}());
/* harmony default export */ const settingsService_SettingsProvider = (new SettingsProvider());


/***/ }),

/***/ 70296:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "K": () => (/* binding */ UserService)
/* harmony export */ });
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93292);
/* harmony import */ var _utils_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(67008);
/* harmony import */ var _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37168);



var UserServiceClass = /** @class */ (function () {
    function UserServiceClass() {
    }
    UserServiceClass.prototype.updateAvatarUrl = function (avatarUrl) {
        var _this = this;
        if (this.authInfo != null) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].postToOurBackend */ .Z.postToOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/userInfo/saveAvatarUrl"), function () {
                _this.authInfo.userDetails.avatarUrl = avatarUrl;
                $(document).trigger("requestAvatarUrlUpdate", avatarUrl);
            }, function (e) {
                $(document).trigger("requestNotification", "Error uploading profile image");
            }, {
                avatarUrl: avatarUrl
            });
        }
    };
    UserServiceClass.prototype.setAuthInfo = function (authInfo) {
        this.authInfo = authInfo;
        if (this.authInfo != null && this.authInfo.userDetails != null) {
            if (!this.authInfo.userDetails.isNewCustomer) {
                _utils_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_1__/* .LocalStorageUtils.setItem */ .f.setItem("isBuyer", true);
            }
        }
    };
    UserServiceClass.prototype.setShowMenuBar = function (value) {
        if (this.authInfo != null && this.authInfo.userDetails != null) {
            this.authInfo.userDetails.showBrowseHeader = value;
        }
    };
    UserServiceClass.prototype.getAuthInfo = function () {
        return this.authInfo;
    };
    UserServiceClass.prototype.getUserId = function () {
        if (this.authInfo == null) {
            return 0;
        }
        return this.authInfo.userDetails.id;
    };
    UserServiceClass.prototype.getUserInitials = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) { return resolve(!!data.loggedIn && _this.extractInitials(data.userDetails.firstName, data.userDetails.lastName)); }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.getUserFullname = function () {
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) { return resolve(!!data.loggedIn ? "".concat(data.userDetails.firstName, " ").concat(data.userDetails.lastName) : ""); }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.extractInitials = function (firstName, lastName) {
        if (firstName && lastName) {
            return firstName[0] + lastName[0];
        }
        else if (firstName && !lastName) {
            return firstName[0];
        }
        else if (!firstName && lastName) {
            return lastName[0];
        }
        else {
            return "";
        }
    };
    UserServiceClass.prototype.getUserFirstName = function () {
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
                if (!!data.loggedIn && data.userDetails.firstName) {
                    resolve(data.userDetails.firstName || "");
                }
                else {
                    resolve("");
                }
            }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.getUserEmail = function () {
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) { return resolve(!!data.loggedIn && data.userDetails.email); }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.getAvatarUrl = function () {
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) { return resolve(!!data.loggedIn && data.userDetails.avatarUrl); }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.isUserAdmin = function () {
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) { return resolve(!!data.loggedIn && data.userDetails.isAdmin); }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.getUserDetails = function () {
        return new Promise(function (resolve, reject) {
            _authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
                var userDetails = !!data.loggedIn ? data.userDetails : null;
                if (userDetails) {
                    userDetails.name = userDetails.displayName ? userDetails.displayName : (userDetails.firstName || "") + " " + (userDetails.lastName || "");
                    userDetails.votes = userDetails.votes || [];
                    userDetails.spamCommentIds = userDetails.spamCommentIds || [];
                    userDetails.authorizedProductIds = userDetails.authorizedProductIds || {};
                }
                resolve(userDetails);
            }).catch(function (e) { return reject(e); });
        });
    };
    UserServiceClass.prototype.setTokenInfo = function (tokenInfo) {
        if (!this.authInfo || !this.authInfo.userDetails) {
            return;
        }
        this.authInfo.userDetails.tokenInfo = tokenInfo;
    };
    UserServiceClass.prototype.saveNotificationPreferences = function (value) {
        return new Promise(function (resolve, reject) {
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/comment/saveNotificationPreferences"), function () { return resolve(); }, function (e) { return reject(e); }, {
                value: value
            });
        });
    };
    return UserServiceClass;
}());
var UserService = new UserServiceClass();


/***/ }),

/***/ 76383:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3199);
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93292);
/* harmony import */ var _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37168);
/* harmony import */ var _DeviceUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87876);
/* harmony import */ var vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(36538);
/* harmony import */ var _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(98498);
/* harmony import */ var _modules_UserActionTrackerModule__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(90360);
/* harmony import */ var _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(67008);
/* harmony import */ var _services_settingsService_SettingsProvider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(43150);









var $document = $(document);
var GA_ID_PROD = 'UA-98429831-1';
var GA_ID_QA = 'UA-128572121-1';
// AB testing
var OPTIMIZE_CONTAINER_ID_PROD = 'GTM-N46DWC8';
var OPTIMIZE_CONTAINER_ID_QA = 'GTM-MDNFL87';
var ABC_TEST_TEXT_ID_PROD = '3-Gs1mkIR0uPhMIJ-qJhkQ';
var ABC_TEST_TEXT_ID_QA = 'nV5vde8sR7W3jIW1HZzQCg';
var AB_TEST_QA = '4LWZah5GQMmOyo1FuZlDfA';
var AB_TEST_PROD = 'ak3Iy00lRHeunA89YUIeLw';
var SEARCH_TEST_QA = 'oGkR3cTVRs6oX2ouhsNwhQ';
var SEARCH_TEST_PROD = 'xgmXTRz-Tm-UerKUouHe2A';
var SEARCH_TEST = '';
var deploymentType;
var explicitGroupId = undefined;
if (document.location.search.indexOf("group=0") >= 0) {
    explicitGroupId = "0";
}
else if (document.location.search.indexOf("group=1") >= 0) {
    explicitGroupId = "1";
}
if (false) {}
else if (true) {
    deploymentType = vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_4__/* .DeploymentType.qa */ .mO.qa;
    SEARCH_TEST = SEARCH_TEST_QA;
}
else {}
var initialPageViewHappened = false;
var AnalyticsUtils = /** @class */ (function () {
    function AnalyticsUtils() {
        this.chaptersSeen = 0;
        this.viewingScrambledContent = true;
        this.currentlyLoggedIn = false;
        this.currentBookPart = "";
        this.currentCartStep = "";
        this.numTocMenuClicks = 0;
        this.numTocIndexClicks = 0;
    }
    AnalyticsUtils.prototype.startTime = function () {
        this.startedViewingChapter = new Date();
    };
    // AB / ABC testing code - uncomment if needed again including line in initializeGoogleAnalytics() method 
    AnalyticsUtils.prototype.getAbTestVariant = function () {
        var _this = this;
        if (this.abTestVariant != null)
            return this.abTestVariant;
        return this.abTestVariant = new Promise(function (resolve, reject) {
            _this.getExperimentReady().then(function () {
                var win = window;
                if (explicitGroupId == "0") {
                    console.log("Explicit group -- 0");
                    resolve("0");
                    return;
                }
                else if (explicitGroupId == "1") {
                    console.log("Explicit group -- 1");
                    resolve("1");
                    return;
                }
                //Set up A/B testing variants
                win.gtag('event', 'optimize.callback', {
                    name:  false ? 0 : AB_TEST_QA,
                    callback: function (value) {
                        console.log("Regular A/B test: ".concat(value));
                        clearTimeout(_this.abTestFallbackTimer);
                        resolve(value);
                    }
                });
                _this.abTestFallbackTimer = setTimeout(function () {
                    console.log("A/B test fallback: 0");
                    resolve('0');
                }, 2000);
            }).catch(function (e) {
                console.log("A/B test fallback: 0");
                resolve('0');
            });
        });
    };
    AnalyticsUtils.prototype.getAbTestGroup = function () {
        if (this.abTestGroupPromise) {
            return this.abTestGroupPromise;
        }
        return this.abTestGroupPromise = new Promise(function (resolve, reject) {
            try {
                if (document.location.search.indexOf("group=0") >= 0) {
                    resolve(0);
                    return;
                }
                else if (document.location.search.indexOf("group=1") >= 0) {
                    resolve(1);
                    return;
                }
            }
            catch (e) { }
            if (_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_7__/* .LocalStorageUtils.getItem */ .f.getItem("AbTestGroup_1")) {
                resolve(+_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_7__/* .LocalStorageUtils.getItem */ .f.getItem("AbTestGroup_1"));
                return;
            }
            _utils_WebUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("analytics/getAbTestGroup"), function (data) {
                if (data && data.group) {
                    _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_7__/* .LocalStorageUtils.setItem */ .f.setItem("AbTestGroup_1", 1);
                    resolve(data.group);
                }
                else {
                    _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_7__/* .LocalStorageUtils.setItem */ .f.setItem("AbTestGroup_1", 1);
                    resolve(1);
                }
            }, function (e) {
                _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_7__/* .LocalStorageUtils.setItem */ .f.setItem("AbTestGroup_1", 1);
                resolve(1);
            }, {});
        });
    };
    AnalyticsUtils.prototype.getNewSearchVariant = function () {
        var _this = this;
        var defaultValue = 0;
        if (document.location.search == "?old-search-layout") {
            return Promise.resolve(0);
        }
        else if (document.location.search == "?new-search-layout") {
            return Promise.resolve(1);
        }
        if (this.newSearchVariant != null) {
            return this.newSearchVariant;
        }
        return this.newSearchVariant = new Promise(function (resolve, reject) {
            _this.getExperimentReady().then(function () {
                var win = window;
                win.dataLayer = win.dataLayer || [];
                win.dataLayer.push({ 'event': 'optimize.activate.searchlayout' });
                var timeoutId = setTimeout(function () {
                    console.log("getNewSearchVariant timeout, defaulting", defaultValue);
                    resolve(defaultValue);
                }, 2000);
                win.gtag('event', 'optimize.callback', {
                    name: SEARCH_TEST,
                    callback: function (value) {
                        console.log("Got search experiment variant", value);
                        resolve(value || defaultValue);
                        clearTimeout(timeoutId);
                    }
                });
            });
        });
    };
    AnalyticsUtils.prototype.getAbcTestVariant = function () {
        var _this = this;
        var defaultValue = '0';
        /*if(!__PROD__ && !__QA__){
            return Promise.resolve(defaultValue);
        }*/
        if (this.abcTestVariant != null) {
            return this.abcTestVariant;
        }
        return this.abcTestVariant = new Promise(function (resolve, reject) {
            if (document.location.search.indexOf("group=1") >= 0) {
                resolve("1");
                return;
            }
            else if (document.location.search.indexOf("group=2") >= 0) {
                resolve("2");
                return;
            }
            else if (document.location.search.indexOf("group=3") >= 0) {
                resolve("3");
                return;
            }
            if (document.location.search == "?new-search") {
                resolve("1");
                return;
            }
            _this.getExperimentReady().then(function () {
                var win = window;
                var timeoutId = setTimeout(function () {
                    console.log("getAbcTestVariant timeout, defaulting", defaultValue);
                    resolve(defaultValue);
                }, 2000);
                win.gtag('event', 'optimize.callback', {
                    name:  false ? 0 : ABC_TEST_TEXT_ID_QA,
                    callback: function (value) {
                        console.log("Got experiment variant", value);
                        resolve(value || defaultValue);
                        clearTimeout(timeoutId);
                    }
                });
            });
        });
    };
    AnalyticsUtils.prototype.getExperimentReady = function () {
        if (!this.experimentReady) {
            this.experimentReady = new Promise(function (resolve, reject) {
                var win = window;
                win.dataLayer = win.dataLayer || [];
                win.gtag = win.gtag || function () { win.dataLayer.push(arguments); };
                win.gtag('js', new Date());
                win.gtag('config',  false ? 0 : GA_ID_QA);
                resolve();
            });
        }
        return this.experimentReady;
    };
    AnalyticsUtils.prototype.initializeAnalyticsIfNecessary = function () {
        var _this = this;
        setTimeout(function () { return _this.initializeGoogleAnalytics(); }, 5);
        if (false) {}
        else if (true) {
        }
    };
    AnalyticsUtils.prototype.initializeGoogleAnalytics = function () {
        try {
            if (false) {}
            this.trackInterestingEvents();
            // console.log("Initializing google analytics");
        }
        catch (e) {
            console.log("Error in google analytics", e);
        }
    };
    AnalyticsUtils.prototype.initializeFbAnalytics = function () {
        try {
            (function (f, b, e, v, n, t, s) {
                if (f.fbq)
                    return;
                n = f.fbq = function () {
                    n.callMethod ?
                        n.callMethod.apply(n, arguments) : n.queue.push(arguments);
                };
                if (!f._fbq)
                    f._fbq = n;
                n.push = n;
                n.loaded = !0;
                n.version = '2.0';
                n.queue = [];
                t = b.createElement(e);
                t.async = !0;
                t.src = v;
                s = b.getElementsByTagName(e)[0];
                s.parentNode.insertBefore(t, s);
            })(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
            if (window.fbq) {
                window.fbq('init', '1940497162877014');
            }
            if (initialPageViewHappened) {
                window.fbq('track', 'PageView');
            }
        }
        catch (e) { }
    };
    AnalyticsUtils.prototype.initializeSentry = function () {
        try {
            $.getScript("https://browser.sentry-cdn.com/5.11.1/bundle.min.js", function () {
                var win = window;
                win.Sentry && win.Sentry.init && win.Sentry.init({ dsn: 'https://c3d25eac84454a43a0a15dc43c9cb2f1@sentry.io/1208009' });
            });
        }
        catch (e) {
            console.log("Error when installing sentry");
        }
    };
    AnalyticsUtils.prototype.initializeConsoleTracking = function () {
        window.ga = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            console.log("Sent to GA:", JSON.stringify(args));
        };
    };
    AnalyticsUtils.prototype.initializeHotjar = function () {
        try {
            (function (h, o, t, j, a, r) {
                h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments); };
                h._hjSettings = { hjid: 766946, hjsv: 6 };
                a = o.getElementsByTagName('head')[0];
                r = o.createElement('script');
                r.async = 1;
                r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
                r.onload = function () {
                    setTimeout(function () {
                        if ((document.referrer || "").indexOf("google") >= 0) {
                            var win = window;
                            if (win.hj) {
                                win.hj('trigger', 'google_acquisition');
                            }
                        }
                    }, 100);
                };
                a.appendChild(r);
            })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');
        }
        catch (e) {
            console.log("Error initializing hotjar", e);
        }
    };
    AnalyticsUtils.prototype.initializeOneSignal = function () {
        $.getScript("https://cdn.onesignal.com/sdks/OneSignalSDK.js", function () {
            var OneSignal = window.OneSignal || [];
            OneSignal.push(function () {
                OneSignal.init({
                    appId: "b58e42e1-cbab-4f71-ac8b-1912bdea5ba2"
                });
            });
        });
    };
    AnalyticsUtils.prototype.trackInterestingEvents = function () {
        var _this = this;
        //(window as any).ga && ga('send', 'event', 'category', 'action', 'label', value);  // value is a number.
        var currentBook;
        var currentBookElement;
        setTimeout(function () {
            _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_2__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
                if (data && data.loggedIn && data.userDetails) {
                    window.ga && ga('set', 'userId', "".concat(data.userDetails.id));
                    window.ga && ga('set', 'dimension1', "".concat(data.userDetails.id));
                    window.ga && ga('set', 'dimension2', 'loggedIn');
                    pushToDataLayer({
                        event: 'logIn',
                        userId: "".concat(data.userDetails.id)
                    });
                    _services_settingsService_SettingsProvider__WEBPACK_IMPORTED_MODULE_8__/* ["default"].fetchSettings */ .Z.fetchSettings().then(function () {
                        window.ga && _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.isSubscriptionBetaTester */ .UU.isSubscriptionBetaTester(data.userDetails) && ga('set', 'dimension8', 'subscription-beta-tester');
                    });
                }
                else {
                    window.ga && ga('set', 'dimension2', "notLoggedIn");
                }
            }).catch(function (e) {
                window.ga && ga('set', 'dimension2', "anonymous");
            });
        }, 100);
        $document.on("speed", function (e, info) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'speed', info && info.type, info && info.time, { nonInteraction: false });
            }, 100);
        });
        $document.on("spinner", function (e, action) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'spinner', action, getContentId(), { nonInteraction: action != "show" });
            }, 100);
        });
        $document.on("chapterLoadingTime", function (e, loadingTime) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'chapterLoadingTime', loadingTime, getContentId(), { nonInteraction: true });
            }, 100);
        });
        $document.on("addToCartReady", function (e, time) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'addToCartReady', time, getContentId(), { nonInteraction: true });
            }, 100);
        });
        $document.on("appStarted", function (e, version) {
            window.ga && ga('send', 'event', 'appStarted', version, version, { nonInteraction: true });
        });
        $(document).on("feature-promo", function (e, type) {
            window.ga && ga('send', 'event', 'feature-promo', type, getContentId(), { nonInteraction: type == "shown" });
        });
        $(document).on("proximity", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'proximity', type, getContentId());
            }, 10);
        });
        $(document).on("klipseEvent", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'klipse', type, getContentId());
            }, 10);
        });
        $(document).on("next-element-click", function (e) {
            window.ga && ga('send', 'event', 'navigation', "next-element-click", getContentId());
        });
        $(document).on("gptLearning", function (e, type) {
            setTimeout(function () {
                try {
                    var win = window;
                    if (win.hj) {
                        win.hj('trigger', 'gptLearning');
                        win.hj('event', 'gptLearning');
                    }
                }
                catch (e) {
                    console.log("Error when triggering hotjar");
                }
            }, 10);
        });
        $(document).on("knowledgeGraphOpened", function (e, type) {
            setTimeout(function () {
                try {
                    var win = window;
                    if (win.hj) {
                        win.hj('trigger', 'knowledgeGraph');
                        win.hj('event', 'knowledgeGraph');
                    }
                }
                catch (e) {
                    console.log("Error when triggering hotjar");
                }
            }, 10);
        });
        $(document).on("testYourself", function (e, type) {
            setTimeout(function () {
                try {
                    var win = window;
                    if (win.hj) {
                        win.hj('trigger', 'testYourself');
                        win.hj('event', 'testYourself');
                    }
                }
                catch (e) {
                    console.log("Error when triggering hotjar");
                }
            }, 10);
        });
        $(document).on("summaryNotes", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'summaryNotes', type, getContentId());
                if (type == "rendered") {
                    try {
                        var win = window;
                        if (win.hj) {
                            win.hj('trigger', 'summary_notes_rendered');
                            win.hj('event', 'summary_notes_rendered');
                        }
                    }
                    catch (e) {
                        console.log("Error when triggering hotjar");
                    }
                }
            }, 10);
        });
        $(document).on("liveChapter", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'liveChapter', type, getContentId());
                if (type == "summary-shown") {
                    try {
                        var win = window;
                        if (win.hj) {
                            win.hj('trigger', 'liveChapterSummaryShown');
                            win.hj('event', 'liveChapterSummaryShown');
                        }
                    }
                    catch (e) {
                        console.log("Error when triggering hotjar");
                    }
                }
                else if (type == "interactive-feature-activated") {
                    try {
                        var win = window;
                        if (win.hj) {
                            win.hj('trigger', 'liveChapterInteractiveFeatureActivated');
                            win.hj('event', 'liveChapterInteractiveFeatureActivated');
                        }
                    }
                    catch (e) {
                        console.log("Error when triggering hotjar");
                    }
                }
            }, 10);
        });
        $(document).on("newSearchOpen", function (e) {
            window.ga && ga('send', 'event', 'newSearch', "open", getContentId());
            try {
                var win = window;
                if (win.hj) {
                    win.hj('event', 'n_search_opened');
                    win.hj('trigger', 'n_search_opened');
                }
            }
            catch (e) {
                console.log("Error when triggering hotjar");
            }
        });
        var hasNewSearchOpenBeenReported = false;
        $(document).on("newSearchOpen", function (e) {
            if (hasNewSearchOpenBeenReported) {
                return;
            }
            window.ga && ga('send', 'event', 'newSearchOpen', "open", getContentId());
            try {
                var win = window;
                if (win.hj) {
                    win.hj('event', 'n_search_layout_opened');
                    win.hj('trigger', 'n_search_layout_opened');
                }
            }
            catch (e) {
                console.log("Error when triggering hotjar");
            }
            hasNewSearchOpenBeenReported = true;
        });
        $(document).on("manningOnline", function (e, page, action) {
            window.ga && ga('send', 'event', 'manningOnline', page, action);
            try {
                if (action == "open-page") {
                    var win = window;
                    if (win.hj) {
                        win.hj('event', 'manning_online');
                    }
                }
            }
            catch (e) {
                console.log("Error when triggering hotjar");
            }
        });
        $(document).on("chat", function (e, type) {
            window.ga && ga('send', 'event', 'chat', type, getContentId(), { nonInteraction: type == "shown" });
            if (type == "opened") {
                try {
                    var win = window;
                    if (win.hj) {
                        win.hj('trigger', 'chat_opened');
                    }
                }
                catch (e) {
                    console.log("Error when triggering hotjar");
                }
            }
        });
        $(document).on("free-preview-info", function (e, type) {
            window.ga && ga('send', 'event', "free-preview-info", type, getContentId(), { nonInteraction: type == "shown" });
        });
        $(document).on("lp-ad", function (e, type) {
            window.ga && ga('send', 'event', 'lp-ad', type, getContentId(), { nonInteraction: type == "shown" });
        });
        $document.on("impressions", function (e, books, list) {
            if (books == null || books.length == 0) {
                return;
            }
            pushToDataLayer({
                event: 'eec.impressionView',
                ecommerce: {
                    impressions: books.map(function (book, index) {
                        return {
                            id: "".concat(book.id),
                            name: book.title,
                            brand: book.brand || "book",
                            category: fixCategories(book.category),
                            position: index + 1,
                            list: list
                        };
                    })
                }
            });
        });
        $document.on("searchClick", function (e, data) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'search-click', data);
            }, 50);
        });
        $document.on("impressionClick", function (e, book, list) {
            if (book == null) {
                return;
            }
            pushToDataLayer({
                event: 'eec.impressionClick',
                ecommerce: {
                    click: {
                        actionField: {
                            list: list
                        },
                        products: [{
                                id: "".concat(book.id),
                                name: book.title,
                                category: fixCategories(book.category),
                                position: book.position,
                                brand: 'book',
                                list: list
                            }]
                    }
                }
            });
        });
        $document.on("conceptPageLoaded", function (e, category, concept) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'conceptPageLoaded', category, concept, { nonInteraction: true });
            }, 50);
        });
        $document.on("conceptPageError", function (e, category, concept) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'conceptPageError', category, concept, { nonInteraction: true });
            }, 50);
        });
        $document.on("concept-register-modal-shown", function () {
            setTimeout(function () {
                setTimeout(function () {
                    window.ga && ga('send', 'event', 'conceptPageModalShown');
                }, 50);
            }, 5);
        });
        $document.on("bookContentLoaded", function (e, book, bookContent, isLoggedIn) {
            setTimeout(function () {
                var action = "";
                currentBook = book;
                currentBookElement = bookContent.bookElement;
                if (currentBook.userOwnsBook) {
                    action = "accessingOwnedBook";
                }
                else if (currentBook.isFreeEbook) {
                    action = "accessingFreeEbook-".concat(isLoggedIn ? "logged-in" : "not-logged-in");
                }
                else if (currentBookElement.isOpen) {
                    action = "accessingFreeBookChapter-".concat(isLoggedIn ? "logged-in" : "not-logged-in");
                }
                else {
                    action = "accessingNotOwnedBookChapter-".concat(isLoggedIn ? "logged-in" : "not-logged-in");
                    try {
                        var win = window;
                        if (win.hj) {
                            win.hj('trigger', 'scrambled_chapter_viewed');
                        }
                    }
                    catch (e) {
                        console.log("Error when triggering hotjar");
                    }
                }
                window.ga && ga('send', 'event', 'bookContent', action, getContentId(), { nonInteraction: true });
                try {
                    if (book != null && !book.userOwnsBook) {
                        window.ccLayer = window.ccLayer || [];
                        window.ccLayer.push({
                            ccEvent: 'productViewed',
                            id: book.manningId,
                            src: 'custom',
                            name: book.title,
                            url: "https://livebook.manning.com/".concat(_utils_WebUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getBookUrl */ .Z.getBookUrl(book.slug)),
                            image: _utils_WebUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getBookCoverUrl */ .Z.getBookCoverUrl(book.shortName),
                            currency: 'USD',
                            inStock: true
                        });
                        pushToDataLayer({
                            'productId': book.manningId,
                            'event': 'book-page-loaded'
                        });
                    }
                }
                catch (e) { }
                if (book != null && !book.userOwnsBook) {
                    pushToDataLayer({
                        event: 'eec.detail',
                        ecommerce: {
                            detail: {
                                actionField: {
                                    list: 'preview chapter'
                                },
                                products: [{
                                        id: "".concat(book.manningId),
                                        name: book.cleanTitle,
                                        category: fixCategories(book.categories),
                                        brand: "book"
                                    }]
                            }
                        }
                    });
                }
            }, 50);
        });
        $document.on("exercisesOpened", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'exercises', "solvingExercises", getContentId());
            }, 50);
        });
        $document.on("exerciseAnsweredCorrectly", function (e, exerciseAnswerInfo) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'exercises', "answeredCorrectly", getContentId());
                $document.trigger("user-action-exercise-solved", [exerciseAnswerInfo.productManningId, "".concat(exerciseAnswerInfo.bookShortName, "-").concat(exerciseAnswerInfo.paragraphId, "-").concat(exerciseAnswerInfo.exerciseIndex), false]);
            }, 50);
        });
        $document.on("exerciseAnsweredIncorrectly", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'exercises', "answeredIncorrectly", getContentId());
            }, 50);
        });
        $document.on("iftActivated", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'interactiveFeatures', "iftActivated", getContentId());
            }, 50);
        });
        $document.on("iftLineupShown", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'interactiveFeatures', "lineupShown", getContentId());
            }, 50);
        });
        $document.on("tour", function (e, stepDescription) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'tour', stepDescription, getContentId());
            });
        });
        $document.on("zenModeToggle", function (e, newZenMode) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'zenModeToggle', newZenMode ? "On" : "Off", getContentId());
            });
        });
        $document.on("unlockSuccess", function (e, unlockType) {
            setTimeout(function () {
                if (unlockType == "FreePreview") {
                    return;
                }
                window.ga && ga('send', 'event', 'unlock', unlockType + "-success", getContentId());
            }, 50);
        });
        $document.on("registrationSuccessful", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'registration', 'success');
                window.fbq && window.fbq('track', 'CompleteRegistration');
                window.gtag && window.gtag('event', 'conversion', { 'send_to': 'AW-830923058/BwCGCInk_cIBELLCm4wD' });
            }, 50);
        });
        $document.on("cartUpsellAddToCartClick", function (e, bookShortName) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'cartUpsell', 'addToCart', bookShortName);
            }, 50);
        });
        $document.on("cartUpsellShown", function (e, bookTitle) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'cartUpsell', 'show', bookTitle);
            }, 50);
        });
        $document.on("inlinePromoAddToCart", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'inlinePromoAddToCart');
            }, 50);
        });
        $document.on("registrationSubscribeInfo", function (e, subscribe) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'registration', subscribe ? "success-subscribed" : "success-not-subscribed");
            }, 50);
        });
        $document.on("registrationAccountNotActivated", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'registrationProcess', "notActivated");
            }, 50);
        });
        $document.on("activationRequested", function (e, counter) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'registrationProcess', "activationRequested", counter);
            }, 50);
        });
        $document.on("registrationModalShown", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'registrationProcess', "registrationModalShown");
            }, 50);
        });
        $document.on("unlockFailure", function (e, unlockType, paragraphIds) {
            setTimeout(function () {
                if (unlockType == "FreePreview") {
                    return;
                }
                var contentId = getContentId();
                try {
                    contentId += "-" + JSON.stringify(paragraphIds);
                }
                catch (e) { }
                window.ga && ga('send', 'event', 'unlock', unlockType + "-failure", contentId);
            }, 50);
        });
        $document.on("outOfParagraphByParagraphUnlocks", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'unlock', "outOfParagraphByParagraphUnlocks", getContentId());
            }, 50);
        });
        $(document).on("searchLocationSearch", function (e, query, searchLocation) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'searchLocation', searchLocation, query);
            }, 50);
        });
        $document.on("searchMade", function (e, query, location, isContent) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'search', "".concat(query, "-;-").concat(location), getContentId());
                try {
                    window.ccLayer = window.ccLayer || [];
                    window.ccLayer.push({
                        ccEvent: 'liveBookProductsSearched',
                        src: 'custom',
                        query: "".concat(query, "-;-").concat(location),
                    });
                }
                catch (e) { }
                $document.trigger("user-action-search-made", [getCurrentBookManningId(), "".concat(query, "-;-").concat(location), false]);
                pushToDataLayer({
                    event: 'search',
                    search: [{
                            query: query,
                            scope: (_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book */ .UU.book && _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.manningId */ .UU.book.manningId) || "library"
                        }]
                });
            }, 50);
        });
        $document.on("searchSuggestion", function (e, type, data) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'searchSuggestion', type, data);
                $document.trigger("user-action-search-result-opened", [getCurrentBookManningId(), type, data, false]);
            }, 50);
        });
        $document.on("audioChapterEnded", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'audio', e.type, getContentId());
            }, 50);
        });
        $document.on("anonymousFreePreviewStartRequested", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'freePreview', "anonymousFreePreviewStartRequested", getContentId());
            }, 50);
        });
        $document.on("paywallExperiment", function () {
            try {
                var win = window;
                if (win.hj) {
                    win.hj('trigger', 'paywallExperiment');
                }
            }
            catch (e) {
                console.log("Error when triggering hotjar");
            }
        });
        $document.on("freePreviewModeActivated", function (e, isOpen) {
            setTimeout(function () {
                if (isOpen) {
                    window.ga && ga('send', 'event', '24hFreePreview', "activated", getContentId());
                    try {
                        var win = window;
                        if (win.hj) {
                            win.hj('trigger', '24_h_free_preview_activated');
                        }
                    }
                    catch (e) {
                        console.log("Error when triggering hotjar");
                    }
                }
                else {
                    window.ga && ga('send', 'event', 'freePreview', "activated", getContentId());
                }
            }, 50);
        });
        $document.on("landingPageLoaded", function () {
            setTimeout(function () {
                window.ccLayer = window.ccLayer || [];
                window.ccLayer.push({
                    ccEvent: 'homepageViewed',
                    src: 'custom',
                });
                pushToDataLayer({
                    'event': 'landing-page-loaded'
                });
            }, 5);
        });
        $document.on("freePreviewModeDeactivated", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'freePreview', "deactivated", getContentId());
            }, 50);
        });
        $document.on("freePreviewModeExpired", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'freePreview', "expired", getContentId());
            }, 50);
        });
        $document.on("addToCartFromFreeEbookUpsell", function (e, addedBook) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'addToCartFromFreeEbookUpsell', addedBook, getContentId());
            }, 50);
        });
        $document.on("openLandingPageCoverLink", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'openLandingPageCoverLink', type);
            }, 50);
        });
        $document.on("signInRequested", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'signInRequested', type);
            }, 50);
        });
        $document.on("discussionMenuOpened", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'discussion', "menuOpened");
            }, 50);
        });
        $document.on("pointingLinkOpened", function (e, pointingLinkId) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'pointingLinkOpened', pointingLinkId, getContentId());
            }, 50);
        });
        $document.on("onSiteWidePromotionAddToCart", function (e, version) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'onSiteWidePromotionAddToCart', version, getContentId());
            }, 50);
        });
        $document.on("highlightAdded", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'highlightAdded', getContentId());
                $document.trigger("user-action-highlight-created", [getCurrentBookManningId(), false]);
            }, 50);
        });
        $document.on("bookmarkAdded", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'bookmarkAdded', getContentId());
                $document.trigger("user-action-bookmark-created", [getCurrentBookManningId(), false]);
            }, 50);
        });
        $document.on("noteAdded", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'noteAdded', getContentId());
                $document.trigger("user-action-note-created", [getCurrentBookManningId(), false]);
            }, 50);
        });
        $document.on("contentFeedback", function (e, type) { return setTimeout(function () {
            window.ga && ga('send', 'event', "contentFeedback", type, getContentId());
        }, 50); });
        $document.on("socialEvent", function (e, eventType, forumLocation) {
            setTimeout(function () {
                var contentId = "";
                if (forumLocation) {
                    contentId = "".concat((forumLocation.productExternalId || ""), "-").concat((forumLocation.element || ""), "-").concat((forumLocation.location || ""));
                }
                window.ga && ga("send", "event", "social", eventType, contentId || getContentId());
            }, 50);
        });
        $document.on("forumOpened", function (e) {
            setTimeout(function () {
                window.ga && ga("send", "event", "social", "forumOpened", "");
            }, 50);
        });
        $document.on("meapErrorReportShow", function (e) {
            setTimeout(function () {
                window.ga && ga("send", "event", "meapErrorReport", "show");
            }, 50);
        });
        $document.on("pageLoaded", function (e) {
            initialPageViewHappened = true;
            setTimeout(function () {
                var currentHash = document.location.hash || document.location.pathname || "";
                currentHash = currentHash.replace("//", "/");
                if (!currentHash) {
                    currentHash = "/";
                }
                window.ga && ga('set', 'page', currentHash);
                window.ga && ga('send', 'pageview');
                window.fbq && window.fbq('track', 'PageView');
                if (_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book */ .UU.book != null) {
                    window.fbq && window.fbq('track', 'ViewContent', {
                        content_ids: [_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.manningId */ .UU.book.manningId],
                        content_category: _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.categories */ .UU.book.categories,
                        content_name: _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.book.cleanTitle */ .UU.book.cleanTitle,
                        content_type: "livebook"
                    });
                }
            }, 200);
        });
        $document.on("codeLoadingError", function (e, category, label) {
            setTimeout(function () {
                window.ga && ga("send", "event", "codeLoadingError", category, label, { nonInteraction: true });
            }, 100);
        });
        $document.on("app-install-download-initialized", function () {
            setTimeout(function () {
                window.ga && ga("send", "event", "app-install", "app-install-download-initialized");
            }, 50);
        });
        $document.on("app-install-popup-dismissed", function () {
            setTimeout(function () {
                window.ga && ga("send", "event", "app-install", "app-install-popup-dismissed");
            }, 50);
        });
        $document.on("app-install-popup-accepted", function () {
            setTimeout(function () {
                window.ga && ga("send", "event", "app-install", "app-install-popup-accepted");
            }, 50);
        });
        $document.on("app-install-popup-shown", function () {
            setTimeout(function () {
                window.ga && ga("send", "event", "app-install", "app-install-popup-shown");
            }, 50);
        });
        $document.on("chapterCommands", function (e, type) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'chapterCommands', "type", getContentId());
            });
        });
        $document.on("openedChapter", function (e, data) {
            setTimeout(function () {
                var url = document.location.href;
                var bookPart = url.split("/")[6];
                if (data.loggedIn && !_this.currentlyLoggedIn) {
                    //if(!__PROD__) console.log(`GA-EVENT: LOGGED IN`);
                    //(window as any).ga && ga('send', 'event', 'chapterViewed', "loggedIn=true:justNow", "scrambled=true", ++this.chaptersSeen, { nonInteraction: true});
                }
                else if (!data.loggedIn) {
                    if (bookPart != _this.currentBookPart) {
                        if (_this.viewingScrambledContent != data.scrambled) {
                            _this.chaptersSeen = 0;
                            _this.viewingScrambledContent = data.scrambled;
                        }
                        //(window as any).ga && ga('send', 'event', 'chapterViewed', "loggedIn=false", `scrambled=${data.scrambled}`, ++this.chaptersSeen, { nonInteraction: true});
                        //if(!__PROD__) console.log(`GA-EVENT: Viewed chapter#=${this.chaptersSeen}, Logged in=${data.loggedIn}, Scrambled=${data.scrambled}`);
                    }
                }
            }, 50);
        });
        $document.on("shoppingCartOpened", function () {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'cartStep', "open");
                var win = window;
                if (win.hj) {
                    win.hj('trigger', 'shoppingCartOpened');
                }
            });
        });
        $document.on("cartStep", function (e, step) {
            setTimeout(function () {
                if (_this.currentCartStep == step)
                    return;
                _this.currentCartStep = step;
                window.ga && ga('send', 'event', 'cartStep', step);
            }, 50);
        });
        $document.on("tocMenuOpen", function (e, step) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'toc', 'menuOpened', getContentId(), { nonInteraction: true });
            }, 50);
        });
        $document.on("tocMenuClick", function (e, step) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'toc', 'menuClick', 'numClicks', ++_this.numTocMenuClicks);
            }, 50);
        });
        $document.on("tocIndexClick", function (e, step) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'toc', 'indexClick', 'numClicks', ++_this.numTocIndexClicks);
            }, 50);
        });
        $document.on("profileMenuOpened", function (e, step) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'profile', 'profileMenuOpened');
            }, 50);
        });
        $document.on("profileMenuSave", function (e, step) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'profile', 'profileSaved');
            }, 50);
        });
        $document.on("wishListAdd", function (e, info) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'wishList', 'wishListAdd', info);
                $document.trigger("user-action-wishlist-item-added", [info, false]);
                window.fbq && window.fbq('track', 'AddToWishlist');
            }, 50);
        });
        $document.on("wishListRemove", function (e, info) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'wishList', 'wishListRemove', info);
            }, 50);
        });
        $document.on("wishListAddToCart", function (e, info) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'wishList', 'wishListAddToCart', info);
            }, 50);
        });
        $document.on("wishListFail", function (e, info) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'wishList', 'wishListFail', info);
            }, 50);
        });
        $document.on("marketingEmailSubscription", function (e, type, moreInfo) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'marketingEmailSubscription', type, moreInfo);
            }, 50);
        });
        $document.on("indexedTerms", function (e, type, term, externalId, productId) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'indexedTerms', type, "".concat(externalId, "-").concat(term));
                if (type == "inlineIndexedTermClick") {
                    $document.trigger("user-action-cross-reference-term-opened", [productId, term]);
                }
                try {
                    var win = window;
                    if (win.hj) {
                        win.hj('trigger', 'indexedTermClick');
                    }
                }
                catch (e) {
                    console.log("Error when triggering hotjar");
                }
            }, 50);
        });
        $document.on("geoMapOpen", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'social', "geoMapOpened", "");
                try {
                    var win = window;
                    if (win.hj) {
                        win.hj('trigger', 'communityMapOpened');
                    }
                }
                catch (e) {
                    console.log("Error when triggering hotjar");
                }
            }, 50);
        });
        $document.on("geoMapFeedbackThumbVote", function (e, vote) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'social', "geoMapFeedbackThumbVote", vote);
            }, 50);
        });
        $document.on("geoMapHideLocation", function (e) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'social', "geoMapHideLocation", "");
            }, 50);
        });
        $document.on("tccContentClick", function (e, href) {
            setTimeout(function () {
                window.ga && ga('send', 'event', 'thisChapterCovers', getContentId(), href);
            }, 50);
        });
        var previousListenedRatio = 0;
        $document.on("progressStore", function (e, contentItemIDs) {
            setTimeout(function () {
                var contentItemIdList = _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_0__/* .ValueUtils.mapToArray */ .d.mapToArray(contentItemIDs);
                var ratio = (contentItemIdList.length / $document.find(".readable-text").length) * 100;
                if (previousListenedRatio < 25 && ratio >= 25) {
                    window.ga && ga('send', 'event', 'audio', "25%", getContentId());
                }
                else if (previousListenedRatio < 50 && ratio >= 50) {
                    window.ga && ga('send', 'event', 'audio', "50%", getContentId());
                }
                else if (previousListenedRatio < 75 && ratio >= 75) {
                    window.ga && ga('send', 'event', 'audio', "75%", getContentId());
                }
                else if (previousListenedRatio < 99 && ratio >= 99) {
                    window.ga && ga('send', 'event', 'audio', "100%", getContentId());
                }
                previousListenedRatio = ratio;
            }, 50);
        });
        function getContentId() {
            return "".concat(currentBook != null ? currentBook.shortName : "unknownBook", "-").concat(currentBookElement != null ? currentBookElement.shortName : "unknownBookElement");
        }
        function getCurrentBookManningId() {
            return currentBook != null ? currentBook.manningId : -1;
        }
        function pushToDataLayer(obj) {
            getDataLayer().push(obj);
        }
        function fixCategories(category) {
            if (!category) {
                return "";
            }
            return category.split(/;\s*/).map(function (it) { return it.trim(); }).sort().join(",");
        }
        function getDataLayer() {
            window.dataLayer = window.dataLayer || [];
            return window.dataLayer;
        }
        $document.on("addItemToCartInGA", function (e, item) {
            setTimeout(function () {
                window.ga && ga('ecommerce:addItem', item);
            }, 1);
        });
        $document.on("startTransactionInGA", function (e, transaction) {
            setTimeout(function () {
                window.ga && ga('ecommerce:addTransaction', transaction);
            }, 1);
        });
        $document.on("sendTransactionInGA", function (e) {
            setTimeout(function () {
                window.ga && ga('ecommerce:send');
            }, 1);
        });
        $document.on("productAddedToCart", function (e, info) {
            //Send to google tag
            pushToDataLayer({
                event: 'eec.add',
                ecommerce: {
                    add: {
                        actionField: {
                            list: 'In-Product'
                        },
                        products: [{
                                id: "".concat(info.productOffering.manningId),
                                name: info.isToken ? "token" : (info.book != null ? info.book.cleanTitle || info.book.title : ""),
                                category: info.isToken ? "token" : info.book != null ? fixCategories(info.book.categories) : "",
                                variant: info.productOffering.productType,
                                brand: info.isToken ? 'token' : "book",
                                quantity: info.quantity,
                                price: "".concat(_utils_ValueUtils__WEBPACK_IMPORTED_MODULE_0__/* .ValueUtils.roundToTwoDecimalPoints */ .d.roundToTwoDecimalPoints(info.price)).replace(",", ".")
                            }]
                    }
                }
            });
            //Send to fb
            try {
                window.fbq && window.fbq('track', 'AddToCart', {
                    value: _utils_ValueUtils__WEBPACK_IMPORTED_MODULE_0__/* .ValueUtils.roundToTwoDecimalPoints */ .d.roundToTwoDecimalPoints(info.price),
                    content_name: info.isToken ? "token" : (info.book != null ? info.book.cleanTitle || info.book.title : ""),
                    content_type: 'product',
                    content_ids: [info.productOffering.manningId],
                    currency: 'USD'
                });
            }
            catch (e) { }
            //Send to GA
            try {
                window.ga && ga('send', 'event', 'productAddedToCart', "".concat(info.isToken ? "token" : info.book != null ? info.book.shortName : "", "--").concat(info.quantity), getContentId());
            }
            catch (e) { }
        });
        $document.on("productRemovedFromCart", function (e, info) {
            //Send to gtag
            pushToDataLayer({
                event: 'eec.remove',
                ecommerce: {
                    remove: {
                        products: [{
                                id: "".concat(info.id),
                                name: info.title,
                                category: fixCategories(info.category),
                                variant: info.variant,
                                brand: 'book',
                                quantity: info.quantity,
                                price: "".concat(info.price).replace(",", ".")
                            }]
                    }
                }
            });
        });
        $document.on("sendCheckoutInitializedToBehaviorTracking", function (e) {
            if (!_DeviceUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isApp */ .Z.isApp()) {
                _modules_UserActionTrackerModule__WEBPACK_IMPORTED_MODULE_6__/* .UserActionTrackerModule.processGoToShoppingCartAction */ .Q.processGoToShoppingCartAction();
            }
        });
        /** END CART REPORTING */
    };
    return AnalyticsUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new AnalyticsUtils());


/***/ }),

/***/ 52810:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _models_Book__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91098);
/* harmony import */ var _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69619);
/* harmony import */ var _DOMUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23934);
/* harmony import */ var _ValueUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3199);
/* harmony import */ var _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10572);
/* harmony import */ var _WebUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(93292);
/* harmony import */ var _models_BookElement__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87721);
/* harmony import */ var _models_NeighboringBookElement__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28672);
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};








var LARGE_LIST_ITEM_MIN_WORD_SIZE = 40;
var BookContentUtils = /** @class */ (function () {
    function BookContentUtils() {
        this.listingRegEx = /listing(\s)+[0-9]+\.[0-9]+/gi;
        this.figureRegEx = /figure(\s)+[0-9]+\.[0-9]+/gi;
        this.tableRegEx = /table(\s)+[0-9]+\.[0-9]+/gi;
        this.browsableRegExes = [this.listingRegEx, this.figureRegEx, this.tableRegEx];
    }
    BookContentUtils.prototype.getShortNameChapterTitleMap = function (toc) {
        var map = {};
        if (!toc) {
            return map;
        }
        var traverse = function (obj) {
            if (!obj) {
                return;
            }
            if (obj.shortName && obj.title) {
                map[obj.shortName] = obj.title;
            }
            for (var prop in obj) {
                if (!obj.hasOwnProperty(prop)) {
                    continue;
                }
                if (obj[prop] && typeof (obj[prop]) == "object") {
                    traverse(obj[prop]);
                }
            }
        };
        traverse(toc);
        return map;
    };
    BookContentUtils.prototype.createBookFromBookData = function (bookData) {
        var book = new _models_Book__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(bookData.id, bookData.manningId, bookData.title, bookData.shortName, bookData.description, bookData.lastUpdateDate, bookData.exercisesComingSoon, bookData.programmingLanguage, bookData.userOwnsBook, bookData.userOwnsAudio, _WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getBookCoverUrl */ .Z.getBookCoverUrl(bookData.shortName), _WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getBookUrl */ .Z.getBookUrl(bookData.slug), bookData.meap, bookData.open, bookData.latestMeapVersion || 0, bookData.highResolutionCover);
        book.subtitle = bookData.subtitle;
        book.slug = bookData.slug;
        book.offlineFileSizes = bookData.offlineFileSizes;
        book.openChapters = bookData.openChapters || [];
        book.cleanTitle = this.cleanBookTitle(book.title);
        book.authors = bookData.authors;
        book.isReview = !!bookData.isReview;
        book.userCanViewReviews = !!bookData.userCanViewReviews;
        book.userIsEditor = !!bookData.userIsEditor;
        book.userIsReviewer = !!bookData.userIsReviewer;
        book.userIsAuthor = !!bookData.userIsAuthor;
        book.userOwnsPBook = !!bookData.userOwnsPBook;
        book.userCanDownloadBook = !!bookData.userCanDownloadBook;
        book.sisterLicenseId = bookData.sisterLicenseId;
        book.associatedLicenseId = bookData.associatedLicenseId;
        book.categories = bookData.categories || "";
        book.hasAudio = !!bookData.hasAudio;
        book.isFreeEbook = !!bookData.isFreeEbook;
        book.hasExercises = !!bookData.hasExercises;
        book.hasTextAddendums = !!bookData.hasTextAddendums;
        book.hasKnowledgeGraph = !!bookData.hasKnowledgeGraph;
        book.hasWiki = !!bookData.hasWiki;
        book.isKnowledgeGraphAccessible = !!bookData.isKnowledgeGraphAccessible;
        book.userOwnsAudio = !!bookData.userOwnsAudio;
        book.isParagraphByParagraphUnlockDisabled = !!bookData.isParagraphByParagraphUnlockDisabled;
        book.hasBeenDownloaded = !!bookData.hasBeenDownloaded;
        book.isbn = bookData.isbn;
        book.customCss = bookData.customCss;
        book.amazonReviewUrl = bookData.amazonReviewUrl;
        book.listingCopyRegex = bookData.listingCopyRegex;
        book.manuscriptOrigin = bookData.manuscriptOrigin;
        book.wideScreenCoverBackground = bookData.wideScreenCoverBackground;
        book.wideScreenCoverUrl = bookData.wideScreenCoverUrl;
        book.useKlipseListings = bookData.useKlipseListings;
        book.assistantId = bookData.assistantId;
        book.annotationsCanBeSplit = bookData.annotationsCanBeSplit;
        book.reviewTechnologyLabel = bookData.reviewTechnologyLabel;
        book.cancelled = bookData.cancelled;
        book.disableFreePreviewUnlocking = bookData.disableFreePreviewUnlocking;
        book.showOnlyUnscrambledText = bookData.showOnlyUnscrambledText;
        book.hasNewspaperLikePaywall = bookData.hasNewspaperLikePaywall;
        book.hasVideo = bookData.hasVideo;
        if (bookData.offlineFileSizes != null) {
            book.offlineFileSizes = bookData.offlineFileSizes;
        }
        if (bookData.lastSignificantDate) {
            book.lastSignificantDate = new Date(bookData.lastSignificantDate);
        }
        if (bookData.publishedDate) {
            book.publishedDate = new Date(bookData.publishedDate);
        }
        if (bookData.expectedPublishDate) {
            book.expectedPublishDate = new Date(bookData.expectedPublishDate);
        }
        if (bookData.expectedEbookAvailabilityDate) {
            book.expectedEbookAvailabilityDate = new Date(bookData.expectedEbookAvailabilityDate);
        }
        return book;
    };
    BookContentUtils.prototype.createBookElement = function (bookElementData, book, previousBookElementData, nextBookElementData) {
        var bookElement = new _models_BookElement__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z(book, bookElementData.id, bookElementData.title, bookElementData.shortName, bookElementData.userOwnsBookElement, bookElementData.ordinal, bookElementData.wordCount, bookElementData.freeWordCount, bookElementData.audioLocation, bookElementData.subtitlesLocation, bookElementData.isOpen, bookElementData.meapVersion, bookElementData.location, bookElementData.isBookOverview, bookElementData.isFrontMatter);
        bookElement.videos = bookElementData.videos;
        bookElement.exercisesLocation = bookElementData.exercisesLocation;
        bookElement.reviewVersion = bookElementData.reviewVersion;
        bookElement.isRollingReview = bookElementData.isRollingReview;
        bookElement.isFeedbackDisabled = bookElementData.isFeedbackDisabled;
        bookElement.isFinalReview = bookElementData.isFinalReview;
        bookElement.reviewBookTitle = bookElementData.reviewBookTitle;
        bookElement.isDigest = bookElementData.isDigest;
        bookElement.pdf = bookElementData.pdf;
        bookElement.hasSummaries = bookElementData.hasSummaries;
        bookElement.paywallState = bookElementData.paywallState;
        if (bookElementData.dateCreated) {
            bookElement.dateCreated = new Date(bookElementData.dateCreated);
        }
        if (bookElementData.lastUpdated) {
            bookElement.lastUpdated = new Date(bookElementData.lastUpdated);
        }
        //bookElement.content = bookElementData.
        if (previousBookElementData) {
            bookElement.previousBookElement = new _models_NeighboringBookElement__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(previousBookElementData.shortName, previousBookElementData.title, previousBookElementData.link || _WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(book.slug, previousBookElementData.shortName, bookElement.meapVersion, bookElement.reviewVersion));
        }
        if (nextBookElementData) {
            bookElement.nextBookElement = new _models_NeighboringBookElement__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z(nextBookElementData.shortName, nextBookElementData.title, nextBookElementData.link || _WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(book.slug, nextBookElementData.shortName, bookElement.meapVersion, bookElement.reviewVersion), nextBookElementData.introItems);
        }
        return bookElement;
    };
    BookContentUtils.prototype.groupSmallListItemsIfNecessary = function (paragraphs) {
        var groups = [];
        var encounteredLists = [];
        var groupedListItems = [];
        for (var _i = 0, paragraphs_1 = paragraphs; _i < paragraphs_1.length; _i++) {
            var $paragraph = paragraphs_1[_i];
            var $closestList = $paragraph.closest("ul, ol");
            if ($closestList.length == 0) {
                groups.push([$paragraph]);
            }
            else {
                if (this.isListWithLargeItems($closestList)) {
                    groups.push([$paragraph]);
                }
                else {
                    var closestList = $closestList.get(0);
                    var listIndex = encounteredLists.indexOf(closestList);
                    if (listIndex == -1) {
                        encounteredLists.push(closestList);
                        groupedListItems.push([]);
                        listIndex = encounteredLists.length - 1;
                    }
                    groupedListItems[listIndex].push($paragraph);
                }
            }
        }
        return groups.concat(groupedListItems);
    };
    BookContentUtils.prototype.insertLoadingBoxes = function () {
        try {
            var root = document.querySelector("#book-content-main-row #book-markup-container");
            if (!root) {
                return;
            }
            var titleElements = root.querySelectorAll("h2, h3");
            for (var i = 0; i < titleElements.length; i++) {
                var titleElement = titleElements[i];
                var readableTextElement = titleElement.parentElement;
                if (readableTextElement.nextElementSibling == null || readableTextElement.nextElementSibling.querySelector("h2, h3") != null) {
                    var newElement = document.createElement("div");
                    newElement.innerHTML = generateRandomParagraphs();
                    for (var j = 0; j < newElement.children.length; j++) {
                        insertAfter(newElement.children[j], readableTextElement);
                    }
                }
            }
        }
        catch (e) { }
        function insertAfter(newNode, referenceNode) {
            referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
        }
        function generateRandomParagraphs() {
            var count = randomIntFromInterval(1, 6);
            var possibleMargins = [0, 10, 20, 30, 40, 50, 70, 90];
            var html = "";
            for (var i = 0; i <= count; i++) {
                html += '<div class="readable-text"><span class="placeholder" style="margin-right: ' + possibleMargins[randomIntFromInterval(0, possibleMargins.length - 1)] + 'px"><span class="placeholder-animated-background">&nbsp;</span></span> </div>';
            }
            return html;
        }
        function randomIntFromInterval(min, max) {
            return Math.floor(Math.random() * (max - min + 1) + min);
        }
    };
    BookContentUtils.prototype.getHeadingSectionCost = function (bookElementPriceInfo, $heading, $headings) {
        if (bookElementPriceInfo == null || $heading == null || $headings == null) {
            return 0;
        }
        var basePrice = _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isChapterOrAppendix */ .Z.isChapterOrAppendix($heading.text().trim())
            ? bookElementPriceInfo.tokenPrice
            : this.getSectionSubsectionTokenPrice(_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].extractNumbering */ .Z.extractNumbering($heading.text().trim()), bookElementPriceInfo.sectionSubsectionPrices);
        if (basePrice <= 0) {
            return 0;
        }
        var containedParagraphs = this.getContainedScrambledAndUnscrambledParagraphs($heading, $headings);
        if (containedParagraphs.scrambledParagraphs.length == 0) {
            return 0;
        }
        return basePrice;
    };
    BookContentUtils.prototype.getSectionSubsectionTokenPrice = function (sectionSubsectionShortName, sectionSubsectionPrices) {
        if (sectionSubsectionPrices == null || sectionSubsectionPrices.length == 0) {
            return 0;
        }
        var item = sectionSubsectionPrices.find(function (it) { return it.shortName == sectionSubsectionShortName; });
        return item != null ? item.tokenPrice : 0;
    };
    BookContentUtils.prototype.getSectionSubsectionFullTokenPrice = function (sectionSubsectionShortName, sectionSubsectionPrices) {
        if (sectionSubsectionPrices == null || sectionSubsectionPrices.length == 0) {
            return 0;
        }
        var item = sectionSubsectionPrices.find(function (it) { return it.shortName == sectionSubsectionShortName; });
        return item != null ? item.fullTokenPrice : 0;
    };
    BookContentUtils.prototype.cleanBookTitle = function (bookTitle, shortenEdition) {
        if (shortenEdition === void 0) { shortenEdition = false; }
        if (!bookTitle) {
            return bookTitle;
        }
        try {
            var colonIndex = bookTitle.indexOf(":");
            bookTitle = colonIndex != -1 ? bookTitle.substr(0, colonIndex) : bookTitle;
            if (shortenEdition) {
                bookTitle = bookTitle.replace(/second edition/i, "2nd")
                    .replace(/third edition/i, "3rd")
                    .replace(/fourth edition/i, "4th")
                    .replace(/fifth edition/i, "5th")
                    .replace(/sixth edition/i, "6th")
                    .replace(/seventh edition/i, "7th")
                    .replace(/eight edition/i, "8th")
                    .replace(/ninth edition/i, "9th");
            }
            var meapIndex = bookTitle.toLowerCase().indexOf("meap");
            return meapIndex != -1 ? bookTitle.substr(0, meapIndex) : bookTitle;
        }
        catch (e) {
            return bookTitle;
        }
    };
    BookContentUtils.prototype.updateTitle = function (title) {
        title = (title || "").trim();
        document.title = title || "livebook";
    };
    BookContentUtils.prototype.updateMetaContent = function (content) {
        if (content) {
            $(".meta-description").attr("content", content);
        }
        else {
            this.resetMetaContent();
        }
    };
    BookContentUtils.prototype.updateMetaImage = function (url) {
        if (url) {
            $(".meta-image").attr("content", url);
        }
        else {
            this.resetMetaImage();
        }
        $(".meta-image").attr("content", url);
    };
    BookContentUtils.prototype.resetMetaImage = function () {
        $(".meta-image").attr("content", _WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getLivebookCdn */ .Z.getLivebookCdn() + "assets/images/cover.png");
    };
    BookContentUtils.prototype.updateCanonicalLink = function (bookSlug, bookElementShortName, meapVersion) {
        $("link[rel='canonical']").attr("href", _WebUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getAbsoluteBookElementUrl */ .Z.getAbsoluteBookElementUrl(bookSlug, bookElementShortName, meapVersion));
    };
    BookContentUtils.prototype.updateGoogleArticleDescription = function (book, bookElement, googleBotInfo) {
        $("meta[name='isGoogleBot']").remove();
        $("script[data-key='google-bot-info']").remove();
        if (googleBotInfo != null) {
            if (googleBotInfo.isGoogleBot) {
                $(document.head).append("<meta name=\"isGoogleBot\" content=\"true\" />");
            }
            if (googleBotInfo.paywallInfo) {
                $(document.head).append("<script type=\"application/ld+json\" data-key=\"google-bot-info\">".concat(googleBotInfo.paywallInfo, "</script>"));
            }
        }
    };
    BookContentUtils.prototype.updateStructureScript = function () {
    };
    BookContentUtils.prototype.resetStructureScript = function () {
    };
    BookContentUtils.prototype.resetMetaContent = function () {
        $(".meta-description").attr("content", "liveBooks are enhanced books. They add narration, interactive exercises, code execution, and other features to eBooks.");
    };
    BookContentUtils.prototype.matchesListingRegEx = function (text) {
        return this.matchesRegEx(text, this.listingRegEx);
    };
    BookContentUtils.prototype.matchesFigureRegEx = function (text) {
        return this.matchesRegEx(text, this.figureRegEx);
    };
    BookContentUtils.prototype.matchesTableRegEx = function (text) {
        return this.matchesRegEx(text, this.tableRegEx);
    };
    BookContentUtils.prototype.matchesRegEx = function (text, regEx) {
        if (text == null || text == "" || !text.match) {
            return false;
        }
        if (regEx == null) {
            return false;
        }
        return text.match(regEx);
    };
    BookContentUtils.prototype.matchesBrowsableRegEx = function (text) {
        if (!text || !text.match) {
            return false;
        }
        return !!(text.match(this.listingRegEx) || text.match(this.figureRegEx)
            || text.match(this.tableRegEx));
    };
    BookContentUtils.prototype.getContainedScrambledAndUnscrambledParagraphs = function ($heading, $headings) {
        var scrambledAndUnscrambledParagraphs = {
            scrambledParagraphs: [],
            unscrambledParagraphs: [],
            neverScrambledParagraphs: []
        };
        var title = $heading.text().trim();
        if (_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isChapterOrAppendix */ .Z.isChapterOrAppendix(title)) {
            var scrambledParagraphs = document.querySelectorAll(".readable-text.scrambled");
            for (var i = 0; i < scrambledParagraphs.length; i++) {
                scrambledAndUnscrambledParagraphs.scrambledParagraphs.push(scrambledParagraphs[i]);
            }
            var unscrambledParagraphs = document.querySelectorAll(".readable-text.unscrambled");
            for (var i = 0; i < unscrambledParagraphs.length; i++) {
                scrambledAndUnscrambledParagraphs.unscrambledParagraphs.push(unscrambledParagraphs[i]);
            }
            var neitherParagraphs = document.querySelectorAll(".readable-text:not(.unscrambled):not(.scrambled)");
            for (var i = 0; i < neitherParagraphs.length; i++) {
                scrambledAndUnscrambledParagraphs.neverScrambledParagraphs.push(neitherParagraphs[i]);
            }
            return scrambledAndUnscrambledParagraphs;
        }
        var currentHeadingIndex = $headings.index($heading);
        var $subsequentHeadings = $headings.slice(currentHeadingIndex + 1);
        var isSection = _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSection */ .Z.isSection(title);
        var isSubsection = _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSubsection */ .Z.isSubsection(title);
        var $nextSection = null;
        $subsequentHeadings.each(function (index, heading) {
            var $currentHeading = $(heading);
            var currentHeadingText = $currentHeading.text().trim();
            if (isSection) {
                if (_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSection */ .Z.isSection(currentHeadingText)) {
                    $nextSection = $currentHeading;
                    return false;
                }
            }
            else if (isSubsection) {
                if (_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSubsection */ .Z.isSubsection(currentHeadingText)
                    || _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSection */ .Z.isSection(currentHeadingText)) {
                    $nextSection = $currentHeading;
                    return false;
                }
            }
        });
        var startRefId = parseInt($heading.attr("refid"));
        var lastRefId = parseInt($nextSection != null && $nextSection.length > 0
            ? $nextSection.attr("refid")
            : $(".readable-text.scrambled:last-of-type, .readable-text.unscrambled:last-of-type").last().attr("refid"));
        if (!Number.isNaN(startRefId) && !Number.isNaN(lastRefId)) {
            for (var i = startRefId; i <= lastRefId; i++) {
                var paragraph = document.getElementById("".concat(i));
                var $paragraph = $(paragraph);
                if (!$paragraph.is(".readable-text")) {
                    continue;
                }
                if ($paragraph.is(".scrambled")) {
                    scrambledAndUnscrambledParagraphs.scrambledParagraphs.push(paragraph);
                }
                else if ($paragraph.is(".unscrambled")) {
                    scrambledAndUnscrambledParagraphs.unscrambledParagraphs.push(paragraph);
                }
                else if (!$paragraph.hasClass("scrambled") && !$paragraph.hasClass("unscrambled")) {
                    scrambledAndUnscrambledParagraphs.neverScrambledParagraphs.push(paragraph);
                }
            }
        }
        return scrambledAndUnscrambledParagraphs;
    };
    BookContentUtils.prototype.restoreOriginalHtml = function (htmlElement) {
        if (!htmlElement || !htmlElement.originalInnerHTML) {
            return;
        }
        var $htmlElement = $(htmlElement);
        $htmlElement.find(".highlighted-text").off();
        htmlElement.innerHTML = htmlElement.originalInnerHTML;
        $(document).trigger("originalReadableHtmlRestored", htmlElement);
    };
    BookContentUtils.prototype.getCodeMirrorSyntaxHighlightMode = function (book, sourceCode) {
        if (sourceCode === void 0) { sourceCode = ""; }
        if (!book) {
            return "";
        }
        var bookProgrammingLanguage = (book.programmingLanguage || "").toLowerCase();
        return bookProgrammingLanguage !== "n/a" ? bookProgrammingLanguage : "";
    };
    BookContentUtils.prototype.getTextFragmentDuration = function (textFragment) {
        if (!textFragment || !textFragment.cues || textFragment.cues.length == 0) {
            return 0;
        }
        var cues = textFragment.cues;
        return cues[cues.length - 1].endTime - cues[0].startTime;
    };
    BookContentUtils.prototype.extractFileNameNumber = function (filePath) {
        if (!filePath || !filePath.match) {
            return null;
        }
        var regEx = /([0-9]+)\.[a-zA-Z]+$/;
        var match = filePath.match(regEx);
        if (!match || match.length < 2) {
            return this.extractNumberFromStringFileNameNumber(filePath);
        }
        return parseInt(match[1]);
    };
    BookContentUtils.prototype.extractNumberFromStringFileNameNumber = function (filePath) {
        var regEx = /([a-zA-Z]+)\.[a-zA-Z]+$/;
        var match = filePath.match(regEx);
        if (!match || match.length < 2) {
            return null;
        }
        var string = match[1].trim().toLowerCase();
        switch (string) {
            case "one": return 1;
            case "two": return 2;
            case "three": return 3;
            case "four": return 4;
            case "five": return 5;
            case "six": return 6;
            case "seven": return 7;
            case "eight": return 8;
            case "nine": return 9;
        }
        return null;
    };
    BookContentUtils.prototype.hasBrowsables = function (element) {
        if (!element) {
            return false;
        }
        return element.browsables != null && element.browsables.length > 0;
    };
    BookContentUtils.prototype.getMostImportantBrowsable = function (browsables) {
        if (!browsables || browsables.length == 0) {
            return null;
        }
        if (browsables.length == 1) {
            return browsables[0];
        }
        var listingBrowsable = null, otherBrowsable = null;
        for (var i = 0; i < browsables.length; i++) {
            var browsable = browsables[i];
            if ($(browsable).is(".listing-container")) {
                listingBrowsable = browsable;
            }
            else {
                otherBrowsable = browsable;
            }
        }
        return listingBrowsable || otherBrowsable;
    };
    BookContentUtils.prototype.getMatchingBrowsable = function (browsables, text) {
        if (!browsables || browsables.length == null) {
            return null;
        }
        var browsable = null;
        for (var i = 0; i < browsables.length; i++) {
            browsable = browsables[i];
            var headingText = $(browsable).find("h5").text();
            if (headingText.indexOf(text) != -1) {
                return browsable;
            }
        }
        return browsable;
    };
    BookContentUtils.prototype.getNextCueForPlaying = function (element) {
        if (!element) {
            return null;
        }
        var startOver = false;
        var $element = $(element);
        if ($element.is(".fragment-played")) {
            startOver = true;
        }
        if (!startOver && element.lastPlayedCue) {
            return element.lastPlayedCue;
        }
        if (element.cues) {
            return element.cues[0];
        }
        return null;
    };
    BookContentUtils.prototype.getAllFocusableElements = function () {
        var $bookMarkupContainer = $("#book-markup-container");
        var focusableElements = [];
        $bookMarkupContainer.children().each(function (index, element) {
            //The title and the introduction summary are always shown!
            if (index == 0) {
                return;
            }
            if (element.className.indexOf("introduction-summary") != -1) {
                return;
            }
            var $element = $(element);
            if ($element.is(".callout-container, ul, ol")) {
                if ($element.is(".callout-container")) {
                    focusableElements.push(element);
                }
                $element.find(".readable-text").each(function (index, element) {
                    focusableElements.push(element);
                });
            }
            else {
                focusableElements.push(element);
            }
        });
        return focusableElements;
    };
    BookContentUtils.prototype.getTextFragmentElements = function () {
        return Array.prototype.slice.call(document.querySelectorAll(".readable-text, .browsable-container"));
    };
    BookContentUtils.prototype.getBookmarkableAndNotableItems = function () {
        var items = this.getTextFragmentElements();
        //const browsables = document.querySelectorAll(".browsable-container");;
        //the first element is always the title
        //which can be followed by a couple of list items
        //these items should be removed from the list
        for (var i = 1; i < items.length; i++) {
            if (items[i].nodeName === "LI") {
                items.splice(i, 1);
                i--;
            }
            else {
                break;
            }
        }
        //for(let i = 0; i < browsables.length; i++){ items.push(browsables[i]);}
        return items;
    };
    BookContentUtils.prototype.getTextElementPositionPointCenter = function ($element) {
        if (!$element || $element.length === 0) {
            return 0;
        }
        return $element.position().top + $element.height() / 2;
    };
    BookContentUtils.prototype.getTextElementPositionPointTop = function ($element) {
        if (!$element || $element.length === 0) {
            return 0;
        }
        var top = $element.position().top;
        if ($element.find("h1").length > 0) {
            top += _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getElementLineHeight */ .Z.getElementLineHeight($element) / 2;
        }
        if ($element.find("h2").length > 0) {
            top += _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getElementLineHeight */ .Z.getElementLineHeight($element) / 11;
        }
        if ($element.is(".collapsible-panel")) {
            var $buttonElement = $element.find(".button-collapsible-panel");
            top = $element.position().top + 1.5 * $buttonElement.height();
        }
        if ($element.is(".listing-line-group")) {
            top = $element.offset().top - $("#book-main-content-container").offset().top - _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getElementLineHeight */ .Z.getElementLineHeight($element);
        }
        var $closestNestedContainer = $element.closest(".introduction-summary");
        if ($closestNestedContainer.length > 0) {
            top += $closestNestedContainer.position().top + 16;
        }
        return top;
    };
    BookContentUtils.prototype.getEndOfElementTopPosition = function ($element) {
        var elementHeight = $element.height();
        var elementLineHeight = _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getElementLineHeight */ .Z.getElementLineHeight($element);
        var startOfElement = this.getTextElementPositionPointTop($element);
        var endOfElement = startOfElement + elementHeight;
        var targetEndPosition = endOfElement - 1.5 * elementLineHeight;
        if (elementHeight === elementLineHeight) {
            return startOfElement;
        }
        return targetEndPosition > startOfElement ? targetEndPosition : startOfElement + elementLineHeight / 2;
    };
    BookContentUtils.prototype.elementContainsCueball = function (htmlElement, text) {
        if (!htmlElement) {
            return false;
        }
        var textNodes = _DOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].getAllDescendantTextNodes */ .Z.getAllDescendantTextNodes(htmlElement);
        var textNodeTextRanges = _DOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].createTextNodeTextRanges */ .Z.createTextNodeTextRanges(textNodes);
        var queryStartIndex = textNodeTextRanges.value.indexOf(text);
        var queryEndIndex = queryStartIndex + text.length;
        if (queryStartIndex === -1) {
            //Query string not found, try to recover
            //(e.g maybe we've done a replacement to handle the display of html nodes)
            queryStartIndex = textNodeTextRanges.value.indexOf(text.replace("<", "&lt;").replace(">", "&gt;"));
            queryEndIndex = queryStartIndex + text.length;
            if (queryStartIndex === -1) {
                return false;
            }
        }
        var allRanges = _DOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].splitRanges */ .Z.splitRanges(textNodeTextRanges, queryStartIndex, queryEndIndex);
        var ranges = allRanges.matchingRanges;
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            var textNode = range.textNode;
            if (textNode && textNode.nextSibling) {
                //1.1* because the cueball can be right after, this counts to
                if (i != ranges.length - 1 || range.end <= 1.1 * queryEndIndex) {
                    var nextSibling = textNode.nextSibling;
                    while (nextSibling != null) {
                        if (nextSibling.nodeName == "IMG") {
                            return this.extractFileNameNumber(nextSibling.src);
                        }
                        //textNode with non-empty content - drop out
                        if (nextSibling.nodeName === "#text" && nextSibling.textContent.trim()) {
                            break;
                        }
                        nextSibling = nextSibling.nextSibling;
                    }
                }
            }
        }
        return false;
    };
    BookContentUtils.prototype.getOwnerSectionHeading = function ($subsectionHeading, $headings) {
        if ($subsectionHeading == null || $subsectionHeading.length == 0) {
            return null;
        }
        var currentTitle = $subsectionHeading.text().trim();
        if (!_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSubsection */ .Z.isSubsection(currentTitle)) {
            return null;
        }
        var currentSubsectionIndex = $headings.index($subsectionHeading);
        for (var i = currentSubsectionIndex - 1; i >= 0; i--) {
            var $currentHeader = $headings.eq(i);
            if (_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSection */ .Z.isSection($currentHeader.text().trim())) {
                return $currentHeader;
            }
        }
        return null;
    };
    BookContentUtils.prototype.getHeadings = function () {
        return this.getSecAndSubsecFragElements().filter(function (index, element) {
            var $element = $(element);
            var title = $element.text().trim();
            return $element.children("h1").length > 0 || _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isChapterOrAppendix */ .Z.isChapterOrAppendix(title) || _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSection */ .Z.isSection(title) || _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSubsection */ .Z.isSubsection(title);
        });
    };
    BookContentUtils.prototype.getSectionHeadings = function () {
        return this.getSecAndSubsecFragElements().filter(function (index, element) {
            var $element = $(element);
            var title = $element.text().trim();
            return _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_4__/* ["default"].isSection */ .Z.isSection(title);
        });
    };
    BookContentUtils.prototype.getSecAndSubsecFragElements = function () {
        return $(this.getTextFragmentElements()).filter(function (i, elem) {
            return ($(elem).children("h1, h2, h3, h4").length > 0);
        });
    };
    BookContentUtils.prototype.figureOutSectionOrSubsectionTitleFromRefId = function (refID) {
        var elementOfInterest = $(this.getSecAndSubsecFragElements()).filter(function (i, elem) {
            return parseInt($(elem).attr("refId")) < refID;
        }).last();
        if (/(([0-9]+\.?)+)/.test(elementOfInterest.children("h1, h2, h3, h4").first().text())) {
            return elementOfInterest.children("h1, h2, h3, h4").first().text();
        }
        else {
            return undefined;
        }
    };
    BookContentUtils.prototype.figureOutSectionOrSubsectionFromRefId = function (refID) {
        var elementOfInterest = $(this.getSecAndSubsecFragElements()).filter(function (i, elem) {
            return parseInt($(elem).attr("refId")) < refID;
        }).last();
        if (/(([0-9]+\.?)+)/.test(elementOfInterest.children("h1, h2, h3, h4").first().text())) {
            return elementOfInterest.children("h1, h2, h3, h4").first().text().match(/(([0-9]+\.?)+)/)[0];
        }
        else {
            return undefined;
        }
    };
    BookContentUtils.prototype.getClosestHeading = function ($paragraph, $headings) {
        var refId = parseInt($paragraph.attr("refid"));
        if (!refId || Number.isNaN(refId)) {
            if ($paragraph.is("ul, ol")) {
                refId = parseInt($paragraph.children().first().attr("refid"));
            }
            if (!refId || Number.isNaN(refId)) {
                return null;
            }
        }
        var $heading = null;
        $headings.each(function (index, currentHeading) {
            var $currentHeading = $(currentHeading);
            var currentRefId = parseInt($currentHeading.attr("refid"));
            if (currentRefId > refId) {
                return false;
            }
            $heading = $currentHeading;
        });
        return $heading;
    };
    BookContentUtils.prototype.expandListOfScrambledParagraphsIfNecessary = function (baseParagraphs) {
        var expandedList = [];
        for (var _i = 0, baseParagraphs_1 = baseParagraphs; _i < baseParagraphs_1.length; _i++) {
            var $paragraph = baseParagraphs_1[_i];
            var $parentList = $paragraph.closest("ul, ol");
            if ($parentList.length > 0) {
                var $listItems = $parentList.find("li.readable-text.scrambled");
                if (!this.isListWithLargeItems($parentList)) {
                    $listItems.each(function (index, listItem) {
                        expandedList.push($(listItem));
                    });
                }
            }
        }
        var map = {};
        var merged = [];
        for (var _a = 0, _b = __spreadArray(__spreadArray([], baseParagraphs, true), expandedList, true); _a < _b.length; _a++) {
            var $baseParagraph = _b[_a];
            var refId = $baseParagraph.attr("refid");
            if (!map[refId]) {
                map[refId] = true;
                merged.push($baseParagraph);
            }
        }
        merged.sort(function ($a, $b) {
            var aRefId = parseInt($a.attr("refid"));
            var bRefId = parseInt($b.attr("refid"));
            return aRefId - bRefId;
        });
        return merged;
    };
    BookContentUtils.prototype.isListWithLargeItems = function ($potentialList) {
        if ($potentialList == null || $potentialList.length == 0) {
            return false;
        }
        var $lineItems = $potentialList.find("li.readable-text");
        for (var i = 0; i < $lineItems.length; i++) {
            if (_ValueUtils__WEBPACK_IMPORTED_MODULE_3__/* .ValueUtils.getNumberOfWords */ .d.getNumberOfWords($lineItems.eq(i).text()) >= LARGE_LIST_ITEM_MIN_WORD_SIZE) {
                return true;
            }
        }
        return false;
    };
    return BookContentUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new BookContentUtils());


/***/ }),

/***/ 95417:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _models_Book__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91098);
/* harmony import */ var _models_BookElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87721);
/* harmony import */ var _models_NeighboringBookElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28672);
/* harmony import */ var _utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(93292);
/* harmony import */ var _BookContentUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52810);
/* harmony import */ var _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(98498);






var BookUtils = /** @class */ (function () {
    function BookUtils() {
        //Used to extract the whole book index: e.g. 8.4.2 Exporing closures would result with -> "8.4.2"
        this.numberedBookItemIndexRegExp = /(\d+\.?)+/;
        this.appendixIndexRegExp = /[A-Z]\.(\d+\.?)*/;
    }
    BookUtils.prototype.pretifyShortName = function (shortName) {
        if (!shortName) {
            return shortName;
        }
        return shortName.replace("-", " ");
    };
    BookUtils.prototype.convertToBookContent = function (bookObj, bookElementName, audioLocation, subtitlesLocation, content) {
        var book = this.convertToBook(bookObj);
        return {
            book: book,
            googleBotInfo: { isGoogleBot: false },
            bookElement: this.getCurrentBookElement(book, bookObj, bookElementName, audioLocation, subtitlesLocation, content),
            previousBookElement: this.getPreviousBookElement(bookObj, bookElementName),
            nextBookElement: this.getNextBookElement(bookObj, bookElementName),
            ip: "",
            trackingCookie: ""
        };
    };
    BookUtils.prototype.convertToBook = function (bookObj) {
        if (!bookObj) {
            return null;
        }
        var book = new _models_Book__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .Z(bookObj.id, bookObj.manningId, bookObj.title, bookObj.shortName, bookObj.description, bookObj.lastUpdateDate, bookObj.exercisesComingSoon, bookObj.programmingLanguage, true, bookObj.userOwnsAudio, "", "", bookObj.meap, bookObj.open, bookObj.latestMeapVersion || 0, bookObj.highResolutionCover);
        book.authors = bookObj.authors;
        book.subtitle = bookObj.subtitle;
        book.cleanTitle = _BookContentUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].cleanBookTitle */ .Z.cleanBookTitle(book.title);
        book.slug = bookObj.slug;
        book.openChapters = bookObj.openChapters || [];
        book.hasAudio = !!bookObj.hasAudio;
        book.hasTextAddendums = !!bookObj.hasTextAddendums;
        book.hasKnowledgeGraph = !!bookObj.hasKnowledgeGraph;
        book.hasWiki = !!bookObj.hasWiki;
        book.isKnowledgeGraphAccessible = !!bookObj.isKnowledgeGraphAccessible;
        book.hasExercises = !!bookObj.hasExercises;
        book.isReview = !!bookObj.isReview;
        book.userCanViewReviews = !!bookObj.userCanViewReviews;
        book.userIsReviewer = !!bookObj.userIsReviewer;
        book.userIsAuthor = !!bookObj.userIsAuthor;
        book.userIsEditor = !!bookObj.userIsEditor;
        book.userOwnsPBook = !!bookObj.userOwnsPBook;
        book.userCanDownloadBook = !!bookObj.userCanDownloadBook;
        book.sisterLicenseId = bookObj.sisterLicenseId;
        book.associatedLicenseId = bookObj.associatedLicenseId;
        book.categories == bookObj.categories || "";
        book.isbn = bookObj.isbn;
        book.customCss = bookObj.customCss;
        book.amazonReviewUrl = bookObj.amazonReviewUrl;
        book.listingCopyRegex = bookObj.listingCopyRegex;
        book.manuscriptOrigin = bookObj.manuscriptOrigin;
        book.wideScreenCoverBackground = bookObj.wideScreenCoverBackground;
        book.wideScreenCoverUrl = bookObj.wideScreenCoverUrl;
        book.useKlipseListings = bookObj.useKlipseListings;
        book.assistantId = bookObj.assistantId;
        book.annotationsCanBeSplit = bookObj.annotationsCanBeSplit;
        book.reviewTechnologyLabel = bookObj.reviewTechnologyLabel;
        book.cancelled = bookObj.cancelled;
        book.disableFreePreviewUnlocking = bookObj.disableFreePreviewUnlocking;
        book.showOnlyUnscrambledText = bookObj.showOnlyUnscrambledText;
        book.hasNewspaperLikePaywall = bookObj.hasNewspaperLikePaywall;
        book.hasVideo = bookObj.hasVideo;
        if (bookObj.offlineFileSizes != null) {
            book.offlineFileSizes = bookObj.offlineFileSizes;
        }
        if (bookObj.lastSignificantDate) {
            book.lastSignificantDate = new Date(bookObj.lastSignificantDate);
        }
        if (bookObj.publishedDate) {
            book.publishedDate = new Date(bookObj.publishedDate);
        }
        if (bookObj.expectedPublishDate) {
            book.expectedPublishDate = new Date(bookObj.expectedPublishDate);
        }
        if (bookObj.expectedEbookAvailabilityDate) {
            book.expectedEbookAvailabilityDate = new Date(bookObj.expectedEbookAvailabilityDate);
        }
        return book;
    };
    BookUtils.prototype.extractBookElementIndex = function (title) {
        var appendixResult = new RegExp(this.appendixIndexRegExp).exec(title);
        var indexResult = new RegExp(this.numberedBookItemIndexRegExp).exec(title);
        if (appendixResult && !indexResult) {
            return appendixResult[0];
        }
        if (indexResult) {
            return indexResult[0];
        }
        if (appendixResult) {
            return appendixResult[0];
        }
        return "";
    };
    BookUtils.prototype.extractSegmentedBookElementIndex = function (title) {
        var bookElementIndex = this.extractBookElementIndex(title);
        return bookElementIndex ? bookElementIndex.split(".").filter(function (it) { return it.trim(); }) : [];
    };
    BookUtils.prototype.compareBookItemIndexes = function (bookItemTitleA, bookItemTitleB) {
        var firstMatches = this.extractSegmentedBookElementIndex(bookItemTitleA);
        var secondMatches = this.extractSegmentedBookElementIndex(bookItemTitleB);
        var maxLength = Math.max(firstMatches.length, secondMatches.length);
        for (var i = 0; i < maxLength; i++) {
            var firstMatch = firstMatches[i];
            var secondMatch = secondMatches[i];
            //All previous are equal, e.g a: 1.2, b: 1.2.1 in that case "a" should come first 
            if (!firstMatch) {
                return -1;
            }
            //All previous are equal, e.g a: 1.2.1, b: 1.2 in that case "b" should come first
            if (!secondMatch) {
                return 1;
            }
            var firstMatchAsNumber = parseInt(firstMatch);
            var secondMatchAsNumber = parseInt(secondMatch);
            //first match is a letter, second match is a number, number should come first
            //e.g. 11.1.1 should come before A.1
            if (Number.isNaN(firstMatchAsNumber) && !Number.isNaN(secondMatchAsNumber)) {
                return 1;
            }
            else if (!Number.isNaN(firstMatchAsNumber) && Number.isNaN(secondMatchAsNumber)) { //reverse
                return -1;
            }
            else if (Number.isNaN(firstMatchAsNumber) && Number.isNaN(secondMatchAsNumber)) { //both are letters
                //Use original imputs - letters
                if (firstMatch === secondMatch) {
                    continue;
                }
                return firstMatch < secondMatch ? -1 : 1;
            }
            else { //both are numbers
                if (firstMatchAsNumber === secondMatchAsNumber) {
                    continue;
                }
                return firstMatchAsNumber < secondMatchAsNumber ? -1 : 1;
            }
        }
        return 0;
    };
    BookUtils.prototype.cleanBookElementType = function (title) {
        if (!title) {
            return title;
        }
        var index = this.extractBookElementIndex(title);
        return title.trim().replace(/^(Chapter|Part|Section|Appendix)/, "").replace(index, "").trim();
    };
    BookUtils.prototype.getCurrentBookElement = function (book, bookObj, bookElementName, audioLocation, subtitlesLocation, content) {
        if (!bookObj || !bookObj.bookElements || bookObj.bookElements.length === 0) {
            return;
        }
        var bookElement = bookObj.bookElements.find(function (bookElement) { return bookElement.shortName === bookElementName; });
        if (!bookElement) {
            return null;
        }
        var newBookElement = new _models_BookElement__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z(book, bookElement.id, bookElement.title, bookElement.shortName, bookElement.userOwnsBookElement, bookElement.ordinal, bookElement.wordCount || 0, bookElement.freeWordCount || 0, audioLocation, subtitlesLocation, true, bookElement.meapVersion, bookElement.location, bookElement.isBookOverview, bookElement.isFrontMatter);
        newBookElement.content = content;
        newBookElement.reviewVersion = bookElement.reviewVersion;
        newBookElement.isRollingReview = bookElement.isRollingReview;
        newBookElement.isFeedbackDisabled = bookElement.isFeedbackDisabled;
        newBookElement.isFinalReview = bookElement.isFinalReview;
        newBookElement.reviewBookTitle = bookElement.reviewBookTitle;
        newBookElement.isDigest = bookElement.isDigest;
        newBookElement.hasSummaries = bookElement.hasSummaries;
        newBookElement.paywallState = bookElement.paywallState;
        if (newBookElement.dateCreated) {
            bookElement.dateCreated = new Date(bookElement.dateCreated);
        }
        if (newBookElement.lastUpdated) {
            bookElement.lastUpdated = new Date(bookElement.lastUpdated);
        }
        if (newBookElement.reviewVersion > 0) {
            book.userIsReviewer = true;
        }
        newBookElement.pdf = bookElement.pdf;
        return newBookElement;
    };
    BookUtils.prototype.getPreviousBookElement = function (bookObj, bookElementName) {
        if (!bookObj || !bookObj.bookElements || bookObj.bookElements.length === 0) {
            return;
        }
        var currentBookElementIndex = this.getCurrentBookElementIndex(bookObj.bookElements, bookElementName);
        if (currentBookElementIndex === -1) {
            return null;
        }
        var previousBookElement = bookObj.bookElements[currentBookElementIndex - 1];
        if (!previousBookElement) {
            return null;
        }
        return new _models_NeighboringBookElement__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(previousBookElement.shortName, previousBookElement.title, previousBookElement.link || _utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(bookObj.slug, previousBookElement.shortName, bookObj.meapVersion, bookObj.reviewVersion), previousBookElement.introItems);
    };
    BookUtils.prototype.getNextBookElement = function (bookObj, bookElementName) {
        if (!bookObj || !bookObj.bookElements || bookObj.bookElements.length === 0) {
            return;
        }
        var currentBookElementIndex = this.getCurrentBookElementIndex(bookObj.bookElements, bookElementName);
        if (currentBookElementIndex === -1) {
            return null;
        }
        var nextBookElement = bookObj.bookElements[currentBookElementIndex + 1];
        if (!nextBookElement) {
            return null;
        }
        return new _models_NeighboringBookElement__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z(nextBookElement.shortName, nextBookElement.title, _utils_WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getBookElementUrl */ .Z.getBookElementUrl(bookObj.slug, nextBookElement.shortName, bookObj.meapVersion, bookObj.reviewVersion), nextBookElement.introItems);
    };
    BookUtils.prototype.getCurrentBookElementIndex = function (bookElements, currentBookElementName) {
        if (!bookElements || bookElements.length === 0) {
            return -1;
        }
        for (var i = 0; i < bookElements.length; i++) {
            if (bookElements[i].shortName === currentBookElementName) {
                return i;
            }
        }
        return -1;
    };
    BookUtils.prototype.isFreePreviewAtBeginningAndNotStarted = function (book) {
        return book != null
            && book.previewDuration == 0
            && book.remainingPreviewDuration > 0;
    };
    BookUtils.prototype.isFreePreviewAvailable = function (book) {
        return book != null
            && book.previewDuration > 0
            && book.remainingPreviewDuration > 5;
    };
    BookUtils.prototype.isFreePreviewAvailableAndContinuing = function (book) {
        return book != null
            && book.previewDuration > 0
            && book.remainingPreviewDuration > 0
            && book.shortName == _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_5__/* .GlobalStateInfo.lastFreePreviewStartedBookShortName */ .UU.lastFreePreviewStartedBookShortName;
    };
    BookUtils.prototype.canFreePreviewBePaused = function (book, isLoggedIn) {
        if (book == null || book.isOpen) {
            return false;
        }
        if (!isLoggedIn) {
            return false;
        }
        return book.remainingPreviewDuration > 0;
    };
    BookUtils.prototype.hasFreePreviewExpired = function (book) {
        return book != null && (!book.remainingPreviewDuration || book.remainingPreviewDuration < 5);
    };
    return BookUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new BookUtils());


/***/ }),

/***/ 69619:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _BookUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(95417);
/* harmony import */ var _BookContentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52810);
/* harmony import */ var _DeviceUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87876);
/* harmony import */ var _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10572);
/* harmony import */ var _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(98498);
/* harmony import */ var _services_settingsService_SettingsProvider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(43150);
/* harmony import */ var _IntesectionUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(38425);
/* harmony import */ var _DOMUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(23934);








var $window = $(window);
var $document = $(document);
var BookViewDOMUtils = /** @class */ (function () {
    function BookViewDOMUtils() {
    }
    BookViewDOMUtils.prototype.getBrowsableThroughLabel = function (label) {
        var $browsables = $(".browsable-container");
        for (var i = 0; i < $browsables.length; i++) {
            var $browsable = $browsables.eq(i);
            if ($browsable.find("h5").text().trim().startsWith(label)) {
                return $browsable;
            }
        }
        return null;
    };
    BookViewDOMUtils.prototype.changeElementType = function ($element, newType) {
        var attrs = {};
        $.each($element[0].attributes, function (idx, attr) {
            attrs[attr.nodeName] = attr.nodeValue;
        });
        $element.replaceWith(function () {
            return $("<" + newType + "/>", attrs).append($(this).contents());
        });
    };
    BookViewDOMUtils.prototype.splitScrambledTextIntoWords = function () {
        var scrambledParagraphs = document.querySelectorAll(".scrambled p:not(.splitted), li.scrambled:not(.splitted)");
        for (var i = 0; i < scrambledParagraphs.length; i++) {
            _DOMUtils__WEBPACK_IMPORTED_MODULE_7__/* ["default"].wrapDirectWordsIntoSpans */ .Z.wrapDirectWordsIntoSpans(scrambledParagraphs[i]);
            scrambledParagraphs[i].classList.add("splitted");
        }
    };
    BookViewDOMUtils.prototype.shouldTocAutomaticallyOpen = function (bookElement, bookElementShortName) {
        if (bookElement && bookElement.pdf) {
            return false;
        }
        if (bookElement && bookElement.reviewVersion) {
            return false;
        }
        if (bookElement && bookElement.book && bookElement.book.isFreeEbook) {
            return false;
        }
        if (document.location.href.indexOf("discussion") >= 0) {
            return false;
        }
        if ($(document.body).is(".page-is-showing-modal")) {
            return false;
        }
        return bookElement && (bookElement.isBookOverview || _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_4__/* .GlobalStateInfo.isFirstTimeBookVisit */ .UU.isFirstTimeBookVisit())
            && _DeviceUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].isExtraLargeScreenSize */ .Z.isExtraLargeScreenSize() && (!_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isSpecialPathPartInsteadOfBookElement */ .Z.isSpecialPathPartInsteadOfBookElement(bookElementShortName))
            && !$(document.body).hasClass("has-text-slide-menu-shown");
    };
    BookViewDOMUtils.prototype.showNightMode = function () {
        var nightMode = _services_settingsService_SettingsProvider__WEBPACK_IMPORTED_MODULE_5__/* ["default"].get */ .Z.get("night-mode");
        $(document.body).toggleClass("night-mode", nightMode);
        $(document.documentElement).toggleClass("night-mode", nightMode);
    };
    BookViewDOMUtils.prototype.isDocumentVisible = function () {
        return document.visibilityState && document.visibilityState === "visible";
    };
    BookViewDOMUtils.prototype.getCurrentMainContentTranslateX = function () {
        var $mainContentContainer = $("#book-main-content-container");
        if ($mainContentContainer.length == 0) {
            return 0;
        }
        return this.getComputedTranslateX($mainContentContainer.get(0));
    };
    BookViewDOMUtils.prototype.translateMainContent = function (xAmount) {
        $("#book-main-content-container").css({ transform: "translateX(".concat(xAmount || 0, "px)") });
    };
    BookViewDOMUtils.prototype.loadPlaceholderImages = function () {
        var $placeholderImages = $("img[image-src]");
        $placeholderImages.slice(0, 5).each(function (_, element) {
            var $element = $(element);
            $element.attr("src", $element.attr("image-src"));
        });
        $placeholderImages.slice(5, $placeholderImages.length).each(function (_, element) {
            _IntesectionUtils__WEBPACK_IMPORTED_MODULE_6__/* .IntersectionUtils.inViewport */ .z.inViewport(element, function () {
                var $element = $(element);
                $element.attr("src", $element.attr("image-src"));
            });
        });
        var $onloadImages = $("img[onload-image-src]");
        $onloadImages.each(function (index, it) {
            var url = $(it).attr("onload-image-src");
            var image = new Image();
            image.onload = function () {
                $(it).attr("src", url);
            };
            image.src = url;
        });
    };
    BookViewDOMUtils.prototype.getAllSectionParagraphs = function ($paragraph) {
        var paragraphs = [];
        var refId = +$paragraph.attr("refid");
        if (Number.isNaN(refId)) {
            return paragraphs;
        }
        for (var i = refId; i >= 0; i--) {
            var paragraph = document.querySelector("[refid='".concat(i, "']"));
            if (paragraph != null) {
                paragraphs.push(paragraph);
                if (paragraph.querySelector("h1, h2, h3") != null) {
                    break;
                }
            }
        }
        var $lastChild = $("#book-markup-container").children().last();
        if (!$lastChild.is(".readable-text")) {
            $lastChild = $lastChild.children().last();
        }
        var lastParagraphId = +$lastChild.attr("refid");
        for (var i = refId + 1; i <= lastParagraphId; i++) {
            var paragraph = document.querySelector("[refid='".concat(i, "']"));
            if (paragraph == null || paragraph.querySelector("h1, h2, h3") != null) {
                break;
            }
            paragraphs.push(paragraph);
        }
        return paragraphs;
    };
    BookViewDOMUtils.prototype.getFigureHeading = function (figureInstruction) {
        if (figureInstruction === void 0) { figureInstruction = ""; }
        var figureIdentifier = figureInstruction.indexOf("figure--") >= 0
            ? figureInstruction.substring("figure--".length)
            : figureInstruction.substring("figure-".length);
        figureIdentifier = figureIdentifier.replace(/\-/g, ".");
        var $figures = $(".figure-container");
        for (var i = 0; i < $figures.length; i++) {
            var $figure = $figures.eq(i);
            if ($figure.find("h5").text().startsWith("Figure ".concat(figureIdentifier))) {
                return $figures[i];
            }
        }
        return null;
    };
    BookViewDOMUtils.prototype.getTableHeading = function (figureInstruction) {
        if (figureInstruction === void 0) { figureInstruction = ""; }
        var figureIdentifier = figureInstruction.indexOf("table--") >= 0
            ? figureInstruction.substring("table--".length)
            : figureInstruction.substring("table-".length);
        figureIdentifier = figureIdentifier.replace(/\-/g, ".");
        var $figures = $(".table-container");
        for (var i = 0; i < $figures.length; i++) {
            var $figure = $figures.eq(i);
            if ($figure.find("h5").text().startsWith("Table ".concat(figureIdentifier))) {
                return $figures[i];
            }
        }
        return null;
    };
    BookViewDOMUtils.prototype.getListingHeading = function (figureInstruction) {
        if (figureInstruction === void 0) { figureInstruction = ""; }
        var figureIdentifier = figureInstruction.indexOf("listing--") >= 0
            ? figureInstruction.substring("listing--".length)
            : figureInstruction.substring("listing-".length);
        figureIdentifier = figureIdentifier.replace(/\-/g, ".");
        var $figures = $(".listing-container");
        for (var i = 0; i < $figures.length; i++) {
            var $figure = $figures.eq(i);
            if ($figure.find("h5").text().startsWith("Listing ".concat(figureIdentifier))) {
                return $figures[i];
            }
        }
        return null;
    };
    BookViewDOMUtils.prototype.getSubSectionHeading = function (instruction) {
        if (instruction === void 0) { instruction = ""; }
        var identifier = instruction.substring("subsection-".length);
        try {
            if (/^subsection-p[0-9]+$/.test(instruction)) {
                identifier = instruction.replace("subsection-p", "");
                var heading = this.getFirstPreviousSubSectionTitle(identifier);
                if (heading != null) {
                    return heading;
                }
            }
        }
        catch (e) {
            console.log(e);
        }
    };
    BookViewDOMUtils.prototype.getSectionHeading = function (instruction) {
        if (instruction === void 0) { instruction = ""; }
        var identifier = instruction.substring("section-".length);
        try {
            if (/^section-p[0-9]+$/.test(instruction)) {
                identifier = instruction.replace("section-p", "");
                var heading = this.getFirstPreviousSectionTitle(identifier);
                if (heading != null) {
                    return heading;
                }
            }
        }
        catch (e) {
            console.log(e);
        }
        identifier = identifier.replace(/\-/g, ".");
        return this.getSectionTitle(identifier);
    };
    BookViewDOMUtils.prototype.getFirstPreviousSubSectionTitle = function (refId) {
        var headings = Array.from(document.querySelectorAll("#book-markup-container .readable-text h1, #book-markup-container .readable-text h2, #book-markup-container .readable-text h3, #book-markup-container .readable-text h4, #book-markup-container .readable-text h5"));
        for (var i = headings.length - 1; i >= 0; i--) {
            var headings_1 = Array.from(document.querySelectorAll("#book-markup-container .readable-text h1, #book-markup-container .readable-text h2, #book-markup-container .readable-text h3, #book-markup-container .readable-text h4, #book-markup-container .readable-text h5"));
            for (var i_1 = headings_1.length - 1; i_1 >= 0; i_1--) {
                var $heading = $(headings_1[i_1]);
                var $readableText = $heading.closest(".readable-text");
                var headingRefId = +$readableText.attr("refid");
                if (headingRefId > +refId) {
                    continue;
                }
                if (_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isSection */ .Z.isSection($heading.text())
                    || _TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isSubsection */ .Z.isSubsection($heading.text())) {
                    return headings_1[i_1];
                }
            }
        }
    };
    BookViewDOMUtils.prototype.getFirstPreviousSectionTitle = function (refId) {
        var headings = Array.from(document.querySelectorAll("#book-markup-container .readable-text h1, #book-markup-container .readable-text h2, #book-markup-container .readable-text h3, #book-markup-container .readable-text h4, #book-markup-container .readable-text h5"));
        for (var i = headings.length - 1; i >= 0; i--) {
            var $heading = $(headings[i]);
            var $readableText = $heading.closest(".readable-text");
            var headingRefId = +$readableText.attr("refid");
            if (headingRefId > +refId) {
                continue;
            }
            if (_TitleNumberingExtractor__WEBPACK_IMPORTED_MODULE_3__/* ["default"].isSection */ .Z.isSection($heading.text())) {
                return headings[i];
            }
        }
    };
    BookViewDOMUtils.prototype.getSectionTitle = function (sectionIdentifier) {
        var headings = document.querySelectorAll("#book-markup-container h1, #book-markup-container h2, #book-markup-container h3, #book-markup-container h4, #book-markup-container h5");
        var titles = [];
        for (var i = 0; i < headings.length; i++) {
            if (i === 0) {
                continue;
            } // skip book element title
            var heading = headings[i];
            var headingText = heading.textContent.trim();
            if (headingText.startsWith("Table")
                || headingText.startsWith("Figure")
                || headingText.startsWith("Listing")) {
                continue;
            }
            var $heading = $(heading);
            if ($heading.is(".intro-header") || $heading.closest(".callout-container").length) {
                continue;
            }
            titles.push(heading);
        }
        for (var i = 0; i < titles.length; i++) {
            var heading = titles[i];
            var headingText = heading.textContent.trim();
            var headingIndex = _BookUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].extractBookElementIndex */ .Z.extractBookElementIndex(headingText);
            if (headingIndex === sectionIdentifier) {
                return heading;
            }
            else if (headingIndex === sectionIdentifier + ".") {
                return heading;
            }
        }
        return this.fallbackForGetSectionTitle(titles, sectionIdentifier);
    };
    BookViewDOMUtils.prototype.fallbackForGetSectionTitle = function (headings, sectionIdentifier) {
        if (!headings || headings.length === 0) {
            return null;
        }
        var segmentedSectionIndex = _BookUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].extractSegmentedBookElementIndex */ .Z.extractSegmentedBookElementIndex(sectionIdentifier);
        var isAppendixSection = !!sectionIdentifier.match(/^[A-Z]/i);
        if (!isAppendixSection) {
            segmentedSectionIndex.shift();
        }
        var firstLevelHeadingType = headings[0].nodeName;
        var tree = [];
        headings.forEach(function (heading) {
            if (heading.nodeName === firstLevelHeadingType) {
                tree.push({ heading: heading, children: [] });
            }
            else {
                if (tree[tree.length - 1]) {
                    tree[tree.length - 1].children.push(heading);
                }
            }
        });
        if (segmentedSectionIndex.length === 0) {
            return null;
        }
        else if (segmentedSectionIndex.length === 1) {
            var index = +segmentedSectionIndex[0] - 1;
            return tree[index] ? tree[index].heading : null;
        }
        else {
            var firstLevelIndex = +segmentedSectionIndex[0] - 1;
            if (tree[firstLevelIndex]) {
                var secondLevelIndex = +segmentedSectionIndex[1] - 1;
                return tree[firstLevelIndex].children[secondLevelIndex]
                    ? tree[firstLevelIndex].children[secondLevelIndex]
                    : tree[firstLevelIndex].heading;
            }
        }
        return null;
    };
    BookViewDOMUtils.prototype.closeMenuIfTakesTooMuchSpace = function ($menu) {
        if (!$menu || $menu.length === 0) {
            return;
        }
        try {
            var $mainContentContainer = $("#book-main-content-container");
            if ($mainContentContainer.length === 0) {
                return;
            }
            var menuOffset = $menu.offset();
            var mainContentOffset = $mainContentContainer.offset();
            var menuPoint = {
                start: menuOffset.left,
                end: menuOffset.left + $menu.width()
            };
            var contentPoint = {
                start: mainContentOffset.left,
                end: mainContentOffset.left + $mainContentContainer.width()
            };
            if (menuPoint.start <= contentPoint.start) {
                if (menuPoint.end <= contentPoint.start) {
                    return;
                }
                var overlapp = Math.abs(menuPoint.end - contentPoint.start) / $mainContentContainer.width();
                if (overlapp <= 0.3) {
                    return;
                }
            }
            else {
                if (menuPoint.start >= contentPoint.end) {
                    return;
                }
                var overlapp = Math.abs(contentPoint.end - menuPoint.start) / $mainContentContainer.width();
                if (overlapp <= 0.3) {
                    return;
                }
            }
            $document.trigger("slideMenuCloseRequested");
        }
        catch (e) {
            console.log(e);
        }
    };
    BookViewDOMUtils.prototype.hideScrollOnBody = function () {
        $(document.body).css({ overflow: "hidden" });
    };
    BookViewDOMUtils.prototype.showScrollOnBody = function () {
        $(document.body).css({ overflow: "auto" });
    };
    BookViewDOMUtils.prototype.getTopNavBarHeight = function (ignoreHeaderNotifier) {
        if (ignoreHeaderNotifier === void 0) { ignoreHeaderNotifier = false; }
        var $header = $("#header");
        var topBarTranslateY = $header.length > 0 ? this.getComputedTranslateY($header.get(0)) : 0;
        if (topBarTranslateY < 0) {
            topBarTranslateY = 0;
        }
        var height = $header.height() - topBarTranslateY;
        if (ignoreHeaderNotifier) {
            height -= $("#header-notification-container").height();
            height -= $("#header-site-wide-promo-container").height();
        }
        return Math.max(height, 0);
    };
    BookViewDOMUtils.prototype.getFooterHeight = function () {
        return $("#footer").height();
    };
    BookViewDOMUtils.prototype.getNavbarHeightInPx = function () {
        var topNavbarHeight = this.getTopNavBarHeight();
        return "".concat(topNavbarHeight - 1, "px");
    };
    BookViewDOMUtils.prototype.isHeadingVisible = function ($element, scrollTop) {
        if ($element == null || $element.length == 0) {
            return false;
        }
        return ($element.offset().top - 10) < scrollTop;
    };
    BookViewDOMUtils.prototype.isElementVisible = function (element) {
        if (!element) {
            return false;
        }
        var rect = element.getBoundingClientRect();
        var $window = $(window);
        return rect.top >= this.getTopNavBarHeight() && rect.left >= 0
            && rect.bottom <= ($window.height() - 100)
            && rect.right <= $window.width();
    };
    BookViewDOMUtils.prototype.isElementVisibleEvenALittle = function (element, ignoreHorizontal) {
        if (ignoreHorizontal === void 0) { ignoreHorizontal = false; }
        if (element == null) {
            return false;
        }
        var rect = element.getBoundingClientRect();
        var elementHeight = rect.height;
        var $window = $(window);
        var isVisibleVertical = rect.top + 0.82 * elementHeight >= this.getTopNavBarHeight()
            && rect.bottom <= $window.height() + 0.7 * elementHeight;
        var isVisibleHorizontal = rect.left >= 0 && rect.right <= $window.width();
        var isVisible = ignoreHorizontal ? isVisibleVertical : (isVisibleVertical && isVisibleHorizontal);
        return isVisible;
    };
    BookViewDOMUtils.prototype.canBothElementsFitIntoScreen = function (element1, element2) {
        var $element1 = $(element1);
        var $element2 = $(element2);
        var element1Start = $element1.offset().top;
        var element2Start = $element2.offset().top;
        var element1End = element1Start + $element1.height();
        var element2End = element2Start + $element2.height();
        var top = Math.min(element1Start, element2Start);
        var bottom = Math.max(element1End, element2End);
        return (bottom - top) < ($window.height() - $("#footer").height() - this.getTopNavBarHeight());
    };
    BookViewDOMUtils.prototype.areElementsVisible = function (elements) {
        for (var i = 0; i < elements.length; i++) {
            if (!this.isElementVisible(elements[i])) {
                return false;
            }
        }
        return true;
    };
    BookViewDOMUtils.prototype.getElementLineHeight = function ($element) {
        return parseFloat($element.css("line-height"));
    };
    BookViewDOMUtils.prototype.getClosestToOffset = function ($elements, offset) {
        var element = null, x = offset.left, y = offset.top, distance, minDistance;
        $elements.each(function () {
            var $this = $(this);
            var elementOffset = $this.offset();
            var elementRectangle = {
                left: elementOffset.left,
                top: elementOffset.top,
                right: elementOffset.left + $this.width(),
                bottom: elementOffset.top + $this.height()
            };
            if ((x >= elementRectangle.left) && (x <= elementRectangle.right) && (y >= elementRectangle.top) && (y <= elementRectangle.bottom)) {
                element = $(this);
                return false;
            }
            var offsets = [
                { x: elementRectangle.left, y: elementRectangle.top },
                { x: elementRectangle.right, y: elementRectangle.top },
                { x: elementRectangle.left, y: elementRectangle.bottom },
                { x: elementRectangle.right, y: elementRectangle.bottom }
            ];
            for (var _i = 0, offsets_1 = offsets; _i < offsets_1.length; _i++) {
                var currentOffset = offsets_1[_i];
                var dx = currentOffset.x - x;
                var dy = currentOffset.y - y;
                distance = Math.sqrt((dx * dx) + (dy * dy));
                if (minDistance === undefined || distance < minDistance) {
                    minDistance = distance;
                    element = $(this);
                }
            }
        });
        return element;
    };
    BookViewDOMUtils.prototype.getComputedTranslateY = function (obj) {
        if (obj == null) {
            return 0;
        }
        var style = getComputedStyle(obj);
        var transform = style.transform || style.webkitTransform || style.mozTransform;
        var mat = transform.match(/^matrix3d\((.+)\)$/);
        if (mat) {
            return parseFloat(mat[1].split(', ')[13]);
        }
        mat = transform.match(/^matrix\((.+)\)$/);
        if (mat) {
            return parseFloat(mat[1].split(', ')[5]);
        }
        var styleString = $(obj).attr("style");
        if (styleString == null) {
            return 0;
        }
        var searchString = "translateY(";
        var index = styleString.indexOf(searchString);
        if (index == -1) {
            return 0;
        }
        return parseFloat(styleString.substring(index + searchString.length));
    };
    BookViewDOMUtils.prototype.getComputedTranslateX = function (obj) {
        if (!obj) {
            return 0;
        }
        var styleString = $(obj).attr("style");
        if (!styleString) {
            return 0;
        }
        var searchString = "translateX(";
        var index = styleString.indexOf(searchString);
        if (index == -1) {
            return 0;
        }
        var result = parseFloat(styleString.substring(index + searchString.length));
        return isNaN(result) ? 0 : result;
    };
    BookViewDOMUtils.prototype.getClosestScrambledParagraph = function (element) {
        if (element == null) {
            return;
        }
        var $element = $(element);
        if ($element.is(".scrambled")) {
            return element;
        }
        if (!$element.is(".readable-text") && !$element.is(".browsable-container")) {
            $element = $element.closest(".readable-text, .browsable-container");
            if ($element.length == 0) {
                return null;
            }
        }
        var refId = parseInt($element.attr("refid"));
        if (Number.isNaN(refId)) {
            return null;
        }
        for (var i = refId + 1; i < refId + 20; i++) {
            var currentElement = document.querySelector(".readable-text.scrambled[refid='".concat(i, "']"));
            if (currentElement != null) {
                return currentElement;
            }
        }
        return null;
    };
    BookViewDOMUtils.prototype.getVisibleParagraphs = function (takeOnlyReadableText) {
        if (takeOnlyReadableText === void 0) { takeOnlyReadableText = false; }
        var visibleParagraphs = [];
        var windowScroll = $window.scrollTop();
        var scrollTop = windowScroll + this.getTopNavBarHeight();
        var $lastHeader = this.getLastHeader(scrollTop);
        var refId = parseInt($lastHeader.attr("refid"));
        for (var i = refId; i >= Math.max(refId - 30, 0) && refId >= 0; i--) {
            var element = document.getElementById("".concat(i));
            if (element == null || (takeOnlyReadableText && !element.classList.contains("readable-text"))) {
                continue;
            }
            if (this.isElementVisibleEvenALittle(element, true)) {
                visibleParagraphs.push(element);
            }
            else {
                break;
            }
        }
        for (var i = refId + 1; i < refId + 250; i++) {
            var element = document.getElementById("".concat(i));
            if (element == null || (takeOnlyReadableText && !element.classList.contains("readable-text"))) {
                continue;
            }
            if (this.isElementVisibleEvenALittle(element, true)) {
                visibleParagraphs.push(element);
            }
        }
        return visibleParagraphs;
    };
    BookViewDOMUtils.prototype.getLastHeader = function (scrollTop) {
        var _this = this;
        var $headingElements = _BookContentUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getHeadings */ .Z.getHeadings();
        var $heading = $headingElements.filter(function (i, element) { return _this.isHeadingVisible($(element), scrollTop); }).last();
        if ($heading.length == 0) {
            return $headingElements.first();
        }
        return $heading;
    };
    BookViewDOMUtils.prototype.hasScrambledParagraphs = function () {
        return document.querySelector("#book-markup-container > .readable-text.scrambled") != null;
    };
    BookViewDOMUtils.prototype.groupParagraphsByScreenSize = function () {
        var result = {};
        var refIds = [];
        $(".readable-text").each(function (index, element) {
            var refId = element.getAttribute("refid");
            if (refId) {
                refIds.push(refId);
            }
        });
        var paragraphPositionMap = {};
        for (var _i = 0, refIds_1 = refIds; _i < refIds_1.length; _i++) {
            var refId = refIds_1[_i];
            paragraphPositionMap[refId] = document.getElementById(refId).offsetTop;
            result[refId] = {};
        }
        var pageHeight = $(window).height() - this.getTopNavBarHeight() - this.getFooterHeight();
        for (var _a = 0, refIds_2 = refIds; _a < refIds_2.length; _a++) {
            var refId = refIds_2[_a];
            var refIdNumber = +refId;
            var referentHeight = paragraphPositionMap[refId];
            for (var i = refIdNumber - 1; i >= 0 && i > refIdNumber - 10; i--) {
                if (!paragraphPositionMap[i] === undefined) {
                    break;
                }
                if (Math.abs(paragraphPositionMap[i] - referentHeight) < pageHeight) {
                    result[refId][i] = true;
                }
            }
            for (var i = refIdNumber + 1; i < refIdNumber + 10; i++) {
                if (!paragraphPositionMap[i] === undefined) {
                    break;
                }
                if (Math.abs(paragraphPositionMap[i] - referentHeight) < pageHeight) {
                    result[refId][i] = true;
                }
            }
        }
        return result;
    };
    return BookViewDOMUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new BookViewDOMUtils());


/***/ }),

/***/ 23934:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);

var $document = $(document);
var isIOS = false;
_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].loadDeviceInfo */ .Z.loadDeviceInfo().then(function (deviceInfo) {
    isIOS = deviceInfo.isIOS;
});
var DOMUtils = /** @class */ (function () {
    function DOMUtils() {
        var _this = this;
        this.isCloseModalDisabled = false;
        $document.on("keyup", function (e) {
            if (e.keyCode == 27) {
                _this.hideFoundationModal($(".reveal-modal.shown"));
            }
        });
        $document.on("click touchstart", ".close-reveal-modal, .close-reveal-modal-button, .homepage-link", function (e) {
            _this.hideFoundationModal($(e.target).closest(".reveal-modal"));
        });
        $document.on("mousedown touchstart", function (e) {
            var $target = $(e.target);
            //The click has happend within a modal - ignore it
            if ($target.closest(".reveal-modal").length) {
                return;
            }
            //The click has happend outside of a modal, close any opened modals
            var $openModal = $(".reveal-modal.shown");
            if ($openModal.length) {
                if ($openModal.is("#simple-signup-modal")) {
                    return;
                }
                _this.hideFoundationModal($openModal);
            }
        });
        this.hideTooltip = this.hideTooltip.bind(this);
        $(document).on("mouseenter", "[data-tooltip]", function (e) {
            if (_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isTouchDevice */ .Z.isTouchDevice()) {
                return;
            }
            var $currentTarget = $(e.currentTarget);
            if ($currentTarget.find(".header-icon.selected").length) {
                return;
            }
            clearTimeout(_this.tooltipTimer);
            _this.tooltipTimer = setTimeout(function () {
                var $currentTarget = $(e.currentTarget);
                if ($currentTarget.find(".header-icon.selected").length) {
                    return;
                }
                if (_this.isHover($currentTarget)) {
                    _this.showTooltip($currentTarget);
                }
            }, 500);
        });
    }
    DOMUtils.prototype.wrapDirectWordsIntoSpans = function (element) {
        if (element == null) {
            return;
        }
        for (var i = 0; i < element.childNodes.length; i++) {
            var childNode = element.childNodes[i];
            if (childNode.nodeType == 3) {
                var words = childNode.textContent.split(" ");
                var nodes = [];
                for (var j = 0; j < words.length; j++) {
                    var word = words[j];
                    var node = document.createElement("span");
                    node.textContent = word;
                    nodes.push(node);
                    if (j < words.length - 1) {
                        var emptyNode = document.createElement("span");
                        emptyNode.textContent = " ";
                        nodes.push(emptyNode);
                    }
                }
                element.replaceChild(nodes[nodes.length - 1], childNode);
                var lastNode = nodes[nodes.length - 1];
                for (var j = nodes.length - 2; j >= 0; j--) {
                    element.insertBefore(nodes[j], lastNode);
                    lastNode = nodes[j];
                }
            }
        }
    };
    DOMUtils.prototype.getAssociatedTextFragment = function (hash, ordinal) {
        var hashElements = document.querySelectorAll("[data-hash='".concat(hash, "']"));
        if (hashElements.length == 0) {
            return document.querySelector("[refid='".concat(ordinal, "']"));
        }
        else if (hashElements.length == 1) {
            return hashElements[0];
        }
        else {
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                if (element.getAttribute("refid") == ordinal) {
                    return element;
                }
            }
            return hashElements[0];
        }
    };
    DOMUtils.prototype.canHaveScrollBar = function () {
        var _this = this;
        if (this.canHaveScrollBarPromise) {
            return this.canHaveScrollBarPromise;
        }
        return this.canHaveScrollBarPromise = new Promise(function (resolve, reject) {
            setTimeout(function () {
                resolve(_this.getScrollbarWidth() > 0);
            }, 16);
        });
    };
    DOMUtils.prototype.getScrollbarWidth = function () {
        // Creating invisible container
        var outer = document.createElement('div');
        outer.style.visibility = 'hidden';
        outer.style.overflow = 'scroll'; // forcing scrollbar to appear
        outer.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps
        document.body.appendChild(outer);
        // Creating inner element and placing it in the container
        var inner = document.createElement('div');
        outer.appendChild(inner);
        // Calculating difference between container's full width and the child width
        var scrollbarWidth = (outer.offsetWidth - inner.offsetWidth);
        // Removing temporary elements from the DOM
        outer.parentNode.removeChild(outer);
        return scrollbarWidth;
    };
    DOMUtils.prototype.cacheImageIfNeeded = function (image) {
        if (!_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isCordova */ .Z.isCordova()) {
            return;
        }
        var fsu = window.fileSystemUtils;
        fsu.getImageCache().then(function (ImgCache) {
            ImgCache.cacheFile(image.src);
        }).catch(function (e) { });
    };
    DOMUtils.prototype.loadFromCacheIfPossible = function (image, errorCallback, successCallback) {
        if (!_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isCordova */ .Z.isCordova()) {
            errorCallback && errorCallback();
            return;
        }
        var fsu = window.fileSystemUtils;
        fsu.getImageCache().then(function (ImgCache) {
            var $image = $(image);
            ImgCache.isCached($image.attr('src'), function (path, success) {
                if (success) {
                    ImgCache.useCachedFile($image, successCallback, errorCallback);
                }
                else {
                    errorCallback && errorCallback();
                }
            });
        }).catch(function (e) { return errorCallback && errorCallback(); });
    };
    DOMUtils.prototype.changeElementType = function (element, newElementType) {
        var attrs = {};
        $.each(element.attributes, function (idx, attr) {
            attrs[attr.nodeName] = attr.nodeValue;
        });
        $(element).replaceWith(function () {
            return $("<".concat(newElementType, " />"), attrs).append($(this).contents());
        });
    };
    DOMUtils.prototype.showTooltipAtAbsolutePosition = function (position, html, tooltipClosedCallback) {
        if (tooltipClosedCallback === void 0) { tooltipClosedCallback = null; }
        var $tooltip = $("#tooltip");
        $tooltip.get(0).tooltipClosedCallback = tooltipClosedCallback;
        var $tooltipTip = $tooltip.find(".tooltip-tip");
        $tooltip.find(".tooltip-container").html(html);
        $tooltipTip.removeClass("tip-down tip-left tip-right tip-up");
        $tooltip.removeClass("hidden");
        $tooltipTip.addClass("tip-up");
        $tooltip.css({
            top: position.top,
            left: position.left,
            display: "inline-block",
            position: "absolute"
        });
        $tooltip.find(".tooltip-container").scrollTop(0);
    };
    DOMUtils.prototype.showTooltip = function ($element, html, hideOnMouseLeave) {
        var _this = this;
        if (html === void 0) { html = ""; }
        if (hideOnMouseLeave === void 0) { hideOnMouseLeave = true; }
        if (hideOnMouseLeave) {
            $element.on("mouseleave", this.hideTooltip);
        }
        else {
            $document.on("click", function (e) {
                var $target = $(e.target);
                if (!$element.get(0).contains(e.target)) {
                    _this.hideTooltip();
                }
            });
        }
        var $tooltip = $("#tooltip");
        var $tooltipTip = $tooltip.find(".tooltip-tip");
        $tooltip.find(".tooltip-container").html(html || $element.attr("data-title") || $element.attr("title"));
        $tooltipTip.removeClass("tip-down tip-left tip-right tip-up");
        $tooltip.removeClass("hidden");
        $tooltip.css({ display: "inline-block", position: "fixed" });
        var yOffset = 0;
        if ($element.attr("data-tooltip-y-offset")) {
            yOffset += parseInt($element.attr("data-tooltip-y-offset"));
            if (Number.isNaN(yOffset)) {
                yOffset = 0;
            }
        }
        if ($element.is(".tooltip-on-the-left")) {
            $tooltipTip.addClass("tip-right");
            $tooltip.css({
                top: $element.offset().top - $(window).scrollTop() + $element.height() / 2 - $tooltip.height() / 2 + yOffset,
                left: $element.offset().left - $tooltip.width() - 10
            });
        }
        else {
            $tooltipTip.addClass("tip-up");
            $tooltip.css({
                top: $element.offset().top - $(window).scrollTop() + $element.height() + 10 + yOffset,
                left: $element.offset().left + $element.width() / 2 - $tooltip.width() / 2
            });
        }
    };
    DOMUtils.prototype.hideTooltip = function () {
        var $tooltip = $("#tooltip");
        try {
            var tooltip = $tooltip.get(0);
            if (tooltip.tooltipClosedCallback && tooltip.tooltipClosedCallback instanceof Function) {
                tooltip.tooltipClosedCallback();
            }
        }
        catch (e) {
            console.log(e);
        }
        $tooltip.get(0).tooltipClosedCallback = null;
        $tooltip.addClass("hidden");
    };
    DOMUtils.prototype.getFirstVisibleElement = function ($items) {
        if ($items == null || $items.length == 0) {
            return null;
        }
        for (var i = 0; i < $items.length; i++) {
            var item = $items[i];
            var boundingRectangle = item.getBoundingClientRect();
            if (boundingRectangle.width > 0 && boundingRectangle.height > 0 && boundingRectangle.bottom > 0) {
                return item;
            }
        }
        return null;
    };
    DOMUtils.prototype.visuallyShowHearting = function () {
        var _this = this;
        var $notificationIcon = $(".header-icon-notification.wish-list-notification");
        var $booksButton = $(".books-button svg");
        $notificationIcon.removeClass("hidden disappear").addClass("appear");
        this.addIconButtonGlow($booksButton);
        setTimeout(function () {
            $notificationIcon.removeClass("appear").addClass("disappear");
            _this.removeIconButtonGlow($booksButton);
        }, 2000);
    };
    DOMUtils.prototype.getMarginRight = function ($element) {
        if ($element == null || $element.length == 0) {
            return 0;
        }
        var marginRight = parseFloat($element.css("margin-right"));
        return Number.isNaN(marginRight) ? 0 : marginRight;
    };
    DOMUtils.prototype.swapNodes = function (a, b) {
        if (!a || !b) {
            return;
        }
        var aparent = a.parentNode;
        var asibling = a.nextSibling === b ? a : a.nextSibling;
        b.parentNode.insertBefore(a, b);
        aparent.insertBefore(b, asibling);
    };
    DOMUtils.prototype.addIconButtonGlow = function ($iconButton) {
        if (!$iconButton || !$iconButton.length) {
            return;
        }
        $iconButton.addClass("glow");
        $iconButton.find(".fa, .fal, .far, .fas").addClass("glow-text");
        $iconButton.off("animationiteration webkitAnimationIteration");
    };
    DOMUtils.prototype.isHover = function ($element) {
        if (!$element || !$element.length) {
            return false;
        }
        try {
            return $element.is(":hover");
        }
        catch (e) {
            return false;
        }
    };
    DOMUtils.prototype.removeIconButtonGlow = function ($iconButton) {
        if (!$iconButton || !$iconButton.length) {
            return;
        }
        var timeout;
        if ($iconButton.is(".glow")) {
            $iconButton.one("animationiteration webkitAnimationIteration", function () {
                $iconButton.removeClass("glow");
                $iconButton.find(".fa, .fal, .far, .fas").removeClass("glow-text");
                clearTimeout(timeout);
            });
            timeout = setTimeout(function () {
                $iconButton.removeClass("glow");
                $iconButton.find(".fa, .fal, .far, .fas").removeClass("glow-text");
            }, 2100);
        }
    };
    DOMUtils.prototype.showFoundationModal = function ($modal) {
        var _this = this;
        if (!$modal || !$modal.length || $modal.is(".shown")) {
            return;
        }
        $(document).trigger("modalOpening");
        this.isCloseModalDisabled = true;
        setTimeout(function () { return _this.isCloseModalDisabled = false; }, 400);
        this.hideFoundationModal($(".reveal-modal.shown"));
        var $revealModalBackground = $(".reveal-modal-bg");
        if (!$revealModalBackground.length) {
            $revealModalBackground = $("<div class='reveal-modal-bg' style='display: none;'></div>");
            $("body").append($revealModalBackground);
        }
        if (isIOS && $modal.find("input[type=text]").length) {
            //ios has a bug - input in fixed containers screws up a lot of things
            //in that case simply scroll to the beginning of the page
            window.scroll(0, 0);
        }
        $revealModalBackground.css("display", "block");
        $modal.css({ top: 0, display: "block", visibility: "visible" });
        $modal.addClass("shown");
        setTimeout(function () {
            $modal.addClass("transition-in");
        }, 16);
        $("body").addClass("page-is-showing-modal");
        /*if(this.bodyHasScrollbar()){
          document.body.style.setProperty("--overflow-padding-right", `${this.getScrollbarWidth()}px`);
        }*/
    };
    DOMUtils.prototype.bodyHasScrollbar = function () {
        return document.body.scrollHeight > document.body.clientHeight;
    };
    DOMUtils.prototype.hideFoundationModal = function ($modal) {
        if (this.isCloseModalDisabled) {
            return;
        }
        if (!$modal || !$modal.length) {
            return;
        }
        $("body").removeClass("page-is-showing-modal");
        //document.body.style.setProperty("--overflow-padding-right", `0`);
        if ($modal.is(".close-disabled")) {
            return;
        }
        if ($modal.is(":not(.shown)")) {
            return;
        }
        $modal.removeClass("transition-in");
        $modal.addClass("transition-out");
        setTimeout(function () {
            $(".reveal-modal-bg").css("display", "none");
            $modal.css({ display: "none", visibility: "hidden" });
            $modal.removeClass("shown").removeClass("transition-out");
            $document.trigger("modalClosed", $modal);
        }, 250);
    };
    DOMUtils.prototype.unwrapIntoParent = function ($element) {
        if (!$element || $element.length === 0) {
            return;
        }
        if ($element.length > 1) {
            for (var i = 0; i < $element.length; i++) {
                this.unwrapIntoParent($element.eq(i));
            }
            return;
        }
        var element = $element[0];
        var childNodes = element.childNodes;
        var nextSibling = element.nextSibling;
        var parentNode = element.parentNode;
        $element.remove();
        if (!nextSibling) {
            for (var i = 0; i < childNodes.length; i++) {
                parentNode.appendChild(childNodes[i]);
            }
        }
        else {
            for (var i = childNodes.length - 1; i >= 0; i--) {
                parentNode.insertBefore(childNodes[i], nextSibling);
            }
        }
        parentNode.normalize();
    };
    DOMUtils.prototype.findFirstPrevious = function ($element, selector, maxIterations) {
        if (maxIterations === void 0) { maxIterations = 100; }
        if (!$element || $element.length === 0) {
            return $(null);
        }
        var $currentElement = $element;
        var counter = 0;
        while (($currentElement = this.getPreviousElementIncludingTree($currentElement)) && $currentElement.length > 0) {
            if ($currentElement.is(selector)) {
                return $currentElement;
            }
            if ($currentElement.is("ul, .callout-container")) {
                var $lastChild = $currentElement.children().last();
                if ($lastChild.is(selector)) {
                    return $lastChild;
                }
                var $found = this.findFirstPrevious($lastChild, selector, Math.max(maxIterations - counter, 0));
                if ($found.length > 0) {
                    return $found;
                }
            }
            counter++;
            if (counter > maxIterations) {
                break;
            }
        }
        return $(null);
    };
    DOMUtils.prototype.findFirstNext = function ($element, selector, maxNumberOfIterations) {
        if (maxNumberOfIterations === void 0) { maxNumberOfIterations = 100; }
        if (!$element || $element.length === 0) {
            return $(null);
        }
        var $currentElement = $element;
        var counter = 0;
        while (($currentElement = this.getFollowingElementIncludingTree($currentElement)) && $currentElement.length > 0) {
            if ($currentElement.is(selector)) {
                return $currentElement;
            }
            if ($currentElement.is("ul, ol, .callout-container")) {
                var $firstChild = $currentElement.children().first();
                if ($firstChild.is(selector)) {
                    return $firstChild;
                }
                var $found = this.findFirstNext($firstChild, selector);
                if ($found.length > 0) {
                    return $found;
                }
            }
            counter++;
            if (counter >= maxNumberOfIterations) {
                break;
            }
        }
        return $(null);
    };
    DOMUtils.prototype.getPreviousElementIncludingTree = function ($element) {
        if (!$element || $element.length === 0) {
            return $(null);
        }
        var $prev = $element.prev();
        if ($prev.length != 0) {
            return $prev;
        }
        if ($element.is("li")) {
            return $element.parent().prev();
        }
        return $(null);
    };
    DOMUtils.prototype.findFirstPreviousStopAt = function ($element, selector, stopAtSelector, maxIterations) {
        if (maxIterations === void 0) { maxIterations = 100; }
        if (!$element || $element.length === 0) {
            return $(null);
        }
        var $currentElement = $element;
        var counter = 0;
        while (($currentElement = this.getPreviousElementIncludingTree($currentElement)) && $currentElement.length > 0) {
            if ($currentElement.is(selector)) {
                return $currentElement;
            }
            if ($currentElement.find(stopAtSelector).length != 0) {
                break;
            }
            if ($currentElement.is("ul, ol, .callout-container")) {
                var $lastChild = $currentElement.children().last();
                if ($lastChild.is(selector)) {
                    return $lastChild;
                }
                var $found = this.findFirstPrevious($lastChild, selector, Math.max(maxIterations - counter, 0));
                if ($found.length > 0) {
                    return $found;
                }
            }
            counter++;
            if (counter > maxIterations) {
                break;
            }
        }
        return $(null);
    };
    DOMUtils.prototype.getFollowingElementIncludingTree = function ($element) {
        if (!$element || $element.length === 0) {
            return $(null);
        }
        var $next = $element.next();
        if ($next.length != 0) {
            return $next;
        }
        if ($element.is("li")) {
            return $element.parent().next();
        }
        var $calloutContainer = $element.closest(".callout-container");
        if ($calloutContainer.length) {
            return $calloutContainer.next();
        }
        return $(null);
    };
    DOMUtils.prototype.precedesElement = function (a, b) {
        if (!a || !b) {
            return 0;
        }
        var result = a.compareDocumentPosition(b);
        if (result & Node.DOCUMENT_POSITION_DISCONNECTED) {
            console.log("Node is disconnected!");
        }
        return result & Node.DOCUMENT_POSITION_PRECEDING;
    };
    DOMUtils.prototype.isContainedWithElement = function (a, b) {
        var comparison = a.compareDocumentPosition(b);
        return comparison & Node.DOCUMENT_POSITION_CONTAINS
            || comparison & Node.DOCUMENT_POSITION_CONTAINED_BY;
    };
    DOMUtils.prototype.wrapToHtmlElement = function (elementType, attributes, content) {
        return "<".concat(elementType, " ").concat(this.getAttributesString(attributes), ">").concat(this.escapeHtmlString(content), "</").concat(elementType, ">");
    };
    DOMUtils.prototype.createTextNodeTextRanges = function (textNodes) {
        var textNodeToTextMapping = { value: "", textNodeRanges: [] };
        for (var i = 0; i < textNodes.length; i++) {
            var textNode = textNodes[i];
            var text = textNode.nodeValue;
            var previousValue = textNodeToTextMapping.value;
            textNodeToTextMapping.value += text;
            textNodeToTextMapping.textNodeRanges.push({
                start: previousValue.length,
                end: textNodeToTextMapping.value.length,
                textNode: textNode
            });
        }
        return textNodeToTextMapping;
    };
    DOMUtils.prototype.splitRanges = function (mapping, startIndex, endIndex) {
        var ranges = mapping.textNodeRanges;
        var previousRanges = [];
        var matchingRanges = [];
        var followingRanges = [];
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (range.end <= startIndex) {
                previousRanges.push(range);
            }
            else if (range.start >= endIndex) {
                followingRanges.push(range);
            }
            else {
                matchingRanges.push(range);
            }
        }
        return {
            previousRanges: previousRanges,
            matchingRanges: matchingRanges,
            followingRanges: followingRanges
        };
    };
    DOMUtils.prototype.walkTheDOM = function (node, callback) {
        callback(node);
        node = node.firstChild;
        while (node) {
            this.walkTheDOM(node, callback);
            node = node.nextSibling;
        }
    };
    DOMUtils.prototype.getAllDescendantTextNodes = function (htmlElement) {
        var textNodes = [];
        this.walkTheDOM(htmlElement, function (node) {
            //is text node
            if (node.nodeType === 3) {
                textNodes.push(node);
            }
        });
        return textNodes;
    };
    DOMUtils.prototype.getTextWidth = function (text, font) {
        // re-use canvas object for better performance
        var canvas = this.canvas || (this.canvas = document.createElement("canvas"));
        var context = canvas.getContext("2d");
        context.font = font;
        return Math.floor(context.measureText(text).width);
    };
    DOMUtils.prototype.getAttributesString = function (attributes) {
        if (!attributes) {
            return "";
        }
        var attributesString = "";
        for (var key in attributes) {
            attributesString += " ".concat(key, "=\"").concat(attributes[key], "\"");
        }
        return attributesString;
    };
    DOMUtils.prototype.escapeHtmlString = function (html) {
        if (html === void 0) { html = ""; }
        return html.replace("<", "&lt;").replace(">", "&gt;");
    };
    DOMUtils.prototype.getClassNameMatchingRegEx = function (element, regEx) {
        if (!element || !regEx || !element.classList) {
            return undefined;
        }
        var classList = element.classList;
        for (var i = 0; i < classList.length; i++) {
            if (classList[i].match(regEx)) {
                return classList[i];
            }
        }
    };
    DOMUtils.prototype.getFirstBlockAncestor = function (node) {
        if (node == null) {
            return null;
        }
        var counter = 0;
        while (node != null) {
            node = node.parentNode;
            counter++;
            var display = $(node).css("display");
            if (display === "block" || display == "list-item" || display == "flex" || display == "grid" || display == "table") {
                return node;
            }
            if (counter > 50) {
                return null;
            }
        }
        return null;
    };
    DOMUtils.prototype.textNodesUnder = function (node) {
        var all = [];
        for (node = node.firstChild; node; node = node.nextSibling) {
            if (node.nodeType == 3) {
                all.push(node);
            }
            else {
                all = all.concat(this.textNodesUnder(node));
            }
        }
        return all;
    };
    return DOMUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new DOMUtils());


/***/ }),

/***/ 87876:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "t": () => (/* binding */ Platform)
/* harmony export */ });
/* unused harmony export OS */
var Platform;
(function (Platform) {
    Platform[Platform["Unknown"] = 0] = "Unknown";
    Platform[Platform["Browser"] = 1] = "Browser";
    Platform[Platform["Cordova"] = 2] = "Cordova";
    Platform[Platform["Electron"] = 3] = "Electron";
})(Platform || (Platform = {}));
var OS;
(function (OS) {
    OS[OS["Unknown"] = 0] = "Unknown";
    OS[OS["Android"] = 1] = "Android";
    OS[OS["Linux"] = 2] = "Linux";
    OS[OS["MacOS"] = 3] = "MacOS";
    OS[OS["iOs"] = 4] = "iOs";
    OS[OS["Windows"] = 5] = "Windows";
    OS[OS["WindowsMobile"] = 6] = "WindowsMobile";
})(OS || (OS = {}));
var MOBILE_SCREEN_WIDTH = 460;
var MEDIUM_SCREEN_WIDTH = 690;
var LARGE_SCREEN_WIDTH = 900;
var EXTRA_LARGE_SCREEN_WIDTH = 1070;
var cordova = window.cordova || null;
var $window = $(window);
var DeviceUtils = /** @class */ (function () {
    function DeviceUtils() {
        var _this = this;
        this.deviceReadyPromise = new Promise(function (resolve, reject) {
             false
                ? 0
                : $(document).ready(function () { return resolve(_this.getDeviceInfo()); });
        });
    }
    DeviceUtils.prototype.isGoogleMobileScreenSize = function () {
        //When calculating SEO speed, google is using mobile width of 460px. 
        //We ̣do some loading optimization based on that
        return $window.width() < MOBILE_SCREEN_WIDTH;
    };
    DeviceUtils.prototype.isSmallScreenSize = function () {
        return $window.width() < MEDIUM_SCREEN_WIDTH;
    };
    DeviceUtils.prototype.isMediumOrLargeScreenSize = function () {
        return $window.width() >= MEDIUM_SCREEN_WIDTH;
    };
    DeviceUtils.prototype.isLargeScreenSize = function () {
        return $window.width() >= LARGE_SCREEN_WIDTH;
    };
    DeviceUtils.prototype.isExtraLargeScreenSize = function () {
        return $window.width() >= EXTRA_LARGE_SCREEN_WIDTH;
    };
    DeviceUtils.prototype.loadDeviceInfo = function () {
        return this.deviceReadyPromise;
    };
    DeviceUtils.prototype.getDeviceInfo = function () {
        return {
            isTouchDevice: this.isTouchDevice(),
            platform: this.getPlatform(),
            os: this.getOS(),
            platformString: this.getPlatformString(),
            isIE: this.isIE(),
            isIOS: this.isIOS(),
            isAndroid: this.isAndroid()
        };
    };
    DeviceUtils.prototype.isTouchEventOnTouchDevice = function (eventType) {
        if (!this.isTouchDevice()) {
            return false;
        }
        return (eventType || "").indexOf("touch") === 0;
    };
    DeviceUtils.prototype.isTouchDevice = function () {
        // works on most browsers           works on IE10/11 and Surface
        return 'ontouchstart' in window || !!(window.navigator.maxTouchPoints);
    };
    DeviceUtils.prototype.isIE = function () {
        return !!navigator.userAgent.match(/msie|trident|edge/i);
    };
    DeviceUtils.prototype.isMacOs = function () {
        return (navigator.platform || "").toLowerCase().indexOf("mac") >= 0;
    };
    DeviceUtils.prototype.isWindows = function () {
        return (navigator.platform || "").toLowerCase().indexOf("win") >= 0;
    };
    DeviceUtils.prototype.isLinux = function () {
        return (navigator.platform || "").toLowerCase().indexOf("linux") >= 0;
    };
    DeviceUtils.prototype.isAndroid = function () {
        var userAgent = navigator.userAgent || navigator.vendor || "";
        return /android/i.test(userAgent);
    };
    DeviceUtils.prototype.isIOS = function () {
        try {
            var deviceAgent = (navigator.userAgent || navigator.vendor || "").toLowerCase();
            return /(iphone|ipod|ipad).*/.test(deviceAgent) || (navigator.userAgent.includes("Mac") && "ontouchend" in document);
        }
        catch (e) {
            console.log(e);
            return false;
        }
    };
    DeviceUtils.prototype.isSafari = function () {
        return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    };
    DeviceUtils.prototype.isCordova = function () {
        return this.getPlatform() === Platform.Cordova;
    };
    DeviceUtils.prototype.isIOSCordova = function () {
        return this.isCordova() && this.isIOS();
    };
    DeviceUtils.prototype.isApp = function () {
        return  false || undefined;
    };
    DeviceUtils.prototype.getPlatform = function () {
        if (true) {
            return Platform.Browser;
        }
        if (false) {}
        if (false) {}
        return Platform.Unknown;
    };
    DeviceUtils.prototype.getPlatformAndOsString = function () {
        return this.getPlatformString() + "-" + this.getOSString();
    };
    DeviceUtils.prototype.getPlatformString = function () {
        if (true) {
            return "browser";
        }
        if (false) {}
        if (false) {}
    };
    DeviceUtils.prototype.getOSString = function () {
        return cordova ? (cordova.platformId || navigator.platform) : navigator.platform;
    };
    DeviceUtils.prototype.getOS = function () {
        if (cordova) {
            switch (cordova.platformId) {
                case "osx":
                case "macos": return OS.MacOS;
                case "android": return OS.Android;
                case "ios": return OS.iOs;
                default: return OS.Unknown;
            }
        }
    };
    DeviceUtils.prototype.isConnected = function () {
        if (this.isCordova()) {
            return this.cordovaIsConnected();
        }
        return navigator.onLine;
    };
    DeviceUtils.prototype.cordovaIsConnected = function () {
        if (!navigator || !navigator.connection || !navigator.connection.type) {
            return navigator.onLine;
        }
        return [/*"unknown",*/ "ethernet", "wifi", "2g", "3g", "4g", "cellular", "5g" /*"none"*/].indexOf(navigator.connection.type) > 0;
    };
    DeviceUtils.prototype.confirm = function (message, callback) {
        var navigator = window.navigator;
        if (this.isCordova() && navigator && navigator.notification && navigator.notification.confirm) {
            navigator.notification.confirm(message, callback, "livebook");
        }
        else {
            if (confirm(message)) {
                callback();
            }
        }
    };
    return DeviceUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new DeviceUtils());


/***/ }),

/***/ 83000:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "j": () => (/* binding */ DynamicCodeLoader)
/* harmony export */ });
/* harmony import */ var _managers_NotificationsManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(54273);
/* harmony import */ var _WebUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93292);


var IS_DEVICE =  false || undefined;
var DynamicCodeLoaderClass = /** @class */ (function () {
    function DynamicCodeLoaderClass() {
    }
    DynamicCodeLoaderClass.prototype.importWebpackModuleWithRetry = function (constructImportPromise) {
        return new Promise(function (resolve, reject) {
            constructImportPromise().then(function (data) { return resolve(data); }).catch(function (error) {
                setTimeout(function () {
                    constructImportPromise().then(function (data) { return resolve(data); }).catch(function (error) {
                        setTimeout(function () {
                            constructImportPromise().then(function (data) { return resolve(data); }).catch(function (error) {
                                console.log(error);
                                _managers_NotificationsManager__WEBPACK_IMPORTED_MODULE_0__/* ["default"].showNotification */ .Z.showNotification("<div class=\"code-loading-error-notification\">Error loading code: <a href=\"https://www.refreshyourcache.com/en/home/\" target=\"_blank\">clear the browser cache</a>, contact our <a target=\"_blank\" href=\"mailto:lb-feedback@manning.com\">support</a>, or <a href='' onclick='location.reload(true)'>reload livebook</a>.</div>");
                                $(document).trigger("codeLoadingError", ["loadingError", error != null && (error.request || error.message)]);
                                reject();
                            });
                        }, 200);
                    });
                }, 100);
            });
        });
    };
    DynamicCodeLoaderClass.prototype.loadSlickSliderCode = function () {
        if (!this.slickSliderCodePromise) {
            this.slickSliderCodePromise = Promise.all([
                this.loadJsCode("vendor/slick/slick.min.js"),
                this.loadCssStylesheet("vendor/slick/slick.min.css")
            ]);
        }
        return this.slickSliderCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadHopscotchCode = function () {
        if (!this.hopscotchCodePromise) {
            this.hopscotchCodePromise = Promise.all([
                this.loadJsCode("vendor/hopscotch/dist/js/hopscotch.min.js"),
                this.loadCssStylesheet("vendor/hopscotch/dist/css/hopscotch.min.css")
            ]);
        }
        return this.hopscotchCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadShepherd = function () {
        if (!this.shepherdCodePromise) {
            this.shepherdCodePromise = Promise.all([
                this.loadJsCode("vendor/shepherd/shepherd.min.js"),
                this.loadCssStylesheet("vendor/shepherd/shepherd.css")
            ]);
        }
        return this.shepherdCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadHighlightCode = function () {
        if (!this.highlightCodePromise) {
            this.highlightCodePromise = Promise.all([
                this.loadJsCode("vendor/highlight.js/highlight.pack.js"),
                this.loadCssStylesheet("vendor/highlight.js/default.css?with-dark-mode")
            ]);
        }
        return this.highlightCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadCodeMirrorCode = function () {
        if (!this.codeMirrorCodePromise) {
            this.codeMirrorCodePromise = Promise.all([
                __webpack_require__.e(/* import() | codemirror */ 2528).then(__webpack_require__.t.bind(__webpack_require__, 4631, 23)),
                this.loadCssStylesheet("vendor/codemirror/lib/codemirror.css")
            ]);
        }
        return this.codeMirrorCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadClipboardCode = function () {
        if (!this.clipboardCodePromise) {
            this.clipboardCodePromise = this.loadJsCode("vendor/clipboard/dist/clipboard.min.js");
        }
        return this.clipboardCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadKlipseCode = function () {
        if (!this.klipseCodePromise) {
            this.klipseCodePromise = Promise.all([
                this.loadJsCode("vendor/klipse/lodash.js?id=1"),
                this.loadJsCode("vendor/klipse/ajv.bundle.js?id=1"),
                this.loadJsCode("vendor/klipse/immutable.min.js?id=1"),
                this.loadJsCode("vendor/klipse/json-schema-faker.js?id=1"),
                this.loadJsCode("vendor/klipse/multimethod.js?id=1"),
                this.loadJsCode("vendor/klipse/klipse.js"),
                this.loadCssStylesheet("vendor/klipse/codemirror.css")
            ]);
        }
        return this.klipseCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadVttCode = function () {
        if (!this.vttCodePromise) {
            this.vttCodePromise = this.loadJsCode("vendor/vtt/vtt.min.js");
        }
        return this.vttCodePromise;
    };
    DynamicCodeLoaderClass.prototype.loadMustacheCode = function () {
        if (!this.mustachePromise) {
            this.mustachePromise = this.loadJsCode("vendor/mustache/mustache.min.js");
        }
        return this.mustachePromise;
    };
    DynamicCodeLoaderClass.prototype.loadVelocityCode = function () {
        if (!this.velocityPromise) {
            this.velocityPromise = this.loadJsCode("vendor/velocity/velocity.min.js");
            this.velocityPromise.then(function () {
                $.Velocity && $.Velocity.RegisterEffect("manning.fromLeftOut", {
                    defaultDuration: 350,
                    calls: [
                        [{ opacity: [0, 1], translateX: -10, translateZ: 0 }]
                    ],
                    reset: { translateX: 0 }
                });
                $.Velocity && $.Velocity.RegisterEffect("manning.fromLeftIn", {
                    defaultDuration: 400,
                    calls: [
                        [{ opacity: [1, 0], translateX: [0, -10], translateZ: 0 }]
                    ]
                });
            });
        }
        return this.velocityPromise;
    };
    DynamicCodeLoaderClass.prototype.loadTurndownCode = function () {
        if (!this.turndownPromise) {
            this.turndownPromise = this.loadJsCode("vendor/turndown/turndown.js");
        }
        return this.turndownPromise;
    };
    DynamicCodeLoaderClass.prototype.loadJsCode = function (location) {
        return new Promise(function (resolve, reject) {
            $.getScript((IS_DEVICE ? "" : _WebUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getLivebookCdn */ .Z.getLivebookCdn()) + location)
                .then(function () { return resolve(); })
                .fail(function () { return reject(); });
        });
    };
    DynamicCodeLoaderClass.prototype.loadGoogleSigninClient = function () {
        return new Promise(function (resolve, reject) {
            $.getScript('https://accounts.google.com/gsi/client')
                .then(function () { return resolve(); })
                .fail(function () { return reject(); });
        });
    };
    DynamicCodeLoaderClass.prototype.loadCssStylesheet = function (location) {
        return new Promise(function (resolve) {
            var cssLink = $("<link>");
            $("head").append(cssLink); //IE hack: append before setting href
            cssLink.attr({
                rel: "stylesheet",
                type: "text/css",
                href: (IS_DEVICE ? "" : _WebUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getLivebookCdn */ .Z.getLivebookCdn()) + location,
            });
            resolve();
        });
    };
    return DynamicCodeLoaderClass;
}());
var DynamicCodeLoader = new DynamicCodeLoaderClass();


/***/ }),

/***/ 67463:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var $document = $(document);
var passiveSupported = isPassiveSupported();
var EventUtils = /** @class */ (function () {
    function EventUtils() {
        this.ids = [];
        this.userHasBeenActive = false;
    }
    EventUtils.prototype.onUserHasInteracted = function (callback, canTimeout) {
        var _this = this;
        if (canTimeout === void 0) { canTimeout = false; }
        if (this.userHasBeenActive) {
            callback && callback();
            return;
        }
        var handler = function (e) {
            _this.userHasBeenActive = true;
            callback && callback();
            $(document.body).toggleClass("has-been-interacted", true);
            callback = null;
            if (canTimeout) {
                clearTimeout(timerId);
            }
            try {
                $(document).off("mousemove click keydown touchstart", handler);
            }
            catch (e) { }
        };
        $(document).one("mousemove click keydown touchstart", handler);
        var timerId;
        if (canTimeout) {
            timerId = setTimeout(handler, 5000);
        }
    };
    EventUtils.prototype.onPassiveEvent = function (elements, events, callback) {
        if (!elements || !elements.length) {
            return;
        }
        if (!events || !events.length) {
            return;
        }
        for (var i = 0; i < elements.length; i++) {
            for (var j = 0; j < events.length; j++) {
                elements[i].addEventListener(events[j], callback, passiveSupported ? { passive: true } : false);
            }
        }
    };
    EventUtils.prototype.offPassiveEvent = function (elements, events, callback) {
        if (!elements || !elements.length) {
            return;
        }
        if (!events || !events.length) {
            return;
        }
        for (var i = 0; i < elements.length; i++) {
            for (var j = 0; j < events.length; j++) {
                elements[i].removeEventListener(events[j], callback);
            }
        }
    };
    EventUtils.prototype.onEventWithCooldown = function ($elements, event, handler) {
        if (!handler) {
            return;
        }
        var isActive = true;
        $elements.on(event, function (e) {
            if (!isActive) {
                return;
            }
            isActive = false;
            var returnValue;
            try {
                returnValue = handler.apply(this, arguments);
            }
            catch (error) {
                console.log(error);
            }
            setTimeout(function () { return isActive = true; }, 500);
            return returnValue;
        });
    };
    EventUtils.prototype.handleDragScroll = function ($element) {
        var isMouseDown = false, curYPos = 0, curXPos = 0;
        var handleMouseMove = function (e) {
            if (isMouseDown) {
                var isDominantlyHorizontalMove = Math.abs(curXPos - e.pageX) >= Math.abs(curYPos - e.pageY);
                if (isDominantlyHorizontalMove) {
                    $element.scrollLeft($element.scrollLeft() + 0.1 * (curXPos - e.pageX));
                }
                else {
                    $element.scrollTop($element.scrollTop() + 0.1 * (curYPos - e.pageY));
                }
            }
        };
        $element.mouseleave();
        $element.on("mousedown", function (e) {
            isMouseDown = true;
            curYPos = e.pageY;
            curXPos = e.pageX;
            $element.on("mousemove", handleMouseMove);
        });
        $element.on("mouseup mouseleave", function () {
            isMouseDown = false;
            $element.off("mousemove", handleMouseMove);
        });
    };
    EventUtils.prototype.handleContainerScroll = function (e) {
        var element = e.currentTarget;
        var event = e.originalEvent;
        var delta = event.wheelDelta || -event.detail;
        var elementHeight = $(element).outerHeight();
        var bottomOverflow = element.scrollTop + elementHeight - element.scrollHeight >= 0;
        var topOverflow = element.scrollTop <= 0;
        if ((delta < 0 && bottomOverflow) || (delta > 0 && topOverflow)) {
            var xDelta = event.deltaX || event.wheelDeltaX;
            var yDelta = event.deltaY || event.wheelDeltaY;
            if (xDelta != undefined && yDelta != undefined) {
                if (Math.abs(xDelta) > Math.abs(yDelta)) {
                    //If it is a predominately horizontal scroll don't prevent default
                    return;
                }
            }
            event.preventDefault();
            return;
        }
    };
    EventUtils.prototype.onDescendantEventWithCooldown = function ($elements, event, descendantSelector, handler) {
        if (!handler) {
            return;
        }
        var isActive = true;
        $elements.on(event, descendantSelector, function (e) {
            if (!isActive) {
                return;
            }
            isActive = false;
            try {
                handler.apply(this, arguments);
            }
            catch (error) {
                console.log(error);
            }
            setTimeout(function () { return isActive = true; }, 500);
        });
    };
    EventUtils.prototype.onDelayedMouseEnter = function ($elements, callback) {
        if (!$elements || $elements.length == 0) {
            return;
        }
        $elements.on("mouseenter", function (e) {
            var element = e.currentTarget;
            clearTimeout(element.timeoutId);
            element.timeoutId = setTimeout(function () { return callback && callback(e); }, 100);
        });
        $elements.on("mouseleave", function (e) { return clearTimeout(e.currentTarget.timeoutId); });
    };
    EventUtils.prototype.onScrollStop = function ($element, callback, stopDuration) {
        var _this = this;
        var timer = 0;
        $element.on("scroll", function (e) {
            clearTimeout(timer);
            timer = _this.setTimeout(function () { return callback && callback(e); }, stopDuration);
        });
    };
    EventUtils.prototype.triggerDocumentEventAsync = function (eventName, eventArg) {
        setTimeout(function () { return $document.trigger(eventName, eventArg); }, 10);
    };
    EventUtils.prototype.setTimeout = function (fun, interval) {
        var id = setTimeout(fun, interval);
        this.ids.push(id);
        return id;
    };
    EventUtils.prototype.clearTimers = function () {
        for (var _i = 0, _a = this.ids; _i < _a.length; _i++) {
            var id = _a[_i];
            clearTimeout(id);
        }
        this.ids = [];
    };
    return EventUtils;
}());
function isPassiveSupported() {
    var passiveSupported = false;
    try {
        var options = Object.defineProperty({}, "passive", {
            get: function () {
                passiveSupported = true;
            }
        });
        window.addEventListener("test", options, options);
        window.removeEventListener("test", options, options);
    }
    catch (err) {
        passiveSupported = false;
    }
    return passiveSupported;
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new EventUtils());


/***/ }),

/***/ 77533:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "M": () => (/* binding */ FreeEbookAccessUtils)
/* harmony export */ });
/* unused harmony export FreeEbookAccessUtilsClass */
/* harmony import */ var _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67008);

var OPEN_FREE_EBOOKS_KEY = "OPEN_FREE_EBOOKS";
var FreeEbookAccessUtilsClass = /** @class */ (function () {
    function FreeEbookAccessUtilsClass() {
    }
    FreeEbookAccessUtilsClass.prototype.isFreeEbookOpen = function (bookShortNameOrSlug) {
        try {
            var openedBooks = JSON.parse(_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem(OPEN_FREE_EBOOKS_KEY) || "{}");
            return !!openedBooks[bookShortNameOrSlug];
        }
        catch (e) {
            return false;
        }
    };
    FreeEbookAccessUtilsClass.prototype.openCurrentFreeEbook = function (bookShortNameOrSlug) {
        try {
            var openedBooks = JSON.parse(_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem(OPEN_FREE_EBOOKS_KEY) || "{}");
            openedBooks[bookShortNameOrSlug] = true;
            _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.setItem */ .f.setItem(OPEN_FREE_EBOOKS_KEY, JSON.stringify(openedBooks));
        }
        catch (e) { }
    };
    return FreeEbookAccessUtilsClass;
}());

var FreeEbookAccessUtils = new FreeEbookAccessUtilsClass();


/***/ }),

/***/ 98498:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UU": () => (/* binding */ GlobalStateInfo),
/* harmony export */   "WS": () => (/* binding */ __DISCUSSIONS_V2__),
/* harmony export */   "g5": () => (/* binding */ __DISCUSSIONS_V1__)
/* harmony export */ });
/* harmony import */ var _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67008);
/* harmony import */ var vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36538);
/* harmony import */ var _components_text_Progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67596);
/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28721);
/* harmony import */ var _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37168);
/* harmony import */ var _WebUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(93292);
/* harmony import */ var _ValueUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3199);







var VISITED_BOOKS_KEY = "VISITED_BOOKS";
var deploymentType;
var __DISCUSSIONS_V1__ = "__DISCUSSIONS_V1__";
var __DISCUSSIONS_V2__ = "__DISCUSSIONS_V2__";
if (false) {}
else if (true) {
    deploymentType = vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.qa */ .mO.qa;
}
else {}
var IS_DOTD_SALE_ENABLED = true;
var IS_SITE_WIDE_SALE_ENABLED = false;
var SITE_WIDE_SALE_EBOOK_MESSAGE = "All ebooks <strong>50% OFF</strong> until April 30th";
var SITE_WIDE_SALE_COMBO_MESSAGE = "<strong>35% OFF</strong> <span>all print books + free US shipping</span>";
var GlobalStateInfoClass = /** @class */ (function () {
    function GlobalStateInfoClass() {
        this.isShoppingCartBusy = false;
        this.isUnlockingWholeContentThroughPointingLink = false;
        this.isDotdSaleEnabled = IS_DOTD_SALE_ENABLED;
        this.isSiteWideSaleEnabled = IS_SITE_WIDE_SALE_ENABLED;
        this.siteWideSaleEbookMessage = SITE_WIDE_SALE_EBOOK_MESSAGE;
        this.siteWideSaleComboMessage = SITE_WIDE_SALE_COMBO_MESSAGE;
        this.shouldImmediatelyOpenBookReview = false;
        this.videoOverlayHighlightPhrasesInParagraph = false;
        this.videoOverlayTerseMode = false;
        this.videoEditionV2 = _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem("video-edition-v2") == "true";
        this.userExamTypesStatus = null;
        this.currentExamType = null;
        //Is overriden if user is subscriber
        this.getSubscriptionReadingStats = function () {
            return null;
        };
        this.isGeneratingPdf = false;
        this.isAudioEditMode = false;
        this.audioEditModeVersion = 0;
        this.shouldImmediatelyPlayLiveaudio = false;
        this.isShoppingCartDisabledInApp = true;
        this.isAssistantEnabled = false;
        this.refreshDataAfter = 60 * 40 * 1000; //40min
        this.pagesHistory = [];
        this.conceptPageBookInfo = null;
        this.referrer = document.referrer;
        this.regenerateSessionId();
    }
    GlobalStateInfoClass.prototype.getIpAddressDigitSum = function () {
        var sum = 0;
        try {
            var digitRegEx = /\d+/g;
            var match = void 0;
            do {
                match = digitRegEx.exec(this.ipAddress);
                if (match && match[0]) {
                    var digitString = match[0];
                    for (var i = 0; i < digitString.length; i++) {
                        sum += +digitString;
                    }
                }
            } while (match);
        }
        catch (e) {
            console.error(e);
        }
        if (Number.isNaN(sum)) {
            return 0;
        }
        return sum;
    };
    GlobalStateInfoClass.prototype.isNewTextSelectionMenuEnabled = function () {
        if ($(window).width() < 1000) {
            return Promise.resolve(false);
        }
        return this.isMannyEnabled();
    };
    GlobalStateInfoClass.prototype.isNotInProduction = function () {
        return !undefined;
    };
    GlobalStateInfoClass.prototype.isMannyEnabled = function () {
        if (false) {}
        if (this.isMannyEnabledPromise != null) {
            return this.isMannyEnabledPromise;
        }
        return this.isMannyEnabledPromise = new Promise(function (resolve, reject) {
            _services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isLoggedIn */ .H.isLoggedIn().then(function (data) {
                if (!data.loggedIn) {
                    resolve(false);
                    return;
                }
                _WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("featureToggles/canUserUseFeature"), function (data) { return resolve(data && data.enabled); }, function (error) { return resolve(false); }, {
                    name: "gptLearning"
                });
            }).catch(function (e) { return resolve(false); });
        });
    };
    GlobalStateInfoClass.prototype.isBookAssistantEnabledForUser = function () {
        // if(__DEV__){
        //     return Promise.resolve(true);
        // }
        //if user is logged in
        if (_services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isCurrentlyLoggedIn */ .H.isCurrentlyLoggedIn()) {
            return Promise.resolve(true);
        }
        else {
            return Promise.resolve(false);
        }
        if (this.isBookAssistantEnabledPromise != null) {
            return this.isBookAssistantEnabledPromise;
        }
        return this.isBookAssistantEnabledPromise = new Promise(function (resolve, reject) {
            _WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(_WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("featureToggles/canUserUseFeature"), function (data) { return resolve(data && data.enabled); }, function (error) { return resolve(false); }, {
                name: "bookAssistant"
            });
        });
    };
    GlobalStateInfoClass.prototype.isFreePreviewActive = function () { return this.isInFreePreview; };
    GlobalStateInfoClass.prototype.setFreePreviewActive = function (value) { return this.isInFreePreview = value; };
    GlobalStateInfoClass.prototype.getDeploymentType = function () { return deploymentType; };
    GlobalStateInfoClass.prototype.determineAudioEditMode = function () {
        var location = document.location.href;
        GlobalStateInfo.isAudioEditMode = location.indexOf("editAudio=true") != -1 || location.indexOf("editAudio=v1") != -1 || location.indexOf("editAudio=v2") != -1;
        if (GlobalStateInfo.isAudioEditMode) {
            if (location.indexOf("editAudio=true") != -1 || location.indexOf("editAudio=v1") != -1) {
                GlobalStateInfo.audioEditModeVersion = 1;
            }
            else if (location.indexOf("editAudio=v2") != -1) {
                GlobalStateInfo.audioEditModeVersion = 2;
            }
        }
        else {
            GlobalStateInfo.audioEditModeVersion = 0;
        }
    };
    GlobalStateInfoClass.prototype.getMarketplaceLink = function () {
        switch (deploymentType) {
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.prod */ .mO.prod:
                return "https://www.manning.com";
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.dev */ .mO.dev:
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.docker */ .mO.docker:
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.qa */ .mO.qa:
            default:
                return "https://www-qa.manning.com";
        }
    };
    GlobalStateInfoClass.prototype.getSubscriptionsLink = function () {
        switch (deploymentType) {
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.dev */ .mO.dev:
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.docker */ .mO.docker:
                return "/manning-online";
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.qa */ .mO.qa:
                return "https://subscription-qa.manning.com";
            case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.prod */ .mO.prod:
                return "https://subscription.manning.com";
        }
    };
    GlobalStateInfoClass.prototype.hasBoughtSubscription = function (userDetails) {
        return userDetails != null && userDetails.subscriptionInfo != null
            && userDetails.subscriptionInfo.hasSubscription
            && (!userDetails.subscriptionInfo.hasCompedSubscription || !!userDetails.subscriptionInfo.subscriptionId);
    };
    GlobalStateInfoClass.prototype.hasCompedSubscription = function (userDetails) {
        return userDetails != null && userDetails.subscriptionInfo != null
            && userDetails.subscriptionInfo.hasCompedSubscription;
    };
    GlobalStateInfoClass.prototype.hasSubscription = function (userDetails) {
        return userDetails != null && userDetails.subscriptionInfo != null
            && (userDetails.subscriptionInfo.hasSubscription || userDetails.subscriptionInfo.hasCompedSubscription);
    };
    GlobalStateInfoClass.prototype.hasPausedSubscription = function (userDetails) {
        return userDetails != null && userDetails.subscriptionInfo != null
            && userDetails.subscriptionInfo.hasSubscription && userDetails.subscriptionInfo.isPaused;
    };
    GlobalStateInfoClass.prototype.isSubscriptionBetaTester = function (userDetails) {
        var value = userDetails != null && ((!!userDetails.isBetaUser || !!userDetails.hasAccessToEverything));
        if (value) {
            console.log("subscription beta user - custom dimension");
        }
        return value;
    };
    GlobalStateInfoClass.prototype.shouldOfferSubscriptionTrial = function () {
        if (_services_authService_AuthProvider__WEBPACK_IMPORTED_MODULE_3__/* .AuthProvider.isCurrentlyLoggedIn */ .H.isCurrentlyLoggedIn()) {
            return false;
        }
        if (document.location.search && document.location.search.indexOf("free-trial") >= 0) {
            return true;
        }
        //return document.referrer.indexOf("google") >= 0;
        return false;
    };
    GlobalStateInfoClass.prototype.shouldOfferSimpleSignup = function () {
        if ($(document.body).is(".page-is-showing-modal")) {
            return false;
        }
        return !this.hasEverLoggedIn();
    };
    GlobalStateInfoClass.prototype.getABExperimentVersion = function (experimentId, percentageToB) {
        var existingValue = _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem(experimentId);
        if (existingValue) {
            return existingValue;
        }
        if (_ValueUtils__WEBPACK_IMPORTED_MODULE_5__/* .ValueUtils.getRandomNumber */ .d.getRandomNumber(0, 100) <= percentageToB) {
            _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.setItem */ .f.setItem(experimentId, "B");
            return "B";
        }
        else {
            _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.setItem */ .f.setItem(experimentId, "A");
            return "A";
        }
    };
    GlobalStateInfoClass.prototype.hasEverLoggedIn = function () {
        if (_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem("latestUserFirstName")
            || _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem("email")) {
            return true;
        }
    };
    GlobalStateInfoClass.prototype.isFirstTimeBookVisit = function () {
        if (this.book == null) {
            return false;
        }
        try {
            var visitedBooks = JSON.parse(_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem(VISITED_BOOKS_KEY) || "{}");
            return !visitedBooks[this.book.shortName];
        }
        catch (e) {
            return false;
        }
    };
    GlobalStateInfoClass.prototype.markCurrentBookAsVisited = function () {
        if (this.book == null) {
            return;
        }
        try {
            var visitedBooks = JSON.parse(_LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.getItem */ .f.getItem(VISITED_BOOKS_KEY) || "{}");
            visitedBooks[this.book.shortName] = true;
            _LocalStorageUtils__WEBPACK_IMPORTED_MODULE_0__/* .LocalStorageUtils.setItem */ .f.setItem(VISITED_BOOKS_KEY, JSON.stringify(visitedBooks));
        }
        catch (e) {
            return false;
        }
    };
    GlobalStateInfoClass.prototype.addToVisitHistory = function (newLocation) {
        if (GlobalStateInfo.pagesHistory[GlobalStateInfo.pagesHistory.length - 1] != newLocation) {
            GlobalStateInfo.pagesHistory.push(newLocation);
        }
        if ((newLocation || "").indexOf("book/") == -1) {
            _components_text_Progress__WEBPACK_IMPORTED_MODULE_2__/* ["default"].resetLatestBookPage */ .Z.resetLatestBookPage();
        }
    };
    GlobalStateInfoClass.prototype.wasOnLibraryPageFollowedByOnlyBookPages = function () {
        if (this.pagesHistory == null || this.pagesHistory.length == 0) {
            return false;
        }
        for (var i = this.pagesHistory.length - 1; i >= 0; i--) {
            var item = this.pagesHistory[i];
            if (item == "library" || item == "#!/library") {
                return true;
            }
            else if (item.indexOf("book/") >= 0) {
                continue;
            }
            else {
                return false;
            }
        }
        return false;
    };
    GlobalStateInfoClass.prototype.popHistoryUpToLibrary = function () {
        if (!this.wasOnLibraryPageFollowedByOnlyBookPages()) {
            return;
        }
        console.log(this.pagesHistory);
        for (var i = this.pagesHistory.length - 1; i >= 0; i--) {
            var item = this.pagesHistory[i];
            if (item == "library" || item == "#!/library") {
                this.pagesHistory.pop();
                break;
            }
            else if (item.indexOf("book/") >= 0) {
                this.pagesHistory.pop();
            }
            else {
                break;
            }
        }
        console.log(this.pagesHistory);
    };
    GlobalStateInfoClass.prototype.getBookTitle = function () {
        if (GlobalStateInfo.book) {
            return GlobalStateInfo.book.cleanTitle || GlobalStateInfo.book.title;
        }
        if (this.conceptPageBookInfo != null) {
            return this.conceptPageBookInfo.bookTitle;
        }
        return "";
    };
    GlobalStateInfoClass.prototype.getBookShortName = function () {
        if (GlobalStateInfo.book && GlobalStateInfo.book.shortName) {
            return GlobalStateInfo.book.shortName;
        }
        if (this.conceptPageBookInfo != null) {
            return this.conceptPageBookInfo.bookShortName;
        }
        return "";
    };
    GlobalStateInfoClass.prototype.getBookElementShortName = function () {
        if (GlobalStateInfo.bookElement && GlobalStateInfo.bookElement.shortName) {
            return GlobalStateInfo.bookElement.shortName;
        }
        if (this.conceptPageBookInfo != null) {
            return this.conceptPageBookInfo.bookElementShortName;
        }
        return "";
    };
    GlobalStateInfoClass.prototype.shouldShowSimpleSignup = function () {
        return 1 || 0;
    };
    GlobalStateInfoClass.prototype.showOnlyUnscrambledText = function () {
        if (GlobalStateInfo.book == null || GlobalStateInfo.bookElement == null) {
            return false;
        }
        return GlobalStateInfo.book.showOnlyUnscrambledText && !GlobalStateInfo.bookElement.isOpen;
    };
    GlobalStateInfoClass.prototype.showSummariesInsteadOfScrambledText = function () {
        return 1 || 0;
    };
    GlobalStateInfoClass.prototype.regenerateSessionId = function () {
        this.sessionId = (0,uuid__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)();
        this.chapterSessionId = (0,uuid__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .Z)();
    };
    GlobalStateInfoClass.prototype.setNewMainPageContent = function (html) {
        var $mainPageContent = $("#main-page-content");
        try {
            if ($mainPageContent.is(".is-react-root")
                && GlobalStateInfo.cleanReactRoot) {
                GlobalStateInfo.cleanReactRoot($mainPageContent[0]);
            }
        }
        catch (e) {
            console.log(e);
        }
        $mainPageContent.html(html);
    };
    GlobalStateInfoClass.prototype.getDiscussionsVersion = function () {
        if (true) {
            return __DISCUSSIONS_V2__;
        }
        else {}
    };
    GlobalStateInfoClass.prototype.sendUserAction = function (userAction) {
        _WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].postToOurBackend */ .Z.postToOurBackend(_WebUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("analytics/logUserAction"), function () { }, function (e) {
            console.log("error", e);
        }, userAction);
    };
    return GlobalStateInfoClass;
}());
var GlobalStateInfo = new GlobalStateInfoClass();
window.GlobalStateInfo = GlobalStateInfo;
switch (deploymentType) {
    case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.prod */ .mO.prod:
        $(document.body).addClass("prod");
        break;
    case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.qa */ .mO.qa:
        $(document.body).addClass("qa");
        break;
    case vbook_ui_components_src_Config__WEBPACK_IMPORTED_MODULE_1__/* .DeploymentType.dev */ .mO.dev:
        $(document.body).addClass("dev");
        break;
}


/***/ }),

/***/ 38425:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "z": () => (/* binding */ IntersectionUtils)
/* harmony export */ });
/* harmony import */ var _DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var IntersectionUtilsClass = /** @class */ (function () {
    function IntersectionUtilsClass() {
    }
    IntersectionUtilsClass.prototype.inViewport = function (element, callback) {
        if ('IntersectionObserver' in window) {
            var observer_1 = new IntersectionObserver(function (entries) {
                if (entries && entries[0] && entries[0].intersectionRatio > 0) {
                    observer_1.unobserve(element);
                    observer_1.disconnect();
                    callback && callback();
                    return;
                }
            }, {});
            observer_1.observe(element);
        }
        else {
            this.getSource().then(function (_a) {
                var IntersectionFallback = _a.IntersectionFallback;
                IntersectionFallback.inViewport(element, callback);
            }).catch(function (e) {
                callback && callback();
            });
        }
    };
    IntersectionUtilsClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    IntersectionUtilsClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | intersectionFallback */ 5920).then(__webpack_require__.bind(__webpack_require__, 47019));
    };
    return IntersectionUtilsClass;
}());
var IntersectionUtils = new IntersectionUtilsClass();


/***/ }),

/***/ 68577:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "r": () => (/* binding */ LinksUtils)
/* harmony export */ });
/* harmony import */ var _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);
/* harmony import */ var _BookContentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52810);
/* harmony import */ var _DOMUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23934);
/* harmony import */ var _WebUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(93292);
/* harmony import */ var _EventUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(67463);
/* harmony import */ var _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69619);
/* harmony import */ var _RouteUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(95964);
/* harmony import */ var _managers_ScreenScrollManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22550);
/* harmony import */ var _features_discussions_DiscussionModule__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(76043);
/* harmony import */ var _modules_UnlockModule__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(57658);
/* harmony import */ var _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(75618);
/* harmony import */ var _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(98498);
var IS_ON_DEVICE =  false || undefined;












var $document = $(document);
var LinksUtilsClass = /** @class */ (function () {
    function LinksUtilsClass() {
        var _this = this;
        this.pageCounter = 0;
        _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].loadDeviceInfo */ .Z.loadDeviceInfo().then(function (deviceInfo) {
            _this.currentPlatform = deviceInfo.platform;
            $("body").on("click", "a:not(.immediately-go-to-link)", function (e) { return LinksUtils.handleLinkClick(e, e.currentTarget); });
            if (!deviceInfo.isTouchDevice) {
                _EventUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].onDescendantEventWithCooldown */ .Z.onDescendantEventWithCooldown($("body"), "mouseenter", "#book-markup-container a", function (e) { return _this.handleLinkHover(e, e.currentTarget); });
                $("body").on("mouseleave", "#book-markup-container a", function (e) { return LinksUtils.handleLinkLeave(e.currentTarget); });
            }
        });
    }
    LinksUtilsClass.prototype.clean = function () {
        _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__/* .LinkPreviewerModule.hidePreview */ .f.hidePreview(false, true);
    };
    LinksUtilsClass.prototype.adjustBookLink = function (link) {
        link = link || "";
        if (!IS_ON_DEVICE) {
            return link.replace("#!/", "/");
        }
        else {
            var hashBangIndex = link.indexOf("#!");
            if (hashBangIndex == 0) {
                return link;
            }
            else if (hashBangIndex == 1) {
                return link.substr(1);
            }
            else {
                return ("#!/" + link).replace(/\/\//, "/");
            }
        }
    };
    LinksUtilsClass.prototype.formBookLink = function (book) {
        return "".concat(this.getBasePath(), "/book/").concat(book.slug);
    };
    LinksUtilsClass.prototype.formLink = function (book, bookElement, textItemId) {
        if (textItemId === void 0) { textItemId = ""; }
        return "".concat(this.getBasePath()).concat(this.formHash(book, bookElement)).concat(textItemId);
    };
    LinksUtilsClass.prototype.formReviewReportLinkFromBookSlugAndBookElementShortName = function (bookSlug, bookElementShortName, reviewVersion) {
        return "".concat(this.getBasePath()).concat(this.formReviewReportPartFromSlugAndShortNames(bookSlug, bookElementShortName, reviewVersion));
    };
    LinksUtilsClass.prototype.formLinkFromBookSlugAndBookElementShortName = function (bookSlug, bookElementShortName) {
        return "".concat(this.getBasePath()).concat(this.formBookPartFromSlugAndShortNames(bookSlug, bookElementShortName));
    };
    LinksUtilsClass.prototype.formEditLinkFromBookSlugAndBookElementShortName = function (bookSlug, bookElementShortName) {
        return "".concat(this.getBasePath()).concat(this.formEditHashFromSlugAndShortNames(bookSlug, bookElementShortName));
    };
    LinksUtilsClass.prototype.formEditAudioLinkFromBookSlugAndBookElementShortName = function (bookSlug, bookElementShortName) {
        return "".concat(this.getBasePath()).concat(this.formBookPartFromSlugAndShortNames(bookSlug, bookElementShortName), "?editAudio=true");
    };
    LinksUtilsClass.prototype.getBasePath = function () {
        if (_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isApp */ .Z.isApp()) {
            return _WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getInitialPageLocation */ .Z.getInitialPageLocation();
        }
        else {
            return "".concat(document.location.protocol, "//").concat(document.location.host);
        }
    };
    LinksUtilsClass.prototype.formHash = function (book, bookElement) {
        if (book == null || bookElement == null) {
            return "";
        }
        var url = "/book/".concat(book.slug, "/").concat(bookElement.shortName, "/");
        if (IS_ON_DEVICE) {
            url = "#!" + url;
        }
        if (bookElement.meapVersion > 0) {
            url += "v-".concat(bookElement.meapVersion, "/");
        }
        else if (bookElement.reviewVersion > 0) {
            url += "r-".concat(bookElement.reviewVersion, "/");
        }
        return url;
    };
    LinksUtilsClass.prototype.formBookPartFromSlugAndShortNames = function (bookSlug, bookElementShortName) {
        var url = "/book/".concat(bookSlug, "/").concat(bookElementShortName);
        if (IS_ON_DEVICE) {
            url = "#!" + url;
        }
        return url;
    };
    LinksUtilsClass.prototype.formReviewReportPartFromSlugAndShortNames = function (bookSlug, bookElementShortName, reviewVersion) {
        var url = "/review-report/".concat(bookSlug, "/").concat(reviewVersion || "");
        if (IS_ON_DEVICE) {
            url = "#!" + url;
        }
        return url;
    };
    LinksUtilsClass.prototype.formEditHashFromSlugAndShortNames = function (bookSlug, bookElementShortName) {
        var url = "/edit/".concat(bookSlug, "/").concat(bookElementShortName);
        if (IS_ON_DEVICE) {
            url = "#!" + url;
        }
        return url;
    };
    LinksUtilsClass.prototype.trimLastSlash = function (text) {
        if (!text || text.length == 0) {
            return "";
        }
        return text[text.length - 1] == "/" ? text.substring(0, text.length - 1) : text;
    };
    LinksUtilsClass.prototype.handleLinkClick = function (e, link) {
        var $link = $(link);
        var $target = $(e.target);
        var $currentTarget = $(e.currentTarget);
        var $closestNoPropagationElement = $target.closest(".dont-propagate-click");
        if ($target.is(".dont-propagate-click") || $currentTarget.is(".dont-propagate-click")
            || ($closestNoPropagationElement.length > 0 && $.contains($currentTarget[0], $closestNoPropagationElement[0]))) {
            e.preventDefault();
            return;
        }
        if ($target.is(".immediately-go-to-link")
            || $currentTarget.is(".immediately-go-to-link")) {
            document.location.href = link.href;
        }
        if ($target.is("#livebook-button")) {
            e.preventDefault();
            return;
        }
        if (!_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isConnected */ .Z.isConnected() && _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isApp */ .Z.isApp() && $currentTarget.is(".open-book-link.not-downloaded-book")) {
            $(document).trigger("requestNotification", "Please connect to the internet to open this book");
            e.preventDefault();
            return;
        }
        if ($target.closest(".lb-ignore-links-container").length > 0) {
            document.location.href = link.href;
            return;
        }
        _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__/* .LinkPreviewerModule.hidePreview */ .f.hidePreview();
        if (link.href.indexOf("data:") != -1) {
            return true;
        }
        if (link.href.indexOf("javascript:void(0)") != -1) {
            return true;
        }
        var returnValue = false;
        if ($target.attr("data-dont-stop-propagation")
            || $currentTarget.attr("data-dont-stop-propagation")) {
            returnValue = true;
        }
        //Stop empty links from going to the top of screen
        if ((!link.href
            || link.href === document.location.href
            || link.href === document.location.href + "#")
            && !$target.is(".same-site-ignore")
            && !$currentTarget.is(".same-site-ignore")) {
            e.preventDefault();
            return returnValue;
        }
        if ($link.is(".reload-link")) {
            _WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].reloadPage */ .Z.reloadPage();
        }
        if (link.href.indexOf("search-") >= 0) {
            $document.trigger("searchSuggestion", ["link", link.href]);
        }
        if ($link.closest(".cart-upsell-root").length && $link.attr("data-product-id")) {
            $(document).trigger("customersAlsoBought", [link, +$link.attr("data-product-id")]);
        }
        var linkHref = link.href || "";
        var documentHref = document.location.href || "";
        var isLivebookLink = linkHref.indexOf("livebook.manning.com") != -1 || linkHref.indexOf("livebook-qa.manning.com") != -1;
        var isSubscriptionDocument = documentHref.indexOf("subscription.manning.com") != -1 || documentHref.indexOf("subscription-qa.manning.com") != -1;
        if (isLivebookLink && isSubscriptionDocument && $link.attr("target") != "_blank") {
            document.location.href = linkHref;
            return true;
        }
        if (this.isThirdPartyLink(link.href) || e.ctrlKey || e.metaKey || e.which === 2 || $link.attr("target") == "_blank") {
            e.preventDefault();
            this.openLinkInNewTab(link.href);
            return returnValue;
        }
        if (isSubscriptionDocument) {
            document.location.href = linkHref;
            return true;
        }
        if (link.href.indexOf("javascript:") == -1) {
            $document.trigger("searchHideRequested");
        }
        if ($link.closest(".category-books-container").length && $link.attr("data-product-id")) {
            $(document).trigger("catalogLinkClick", [link, +$link.attr("data-product-id")]);
        }
        if ($link.closest(".related-books-menu-container").length && $link.attr("data-product-id")) {
            $(document).trigger("relatedBooksClick", [link, +$link.attr("data-product-id")]);
        }
        var linkBookElementData = this.extractBookElementData(link);
        if (linkBookElementData) {
            //Stays on the same page
            if (this.isLinkOnSameBookElement(linkBookElementData)) {
                e.preventDefault();
                var scrollToElement_1 = null;
                if (linkBookElementData.additional) {
                    if (linkBookElementData.additional.startsWith("comment-")) {
                        _features_discussions_DiscussionModule__WEBPACK_IMPORTED_MODULE_8__/* .DiscussionModule.requestShowCommentWhenReady */ .R.requestShowCommentWhenReady(linkBookElementData.additional.replace("comment-", ""), 0, function () { });
                        return;
                    }
                    if (!scrollToElement_1 && linkBookElementData.additional.startsWith("note-")) {
                        $document.trigger("paragraphNoteOpenRequested", linkBookElementData.additional.replace("note-", ""));
                    }
                    scrollToElement_1 = document.getElementById(linkBookElementData.additional);
                    try {
                        if (scrollToElement_1 == null) {
                            scrollToElement_1 = document.querySelector("[name=\"".concat(linkBookElementData.additional, "\"]"));
                        }
                    }
                    catch (e) { }
                    if (!scrollToElement_1 && linkBookElementData.additional.startsWith("search-")) {
                        scrollToElement_1 = document.getElementById(linkBookElementData.additional.replace("search-", ""));
                        if (scrollToElement_1 != null) {
                            $(".paragraph-selected").removeClass("paragraph-selected");
                            $(scrollToElement_1).addClass("paragraph-selected");
                        }
                    }
                    if (!scrollToElement_1 && linkBookElementData.additional.startsWith("section-")) {
                        scrollToElement_1 = _BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].getSectionHeading */ .Z.getSectionHeading(linkBookElementData.additional);
                    }
                    if (!scrollToElement_1) {
                        try {
                            scrollToElement_1 = document.querySelector("[data-hash='".concat(linkBookElementData.additional, "']"));
                        }
                        catch (e) {
                            console.log(e);
                        }
                    }
                }
                else {
                    scrollToElement_1 = document.querySelector(".readable-text");
                }
                var text = $link.text();
                var isBrowsableElement = _BookContentUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].matchesBrowsableRegEx */ .Z.matchesBrowsableRegEx(text);
                if (isBrowsableElement) {
                    var $textFragment = $link.closest(".readable-text");
                    var textFragment = $textFragment[0];
                    if (textFragment) {
                        var browsable = _BookContentUtils__WEBPACK_IMPORTED_MODULE_1__/* ["default"].getMatchingBrowsable */ .Z.getMatchingBrowsable(textFragment.browsables, $link.text());
                        $(browsable).closest(".focus-off").removeClass("focus-off");
                        if (browsable) {
                            if (_DOMUtils__WEBPACK_IMPORTED_MODULE_2__/* ["default"].precedesElement */ .Z.precedesElement(scrollToElement_1, textFragment)) {
                                scrollToElement_1 = textFragment;
                            }
                        }
                    }
                }
                if (scrollToElement_1) {
                    $document.trigger("disableToolbarHiding");
                    _managers_ScreenScrollManager__WEBPACK_IMPORTED_MODULE_7__/* ["default"].scrollToElement */ .Z.scrollToElement(scrollToElement_1, function () {
                        $document.trigger("enableToolbarHiding");
                        if ($(scrollToElement_1).is(".scrambled") && linkBookElementData && linkBookElementData.additional.startsWith("search-")) {
                            _modules_UnlockModule__WEBPACK_IMPORTED_MODULE_9__/* .UnlockModule.tryToSearchUnlockFragmentInCurrentBookElement */ .O.tryToSearchUnlockFragmentInCurrentBookElement([$(scrollToElement_1)]);
                        }
                    });
                    $document.trigger("withinChapterLinkScroll", scrollToElement_1);
                }
                return returnValue;
            }
            else {
                var pageType = link.href.indexOf("/book/") > -1 ? "book" : "edit";
                if (linkBookElementData.book && linkBookElementData.bookElement) {
                    var link_1 = "".concat(IS_ON_DEVICE ? "#!" : "", "/").concat(pageType, "/").concat(linkBookElementData.book, "/").concat(linkBookElementData.bookElement, "/");
                    if (linkBookElementData.meapVersion) {
                        link_1 += "v-".concat(linkBookElementData.meapVersion, "/");
                    }
                    else if (linkBookElementData.reviewVersion) {
                        link_1 += "r-".concat(linkBookElementData.reviewVersion, "/");
                    }
                    if (linkBookElementData.additional) {
                        link_1 += linkBookElementData.additional;
                    }
                    if (_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_11__/* .GlobalStateInfo.isAudioEditMode */ .UU.isAudioEditMode) {
                        link_1 += "?editAudio=v".concat(_GlobalStateInfo__WEBPACK_IMPORTED_MODULE_11__/* .GlobalStateInfo.audioEditModeVersion */ .UU.audioEditModeVersion);
                    }
                    page(link_1);
                    return returnValue;
                }
                else if (linkBookElementData.book && !linkBookElementData.bookElement) {
                    page("".concat(IS_ON_DEVICE ? "#!" : "", "/").concat(pageType, "/").concat(linkBookElementData.book));
                    return returnValue;
                }
            }
        }
    };
    LinksUtilsClass.prototype.handleLinkHover = function (e, link) {
        clearTimeout(this.linkHoverTimer);
        var $link = $(link);
        if ($link.is(".ignore-preview")) {
            return;
        }
        var linkBookElementData = this.extractBookElementData(link);
        if (linkBookElementData && this.isLinkOnSameBookElement(linkBookElementData)) {
            try {
                var targetElement = document.getElementById(linkBookElementData.additional);
                if (targetElement == null) {
                    targetElement = document.querySelector("[name='".concat(linkBookElementData.additional, "']"));
                }
                if (targetElement != null) {
                    var $closestImportant = $(targetElement).closest(".browsable-container, .readable-text");
                    if ($closestImportant.is(".browsable-container")) {
                        if (!_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isElementVisibleEvenALittle */ .Z.isElementVisibleEvenALittle($closestImportant.get(0))) {
                            _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__/* .LinkPreviewerModule.showBrowsablePreview */ .f.showBrowsablePreview(link, $closestImportant);
                        }
                        return;
                    }
                    else if ($closestImportant.is(".readable-text")) {
                        if (!_BookViewDOMUtils__WEBPACK_IMPORTED_MODULE_5__/* ["default"].isElementVisibleEvenALittle */ .Z.isElementVisibleEvenALittle($closestImportant.get(0))) {
                            _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__/* .LinkPreviewerModule.showWithinChapterPreview */ .f.showWithinChapterPreview(link, $closestImportant);
                        }
                        return;
                    }
                }
            }
            catch (e) { }
        }
        if (this.isLivebookLink(link.href)) {
            if ($link.is(".ignore-link-preview")) {
                return;
            }
            var endpoint_1 = _WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getAbsoluteUrl */ .Z.getAbsoluteUrl("api/book/linkPreviewDetails");
            var bookElementLink_1 = this.extractBookElementData(link);
            this.linkHoverTimer = _EventUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].setTimeout */ .Z.setTimeout(function () {
                _WebUtils__WEBPACK_IMPORTED_MODULE_3__/* ["default"].getFromOurBackend */ .Z.getFromOurBackend(endpoint_1, function (previewDetails) {
                    if (previewDetails == null || !$link.is(":hover")
                        || !previewDetails.title || !previewDetails.paragraphs) {
                        return;
                    }
                    _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__/* .LinkPreviewerModule.showBookElementPreview */ .f.showBookElementPreview(link, previewDetails);
                }, function (error) {
                    console.error("Something went wrong retrieveing preview details: ", error);
                }, {
                    linkHash: link.hash || link.pathname,
                    bookElementLink: bookElementLink_1
                });
            }, 100);
        }
    };
    LinksUtilsClass.prototype.handleLinkLeave = function (link) {
        clearTimeout(this.linkHoverTimer);
        this.linkHoverTimer = _EventUtils__WEBPACK_IMPORTED_MODULE_4__/* ["default"].setTimeout */ .Z.setTimeout(function () {
            if (!$(link).is(":hover")) {
                _features_bookEnchancements_linkPreviewer_LinkPreviewerModule__WEBPACK_IMPORTED_MODULE_10__/* .LinkPreviewerModule.hidePreview */ .f.hidePreview(true);
            }
        }, 300);
    };
    LinksUtilsClass.prototype.extractBookElementData = function (link) {
        var path = link.pathname;
        var linkRouteData = _RouteUtils__WEBPACK_IMPORTED_MODULE_6__/* .RouteUtils.getRouteInfo */ .D.getRouteInfo(path);
        if (linkRouteData) {
            if (link.hash) {
                try {
                    var element_1 = document.getElementById(link.hash.substring(1));
                    if (!element_1) {
                        element_1 = document.querySelector("[name=\"".concat(link.hash.substring(1), "\"]"));
                    }
                    if (element_1) {
                        linkRouteData.additional = link.hash.substring(1);
                    }
                }
                catch (e) { }
            }
            return linkRouteData;
        }
        path = link.hash;
        if (path.indexOf("#!") >= 0) {
            path = path.substring("#!".length);
            linkRouteData = _RouteUtils__WEBPACK_IMPORTED_MODULE_6__/* .RouteUtils.getRouteInfo */ .D.getRouteInfo(path);
            if (linkRouteData) {
                return linkRouteData;
            }
        }
        var element = document.getElementById(link.hash.substring(1));
        if (element) {
            linkRouteData = _RouteUtils__WEBPACK_IMPORTED_MODULE_6__/* .RouteUtils.getCurrentRouteInfo */ .D.getCurrentRouteInfo();
            linkRouteData.additional = link.hash.substring(1);
            return linkRouteData;
        }
        return null;
    };
    LinksUtilsClass.prototype.isLinkOnSameBookElement = function (linkInfo) {
        var currentRouteInfo = _RouteUtils__WEBPACK_IMPORTED_MODULE_6__/* .RouteUtils.getCurrentRouteInfo */ .D.getCurrentRouteInfo();
        if (!currentRouteInfo) {
            return false;
        }
        var isEqual = currentRouteInfo.book === linkInfo.book
            && currentRouteInfo.bookElement === linkInfo.bookElement
            && currentRouteInfo.isEditLink == linkInfo.isEditLink;
        if (!isEqual) {
            return false;
        }
        if (currentRouteInfo.meapVersion || linkInfo.meapVersion) {
            return currentRouteInfo.meapVersion == linkInfo.meapVersion;
        }
        if (currentRouteInfo.reviewVersion) {
            return currentRouteInfo.reviewVersion == linkInfo.reviewVersion;
        }
        return true;
    };
    LinksUtilsClass.prototype.isThirdPartyLink = function (location) {
        if (typeof location != "string"
            || location == ""
            || location.indexOf("localhost") != -1
            || location.indexOf("livebook") != -1
            || location.indexOf("liveaudio") != -1
            || location.indexOf("vbook") != -1
            || location.indexOf("file://") === 0
            || location.indexOf("cdv://") === 0
            || location.indexOf("javascript") === 0) {
            return false;
        }
        return true;
    };
    LinksUtilsClass.prototype.isLivebookLink = function (location) {
        if (!location) {
            return false;
        }
        return location.indexOf("localhost") !== -1
            || location.indexOf("livebook") !== -1
            || location.indexOf("#") == 0;
    };
    LinksUtilsClass.prototype.openLinkInNewTab = function (location) {
        switch (this.currentPlatform) {
            case _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* .Platform.Cordova */ .t.Cordova:
                window.open(location, '_system');
                break;
            case _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* .Platform.Electron */ .t.Electron:
                var shell = eval("require('electron').shell");
                shell && shell.openExternal && shell.openExternal(location);
                break;
            case _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* .Platform.Browser */ .t.Browser:
            default:
                var win = window.open(location, '_blank');
                win && win.focus && win.focus();
                break;
        }
    };
    LinksUtilsClass.prototype.openLink = function (location, forceOpeningInSameWindow) {
        if (forceOpeningInSameWindow === void 0) { forceOpeningInSameWindow = false; }
        this.isLivebookLink(location) || forceOpeningInSameWindow ? document.location.href = location
            : this.openLinkInNewTab(location);
    };
    return LinksUtilsClass;
}());
var LinksUtils = new LinksUtilsClass();


/***/ }),

/***/ 67008:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "f": () => (/* binding */ LocalStorageUtils)
/* harmony export */ });
var LocalStorageUtilsClass = /** @class */ (function () {
    function LocalStorageUtilsClass() {
    }
    LocalStorageUtilsClass.prototype.getItem = function (key) {
        try {
            return localStorage.getItem(key);
        }
        catch (e) {
            console.log("Error getting item from local storage", key);
            return "";
        }
    };
    LocalStorageUtilsClass.prototype.setItem = function (key, value) {
        try {
            return localStorage.setItem(key, value);
        }
        catch (e) {
            console.log("Error setting item to local storage", key);
            return "";
        }
    };
    LocalStorageUtilsClass.prototype.saveTemporarily = function (key, data, expirationMs) {
        try {
            localStorage.setItem(key, JSON.stringify({
                value: JSON.stringify(data),
                timestamp: new Date().getTime() + expirationMs
            }));
            return data;
        }
        catch (e) {
            return data;
        }
    };
    LocalStorageUtilsClass.prototype.loadTemporarily = function (key) {
        try {
            var record = JSON.parse(localStorage.getItem(key));
            if (!record) {
                return false;
            }
            return (new Date().getTime() < record.timestamp && JSON.parse(record.value));
        }
        catch (e) {
            return false;
        }
    };
    LocalStorageUtilsClass.prototype.remove = function (key) {
        try {
            localStorage.removeItem(key);
        }
        catch (e) { }
    };
    return LocalStorageUtilsClass;
}());
var LocalStorageUtils = new LocalStorageUtilsClass();


/***/ }),

/***/ 90605:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "O": () => (/* binding */ ReactUtils)
/* harmony export */ });
/* harmony import */ var react_dom_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20745);
/* harmony import */ var _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98498);


var ReactUtilsClass = /** @class */ (function () {
    function ReactUtilsClass() {
        var _this = this;
        //TODO - potential source of memory leaks;
        this.elementRootMap = new Map();
        _GlobalStateInfo__WEBPACK_IMPORTED_MODULE_1__/* .GlobalStateInfo.cleanReactRoot */ .UU.cleanReactRoot = function (htmlElement) {
            _this.unmountAtNode(htmlElement);
        };
    }
    ReactUtilsClass.prototype.createRoot = function (htmlElement) {
        if (this.elementRootMap.has(htmlElement)) {
            var result = this.elementRootMap.get(htmlElement);
            return result;
        }
        try {
            htmlElement.classList.add("is-react-root");
        }
        catch (e) {
            console.log(e);
        }
        var root = (0,react_dom_client__WEBPACK_IMPORTED_MODULE_0__/* .createRoot */ .s)(htmlElement);
        this.elementRootMap.set(htmlElement, root);
        return root;
    };
    ReactUtilsClass.prototype.unmountAtNode = function (htmlElement) {
        try {
            if (!htmlElement) {
                return;
            }
            var root = this.elementRootMap.has(htmlElement) ? this.elementRootMap.get(htmlElement)
                : this.createRoot(htmlElement);
            this.elementRootMap.delete(htmlElement);
            htmlElement.classList.remove("is-react-root");
            root.unmount();
        }
        catch (e) {
            console.log(e);
        }
    };
    return ReactUtilsClass;
}());
var ReactUtils = new ReactUtilsClass();


/***/ }),

/***/ 95964:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "D": () => (/* binding */ RouteUtils)
/* harmony export */ });
var RouteUtils = {
    videoDigestBookElementRoute: "/video-digest/:book/:bookElement?/:additional?",
    digestBookElementRoute: "/digest/:book/:bookElement?/:additional?",
    digestMeapElementRoute: "/digest/:book/:bookElement/v-:meapVersion/:additional?",
    bookElementRoute: "/book/:book/:bookElement?/:additional?",
    meapElementRoute: "/book/:book/:bookElement/v-:meapVersion/:additional?",
    reviewElementRoute: "/book/:book/:bookElement/r-:reviewVersion/:additional?",
    meapEditorRoute: "/edit/:book/:bookElement/v-:meapVersion/:additional?",
    editorRoute: "/edit/:book/:bookElement?/:additional?",
    reviewEditorRoute: "/edit/:book/:bookElement/r-:reviewVersion/:additional?",
    exerciseSuiteRoute: "/exercise-suite/:exerciseSuite?",
    videoRoute: "/video/:book",
    reviewReportRoute: "/review-report/:book/:reviewVersion?",
    catalogRoute: "/catalog/:category?",
    conceptRoute: "/concept/:category/:concept",
    scrapbookRoute: "/notebook/:path",
    scrapbookItemRoute: "/scrapbook-item/:path",
    liveCardsCollectionsRoute: "/livecards/collections",
    liveCardsCollectionRoute: "/livecards/collection/:id",
    liveCardsSpacedLearningRoute: "/livecards/spaced-repetition/:id",
    liveCardsDeckRoute: "/livecards/deck/:id",
    liveCardsUnsubscribeRoute: "/livecards/unsubscribe/:id",
    liveCardsRoute: "/livecards",
    livetestBooksRoute: "/livetest/books/:slug?",
    // discussionsV2ThreadNewRoute: "/dsc-v2/threads/new",
    // discussionsV2ThreadRoute: "/dsc-v2/thread/:id",
    // discussionsV2ProductRoute: "/dsc-v2/product/:id",
    discussionsV2Route: "/dsc-v2",
    discussionsV2ForumRoute: "/forum",
    discussionsV2ForumAiCodingRoute: "/forum/ai-coding",
    discussionsV2ForumVideoApprovalRoute: "/forum/video-approval",
    manningOnlineCorporateRoute: "/manning-online-corporate/:id?",
    wikiCategoryTermRoute: "/wiki/categories/:category/:lemma",
    browsableAnimationsRoute: "/browsable-animations/:book?/:bookElement?",
    videoEditionExperimentsRoute: "/video-edition-experiments/:book?/:bookElement?",
    inDesignPreviewRoute: "/in-design-preview/:key?/:bookElement?",
    getCurrentRouteInfo: function () {
        return this.getRouteInfo(this.getCleanRoute(document.location.hash || document.location.pathname));
    },
    getLiveTestBooksRouteInfo: function (path) {
        var route = new page.Route(this.livetestBooksRoute);
        var routeInfo = { slug: "" };
        if (route.match(path, routeInfo)) {
            return routeInfo;
        }
        return null;
    },
    getRouteInfo: function (path) {
        var currentRouteData = {
            isEditLink: path.indexOf("/edit/") >= 0
        };
        var route = new page.Route(this.meapElementRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.reviewElementRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.bookElementRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.meapEditorRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.editorRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.conceptRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.scrapbookRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.digestMeapElementRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        route = new page.Route(this.digestBookElementRoute);
        if (route.match(path, currentRouteData)) {
            return currentRouteData;
        }
        return null;
    },
    getCleanRoute: function (location) {
        var indexOfStart = location.indexOf("/");
        return indexOfStart === -1 ? location
            : location.substr(indexOfStart);
    }
};


/***/ }),

/***/ 10572:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var TitleNumberingExtractor = /** @class */ (function () {
    function TitleNumberingExtractor() {
        this.titleRegExes = [/Chapter (\d+\.?)\s*:?/, /(?:Part|Section|Lesson|Unit) (\d+\.?)/, /Appendix ([A-Z]\.?)/, /^\d+(\.)?\s+/];
        this.sectionSubsectionRegEx = /^(\d+\.?)+/;
        this.appendixSectionSubsectionRegEx = /^([A-Z]\.?(?:\d+\.?)+)/;
        this.bookElementTypeRegex = /^(?:Chapter|Part|Section|Lesson|Unit|Appendix)\s+(?:\d+\.?)/;
        this.bookElementTypeNumberingRegex = /^\d+\.?\s+/;
        this.bookElementAppendixRegex = /^[A-Z]\.?\s+/;
        this.sectionRegEx = /^((\d+|[A-Z])\.)(\d+(\.)?)/;
        this.subsectionRegEx = /^((\d+|[A-Z])\.)(\d+\.)(\d+(\.)?)/;
    }
    TitleNumberingExtractor.prototype.isSpecialPathPartInsteadOfBookElement = function (queryPart) {
        return this.isSpecialDiscussionPart(queryPart) || this.isDiscussionErrata(queryPart) || this.isSpecialCommentPart(queryPart);
    };
    TitleNumberingExtractor.prototype.isSpecialDiscussionPart = function (queryPart) {
        return queryPart == "discussion" || queryPart == "discussions";
    };
    TitleNumberingExtractor.prototype.isDiscussionErrata = function (queryPart) {
        return queryPart == "discussion-errata";
    };
    TitleNumberingExtractor.prototype.isSpecialCommentPart = function (queryPart) {
        return (queryPart || "").indexOf("comment-") == 0;
    };
    TitleNumberingExtractor.prototype.isSpecialFreeEbookOpenPart = function (queryPart) {
        return queryPart == "fb";
    };
    TitleNumberingExtractor.prototype.isChapterOrAppendix = function (title) {
        if (!title) {
            return false;
        }
        for (var _i = 0, _a = this.titleRegExes; _i < _a.length; _i++) {
            var titleRegEx = _a[_i];
            if (title.match(titleRegEx)) {
                return true;
            }
        }
        return false;
    };
    TitleNumberingExtractor.prototype.isSection = function (title) {
        if (!title) {
            return false;
        }
        return title.match(this.sectionRegEx) != null && !this.isSubsection(title);
    };
    TitleNumberingExtractor.prototype.isSubsection = function (title) {
        if (!title) {
            return false;
        }
        return title.match(this.subsectionRegEx) != null;
    };
    TitleNumberingExtractor.prototype.extractNumbering = function (title, ignoreNotStartingAtBeginning) {
        if (ignoreNotStartingAtBeginning === void 0) { ignoreNotStartingAtBeginning = false; }
        if (!title || !title.trim()) {
            return "";
        }
        var match = null;
        for (var _i = 0, _a = this.titleRegExes; _i < _a.length; _i++) {
            var titleRegEx = _a[_i];
            match = title.match(titleRegEx);
            if (match && match.length >= 2) {
                if (ignoreNotStartingAtBeginning && match.index > 0) {
                    continue;
                }
                return match[1] || match[0];
            }
        }
        match = title.match(this.appendixSectionSubsectionRegEx);
        if (match) {
            return match[0];
        }
        match = title.match(this.sectionSubsectionRegEx);
        return match ? match[0] : "";
    };
    TitleNumberingExtractor.prototype.extractSectionSubsectionNumbering = function (title) {
        if (!title) {
            return title;
        }
        for (var _i = 0, _a = [this.subsectionRegEx, this.sectionRegEx]; _i < _a.length; _i++) {
            var regex = _a[_i];
            var match = title.match(regex);
            if (match) {
                return match[0];
            }
        }
    };
    TitleNumberingExtractor.prototype.isLastChapter = function (toc, bookElementShortName) {
        if (!bookElementShortName) {
            return false;
        }
        if (bookElementShortName.indexOf("chapter") == -1) {
            return false;
        }
        var elements = [];
        var frontMatter = toc.frontMatter;
        var parts = toc.parts;
        var backMatter = toc.backMatter;
        if (frontMatter && frontMatter.length) {
            for (var i = 0; i < frontMatter.length; i++) {
                if (frontMatter[i].shortName) {
                    elements.push(frontMatter[i].shortName);
                }
            }
        }
        if (parts && parts.length) {
            for (var i = 0; i < parts.length; i++) {
                var part = parts[i];
                if (part.shortName) {
                    elements.push(part.shortName);
                }
                if (part.chapters && part.chapters.length) {
                    for (var j = 0; j < part.chapters.length; j++) {
                        if (part.chapters[j].shortName) {
                            elements.push(part.chapters[j].shortName);
                        }
                    }
                }
            }
        }
        if (backMatter && backMatter.length) {
            for (var i = 0; i < backMatter.length; i++) {
                if (backMatter[i].shortName) {
                    elements.push(backMatter[i].shortName);
                }
            }
        }
        var indexOfCurrentElement = elements.indexOf(bookElementShortName);
        if (indexOfCurrentElement < 0) {
            return false;
        }
        if (!elements[indexOfCurrentElement + 1]
            || elements[indexOfCurrentElement + 1].indexOf("chapter") == -1) {
            return true;
        }
    };
    TitleNumberingExtractor.prototype.getBookElementOrdinalFromToc = function (toc, bookElementShortName) {
        var frontMatter = toc.frontMatter;
        var parts = toc.parts;
        var backMatter = toc.backMatter;
        var bookElementCounter = 0;
        if (frontMatter && frontMatter.length) {
            for (var i = 0; i < frontMatter.length; i++, bookElementCounter++) {
                if (frontMatter[i].shortName == bookElementShortName) {
                    return bookElementCounter;
                }
            }
        }
        if (parts && parts.length) {
            for (var i = 0; i < parts.length; i++, bookElementCounter++) {
                var part = parts[i];
                if (part.shortName == bookElementShortName) {
                    return bookElementCounter;
                }
                if (part.chapters && part.chapters.length) {
                    for (var j = 0; j < part.chapters.length; j++, bookElementCounter++) {
                        if (part.chapters[j].shortName == bookElementShortName) {
                            return bookElementCounter;
                        }
                    }
                }
            }
        }
        if (backMatter && backMatter.length) {
            for (var i = 0; i < backMatter.length; i++, bookElementCounter++) {
                if (backMatter[i].shortName == bookElementShortName) {
                    return bookElementCounter;
                }
            }
        }
        return -1;
    };
    TitleNumberingExtractor.prototype.extractTitle = function (title, ignoreNotStartingAtBeginning) {
        if (ignoreNotStartingAtBeginning === void 0) { ignoreNotStartingAtBeginning = false; }
        var hasReplaced = false;
        for (var _i = 0, _a = this.titleRegExes; _i < _a.length; _i++) {
            var titleRegEx = _a[_i];
            var match = title.match(titleRegEx);
            if (match && match[0]) {
                if (ignoreNotStartingAtBeginning && match.index > 0) {
                    continue;
                }
                title = title.replace(match[0], "");
                hasReplaced = true;
                break;
            }
        }
        if (hasReplaced) {
            return title;
        }
        return title.replace(this.extractNumbering(title), "");
    };
    TitleNumberingExtractor.prototype.extractBookElementType = function (title) {
        var match = title.match(this.bookElementTypeRegex);
        if (match != null) {
            return (match[0] || "").trim();
        }
        match = title.match(this.bookElementTypeNumberingRegex);
        if (match != null) {
            return "Chapter " + (match[0] || "").trim();
        }
        match = title.match(this.bookElementAppendixRegex);
        if (match != null) {
            return "Appendix " + (match[0] || "").trim();
        }
        return "";
    };
    TitleNumberingExtractor.prototype.extractCleanSectionSubsectionTitle = function (title) {
        if (!title) {
            return title;
        }
        for (var _i = 0, _a = [this.subsectionRegEx, this.sectionRegEx]; _i < _a.length; _i++) {
            var regex = _a[_i];
            var match = title.match(regex);
            if (match) {
                return title.replace(match[0], "");
            }
        }
    };
    TitleNumberingExtractor.prototype.extractCleanBookElementTitle = function (title) {
        if (!title) {
            return title;
        }
        for (var _i = 0, _a = this.titleRegExes; _i < _a.length; _i++) {
            var regex = _a[_i];
            var match = title.match(regex);
            if (match) {
                return title.replace(match[0], "");
            }
        }
        var appendixMatch = title.match(this.bookElementAppendixRegex);
        if (appendixMatch != null) {
            return title.replace(appendixMatch[0], "");
        }
        return title;
    };
    TitleNumberingExtractor.prototype.beautifyBookElementShortName = function (bookElementShortName, firstLetterToUppercase) {
        if (firstLetterToUppercase === void 0) { firstLetterToUppercase = false; }
        if (!bookElementShortName) {
            return bookElementShortName;
        }
        var result = bookElementShortName.replace(/-/g, " ");
        if (firstLetterToUppercase) {
            result = result.replace(/./, result.toUpperCase()[0]);
        }
        return result;
    };
    return TitleNumberingExtractor;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new TitleNumberingExtractor());


/***/ }),

/***/ 3199:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "d": () => (/* binding */ ValueUtils)
/* harmony export */ });
/* harmony import */ var _EventUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67463);

var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
var shortMonthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];
var colors = [
    "#FF0000", "#00CC00", "#0000FF", "#FFA500", "#B6B604", "#800080", "#00FFFF",
    "#FF00FF", "#00FF80", "#FFC0CB", "#A52A2A", "#808000", "#000080", "#008080",
    "#FFD700", "#40E0D0", "#8B0000", "#90EE90", "#708090", "#B2B296"
];
var ValueUtilsClass = /** @class */ (function () {
    function ValueUtilsClass() {
    }
    ValueUtilsClass.prototype.formatNumber = function (num, leftLeadingDigits, rightLeadingDigits) {
        var formattedDecimals = num.toFixed(rightLeadingDigits);
        var _a = formattedDecimals.split('.'), integerPart = _a[0], decimalPart = _a[1];
        var paddedIntegerPart = integerPart.padStart(leftLeadingDigits, '0');
        return "".concat(paddedIntegerPart, ".").concat(decimalPart);
    };
    ValueUtilsClass.prototype.hash = function (str, seed) {
        if (seed === void 0) { seed = 0; }
        var h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;
        for (var i = 0, ch = void 0; i < str.length; i++) {
            ch = str.charCodeAt(i);
            h1 = Math.imul(h1 ^ ch, 2654435761);
            h2 = Math.imul(h2 ^ ch, 1597334677);
        }
        h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507);
        h1 ^= Math.imul(h2 ^ (h2 >>> 13), 3266489909);
        h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507);
        h2 ^= Math.imul(h1 ^ (h1 >>> 13), 3266489909);
        return 4294967296 * (2097151 & h2) + (h1 >>> 0);
    };
    ValueUtilsClass.prototype.getDistinctColors = function () {
        return colors;
    };
    ValueUtilsClass.prototype.isInteger = function (number) {
        return /^([1-9]\d*)$/.test(number);
    };
    ValueUtilsClass.prototype.isWordIn = function (needle, haystack) {
        if (!needle || !haystack || !needle.trim() || !haystack.trim()) {
            return false;
        }
        if (["c++", "c#", "f#"].indexOf(needle.trim().toLowerCase()) >= 0) {
            return haystack.toLowerCase().indexOf(needle.trim()) >= 0;
        }
        return haystack.match(new RegExp("\\b" + this.escapeRegExp(needle) + "\\b")) != null;
    };
    ValueUtilsClass.prototype.escapeRegExp = function (string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    };
    ValueUtilsClass.prototype.getAllIndexesOf = function (haystack, needle) {
        var index, startIndex = 0;
        var indexes = [];
        while ((index = haystack.indexOf(needle, startIndex)) > -1) {
            indexes.push(index);
            startIndex = index + needle.length;
        }
        return indexes;
    };
    ValueUtilsClass.prototype.getStartIndex = function (haystack, needle, helperText) {
        var startIndexes = this.getAllIndexesOf(haystack, needle);
        if (startIndexes.length == 0) {
            return -1;
        }
        if (startIndexes.length == 1) {
            return startIndexes[0];
        }
        if (!helperText) {
            return startIndexes[0];
        }
        var indexOfHelperText = haystack.indexOf(helperText);
        if (indexOfHelperText == -1) {
            return startIndexes[0];
        }
        else {
            indexOfHelperText += helperText.length;
            for (var i = 0; i < startIndexes.length; i++) {
                if (startIndexes[i] >= indexOfHelperText) {
                    return startIndexes[i];
                }
            }
        }
        return startIndexes[0];
    };
    ValueUtilsClass.prototype.createArrayFromItemsUpTo = function (count) {
        var items = [];
        for (var i = 0; i < count; i++) {
            items.push(i);
        }
        return items;
    };
    ValueUtilsClass.prototype.getProperties = function (obj) {
        var properties = [];
        if (!obj) {
            return properties;
        }
        for (var prop in obj) {
            properties.push(prop);
        }
        return properties;
    };
    ValueUtilsClass.prototype.isEmailValid = function (email) {
        var emailRegEx = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return emailRegEx.test(email);
    };
    ValueUtilsClass.prototype.hasNumberProperties = function (parsedData) {
        if (!parsedData) {
            return false;
        }
        try {
            var hasProperties = false;
            for (var key in parsedData) {
                hasProperties = true;
                if (typeof parsedData[key] != "number") {
                    return false;
                }
            }
            return hasProperties;
        }
        catch (e) {
            return false;
        }
    };
    ValueUtilsClass.prototype.getShortMonthName = function (date) {
        if (date == null) {
            return "";
        }
        return shortMonthNames[date.getMonth()];
    };
    ValueUtilsClass.prototype.getTodaysDateAsString = function () {
        return this.getDateAsIsoWithoutTime(new Date());
    };
    ValueUtilsClass.prototype.getDateAsIsoWithoutTime = function (date) {
        var iso = (date || new Date()).toISOString();
        var timezoneIndex = iso.indexOf("T");
        if (timezoneIndex <= 0) {
            return iso;
        }
        return iso.substring(0, timezoneIndex);
    };
    ValueUtilsClass.prototype.startsWithNumber = function (text) {
        return (text || "").match(/^\d/) != null;
    };
    ValueUtilsClass.prototype.separateNumber = function (text) {
        if (!text) {
            return text;
        }
        var match = (text || "").match(/^\d+/);
        if (match == null) {
            return text;
        }
        if (!match[0]) {
            return text;
        }
        return this.trimAndCollapseMultipleWhitespace(text.replace(match[0], match[0] + " "));
    };
    ValueUtilsClass.prototype.joinNumber = function (text) {
        if (!text) {
            return text;
        }
        var match = (text || "").match(/^\d+\s/);
        if (match == null) {
            return text;
        }
        if (!match[0]) {
            return text;
        }
        return text.replace(match[0], match[0].trim());
    };
    ValueUtilsClass.prototype.formatMoney = function (number) {
        return (number || 0).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,');
    };
    ValueUtilsClass.prototype.b64DecodeUnicode = function (str) {
        try {
            // Going backwards: from bytestream, to percent-encoding, to original string.
            return decodeURIComponent(atob(str).split('').map(function (c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
        }
        catch (e) {
            return atob(str);
        }
    };
    ValueUtilsClass.prototype.b64EncodeUnicode = function (str) {
        try {
            // First encode the string to URI component (handles UTF-8 encoding)
            // Then convert to base64
            return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {
                return String.fromCharCode(('0x' + p1));
            }));
        }
        catch (e) {
            return btoa(str); // Fallback for simple ASCII strings
        }
    };
    ValueUtilsClass.prototype.getArrayIntersection = function (arrayA, arrayB) {
        var intersection = [];
        if (arrayA == null || arrayB == null || arrayA.length == 0 || arrayB.length == 0) {
            return intersection;
        }
        for (var _i = 0, arrayA_1 = arrayA; _i < arrayA_1.length; _i++) {
            var itemA = arrayA_1[_i];
            if (arrayB.indexOf(itemA) >= 0) {
                intersection.push(itemA);
            }
        }
        return intersection;
    };
    ValueUtilsClass.prototype.groupInto = function (array, groupSize) {
        if (groupSize === void 0) { groupSize = 10; }
        var groups = [];
        if (!array || array.length == 0) {
            return groups;
        }
        var currentGroup = [];
        for (var i = 0; i < array.length; i++) {
            if (i % groupSize == 0) {
                currentGroup = [];
                groups.push(currentGroup);
            }
            currentGroup.push(array[i]);
        }
        return groups;
    };
    ValueUtilsClass.prototype.isNumber = function (value) {
        try {
            return !isNaN(+value);
        }
        catch (e) {
            return false;
        }
    };
    ValueUtilsClass.prototype.isEmptyObject = function (obj) {
        if (!obj) {
            return false;
        }
        return Object.keys(obj).length === 0 && obj.constructor === Object;
    };
    ValueUtilsClass.prototype.containsAtLeastOneOf = function (haystack, needles) {
        if (!haystack || !needles || !needles.length) {
            return false;
        }
        for (var _i = 0, needles_1 = needles; _i < needles_1.length; _i++) {
            var needle = needles_1[_i];
            if (haystack.indexOf(needle) != -1) {
                return true;
            }
        }
        return false;
    };
    ValueUtilsClass.prototype.containsAtLeastOneWordOfReturnFound = function (haystack, needles) {
        if (!haystack || !needles || !needles.length) {
            return "";
        }
        for (var _i = 0, needles_2 = needles; _i < needles_2.length; _i++) {
            var needle = needles_2[_i];
            if (this.isWordIn(needle, haystack)) {
                return needle;
            }
        }
        return "";
    };
    ValueUtilsClass.prototype.getTimeoutPromise = function (timeout) {
        if (timeout === void 0) { timeout = 500; }
        return new Promise(function (resolve) {
            setTimeout(resolve, timeout);
        });
    };
    ValueUtilsClass.prototype.isToday = function (date) {
        if (date == null || !(date instanceof Date)) {
            return false;
        }
        var today = new Date();
        return date.getDate() == today.getDate()
            && date.getMonth() == today.getMonth()
            && date.getFullYear() == today.getFullYear();
    };
    ValueUtilsClass.prototype.isThisWeek = function (date) {
        if (date == null || !(date instanceof Date)) {
            return false;
        }
        var today = new Date();
        var differenceInDays = this.getDifferenceInDays(date, today);
        return differenceInDays <= 7;
    };
    ValueUtilsClass.prototype.getDifferenceInDays = function (firstDate, secondDate) {
        if (firstDate == null || secondDate == null) {
            return 0;
        }
        var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
        return Math.round(Math.abs((firstDate.getTime() - secondDate.getTime()) / (oneDay)));
    };
    ValueUtilsClass.prototype.getDateFromString = function (dateString) {
        var date = new Date(dateString);
        try {
            if (date == "Invalid Date" && dateString) {
                var separatorIndex = dateString.indexOf("T");
                if (separatorIndex > 0) {
                    date = new Date(dateString.substring(0, separatorIndex));
                }
            }
        }
        catch (e) {
            console.log("Error getting date from string", e);
        }
        return date;
    };
    ValueUtilsClass.prototype.getDateAsIsoString = function (date) {
        if (!date) {
            return "";
        }
        try {
            return date.toISOString().split('T')[0];
        }
        catch (e) {
            console.log(e);
            return "";
        }
    };
    ValueUtilsClass.prototype.getDateAsString = function (date) {
        if (!date) {
            return "";
        }
        var dateMonth = date.getMonth();
        var dateYear = date.getFullYear();
        if (Number.isNaN(dateMonth) || Number.isNaN(dateYear)) {
            return "";
        }
        return "".concat(monthNames[dateMonth], " ").concat(dateYear);
    };
    ValueUtilsClass.prototype.insertItemAtPosition = function (array, item, index) {
        if (!array || !array.splice) {
            return;
        }
        array.splice(index || 0, 0, item);
    };
    ValueUtilsClass.prototype.removeItemFromArray = function (array, item) {
        if (!array) {
            return null;
        }
        var itemIndex = array.indexOf(item);
        if (itemIndex >= 0) {
            return array.splice(itemIndex, 1);
        }
        return null;
    };
    ValueUtilsClass.prototype.turnIntoMapByProperty = function (array, itemProperty) {
        var map = {};
        for (var _i = 0, array_1 = array; _i < array_1.length; _i++) {
            var item = array_1[_i];
            map[item[itemProperty]] = item;
        }
        return map;
    };
    ValueUtilsClass.prototype.getUniqueStringItems = function (array) {
        var unique = [];
        var map = {};
        for (var _i = 0, array_2 = array; _i < array_2.length; _i++) {
            var item = array_2[_i];
            if (!map[item]) {
                unique.push(item);
                map[item] = true;
            }
        }
        return unique;
    };
    ValueUtilsClass.prototype.getUniqueNumbers = function (array) {
        var unique = [];
        var map = {};
        for (var _i = 0, array_3 = array; _i < array_3.length; _i++) {
            var item = array_3[_i];
            if (!map[item]) {
                unique.push(item);
                map[item] = true;
            }
        }
        return unique;
    };
    ValueUtilsClass.prototype.getUniqueEntries = function (array, itemProperty) {
        var entriesMap = this.turnIntoMapByProperty(array, itemProperty);
        var uniqueEntries = [];
        for (var prop in entriesMap) {
            uniqueEntries.push(entriesMap[prop]);
        }
        return uniqueEntries;
    };
    ValueUtilsClass.prototype.getRandomArrayItem = function (array) {
        if (!array || array.length === 0) {
            return null;
        }
        return array[Math.floor(Math.random() * array.length)];
    };
    ValueUtilsClass.prototype.getRandomNumber = function (lowend, highend) {
        return Math.floor(Math.random() * highend) + lowend;
    };
    ValueUtilsClass.prototype.getMonthAndYear = function (date) {
        if (!date) {
            return null;
        }
        var month = date.toLocaleString("en-us", { month: "long" });
        if (!date.getFullYear) {
            debugger;
        }
        return "".concat(month, " ").concat(date.getFullYear());
    };
    ValueUtilsClass.prototype.getAllRegExMatches = function (regEx, value) {
        regEx = new RegExp(regEx);
        var results = [];
        var found = [];
        while ((found = regEx.exec(value)) !== null) {
            results.push(found[0]);
        }
        return results;
    };
    ValueUtilsClass.prototype.flatten = function (arrays) {
        return [].concat.apply([], arrays);
    };
    ValueUtilsClass.prototype.insertAtPosition = function (base, substring, index) {
        if (!base) {
            return substring;
        }
        return base.slice(0, index) + substring + base.slice(index);
    };
    ValueUtilsClass.prototype.trimAndCollapseMultipleWhitespace = function (text) {
        return text.trim().replace(/\s{2,}/g, ' ');
    };
    ValueUtilsClass.prototype.trimEnd = function (base, trimChar) {
        if (trimChar === void 0) { trimChar = " "; }
        if (!base) {
            return base;
        }
        var i = base.length - 1;
        while (i >= 0 && base.charAt(i) == trimChar) {
            i--;
        }
        return base.substring(0, i + 1);
    };
    ValueUtilsClass.prototype.mapToArray = function (map) {
        var array = [];
        for (var prop in map) {
            if (map.hasOwnProperty(prop)) {
                array.push(map[prop]);
            }
        }
        return array;
    };
    ValueUtilsClass.prototype.asyncForIn = function (map, itemCallback, doneCallback, waitingPeriod) {
        if (waitingPeriod === void 0) { waitingPeriod = 1; }
        if (!map) {
            doneCallback && doneCallback();
        }
        var properties = [];
        for (var prop in map) {
            if (map.hasOwnProperty(prop)) {
                properties.push({ key: prop, value: map[prop] });
            }
        }
        this.asyncEach(properties, function (item) { return itemCallback && itemCallback(item.key, item.value); }, function () { return doneCallback && doneCallback(); }, waitingPeriod);
    };
    ValueUtilsClass.prototype.asyncEach = function (items, eachCallback, doneCallback, waitingPeriod) {
        if (waitingPeriod === void 0) { waitingPeriod = 1; }
        if (!items || items.length == 0) {
            doneCallback && doneCallback();
        }
        var currentIndex = 0;
        var isDone = false;
        (function processNext() {
            if (isDone) {
                return;
            }
            var item = items[currentIndex++];
            if (item) {
                eachCallback && eachCallback(item);
                _EventUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].setTimeout */ .Z.setTimeout(processNext, waitingPeriod);
            }
            else {
                isDone = true;
                doneCallback && doneCallback();
            }
        })();
    };
    ValueUtilsClass.prototype.randomizeArray = function (array) {
        if (!array || array.length == null) {
            return;
        }
        var currentIndex = array.length, temporaryValue, randomIndex;
        // While there remain elements to shuffle...
        while (0 !== currentIndex) {
            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            // And swap it with the current element.
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }
        return array;
    };
    ValueUtilsClass.prototype.endsWithOneOf = function (haystack, needles, ignoreCase) {
        if (ignoreCase === void 0) { ignoreCase = false; }
        if (!haystack) {
            return false;
        }
        if (!needles || !needles.length) {
            return false;
        }
        for (var _i = 0, needles_3 = needles; _i < needles_3.length; _i++) {
            var needle = needles_3[_i];
            if (this.endsWith(haystack, needle, ignoreCase)) {
                return true;
            }
        }
        return false;
    };
    ValueUtilsClass.prototype.endsWith = function (subjectString, searchString, ignoreCase, position) {
        if (ignoreCase === void 0) { ignoreCase = false; }
        if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
            position = subjectString.length;
        }
        if (ignoreCase) {
            subjectString = (subjectString || "").toLowerCase();
            searchString = (searchString || "").toLowerCase();
        }
        position -= searchString.length;
        var lastIndex = subjectString.lastIndexOf(searchString, position);
        return lastIndex !== -1 && lastIndex === position;
    };
    ValueUtilsClass.prototype.turnToOldFormatShortName = function (s) {
        if (!s) {
            return s;
        }
        return this.capitalizeFirstLetter(s.replace("-", " "));
    };
    ValueUtilsClass.prototype.capitalizeFirstLetter = function (original) {
        if (!original == null) {
            return original;
        }
        return original.substring(0, 1).toUpperCase() + original.substring(1);
    };
    ValueUtilsClass.prototype.areApproximatelyEqual = function (v1, v2, epsilon) {
        if (epsilon === void 0) { epsilon = 0.001; }
        return Math.abs(v1 - v2) < epsilon;
    };
    ValueUtilsClass.prototype.getWithoutLastWordOrFullIfSingleWord = function (text) {
        if (!text) {
            return text;
        }
        var lastIndex = text.lastIndexOf(" ");
        return lastIndex != -1 ? text.substring(0, lastIndex) : text;
    };
    ValueUtilsClass.prototype.getLastWordOrEmptyIfSingleWord = function (text) {
        if (!text) {
            return text;
        }
        var lastIndex = text.lastIndexOf(" ");
        return lastIndex != -1 ? text.substring(lastIndex) : "";
    };
    ValueUtilsClass.prototype.getWords = function (text) {
        var words = [];
        if (!text || !text.match) {
            return words;
        }
        return text.match(/\b(\w+)\b/g);
    };
    ValueUtilsClass.prototype.getSubsetStartingIndex = function (mainArray, subsetArray, startIndex) {
        if (startIndex === void 0) { startIndex = 0; }
        // Loop through each element in the main array up to the point where the subset can still fit
        for (var i = startIndex; i <= mainArray.length - subsetArray.length; i++) {
            // Assume the subset matches starting at index i
            var matchFound = true;
            // Check each element in the subset
            for (var j = 0; j < subsetArray.length; j++) {
                if (mainArray[i + j] !== subsetArray[j]) {
                    matchFound = false;
                    break;
                }
            }
            // If all elements matched, return the starting index
            if (matchFound) {
                return i;
            }
        }
        // Return -1 if no match is found
        return -1;
    };
    ValueUtilsClass.prototype.getNumberOfWords = function (text) {
        if (!text || !text.match) {
            return 0;
        }
        var match = text.match(/\b(\w+)\b/g);
        if (match == null) {
            return 0;
        }
        return match.length;
    };
    ValueUtilsClass.prototype.roundToTwoDecimalPoints = function (num) {
        return Math.round(num * 100) / 100;
    };
    ValueUtilsClass.prototype.floorToTwoDecimalPoints = function (num) {
        return Math.floor(num * 100) / 100;
    };
    ValueUtilsClass.prototype.arrayIntersection = function (firstArray, secondArray) {
        var intersection = [];
        if (firstArray == null || firstArray.length == 0
            || secondArray == null || secondArray.length == 0) {
            return intersection;
        }
        for (var _i = 0, firstArray_1 = firstArray; _i < firstArray_1.length; _i++) {
            var item = firstArray_1[_i];
            if (secondArray.indexOf(item) >= 0) {
                intersection.push(item);
            }
        }
        return intersection;
    };
    ValueUtilsClass.prototype.arrayDifference = function (firstArray, secondArray) {
        var diff = [];
        if (firstArray == null || firstArray.length == 0) {
            return diff;
        }
        if (secondArray == null || secondArray.length == 0) {
            return diff.concat(firstArray);
        }
        for (var _i = 0, firstArray_2 = firstArray; _i < firstArray_2.length; _i++) {
            var item = firstArray_2[_i];
            if (secondArray.indexOf(item) == -1) {
                diff.push(item);
            }
        }
        return diff;
    };
    ValueUtilsClass.prototype.formatTimeInSeconds = function (seconds) {
        var hrs = ~~(seconds / 3600);
        var mins = ~~((seconds % 3600) / 60);
        var secs = seconds % 60;
        // Output like "1:01" or "4:03:59" or "123:03:59"
        var ret = "";
        if (hrs > 0) {
            ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
        }
        ret += "" + mins + ":" + (secs < 10 ? "0" : "");
        ret += "" + secs;
        return ret;
    };
    ValueUtilsClass.prototype.escapeHtml = function (unsafe) {
        if (!unsafe) {
            return unsafe;
        }
        return unsafe.replace(/&/g, "&amp;").replace(/</g, "&lt;")
            .replace(/>/g, "&gt;").replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    };
    ValueUtilsClass.prototype.extractDataProperties = function (obj) {
        if (!obj) {
            return obj;
        }
        if (!(obj instanceof Object)) {
            return obj;
        }
        var onlyData = {};
        for (var prop in obj) {
            if (!(obj[prop] instanceof Function)) {
                onlyData[prop] = obj[prop];
            }
        }
        return onlyData;
    };
    ValueUtilsClass.prototype.numberWithCommas = function (number) {
        try {
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        catch (e) {
            return number;
        }
    };
    ValueUtilsClass.prototype.getCurrentTimezone = function () {
        try {
            return Intl.DateTimeFormat().resolvedOptions().timeZone;
        }
        catch (e) {
            return "";
        }
    };
    ValueUtilsClass.prototype.countOccurences = function (needle, haystack) {
        if (!needle || !haystack) {
            return 0;
        }
        var count = 0, currentPosition = 0, step = needle.length;
        while (true) {
            currentPosition = haystack.indexOf(needle, currentPosition);
            if (currentPosition < 0) {
                break;
            }
            count++;
            currentPosition += step;
        }
        return count;
    };
    return ValueUtilsClass;
}());
var ValueUtils = new ValueUtilsClass();


/***/ }),

/***/ 30546:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "J": () => (/* binding */ VisibilityUtils)
/* harmony export */ });
/* harmony import */ var _DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83000);

var VisibilityUtilsClass = /** @class */ (function () {
    function VisibilityUtilsClass() {
    }
    VisibilityUtilsClass.prototype.isVisible = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (document.visibilityState) {
                resolve(document.visibilityState == "visible");
            }
            else {
                _this.getSource().then(function (_a) {
                    var VisibilityFallback = _a.VisibilityFallback;
                    return resolve(VisibilityFallback.isVisible());
                })
                    .catch(function (e) { return resolve(true); });
            }
        });
    };
    VisibilityUtilsClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = _DynamicCodeLoader__WEBPACK_IMPORTED_MODULE_0__/* .DynamicCodeLoader.importWebpackModuleWithRetry */ .j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    VisibilityUtilsClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | visibilityFallback */ 9054).then(__webpack_require__.bind(__webpack_require__, 68772));
    };
    return VisibilityUtilsClass;
}());
var VisibilityUtils = new VisibilityUtilsClass();


/***/ }),

/***/ 93292:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87876);

var serverUrl = "";
var loginUrl = "";
var awsPublic = "";
var awsPrivate = "";
var livevideoUrl = "";
var IS_ON_DEVICE =  false || undefined;
var domain =  false ? 0 : ".manning.com";
var marketplaceBaseUrl = "", liveBookBaseUrl = "", liveVideoBaseUrl = "", marketplaceBaseImageUrl = "", liveBookBaseImageUrl = "", livebookCdn = "";
var marketplaceProductionBaseUrl = "https://www.manning.com/";
var marketplaceS3Url = "https://manning-content.s3.amazonaws.com";
var initialPageLocation = getInitialPageLocation();
function getInitialPageLocation() {
    var location = document.location.href;
    var hashIndex = document.location.href.indexOf("#");
    if (hashIndex < 0) {
        return location;
    }
    return location.substring(0, hashIndex);
}
var platform = _DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].getPlatformAndOsString */ .Z.getPlatformAndOsString();
if (false) {}
else if (true) {
    serverUrl = "livebook-qa.manning.com";
    awsPublic = "d1557jsc07ldhk.cloudfront.net";
    awsPrivate = "d2tbpuxl0hcgum.cloudfront.net";
    livevideoUrl = "https://livevideo-be-dev.manning.com";
    marketplaceBaseUrl = "https://www-qa.manning.com/";
    liveBookBaseUrl = "https://livebook-qa.manning.com/";
    livebookCdn = "https://d1ao6g929skqrx.cloudfront.net/";
    liveVideoBaseUrl = "https://livevideo-qa.manning.com/";
    marketplaceBaseImageUrl = "https://images-qa.manning.com/";
    liveBookBaseImageUrl = "https://d1ao6g929skqrx.cloudfront.net/";
    loginUrl = "https://".concat(serverUrl, "/auth/providerSignIn");
}
else {}
var WebUtils = /** @class */ (function () {
    function WebUtils() {
        this.platform = platform;
        this.marketplaceBaseUrl = marketplaceBaseUrl;
        this.liveBookBaseUrl = liveBookBaseUrl;
        this.liveVideoBaseUrl = liveVideoBaseUrl;
        this.marketplaceBaseImageUrl = marketplaceBaseImageUrl;
        this.liveBookBaseImageUrl = liveBookBaseImageUrl;
        this.awsPublicUrl = "https://".concat(awsPublic); //`${this.getProtocol()}${awsPublic}`;
        this.awsPrivateUrl = "https://".concat(awsPrivate); //`${this.getProtocol()}${awsPublic}`;
    }
    WebUtils.prototype.getProtocol = function () {
        if (IS_ON_DEVICE && (1 || 0)) {
            return "https://";
        }
        return document.location.href.startsWith("https") ? "https://" : "http://";
    };
    WebUtils.prototype.getServerUrl = function () {
        if (false) {}
        return serverUrl;
    };
    WebUtils.prototype.getAppRoot = function () {
        return "".concat(this.getProtocol()).concat(this.getServerUrl(), "/");
    };
    WebUtils.prototype.getLivebookCdn = function () {
        if (_DeviceUtils__WEBPACK_IMPORTED_MODULE_0__/* ["default"].isApp */ .Z.isApp()) {
            return "";
        }
        return livebookCdn;
    };
    WebUtils.prototype.getLivebookBaseUrl = function () {
        return liveBookBaseUrl;
    };
    WebUtils.prototype.getLivevideoBaseUrl = function () {
        return liveVideoBaseUrl;
    };
    WebUtils.prototype.navigateToLocation = function (location) {
        if (location.startsWith(".")) {
            location = location.substring(1);
        }
        page.redirect(location);
    };
    WebUtils.prototype.urlExists = function (url) {
        return new Promise(function (resolve, reject) {
            $.ajax({ url: url, type: "HEAD", dataType: "text" })
                .done(function (_) {
                resolve(true);
            })
                .fail(function (_) {
                resolve(false);
            });
        });
    };
    WebUtils.prototype.getFromPublicS3 = function (bookShortName, meapVersion, file, folder, doneCallback, failCallback) {
        return this.getFromS3(this.getPublicAwsUrl("/".concat(bookShortName, "/").concat(meapVersion != null && meapVersion > 0 ? "v-".concat(meapVersion, "/") : "").concat(folder || "").concat(folder ? "/" : "").concat(file)), doneCallback, failCallback, false);
    };
    WebUtils.prototype.getFromPrivateS3 = function (bookShortName, meapVersion, file, folder, doneCallback, failCallback) {
        return this.getFromS3(this.getPublicAwsUrl("/".concat(bookShortName, "/").concat(meapVersion != null && meapVersion > 0 ? "v-".concat(meapVersion, "/") : "").concat(folder, "/").concat(file)), doneCallback, failCallback, false);
    };
    WebUtils.prototype.getFromS3 = function (url, doneCallback, failCallback, json) {
        if (json === void 0) { json = true; }
        $.ajax({
            url: url,
            dataType: json ? "json" : "text",
            crossDomain: true,
        })
            .done(function (data) { return doneCallback(data); })
            .fail(function (error) { return failCallback(error); });
    };
    WebUtils.prototype.attemptLogin = function (url, doneCallback, failCallback, data, json) {
        if (json === void 0) { json = true; }
        $.ajax({
            url: url,
            type: "post",
            data: JSON.stringify(data) || {},
            dataType: json ? "json" : "text",
            contentType: json
                ? "application/json"
                : "application/x-www-form-urlencoded",
            crossDomain: this.isCrossDomain(url),
            xhrFields: {
                withCredentials: true,
            },
        })
            .done(function (data) { return doneCallback(data); })
            .fail(function (error) { return failCallback(error); });
    };
    WebUtils.prototype.getFromOurBackend = function (url, doneCallback, failCallback, data, json, async, isRecursive, sendJSON) {
        if (json === void 0) { json = true; }
        if (async === void 0) { async = true; }
        if (isRecursive === void 0) { isRecursive = false; }
        if (sendJSON === void 0) { sendJSON = false; }
        this.interactWithOurBackend(url, "get", doneCallback, failCallback, data, json, async, isRecursive, sendJSON);
    };
    WebUtils.prototype.postToOurBackend = function (url, doneCallback, failCallback, data, json, async, isRecursive, sendJSON) {
        if (json === void 0) { json = true; }
        if (async === void 0) { async = true; }
        if (isRecursive === void 0) { isRecursive = false; }
        if (sendJSON === void 0) { sendJSON = false; }
        return this.interactWithOurBackend(url, "post", doneCallback, failCallback, data, json, async, isRecursive, sendJSON);
    };
    WebUtils.prototype.interactWithOurBackend = function (url, method, doneCallback, failCallback, data, recieveJSON, async, isRecursive, sendJSON) {
        if (recieveJSON === void 0) { recieveJSON = true; }
        if (async === void 0) { async = true; }
        if (isRecursive === void 0) { isRecursive = false; }
        if (sendJSON === void 0) { sendJSON = false; }
        data = Object.assign({}, data, { platform: this.platform });
        var config = {
            url: url,
            type: method,
            async: async,
            data: sendJSON ? JSON.stringify(data || {}) : data || {},
            dataType: recieveJSON ? "json" : "text",
            crossDomain: this.isCrossDomain(url),
            xhrFields: {
                withCredentials: true,
            },
        };
        if (sendJSON) {
            config.contentType = "application/json; charset=utf-8";
        }
        return $.ajax(config)
            .done(function (data) { return doneCallback(data); })
            .fail(function (error) {
            failCallback(error);
        });
    };
    WebUtils.prototype.isCrossDomain = function (url) {
        return true;
    };
    WebUtils.prototype.getAbsoluteUrl = function (relativeUrl) {
        return "".concat(this.getAppRoot()).concat(relativeUrl);
    };
    WebUtils.prototype.getClientAbsoluteUrl = function (relativeUrl) {
        return "".concat(IS_ON_DEVICE ? "https://livebook.manning.com" : document.location.origin).concat(relativeUrl);
    };
    WebUtils.prototype.getPublicAwsUrl = function (relativeUrl) {
        return "".concat(this.getAwsPublic()).concat(relativeUrl);
    };
    WebUtils.prototype.getPrivateAwsUrl = function (relativeUrl) {
        return "".concat(this.getAwsPrivate()).concat(relativeUrl);
    };
    WebUtils.prototype.getLiveVideoUrl = function (relativeUrl) {
        return "".concat(liveVideoBaseUrl).concat(!liveVideoBaseUrl.endsWith("/") ? "/" : "").concat(relativeUrl);
    };
    WebUtils.prototype.getBookCoverUrl = function (bookShortName) {
        return this.getPublicAwsUrl("/".concat(bookShortName, "/Figures/cover.jpg"));
    };
    WebUtils.prototype.getConceptUrl = function (category, concept) {
        return this.getPublicAwsUrl("/concepts/".concat(category, "/").concat(concept, ".html"));
    };
    WebUtils.prototype.getBookFigureUrl = function (bookShortName, figure, meapVersion) {
        if (meapVersion === void 0) { meapVersion = ""; }
        return this.getPublicAwsUrl("/".concat(bookShortName, "/").concat(meapVersion ? "v-".concat(meapVersion, "/") : "", "Figures/").concat(figure));
    };
    WebUtils.prototype.getInteractiveCodeUrl = function (bookShortName, relativeUrl) {
        return this.getPublicAwsUrl("/".concat(bookShortName, "/interactive/").concat(relativeUrl));
    };
    WebUtils.prototype.getMarketplaceProductCoverUrl = function (relativePath) {
        return "".concat(marketplaceBaseImageUrl, "180/225/resize/").concat(relativePath);
    };
    WebUtils.prototype.getMarketplaceHiqhQualityProductCoverUrl = function (relativePath) {
        return "".concat(marketplaceBaseImageUrl, "720/960/resize/").concat(relativePath);
    };
    WebUtils.prototype.getMarketplaceImageUrl = function (relativePath) {
        return "".concat(marketplaceBaseImageUrl).concat(relativePath);
    };
    WebUtils.prototype.getMarketplaceProductUrl = function (slug, isLiveVideo) {
        return "".concat(marketplaceBaseUrl).concat(!marketplaceBaseUrl.endsWith("/") ? "/" : "").concat(isLiveVideo ? "livevideo" : "books", "/").concat(slug);
    };
    WebUtils.prototype.getMarketplaceUrl = function (relativeLink) {
        return "".concat(marketplaceBaseUrl).concat(!marketplaceBaseUrl.endsWith("/") ? "/" : "").concat(relativeLink);
    };
    WebUtils.prototype.getProductionMarketplaceUrl = function (relativeUrl) {
        return "".concat(marketplaceProductionBaseUrl).concat(relativeUrl);
    };
    WebUtils.prototype.isAbsoluteUrl = function (url) {
        if (!url) {
            return false;
        }
        return url.startsWith("http://") || url.startsWith("https://");
    };
    WebUtils.prototype.getMarketplaceS3Url = function (relativeUrl) {
        return "".concat(marketplaceS3Url, "/").concat(relativeUrl);
    };
    WebUtils.prototype.getBookUrlFromBook = function (bookOrBookSlug) {
        if (typeof bookOrBookSlug === "string") {
            return this.getBookUrl(bookOrBookSlug);
        }
        return bookOrBookSlug ? this.getBookUrl(bookOrBookSlug.slug) : "";
    };
    WebUtils.prototype.getBookUrl = function (bookSlug) {
        return IS_ON_DEVICE
            ? encodeURI("#!/book/".concat(bookSlug))
            : encodeURI("/book/".concat(bookSlug));
    };
    WebUtils.prototype.getAbsoluteBookElementUrl = function (bookSlug, bookElementShortName, meapVersion) {
        var url = this.getAbsoluteUrl(this.getBookElementUrl(bookSlug, bookElementShortName, meapVersion).substring(1));
        return url;
    };
    WebUtils.prototype.getBookElementUrl = function (bookSlug, bookElementShortName, meapVersion, reviewVersion) {
        return this.getBookPageUrl("book", bookSlug, bookElementShortName, meapVersion, reviewVersion);
    };
    WebUtils.prototype.getBookExercisesElementUrl = function (bookSlug, bookElementShortName, meapVersion, reviewVersion) {
        return this.getBookPageUrl("exercises", bookSlug, bookElementShortName, meapVersion, reviewVersion);
    };
    WebUtils.prototype.getBookPageUrl = function (pageType, bookSlug, bookElementShortName, meapVersion, reviewVersion) {
        var url = "/book/".concat(bookSlug, "/");
        if (IS_ON_DEVICE) {
            url = "#!" + url;
        }
        if (!bookElementShortName) {
            return url;
        }
        if (bookElementShortName || meapVersion) {
            if (!bookElementShortName) {
                bookElementShortName = "chapter-1";
            }
            url += bookElementShortName + "/";
            if (meapVersion) {
                url += "v-".concat(meapVersion, "/");
            }
            if (reviewVersion) {
                url += "r-".concat(reviewVersion, "/");
            }
        }
        return encodeURI(url);
    };
    WebUtils.prototype.getAwsPublic = function () {
        return this.awsPublicUrl;
    };
    WebUtils.prototype.getAwsPrivate = function () {
        return this.awsPrivateUrl;
    };
    WebUtils.prototype.clearCookies = function () {
        try {
            if (false) {}
            else if (false) {}
        }
        catch (e) {
            console.log("Clear cookies error:", e);
        }
        this.deleteCookie("TGC");
        this.deleteCookie("JSESSIONID");
        this.deleteCookie("m-lb-rm");
    };
    WebUtils.prototype.deleteCookie = function (cookieName, path) {
        if (path === void 0) { path = "/"; }
        document.cookie = "".concat(cookieName, "=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=").concat(domain, "; path=").concat(path);
    };
    WebUtils.prototype.deleteCordovaCookie = function () {
        cookieMaster.clearCookies(function () { return console.log("Cookies have been cleared"); }, function () { return console.log("Cookies could not be cleared"); });
    };
    WebUtils.prototype.hasCookie = function (cookieName) {
        return (document.cookie || "").indexOf(cookieName) >= 0;
    };
    WebUtils.prototype.hasSsoCookie = function () {
        return this.hasCookie("CASTGC");
    };
    WebUtils.prototype.getCookie = function (name) {
        var dc, prefix, begin, end;
        dc = document.cookie;
        prefix = name + "=";
        begin = dc.indexOf("; " + prefix);
        end = dc.length; // default to end of the string
        // found, and not in first position
        if (begin !== -1) {
            // exclude the "; "
            begin += 2;
        }
        else {
            //see if cookie is in first position
            begin = dc.indexOf(prefix);
            // not found at all or found as a portion of another cookie name
            if (begin === -1 || begin !== 0)
                return null;
        }
        // if we find a ";" somewhere after the prefix position then "end" is that position,
        // otherwise it defaults to the end of the string
        if (dc.indexOf(";", begin) !== -1) {
            end = dc.indexOf(";", begin);
        }
        return decodeURI(dc.substring(begin + prefix.length, end)).replace(/"/g, "");
    };
    WebUtils.prototype.isAdditionalInstruction = function (additionalInstruction) {
        return (localStorage &&
            localStorage.getItem("additionalInstruction") == additionalInstruction);
    };
    WebUtils.prototype.addAdditionalInstructionToExecuteAfterReload = function (additionalInstruction) {
        localStorage &&
            localStorage.setItem("additionalInstruction", additionalInstruction);
    };
    WebUtils.prototype.removeAdditionalInstruction = function () {
        localStorage && localStorage.removeItem("additionalInstruction");
    };
    WebUtils.prototype.reloadPage = function () {
        /*if(DeviceUtils.isApp()){
                location.href = initialPageLocation;
            }
            else {*/
        location.reload();
        //}y
    };
    WebUtils.prototype.getInitialPageLocation = function () {
        return initialPageLocation;
    };
    WebUtils.prototype.getLoginUrl = function () {
        return loginUrl;
    };
    return WebUtils;
}());
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new WebUtils());


/***/ }),

/***/ 28721:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ esm_browser_v4)
});

;// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/native.js
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
/* harmony default export */ const esm_browser_native = ({
  randomUUID
});
;// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/rng.js
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}
;// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/stringify.js

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!validate(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ const esm_browser_stringify = ((/* unused pure expression or super */ null && (stringify)));
;// CONCATENATED MODULE: ./node_modules/uuid/dist/esm-browser/v4.js




function v4(options, buf, offset) {
  if (esm_browser_native.randomUUID && !buf && !options) {
    return esm_browser_native.randomUUID();
  }

  options = options || {};
  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return unsafeStringify(rnds);
}

/* harmony default export */ const esm_browser_v4 = (v4);

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "" + ({"168":"pdfPreviewPage","199":"unlockManager","348":"libraryPage","379":"landingPage","482":"downloadProgressButtonsModule","497":"siteMenu","538":"scrapbookManager","602":"LiveTestBookPage","605":"premadeSearchManager","679":"esprima","703":"reviewModule","810":"tocIndexMenu","873":"userProfile","877":"conceptPage","938":"flashcards","964":"termCleanerModule","1018":"newDiscussionModule","1134":"demoDev","1210":"chapterTermOverviewModule","1265":"addToCart","1332":"contentFeedbackFs","1428":"tryItManager","1543":"klipse","1569":"exercises","1637":"peopleAlsoAsk","1844":"readerTracking","1858":"catalogModule","1928":"browsableAnimations","2009":"FCardsPage","2063":"offlineOperationsModal","2340":"llmPromptsModule","2453":"review-report","2528":"codemirror","2637":"linkPreviewer","2653":"digestPage","2735":"searchFallbackModule","2780":"creditInfo","2863":"promoSpinner","2877":"freePreviewManager","3031":"notesModule","3078":"videoDigestPage","3079":"promoManager","3122":"videoModule","3153":"updateModule","3247":"manningOnlineBetaPage","3373":"editorPage","3435":"pdfModule","3560":"searchCatalogModule","3737":"synchronizerProviderModule","3844":"textAddendumModule","3857":"activityManager","3950":"audioModule","4015":"videoPage","4019":"tryItPage","4037":"paywallManager","4160":"manningMenu","4168":"userActionTrackerManager","4345":"bookPage","4358":"aboutModule","4360":"epubPage","4744":"downloadManager","4775":"micropurchase","4841":"DiscussionsV2Page","5090":"exerciseSuitePage","5137":"tourModule","5201":"bookContentProviderFs","5225":"errorReportManagerModule","5465":"bookContentProviderWeb","5512":"textMarginaliaModule","5536":"feedbackModule","5601":"searchConfigPage","5681":"bookResourcesMenu","5718":"shoppingCartMenuModule","5920":"intersectionFallback","5962":"runnableListingsModule","6276":"manny","6539":"textAddonsModule","6702":"shoppingCartModule","6746":"booksModule","6879":"Score","6910":"wishListManager","6955":"proximity","7082":"termViewerEmphasizer","7158":"simplifiedReadingListProviderModule","7186":"discussionModule","7227":"loginManager","7318":"contentFeedbackWeb","7343":"manningOnlinePage","7438":"annotatedListingsModule","7500":"videoEditionsExperiments","7522":"faqModule","7549":"inDesignPreview","7562":"knowledgeGraph","7570":"simplifiedReadingListManagerModule","7611":"helpButtonModule","7651":"wikiTermInspectorManager","7683":"unlockModal","7697":"listingEnvironmentModule","8000":"meapModalModule","8094":"freeEbooksUpsellModule","8166":"manningOnlineCorporate","8222":"catalogPage","8302":"unlockText","8365":"manningOnlineGreetingModal","8371":"externalIframesModule","8432":"zoomableImageModule","8494":"discussionParagraphNotificationsModule","8500":"manningOnlineSurveyPage","8525":"appImpressionsModule","8691":"notesMenuModule","8721":"assistant","8728":"amazonReview","8743":"LiveTestBooksPage","8774":"settingsMenu","8871":"FCardsDeckModal","8931":"markedEntriesTaggerModule","9054":"visibilityFallback","9228":"simpleSignupManager","9236":"webImpressionsModule","9246":"termViewer","9307":"textSelectionModule","9338":"getAppModule","9375":"testYourself","9446":"profileImageUpload","9624":"scrapbookPage","9694":"newSearchModule","9739":"printBookPage","9946":"progressBarModule"}[chunkId] || chunkId) + "2.chunk.js?" + {"55":"cbec14104f71d840b7ff","82":"6f9cb58ae57ba50038c7","162":"a54a1dfc0241bae0d89b","167":"be5852d35f4e5d4ab8fd","168":"b7118d398e7b23823f83","183":"85d75e9df8152b7747e9","199":"286d5cf692e8d942b393","221":"2f4cdd480267c03a3d5e","229":"836c5b68cd3be07411ef","233":"6617c386ec8a8c0bc49e","271":"2e6695d6c945bde75519","296":"d4744e7914c37478b8fa","348":"077cb14f28b911a3790e","367":"cb7c404286af3a44cac9","379":"bdbc3dfa4fea4c5e430b","482":"a8d88cc7d31487d1c74d","497":"714b837dc0b1b94092ee","528":"c9bbbb832f1a095dda73","538":"6c1f9ddb1a6625dcc21e","546":"a22077fbe34d8fdff769","550":"813251b7ba2735ee38be","602":"5ad35523330d9c4f53a0","605":"8d42df79d3cff67c6bb0","611":"02a74f0d646b5c3b1646","619":"6d6025255a96e272692c","649":"bec5d1d77b107ae37db8","679":"e8ec5c56383d141c9506","688":"5905c0c7e5a5d97693ca","703":"329da825b1243f636ca9","771":"91ba00ef73e9fa4a563e","780":"b2c2933f10fb97c0b810","810":"ff234b089cb65c66c898","841":"4801ef28ff11a5d34e52","873":"dc7ff1d315937c28ebd0","877":"39ca7ffc2bc9a4cbffc4","897":"1253c5062e5446fe8159","938":"765c222aad2f4c2e609b","964":"36252276371c9bfea806","982":"316e4f37e20566f42dab","1018":"5b0dffcf0ad2d2aef78e","1029":"db48d81b48edcd2ec44f","1042":"51e79e4b3d68547d7061","1048":"60e4da865464a7405e20","1110":"47079a126de09ede01af","1134":"be83804715f81609c532","1147":"9891780edfc035628b6c","1151":"9a5c4fa9d46723fc98b8","1183":"97283fac60c2fa21a04c","1210":"ec2aae8a048542cd78c7","1221":"a32ba84e413e7cfea5bb","1265":"7600e5f66e2cbf645ea9","1332":"aa67ac188805a42ba75b","1343":"674ec7a8474ad4d79dd2","1346":"64bc16d3f673a2dd0cdb","1353":"cdfa628dfc945e9d4b6c","1355":"850b5218bc0240f51037","1389":"a5bab51d6ace9a2d832f","1428":"d65cc4b4d39e8004f0c1","1459":"0c696aceea085a544b45","1491":"daede87283191074687b","1527":"1d16c03df052ee2cd869","1543":"d3b6f21b8c408563e547","1545":"93326e393e9a3df25545","1569":"6500cd3b2a754eb00da3","1611":"64b8c8e0177acac47b5e","1637":"6d74f2d46f3da26c7c15","1646":"68786fce1829a5fe7263","1678":"e066346906c0b3a1f486","1684":"773f70ae6b58495c267b","1809":"1db85a80f39e452af475","1844":"ae1985e57c9379d28e53","1848":"42c12f1535d7a98ca06a","1851":"830a75edae20a50c6df8","1858":"d2f06d2675bd54d4e774","1928":"e3d711be934317536c53","1980":"707baff87dfdce2c76c1","2009":"5e934ccaadba7d5d58b4","2063":"f57f4482ca25c5b9f637","2074":"547202d9f5a7f5bf5bde","2158":"5ed2810cb0cd28c9f2b2","2181":"38cc22d5cef1c823f8d3","2211":"bf3e533cca9081cae281","2270":"3a2f93cca28faa271b9a","2329":"aadc9e8a11790250772c","2340":"abb193d4efcb524c9ca3","2453":"7fa653223c7a0adc7a04","2465":"a6ef51a0b720c95b615c","2528":"63e671ee4f7836856397","2532":"fe74ffcb44ba8074cc2e","2546":"212c44b872e03dae293c","2566":"f576e0fc80b5ac517625","2637":"1cfe4d79d482d8ebb5ca","2647":"4f912530cd90498d52b0","2653":"86e1569cb7a3c81e1d23","2687":"7e5b1bdb99f1d55a8461","2735":"a7e4efb288a76f11d637","2780":"dcb91d0a8ab2b3b56baf","2782":"e291389a3f5c8852a12a","2805":"407356a8ad31699f6086","2813":"8eeff2a2e33c0f828347","2863":"8b4c6565240c76a348ac","2877":"2ecb1c9f4375aa110ed5","2906":"729477a09046c56b7a79","3006":"7274e4e9e8e1e4607b2d","3031":"d5eea56fb0cb3e87f3df","3078":"fabb8d9170937d8dced5","3079":"cd1b23d00faa69e1ca28","3116":"e7babdec640328a91d0b","3122":"c4194ad9011e3e124b17","3153":"8b8cb937b1371bc72ce1","3161":"dfde7e2964a52bd359ee","3247":"2dc8b4499037579b8b44","3248":"8882d28795e310483941","3253":"d7970a9c4554895e7bd0","3265":"64db41e489b2c63fea0e","3273":"652a7a0a823bfdc59691","3318":"62b96799a426f05944a8","3326":"956ca990e2f56130986a","3373":"590f751806a5c13c7648","3426":"00f02482f8890adaec20","3435":"d4e3b84a9ade6f441eb8","3445":"c4422bf25574d5b9a1e9","3523":"44061a1424d74a60636d","3560":"bbb3ec149df42cc9c1f8","3610":"8e8a324ced058a7e2832","3633":"9b983fa17df4658431a8","3729":"6c4db50368875689d614","3737":"fc154919cb645a7b1fef","3761":"8bafe037b8b09f0603b8","3811":"00cd3731d73bae06cec4","3836":"d712baf5ff9312482e98","3839":"4b1a6966452b4c3ea3d4","3844":"f82c10dab0234517318f","3849":"0cde0035bb90832bdbcb","3857":"e53e8bc5b236916fa377","3861":"7f8fd096f742014e1468","3904":"f1689fd6682feba0a8f7","3950":"b99f190e52b1a8b7e693","3954":"e69cfece92d045355587","3984":"29ac6190c49b193774b4","3996":"bc82ad1d331088b07ce5","4015":"d40616d37622f1a89bfc","4019":"dc4107184e6980d7ac98","4037":"47f6ebb7759dd74d12cf","4081":"b6f56033f2f582d6f738","4127":"9514e4e4afd5330b87af","4131":"6b8b819552f83d75fc4f","4160":"b8d91b3dd6ab719bc0ea","4168":"4cac39b8bc3db9599406","4221":"eb0b63a5f515d7869284","4225":"fea53efaab2d2226e1f4","4251":"4d1b9871e4d8e8f057bf","4345":"07fd3e3a42f577a2e855","4358":"a516b4f371d2855f9005","4360":"a5b7e456331f50ec28fc","4404":"cd2a04e6faad375d2f83","4460":"c48437eb85992ace23ce","4479":"6e96092729338b2ef3d2","4491":"bf3dc323d1ec54863038","4494":"e327553d421b707c9657","4523":"326c8ad1dd7038f60b1b","4525":"1b775800a0cc3efb9d6e","4530":"cbcbaeb0843de8e0f78e","4639":"b4e8c3e8742cdf68d0d8","4666":"78908b45da024dbbdbd5","4697":"37a49c19504d9980ccaf","4744":"55e0bd8ea3d04ed5ca98","4772":"fbd52a407cbb6b9ed4b7","4775":"3710fcbdebbbacf0e7a1","4816":"0893e4bb45740f08b6bd","4841":"1dda588a2d01b0e58be4","4858":"1bc6e86c6ea5df344c61","4945":"71ce3707cce6fed6a2eb","5090":"1832ef6c39498242f12a","5137":"2570d0ed1e5a07155c2f","5201":"694f68c33c049cead179","5211":"417a52c8c499e53c8ba8","5225":"c83855c56785d5d1632b","5254":"3c839b42e7e9873ba54f","5303":"625b4c6f0e8d71e72d67","5407":"3d3a18e63a2a93178dae","5458":"2cc70298c00e8e551e1f","5465":"3f5d63aade708b1c5291","5469":"8474804cca71a8c7920a","5512":"bb9f2741e5db03dee6ff","5536":"a68e87c03053f017e70b","5557":"442fef7d0440e661b489","5568":"4ce0a552ec14d3451ec3","5601":"644d0140a3d601a6216b","5646":"7bb0ad53d6a27784b901","5656":"1127e9cb573d872fbb6c","5675":"a66fb1d835bb64af08f2","5679":"9ef8a6d175ba577c0835","5681":"892ffb85e13777f9b0f8","5700":"b30f7d47e57fbf012586","5718":"9f70c7e7ea486f6d84cf","5784":"6df4a1bb3d1337ae9f1f","5788":"e9650b180c220bde549d","5849":"7177e0b37302bb1dc1ec","5920":"79e74cb82b2bdce23b07","5923":"a62195f6c3cd64a8b95c","5962":"ba15e4d971f3b97d79c5","5995":"45744888d9a0431f59b1","6168":"9fc9496ae263fe54b2d6","6244":"addf87d339475a1f3276","6276":"0410a1a041816700a2f9","6377":"d7875547d2e9f0b674ee","6389":"c3d9725a05cec33493ef","6427":"03e37035a0b3e1c1d52d","6486":"3c16146ad7870c841070","6508":"e892e68fa59ca3fd77c8","6539":"6975b3f7bca6762bc652","6663":"6c3bbddc0f3183f89ae1","6668":"fe225cfabe37ac90f421","6702":"9be495d3510ef60657c3","6706":"e9701fb61347069dcb11","6746":"5f7869f894cc997960c6","6757":"fc6a7bc0c29f9c837720","6796":"ea2a181118f13f17ea84","6836":"1718c59fbfd793997bab","6879":"7101bf3621165d7189f4","6910":"44773f26d7f1b18701bd","6927":"89ecb15ed08f3847ef44","6955":"be06df9a0b835e21aa26","7034":"fb21525c159cda9ca19a","7082":"c1ae7f99ddc2723d3d94","7083":"48babedbaa92c1868f4f","7094":"39f8d45f95135bbcda58","7137":"9677d9c0d935641f42e3","7147":"d5b25777ee5f58f7611e","7158":"9283fdcd4a337b82a871","7186":"dbae40b281d218da4e71","7213":"5e7aec276f69f47d1f43","7215":"49d66f44407fb48dfb2c","7227":"1977dd1b68964774ebe4","7299":"1daa6225767c71a3a4ea","7311":"334174f7447413002ed9","7318":"0e513e190d8d46137860","7343":"1d168f3de1367e37a588","7350":"c68e5c6297ca31e4f966","7385":"4f1cc6d1220bca10c97d","7438":"2cfcdb0daaab09aaf6e4","7500":"88399fcd1289c90cfa84","7515":"0404bc8299bbb773cfaa","7522":"0eb00192289f1c900b55","7544":"2261ff4b1e9ce842e3f1","7549":"9948a6a60d0a7deeb807","7562":"009398ca1ca42df326cc","7570":"24b11d66c8317edaf267","7571":"cecc7f23591f32159e47","7586":"71bfe307c5a23e2f9ef9","7598":"53d01513f7dc85c57940","7611":"881c3397f0f664166e19","7638":"0aef914b4e61238b20ba","7651":"4cb073ccfb1633e45cf6","7652":"b4032f8ab2bf299ce965","7678":"a560d33f9ce4702057be","7683":"8af953155565573b1737","7697":"8fbbe6d0edafd5ea1305","7698":"cc241dbfa0e1976b2f38","7735":"bd198e99b7e5e6464142","7863":"2389d0d0ee2e7a1e15f1","7953":"6b4e553deecfe686c84a","7956":"47f50d0ab1550d2ad821","7976":"2e3a2aa3a04c5b282825","8000":"8d85251adc02364c8183","8094":"89906f885c60143b7a2e","8114":"aaabd2ad71c69d6b9fe5","8136":"9683c685c80f5ea86fd1","8166":"006faaa2e17b0f5fa5ed","8222":"d38c8b427177dac91d51","8302":"751fc1147c8c2222a596","8365":"6e30cb36b64b1aca7baa","8371":"83d8ca045cca39c08a24","8389":"053e00e849e1f0055945","8404":"9f2b7f724baac4dc7f8b","8432":"f52d38935cb721f2e05b","8494":"41c0a3cd30427d31de08","8500":"884f101025c2fea01a49","8516":"46c19930ed324ff7e7d2","8525":"a1231ee90dba8b7f24f1","8578":"3d6d670e138f52e0faf6","8579":"811e75753dddcc8090f6","8630":"6c92f0dc77436396adc9","8683":"2e3a8619fcb481bb7c7c","8691":"86c856264dff4688d2a3","8721":"b50869f4983feaf5a714","8727":"62065ba1ccca50292ae1","8728":"c4a9b10b56f59a5265a9","8743":"57877616063008f53171","8758":"ff4704e4c2c7fce53d49","8774":"5ec588451af50516187a","8784":"b932d4fad233ede8d873","8787":"f56f14ddd4299930ad1d","8864":"627c6ff4989599c28486","8871":"15fa6d4f76496b12359b","8931":"1e9b70bf5c7b067c2aa3","9054":"97189115f00620d4e4cf","9112":"200527b4f1ae7e4e8bfa","9132":"52c71df9c8b541b24751","9154":"9be6c99a0b77c0b12714","9228":"ca7cddff77ff56ca73c4","9236":"54712c183526ecc4fb65","9246":"9dd38d3898b5f07d69c5","9307":"e818b5a78381ba5f818b","9338":"7e8bb4a25ffbeb53d17a","9364":"922eaed2bc6f7731e864","9375":"8b2b0a86a5b817444138","9446":"0598a492d15001e0c531","9502":"e2fa44622f3515a9951c","9503":"80acb4124bda2a06956d","9624":"7bb20c1d175c258fa469","9653":"b3c47391c963744e5d00","9691":"063c3a5f54d6b53ae35e","9694":"01086d344e4a62e8c9d1","9710":"caabc2a2e6dcb154f982","9739":"d8a4b022a912b8f418f8","9823":"606c5cb290d2b6a0406b","9927":"dcd10af45a0f8041cc06","9946":"688153908981271d652f"}[chunkId] + "";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "liveBook:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			};
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "https://d1ao6g929skqrx.cloudfront.net/bin/js/fallback/";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		__webpack_require__.b = document.baseURI || self.location.href;
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			2143: 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						} else installedChunks[chunkId] = 0;
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 		
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkliveBook"] = self["webpackChunkliveBook"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {

// EXTERNAL MODULE: ./src/ts/utils/DeviceUtils.ts
var DeviceUtils = __webpack_require__(87876);
// EXTERNAL MODULE: ./src/ts/utils/RouteUtils.ts
var RouteUtils = __webpack_require__(95964);
// EXTERNAL MODULE: ./src/ts/components/misc/Footer.ts
var Footer = __webpack_require__(86506);
// EXTERNAL MODULE: ./src/ts/components/misc/Header.ts
var Header = __webpack_require__(22259);
// EXTERNAL MODULE: ./src/ts/utils/EventUtils.ts
var EventUtils = __webpack_require__(67463);
// EXTERNAL MODULE: ./src/ts/utils/GlobalStateInfo.ts
var GlobalStateInfo = __webpack_require__(98498);
// EXTERNAL MODULE: ./src/ts/utils/LinksUtils.ts
var LinksUtils = __webpack_require__(68577);
// EXTERNAL MODULE: ./src/ts/utils/LocalStorageUtils.ts
var LocalStorageUtils = __webpack_require__(67008);
// EXTERNAL MODULE: ./node_modules/vbook-ui-components/src/Config.ts
var Config = __webpack_require__(36538);
;// CONCATENATED MODULE: ./src/ts/components/misc/BackButton.ts






var BackButtonClass = /** @class */ (function () {
    function BackButtonClass() {
        this.referrer = document.referrer || "";
        this.fixReferrerIfNecessary();
        if (this.referrer && this.isComingFromMarketplace(this.referrer)) {
            LocalStorageUtils/* LocalStorageUtils.saveTemporarily */.f.saveTemporarily("referrer", this.referrer, 24 * 60 * 60 * 1000);
        }
        this.handleBackButtonClick = this.handleBackButtonClick.bind(this);
    }
    BackButtonClass.prototype.initialize = function () {
        EventUtils/* default.onEventWithCooldown */.Z.onEventWithCooldown($("#back-button"), "touchstart click", this.handleBackButtonClick);
    };
    BackButtonClass.prototype.handleBackButtonClick = function (e) {
        var $body = $(document.body);
        if (DeviceUtils/* default.isApp */.Z.isApp()) {
            this.goToLastPage();
        }
        else {
            if ($body.is(".library-page, .catalog-page, .exercise-suite-page, .try-it-page")) {
                page(this.getDeviceIndependentPage("landing-page"));
            }
            else {
                var referrer = LocalStorageUtils/* LocalStorageUtils.loadTemporarily */.f.loadTemporarily("referrer");
                if (this.isComingFromMarketplace(referrer)) {
                    LocalStorageUtils/* LocalStorageUtils.remove */.f.remove("referrer");
                    LinksUtils/* LinksUtils.openLink */.r.openLink(referrer, true);
                }
                else {
                    if (GlobalStateInfo/* GlobalStateInfo.wasOnLibraryPageFollowedByOnlyBookPages */.UU.wasOnLibraryPageFollowedByOnlyBookPages()) {
                        GlobalStateInfo/* GlobalStateInfo.popHistoryUpToLibrary */.UU.popHistoryUpToLibrary();
                        page(this.getDeviceIndependentPage("library"));
                    }
                    else {
                        page(this.getDeviceIndependentPage("landing-page"));
                    }
                }
            }
        }
    };
    BackButtonClass.prototype.goToLastPage = function () {
        GlobalStateInfo/* GlobalStateInfo.pagesHistory.pop */.UU.pagesHistory.pop(); //remove the last one
        page(GlobalStateInfo/* GlobalStateInfo.pagesHistory.pop */.UU.pagesHistory.pop() || this.getDeviceIndependentPage("landing-page"));
    };
    BackButtonClass.prototype.getDeviceIndependentPage = function (page) {
        return "".concat(DeviceUtils/* default.isApp */.Z.isApp() ? "#!/" : "/").concat(page);
    };
    BackButtonClass.prototype.isComingFromMarketplace = function (referrer) {
        if (!referrer) {
            referrer = "";
        }
        return referrer.indexOf("www.manning.com") >= 0 || referrer.indexOf("www-qa.manning.com") > 0;
    };
    BackButtonClass.prototype.fixReferrerIfNecessary = function () {
        if (this.referrer.indexOf("manning.com/checkout") > 0) {
            this.referrer = GlobalStateInfo/* GlobalStateInfo.getDeploymentType */.UU.getDeploymentType() == Config/* DeploymentType.prod */.mO.prod ? "https://www.manning.com/dashboard" : "https://www-qa.manning.com/dashboard";
        }
    };
    return BackButtonClass;
}());
var BackButton = new BackButtonClass();

// EXTERNAL MODULE: ./src/ts/utils/DynamicCodeLoader.ts
var DynamicCodeLoader = __webpack_require__(83000);
;// CONCATENATED MODULE: ./src/ts/pages/livetest/LiveTestsResultsPageManager.ts

var LiveTestResultsPageManagerClass = /** @class */ (function () {
    function LiveTestResultsPageManagerClass() {
    }
    LiveTestResultsPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var LiveTestResultsPage = _a.LiveTestResultsPage;
            LiveTestResultsPage.initialize();
        });
    };
    LiveTestResultsPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var LiveTestResultsPage = _a.LiveTestResultsPage;
            LiveTestResultsPage.clean();
        });
    };
    LiveTestResultsPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    LiveTestResultsPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | Score */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(3326), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(6486), __webpack_require__.e(688), __webpack_require__.e(1851), __webpack_require__.e(2782), __webpack_require__.e(2181), __webpack_require__.e(7735), __webpack_require__.e(6879)]).then(__webpack_require__.bind(__webpack_require__, 84435));
    };
    return LiveTestResultsPageManagerClass;
}());
var LiveTestResultsPageManager = new LiveTestResultsPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/landing/LandingPageManager.ts

var LandingPageManagerClass = /** @class */ (function () {
    function LandingPageManagerClass() {
    }
    LandingPageManagerClass.prototype.load = function () {
        var _this = this;
        setTimeout(function () {
            Promise.all([
                _this.getSource()
            ]).then(function (_a) {
                var LandingPage = _a[0].LandingPage;
                LandingPage.initialize();
                $(document).trigger("landingPageCodeLoaded");
            });
        }, 5);
    };
    LandingPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    LandingPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | landingPage */[__webpack_require__.e(3426), __webpack_require__.e(379)]).then(__webpack_require__.bind(__webpack_require__, 78780));
    };
    LandingPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var LandingPage = _a.LandingPage;
            return LandingPage.clean();
        });
    };
    return LandingPageManagerClass;
}());
var LandingPageManager = new LandingPageManagerClass();

// EXTERNAL MODULE: ./src/ts/utils/DOMUtils.ts
var DOMUtils = __webpack_require__(23934);
// EXTERNAL MODULE: ./src/ts/utils/TitleNumberingExtractor.ts
var TitleNumberingExtractor = __webpack_require__(10572);
// EXTERNAL MODULE: ./src/ts/services/settingsService/SettingsProvider.ts + 2 modules
var SettingsProvider = __webpack_require__(43150);
// EXTERNAL MODULE: ./src/ts/modules/HelpInfoFeedbackModule.ts + 1 modules
var HelpInfoFeedbackModule = __webpack_require__(3723);
// EXTERNAL MODULE: ./src/ts/utils/FreeEbooksAccessUtils.ts
var FreeEbooksAccessUtils = __webpack_require__(77533);
// EXTERNAL MODULE: ./src/ts/utils/BookViewDOMUtils.ts
var BookViewDOMUtils = __webpack_require__(69619);
// EXTERNAL MODULE: ./src/ts/utils/BookContentUtils.ts
var BookContentUtils = __webpack_require__(52810);
// EXTERNAL MODULE: ./src/ts/services/bookContentService/BookContentProvider.ts
var BookContentProvider = __webpack_require__(75107);
// EXTERNAL MODULE: ./src/ts/services/authService/AuthProvider.ts + 2 modules
var AuthProvider = __webpack_require__(37168);
// EXTERNAL MODULE: ./src/ts/pages/book/BookPageTemplate.ts
var BookPageTemplate = __webpack_require__(46079);
// EXTERNAL MODULE: ./src/ts/features/bookEnchancements/chapterCommands/ChapterCommands.ts + 1 modules
var ChapterCommands = __webpack_require__(30316);
;// CONCATENATED MODULE: ./src/ts/pages/book/BookPageManager.ts















var BookPageManagerClass = /** @class */ (function () {
    function BookPageManagerClass() {
        var _this = this;
        this.renderErrorReportPopup = this.renderErrorReportPopup.bind(this);
        $(document).on("bookElementIntroArrived", function (e, introInfo, bookElementShortName) {
            if ($("#main-page-content .backend-main-page-content").length) {
                return;
            }
            if (introInfo != null) {
                _this.adjustWideScreenBookCoverHeroImage(introInfo.bookShortName, introInfo.bookShortName, introInfo.wideScreenCoverBackground, introInfo.wideScreenCoverUrl, introInfo.isFrontMatter);
            }
            var introHtml = "";
            if (introInfo != null && introInfo.intro) {
                introHtml = introInfo.intro;
            }
            if (introHtml) {
                var $inlineBookContainer = $("#book-markup-container .inline-book-info-container");
                $("#book-markup-container").html(introHtml);
                if ($inlineBookContainer.length) {
                    $("#book-markup-container").prepend($inlineBookContainer);
                }
                $(document).trigger("requestPromoLayoutAdaption");
                EventUtils/* default.setTimeout */.Z.setTimeout(function () {
                    BookContentUtils/* default.insertLoadingBoxes */.Z.insertLoadingBoxes();
                    $(document).trigger("requestPromoLayoutAdaption");
                }, 16);
            }
        });
    }
    BookPageManagerClass.prototype.load = function (bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion, additional) {
        var _this = this;
        var currentTranslateXOffset = BookViewDOMUtils/* default.getCurrentMainContentTranslateX */.Z.getCurrentMainContentTranslateX();
        var $heroImage = $(".wide-book-cover-hero-image");
        var heroImageInfo = null;
        var hasAppropriateHeroImage = $heroImage.length == 1 && ($heroImage.attr("data-book-short-name") == bookShortNameOrSlug || $heroImage.attr("data-book-slug") == bookShortNameOrSlug);
        if (hasAppropriateHeroImage && (["title", "welcome", "about-this-book", "preface", "acknowledgments", "about-the-author", "about-the-authors", "about-the-cover", "about-the-cover-illustration"].indexOf(bookElementShortName) >= 0 || bookElementShortName == bookShortNameOrSlug)) {
            heroImageInfo = {
                bookShortName: bookShortNameOrSlug,
                bookSlug: bookShortNameOrSlug,
                wideScreenCoverBackground: $heroImage.css("background"),
                wideScreenCoverUrl: $heroImage.find("img").attr("src"),
                isFrontMatter: true
            };
        }
        if ($("#main-page-content .backend-main-page-content").length == 0) {
            GlobalStateInfo/* GlobalStateInfo.setNewMainPageContent */.UU.setNewMainPageContent((0,BookPageTemplate/* generateBookPageTemplate */.X)((TitleNumberingExtractor/* default.isSpecialPathPartInsteadOfBookElement */.Z.isSpecialPathPartInsteadOfBookElement(bookElementShortName) || TitleNumberingExtractor/* default.isSpecialFreeEbookOpenPart */.Z.isSpecialFreeEbookOpenPart(bookElementShortName))
                ? TitleNumberingExtractor/* default.beautifyBookElementShortName */.Z.beautifyBookElementShortName(bookShortNameOrSlug, true)
                : (TitleNumberingExtractor/* default.beautifyBookElementShortName */.Z.beautifyBookElementShortName(bookElementShortName, true) || TitleNumberingExtractor/* default.beautifyBookElementShortName */.Z.beautifyBookElementShortName(bookShortNameOrSlug, true))));
        }
        if (TitleNumberingExtractor/* default.isSpecialFreeEbookOpenPart */.Z.isSpecialFreeEbookOpenPart(bookElementShortName)) {
            FreeEbooksAccessUtils/* FreeEbookAccessUtils.openCurrentFreeEbook */.M.openCurrentFreeEbook(bookShortNameOrSlug);
        }
        $("html, body").scrollTop(0);
        BookViewDOMUtils/* default.translateMainContent */.Z.translateMainContent(currentTranslateXOffset);
        this.adjustWideScreenBookCoverHeroImage(heroImageInfo && heroImageInfo.bookShortName, heroImageInfo && heroImageInfo.bookSlug, heroImageInfo && heroImageInfo.wideScreenCoverBackground, heroImageInfo && heroImageInfo.wideScreenCoverUrl, heroImageInfo && heroImageInfo.isFrontMatter);
        var startLoadingTime = Date.now();
        var bookPageContentLoaded = false;
        if (!reviewVersion) {
            ChapterCommands/* ChapterCommands.insertChapterCommands */.$.insertChapterCommands();
        }
        if (!reviewVersion && $(".backend-main-page-content").length == 0) {
            BookContentProvider/* BookContentProvider.getBookElementIntro */.$.getBookElementIntro(bookShortNameOrSlug, bookElementShortName, meapVersion).then(function (introInfo) {
                if (bookPageContentLoaded) {
                    return;
                }
                if (introInfo.intro) {
                    if (DeviceUtils/* default.isApp */.Z.isApp()) {
                        introInfo.intro = introInfo.intro.replace(/\/assets\/images\//g, "assets/images/");
                    }
                    $(document).trigger("bookElementIntroArrived", [introInfo, bookElementShortName]);
                }
            });
        }
        var getBookElement = function () {
            Promise.all([
                _this.getSource(),
                BookContentProvider/* BookContentProvider.getBookElement */.$.getBookElement(bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion),
                _this.getTimeoutPromise()
            ]).then(function (_a) {
                var BookPage = _a[0].BookPage, bookContent = _a[1];
                bookPageContentLoaded = true;
                $(document).trigger("bookPageCodeLoaded");
                BookPage.initialize(bookContent, bookShortNameOrSlug, bookElementShortName, meapVersion, additional);
                _this.activeBook = bookShortNameOrSlug;
                var bookChanged = (bookShortNameOrSlug != _this.activeBook);
                AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
                    if (data.loggedIn) {
                        if (bookChanged) {
                            clearTimeout(_this.errorReportTimer);
                            if (BookPage.getBook().isMeap) {
                                var lastShown = SettingsProvider/* default.get */.Z.get("error-modal-last-shown");
                                var diff = (Date.now() - new Date(lastShown)) / 1000;
                                diff /= (60 * 60 * 24 * 7); //Diff in weeks
                                if (!SettingsProvider/* default.get */.Z.get("stop-showing-error-reports-modal") && diff > 1) {
                                    _this.errorReportTimer = setTimeout(_this.renderErrorReportPopup, 5 * 1000 * 60);
                                    $(document).trigger("meapErrorReportShow");
                                }
                            }
                        }
                    }
                });
                try {
                    $(document).trigger("chapterLoadingTime", [Math.round((Date.now() - startLoadingTime) / 1000)]);
                }
                catch (e) {
                    console.log(e);
                }
            }).catch(function (e) {
                console.log("Error in book page manager:", e);
                $(document.body).removeClass("app-code-not-loaded");
                var $errorModal = $("#error-modal");
                var isOnline = DeviceUtils/* default.isConnected */.Z.isConnected();
                $errorModal.find("h3 strong").text(reviewVersion ? "Access denied!" : "Unable to load book!");
                if (reviewVersion) {
                    $errorModal.find(".error-modal-try-again-message").hide();
                    if (e && e.reason) {
                        var html = e.reason;
                        if (e.slug) {
                            html += "<br/><br/> <a class='move-to-book' href=\"/book/".concat(e.slug, "/").concat(e.latestMeapVersion ? ("v-" + e.latestMeapVersion) : "", "\">Open the regular book version.</a>");
                        }
                        $errorModal.find(".error-modal-additional-message").html(html);
                        $errorModal.find(".move-to-book").on("click", function () { return DOMUtils/* default.hideFoundationModal */.Z.hideFoundationModal($errorModal); });
                    }
                }
                else {
                    $errorModal.find(".error-modal-try-again-message").show();
                    $errorModal.find(".error-modal-additional-message").text("");
                }
                $errorModal.find(".error-modal-try-again-message").text(!isOnline ? "(check your internet connection and try again)" : "(try again in a couple of minutes)");
                var marketplaceBookLink = "http://www.manning.com/books/".concat(bookShortNameOrSlug);
                $errorModal.find(".book-name-container").attr("href", marketplaceBookLink)
                    .text(bookShortNameOrSlug);
                if (e && e.title) {
                    $errorModal.find(".book-name-container").text(e.title);
                }
                $errorModal.find(".marketplace-link").attr("href", marketplaceBookLink);
                $errorModal.find(".homepage-link").attr("href", DeviceUtils/* default.isApp */.Z.isApp() ? "#!/landing-page" : "https://livebook.manning.com");
                DOMUtils/* default.showFoundationModal */.Z.showFoundationModal($errorModal);
            });
        };
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) { return getBookElement(); })
            .catch(function (e) { return getBookElement(); });
    };
    BookPageManagerClass.prototype.adjustWideScreenBookCoverHeroImage = function (bookShortName, bookSlug, wideScreenCoverBackground, wideScreenCoverUrl, isFrontMatter) {
        if ($("#main-page-content .backend-main-page-content").length == 1) {
            return;
        }
        $(".wide-book-cover-hero-image").remove();
        if (wideScreenCoverBackground && bookShortName && wideScreenCoverUrl && isFrontMatter) {
            $("#main-page-content").prepend("<div class=\"wide-book-cover-hero-image\" style=\"background: ".concat(wideScreenCoverBackground, ";\" data-book-short-name=\"").concat(bookShortName, "\" data-book-slug=\"").concat(bookSlug, "\">\n                <img src=\"").concat(wideScreenCoverUrl, "\" width=\"1920px\" height=\"1080px\">\n            </div>"));
        }
    };
    BookPageManagerClass.prototype.renderErrorReportPopup = function () {
        clearTimeout(this.errorReportTimer);
        HelpInfoFeedbackModule/* HelpInfoFeedbackModule.renderErrorReportModal */.G.renderErrorReportModal();
    };
    BookPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var BookPage = _a.BookPage;
            return BookPage.clean();
        });
    };
    BookPageManagerClass.prototype.partialClean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var BookPage = _a.BookPage;
            return BookPage.partialClean();
        });
    };
    BookPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    BookPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | bookPage */[__webpack_require__.e(233), __webpack_require__.e(1029), __webpack_require__.e(9710), __webpack_require__.e(6389), __webpack_require__.e(5211), __webpack_require__.e(229), __webpack_require__.e(9154), __webpack_require__.e(4772), __webpack_require__.e(7094), __webpack_require__.e(4345)]).then(__webpack_require__.bind(__webpack_require__, 64330));
    };
    BookPageManagerClass.prototype.getTimeoutPromise = function () {
        if (!DeviceUtils/* default.isApp */.Z.isApp()) {
            return Promise.resolve();
        }
        return new Promise(function (resolve, reject) {
            EventUtils/* default.setTimeout */.Z.setTimeout(function () { return resolve(); }, 200);
        });
    };
    return BookPageManagerClass;
}());
var BookPageManager = new BookPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/digest/DigestPageManager.ts


var DigestPageManagerClass = /** @class */ (function () {
    function DigestPageManagerClass() {
    }
    DigestPageManagerClass.prototype.load = function (bookShortNameOrSlug, bookElementShortName, meapVersion, additional) {
        var currentTranslateXOffset = BookViewDOMUtils/* default.getCurrentMainContentTranslateX */.Z.getCurrentMainContentTranslateX();
        $("html, body").scrollTop(0);
        BookViewDOMUtils/* default.translateMainContent */.Z.translateMainContent(currentTranslateXOffset);
        this.getSource().then(function (_a) {
            var DigestPage = _a.DigestPage;
            DigestPage.initialize(bookShortNameOrSlug, bookElementShortName, meapVersion, additional);
        });
    };
    DigestPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var DigestPage = _a.DigestPage;
            return DigestPage.clean();
        });
    };
    DigestPageManagerClass.prototype.partialClean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var DigestPage = _a.DigestPage;
            return DigestPage.partialClean();
        });
    };
    DigestPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    DigestPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | digestPage */[__webpack_require__.e(1029), __webpack_require__.e(9710), __webpack_require__.e(6389), __webpack_require__.e(9154), __webpack_require__.e(4772), __webpack_require__.e(2653)]).then(__webpack_require__.bind(__webpack_require__, 10478));
    };
    return DigestPageManagerClass;
}());
var DigestPageManager = new DigestPageManagerClass();

// EXTERNAL MODULE: ./src/ts/utils/WebUtils.ts
var WebUtils = __webpack_require__(93292);
// EXTERNAL MODULE: ./src/ts/utils/Analytics.ts
var Analytics = __webpack_require__(76383);
// EXTERNAL MODULE: ./src/ts/managers/NotificationsManager.ts
var NotificationsManager = __webpack_require__(54273);
// EXTERNAL MODULE: ./src/ts/modules/ShoppingCartModule.ts
var ShoppingCartModule = __webpack_require__(58300);
// EXTERNAL MODULE: ./src/ts/modules/MicropurchaseModule.ts
var MicropurchaseModule = __webpack_require__(11126);
// EXTERNAL MODULE: ./src/ts/utils/ValueUtils.ts
var ValueUtils = __webpack_require__(3199);
;// CONCATENATED MODULE: ./src/ts/pages/exerciseSuite/ExercisesPageManager.ts

var ExercisesPageManagerClass = /** @class */ (function () {
    function ExercisesPageManagerClass() {
    }
    ExercisesPageManagerClass.prototype.load = function (exerciseSuiteSlug) {
        if (exerciseSuiteSlug === void 0) { exerciseSuiteSlug = ""; }
        this.getSource().then(function (_a) {
            var ExerciseSuitePage = _a.ExerciseSuitePage;
            ExerciseSuitePage.initialize(exerciseSuiteSlug);
        });
    };
    ExercisesPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var ExerciseSuitePage = _a.ExerciseSuitePage;
            $(document).trigger("pageAppCodeLoaded");
            ExerciseSuitePage.clean();
        });
    };
    ExercisesPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ExercisesPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | exerciseSuitePage */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(1389), __webpack_require__.e(4081), __webpack_require__.e(1611), __webpack_require__.e(5679), __webpack_require__.e(5090)]).then(__webpack_require__.bind(__webpack_require__, 71922));
    };
    return ExercisesPageManagerClass;
}());
var ExercisesPageManager = new ExercisesPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/catalog/CatalogPageManager.ts

var CatalogPageManagerClass = /** @class */ (function () {
    function CatalogPageManagerClass() {
    }
    CatalogPageManagerClass.prototype.load = function (category) {
        this.getSource().then(function (_a) {
            var CatalogPage = _a.CatalogPage;
            $(document).trigger("catalogPageCodeLoaded");
            CatalogPage.initialize((category || "").replace("-", "/"));
        });
    };
    CatalogPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var CatalogPage = _a.CatalogPage;
            CatalogPage.clean();
        });
    };
    CatalogPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    CatalogPageManagerClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | catalogPage */ 8222).then(__webpack_require__.bind(__webpack_require__, 4352));
    };
    return CatalogPageManagerClass;
}());
var CatalogPageManager = new CatalogPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/library/LibraryPageManager.ts

var LibraryPageManagerClass = /** @class */ (function () {
    function LibraryPageManagerClass() {
    }
    LibraryPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var LibraryPage = _a.LibraryPage;
            $(document).trigger("libraryPageCodeLoaded");
            LibraryPage.initialize();
        });
    };
    LibraryPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var LibraryPage = _a.LibraryPage;
            LibraryPage.clean();
        });
    };
    LibraryPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            DynamicCodeLoader/* DynamicCodeLoader.loadMustacheCode */.j.loadMustacheCode();
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    LibraryPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | libraryPage */[__webpack_require__.e(2063), __webpack_require__.e(3426), __webpack_require__.e(348)]).then(__webpack_require__.bind(__webpack_require__, 10633));
    };
    return LibraryPageManagerClass;
}());
var LibraryPageManager = new LibraryPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/tryIt/TryItPageManager.ts

var TryItPageManagerClass = /** @class */ (function () {
    function TryItPageManagerClass() {
    }
    TryItPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var TryItPage = _a.TryItPage;
            $(document).trigger("pageAppCodeLoaded");
            TryItPage.initialize();
        });
    };
    TryItPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var TryItPage = _a.TryItPage;
            return TryItPage.clean();
        });
    };
    TryItPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    TryItPageManagerClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | tryItPage */ 4019).then(__webpack_require__.bind(__webpack_require__, 14428));
    };
    return TryItPageManagerClass;
}());
var TryItPageManager = new TryItPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/editor/EditorPageManager.ts






var EditorPageManagerClass = /** @class */ (function () {
    function EditorPageManagerClass() {
    }
    EditorPageManagerClass.prototype.load = function (bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion) {
        var _this = this;
        GlobalStateInfo/* GlobalStateInfo.setNewMainPageContent */.UU.setNewMainPageContent((0,BookPageTemplate/* generateBookPageTemplate */.X)(TitleNumberingExtractor/* default.beautifyBookElementShortName */.Z.beautifyBookElementShortName(bookElementShortName, true) || TitleNumberingExtractor/* default.beautifyBookElementShortName */.Z.beautifyBookElementShortName(bookShortNameOrSlug, true)));
        setTimeout(function () {
            Promise.all([
                _this.getSource(),
                BookContentProvider/* BookContentProvider.getBookElement */.$.getBookElement(bookShortNameOrSlug, bookElementShortName, meapVersion, reviewVersion)
            ]).then(function (_a) {
                var EditorPage = _a[0].EditorPage, bookContent = _a[1];
                $(document).trigger("editorPageCodeLoaded");
                EditorPage.initialize(bookContent, bookShortNameOrSlug, bookElementShortName, meapVersion);
            }).catch(function (e) {
                var $errorModal = $("#error-modal");
                var marketplaceBookLink = "http://www.manning.com/books/".concat(bookShortNameOrSlug);
                $errorModal.find(".book-name-container").attr("href", marketplaceBookLink)
                    .text(bookShortNameOrSlug);
                $errorModal.find(".marketplace-link").attr("href", marketplaceBookLink);
                DOMUtils/* default.showFoundationModal */.Z.showFoundationModal($errorModal);
            });
        }, 5);
    };
    EditorPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var EditorPage = _a.EditorPage;
            return EditorPage.clean();
        });
    };
    EditorPageManagerClass.prototype.partialClean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var EditorPage = _a.EditorPage;
            return EditorPage.partialClean();
        });
    };
    EditorPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    EditorPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | editorPage */[__webpack_require__.e(1029), __webpack_require__.e(9710), __webpack_require__.e(6389), __webpack_require__.e(229), __webpack_require__.e(9154), __webpack_require__.e(3844), __webpack_require__.e(367), __webpack_require__.e(6668), __webpack_require__.e(7094), __webpack_require__.e(3373)]).then(__webpack_require__.bind(__webpack_require__, 16481));
    };
    return EditorPageManagerClass;
}());
var EditorPageManager = new EditorPageManagerClass();

// EXTERNAL MODULE: ./src/ts/managers/AuthManager.ts
var AuthManager = __webpack_require__(93983);
// EXTERNAL MODULE: ./src/ts/features/menus/booksMenu/BooksMenuModule.ts
var BooksMenuModule = __webpack_require__(53245);
// EXTERNAL MODULE: ./src/ts/modules/LoginModule.ts
var LoginModule = __webpack_require__(29755);
;// CONCATENATED MODULE: ./src/ts/utils/CommonPageFiller.ts


var CommonPageFillerClass = /** @class */ (function () {
    function CommonPageFillerClass() {
    }
    CommonPageFillerClass.prototype.insertNecessaryElements = function () {
        if (document.getElementById("liveaudio-corner") == null) {
            $(document.body).append(LIVE_AUDIO_CORNER_HTML);
            $(document.body).append(TOKEN_ICON_HTML);
            $(document.body).append(FULL_SCREEN_MODAL_HTML);
            $(document.body).append(LOGIN_MODAL_HTML̨);
            $(document.body).append(NOTIFICATIONS_MODAL_HTML);
            $(document.body).append(ERROR_MODAL_HTML);
            $(document.body).append(TOOLTIP_HTML);
            $(document.body).append("<button id='exit-zen-mode'><i class='fa fa-window-maximize'></i></button>");
            $(document.body).append(FLOATING_ICONS_BOTTOM_RIGHT_HTML);
            $("#header").append(HEADER_CONTENT_HTML);
            $("#footer").append(FOOTER_CONTENT_HTML);
            $(document.body).append(/*html */ "\n            <div id=\"subscriptions-feedback-button\" title=\"give your feedback\">\n                <svg width=\"22\" height=\"22\" viewBox=\"0 0 38 38\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M17.5512 9.81285C17.9363 9.14743 18.897 9.14743 19.2822 9.81285L29.4704 27.4157C29.8563 28.0824 29.3752 28.9167 28.605 28.9167H8.22837C7.45809 28.9167 6.97703 28.0824 7.36288 27.4157L17.5512 9.81285ZM19.2821 3.49483C18.8969 2.82954 17.9364 2.82954 17.5512 3.49483L1.86902 30.5823C1.48306 31.249 1.96411 32.0833 2.73445 32.0833H34.0989C34.8692 32.0833 35.3503 31.249 34.9643 30.5823L19.2821 3.49483ZM20 25.1667C20 24.6144 19.5523 24.1667 19 24.1667H17.8333C17.281 24.1667 16.8333 24.6144 16.8333 25.1667V26.3333C16.8333 26.8856 17.281 27.3333 17.8333 27.3333H19C19.5523 27.3333 20 26.8856 20 26.3333V25.1667ZM20 15.6667C20 15.1144 19.5523 14.6667 19 14.6667H17.8333C17.281 14.6667 16.8333 15.1144 16.8333 15.6667V20C16.8333 20.5523 17.281 21 17.8333 21H19C19.5523 21 20 20.5523 20 20V15.6667Z\" fill=\"#F8F8F8\"/>\n                </svg>\n            </div>");
            $("#header .header-manning-big-logo").on("mousedown touchdown", function (e) {
                var $target = $(e.target);
                var $currentTarget = $(e.currentTarget);
                if ($target.is("._manning-word")
                    || $currentTarget.is("._manning-word")) {
                    if ($target.css("opacity") == '0'
                        || $currentTarget.css("opacity") == '0') {
                        e.stopImmediatePropagation();
                        e.stopPropagation();
                        e.preventDefault();
                        return;
                    }
                }
                else if ($target.is("._manning-m")
                    || $currentTarget.is("._manning-m")) {
                    //process click
                }
                else {
                    e.stopImmediatePropagation();
                    e.stopPropagation();
                    e.preventDefault();
                }
            });
        }
    };
    return CommonPageFillerClass;
}());
var LIVE_AUDIO_CORNER_HTML = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1792 1792\" style=\"display: none;\"><symbol id=\"liveaudio-corner\"><path d=\"M 1792,0 V 1792 H 0 Z\" style=\"fill:#ffcc00\" /><path style=\"fill:#000000\"d=\"m 1225.7239,1040.0538 v 463.2689 q 0,11.0707 -8.0902,19.1609 -8.0902,8.0902 -19.1609,8.0902 -11.0708,0 -19.161,-8.0902 L 1037.5209,1380.6927 H 925.9617 q -11.07076,0 -19.16093,-8.0902 -8.09018,-8.0902 -8.09018,-19.161 v -163.5066 q 0,-11.0708 8.09018,-19.161 8.09017,-8.0901 19.16093,-8.0901 h 111.5592 l 141.7909,-141.791 q 8.0902,-8.0901 19.161,-8.0901 11.0707,0 19.1609,8.0901 8.0902,8.0902 8.0902,19.161 z m 163.5067,231.6344 q 0,32.3607 -18.0965,60.2505 -18.0964,27.8898 -47.9023,39.8122 -4.258,2.129 -10.645,2.129 -11.0708,0 -19.1609,-7.8773 -8.0902,-7.8773 -8.0902,-19.3738 0,-8.9418 5.1096,-15.1159 5.1096,-6.1741 12.3481,-10.645 7.2386,-4.4708 14.4772,-9.7933 7.2386,-5.3225 12.3482,-15.3288 5.1095,-10.0062 5.1095,-24.0576 0,-14.0514 -5.1095,-24.0576 -5.1096,-10.0063 -12.3482,-15.3288 -7.2386,-5.3225 -14.4772,-9.7933 -7.2385,-4.4709 -12.3481,-10.645 -5.1096,-6.1741 -5.1096,-15.1159 0,-11.4965 8.0902,-19.3738 8.0901,-7.8773 19.1609,-7.8773 6.387,0 10.645,2.129 29.8059,11.4966 47.9023,39.5993 18.0965,28.1027 18.0965,60.4634 z m 109.0044,0 q 0,65.1472 -36.1929,120.2881 -36.1929,55.1409 -95.8047,80.2631 -5.5353,2.129 -10.6449,2.129 -11.4966,0 -19.5868,-8.0902 -8.0901,-8.0902 -8.0901,-19.161 0,-16.6061 16.6061,-25.1221 23.8447,-12.3481 32.3607,-18.7351 31.5091,-22.9931 49.1797,-57.6957 17.6707,-34.7026 17.6707,-73.8761 0,-39.1735 -17.6707,-73.8761 -17.6706,-34.7025 -49.1797,-57.6957 -8.516,-6.387 -32.3607,-18.7351 -16.6061,-8.516 -16.6061,-25.1221 0,-11.0708 8.0901,-19.161 8.0902,-8.0901 19.161,-8.0901 5.5354,0 11.0707,2.1289 59.6118,25.1222 95.8047,80.2631 36.1929,55.1409 36.1929,120.2881 z m 109.0045,0 q 0,97.9337 -54.0765,179.8999 -54.0764,81.9663 -143.9199,120.7139 -5.5354,2.129 -11.0708,2.129 -11.0707,0 -19.1609,-8.0901 -8.0902,-8.0902 -8.0902,-19.161 0,-15.3287 16.6062,-25.1221 2.9806,-1.7032 9.5804,-4.4709 6.5999,-2.7677 9.5805,-4.4709 19.5867,-10.6449 34.9155,-21.7157 52.3732,-38.7477 81.7533,-96.6563 29.3801,-57.9086 29.3801,-123.0558 0,-65.1472 -29.3801,-123.0558 -29.3801,-57.9086 -81.7533,-96.6563 -15.3288,-11.0707 -34.9155,-21.7157 -2.9806,-1.7032 -9.5805,-4.4709 -6.5998,-2.7677 -9.5804,-4.4709 -16.6062,-9.7933 -16.6062,-25.12205 0,-11.07076 8.0902,-19.16093 8.0902,-8.09018 19.1609,-8.09018 5.5354,0 11.0708,2.129 89.8435,38.74766 143.9199,120.71386 54.0765,81.9662 54.0765,179.8999 z\"/></symbol></svg>";
var TOKEN_ICON_HTML = "<svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10.583333 10.583334\" height=\"40\" width=\"40\" style=\"display: none\"><symbol id=\"token-icon\"><g transform=\"translate(0,-286.41666)\"> <path transform=\"matrix(0.26458334,0,0,0.26458334,0,286.41666)\" d=\"M 20 0 A 19.999999 19.999999 0 0 0 0 20 A 19.999999 19.999999 0 0 0 20 40 A 19.999999 19.999999 0 0 0 40 20 A 19.999999 19.999999 0 0 0 20 0 z M 20 3 A 16.999999 16.999999 0 0 1 37 20 A 16.999999 16.999999 0 0 1 20 37 A 16.999999 16.999999 0 0 1 3 20 A 16.999999 16.999999 0 0 1 20 3 z M 20 6 C 12.268001 6 6 12.267994 6 20 C 6 27.731968 12.268001 34 20 34 C 27.732 34 34 27.731968 34 20 C 34 12.267994 27.732 6 20 6 z M 12 14 L 28 14 L 28 18 L 22 18 L 22 29 L 18 29 L 18 18 L 12 18 L 12 14 z \" style=\"opacity:1;fill-opacity:1;stroke:none;stroke-width:2.90095091;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1\" fill=\"currentColor\" /></g></symbol></svg>";
var FULL_SCREEN_MODAL_HTML = "<div id=\"full-screen-modal\"></div><div id=\"full-screen-modal-2\"></div>";
var LOGIN_MODAL_HTML̨ = "<div id=\"login-modal\" class=\"reveal-modal\" data-reveal></div>";
var NOTIFICATIONS_MODAL_HTML = "<div id=\"notifications-modal\" class=\"reveal-modal\" data-reveal> <span class=\"close-reveal-modal\"><i class=\"fal fa-times\"></i></span><div class=\"notifications-modal-content-wrapper\"></div></div>";
var ERROR_MODAL_HTML = "<div id=\"error-modal\" class=\"reveal-modal\" data-reveal><div class=\"row\"> <div class=\"small-12 columns\"> <h3 class=\"text-label\"><strong>Unable to load book!</strong></h3> <div>The book <a class=\"book-name-container\"></a> could not be loaded. <span class=\"error-modal-additional-message\"></span></div><p class=\"error-modal-try-again-message\">(try again in a couple of minutes)</p><a href=\"./\" class=\"marketplace-link pull-right emphasized-button\" target=\"_blank\">manning.com</a> <a href=\"https://livebook.manning.com/\" class=\"pull-right emphasized-button homepage-link\">homepage</a> </div></div></div>";
var TOOLTIP_HTML = "<div id=\"tooltip\" class=\"tooltip hidden\"><div class=\"tooltip-container\"></div><div class=\"tooltip-tip\"></div></div>";
var FLOATING_ICONS_BOTTOM_RIGHT_HTML = "<div class=\"floating-icons-bottom-right\">\n  <div class=\"header-extra-icon-button-container show-on-book-page hide-on-edit-page header-item-container hide-on-review-page \">\n            <div class=\"header-icon\" id=\"test-yourself-sun-icon\">\n                <svg width=\"30\" height=\"28\" viewBox=\"0 0 30 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><mask id=\"a\" style=\"mask-type:alpha\" maskUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"33\" height=\"31\"><path fill=\"#D9D9D9\" d=\"M0 0h32.107v31H0z\"/></mask><g mask=\"url(#a)\"><path d=\"M16.37 18.505c1.234 0 2.3-.4 3.195-1.197s1.343-1.772 1.343-2.925c0-.98-.309-1.815-.925-2.507-.617-.692-1.385-1.038-2.304-1.038-.774 0-1.441.248-2.003.746-.562.497-.842 1.11-.842 1.84 0 .315.06.632.178.95.12.318.315.599.586.843.185.175.37.251.555.23a.729.729 0 0 0 .458-.22.786.786 0 0 0 .218-.436c.024-.166-.042-.325-.2-.477a2.2 2.2 0 0 1-.3-.4.938.938 0 0 1-.158-.49c0-.297.13-.574.391-.83.261-.257.633-.385 1.117-.385.514 0 .96.201 1.335.603.376.403.564.937.564 1.604 0 .743-.298 1.388-.892 1.936-.594.548-1.355.822-2.283.822-1.065 0-1.982-.423-2.75-1.27-.767-.848-1.15-1.91-1.15-3.188 0-.53.084-1.047.253-1.55a4.56 4.56 0 0 1 .76-1.39 1.11 1.11 0 0 0 .19-.527.61.61 0 0 0-.195-.503.64.64 0 0 0-.507-.204.585.585 0 0 0-.458.253 6.24 6.24 0 0 0-1.041 1.803 5.89 5.89 0 0 0-.374 2.084c0 1.602.505 2.973 1.513 4.113 1.009 1.14 2.25 1.71 3.725 1.71Zm-7.006 3.45c-1.27-1.16-2.258-2.463-2.96-3.91s-1.053-2.932-1.053-4.455c0-2.968 1.04-5.49 3.121-7.568 2.081-2.077 4.608-3.116 7.581-3.116 2.41 0 4.587.734 6.533 2.201 1.946 1.467 3.208 3.362 3.786 5.684l1.387 5.491c.089.34.025.648-.19.924a1.04 1.04 0 0 1-.865.416H24.08v4.528a2.08 2.08 0 0 1-.635 1.526 2.08 2.08 0 0 1-1.526.635h-3.19v2.007c0 .19-.065.348-.193.476a.648.648 0 0 1-.477.193.646.646 0 0 1-.477-.193.649.649 0 0 1-.191-.476v-2.252a1.059 1.059 0 0 1 1.08-1.093h3.448a.8.8 0 0 0 .591-.231.801.801 0 0 0 .232-.592v-4.785c0-.306.104-.563.31-.77.208-.207.464-.31.77-.31h2.532l-1.27-5.185c-.514-2.046-1.615-3.7-3.304-4.962-1.69-1.263-3.599-1.894-5.727-1.894-2.586 0-4.794.906-6.622 2.717-1.828 1.81-2.743 4.013-2.743 6.607 0 1.333.274 2.6.82 3.8a10.001 10.001 0 0 0 2.324 3.2l.87.8v4.95c0 .19-.064.348-.193.476a.649.649 0 0 1-.477.193.646.646 0 0 1-.476-.193.648.648 0 0 1-.192-.476v-4.364Z\" fill=\"#777\"/></g></svg>\n                <span class=\"custom-tooltip\">test yourself with a liveTest</span>\n            </div>\n    </div>\n</div>";
var HEADER_CONTENT_HTML = /*html*/ "\n<nav class=\"header-nav-bar\" data-topbar role=\"navigation\">\n    <section class=\"header-logo-container\">\n        <a class=\"immediately-go-to-link\" href=\"https://www.manning.com\"><img class=\"header-manning-small-logo\" loading=\"lazy\" src=\"".concat(WebUtils/* default.getLivebookCdn */.Z.getLivebookCdn(), "assets/images/manning-small-logo.svg\" width=\"58\" height=\"40\"></a>\n        <a class=\"immediately-go-to-link\" style=\"cursor: auto;\" href=\"https://www.manning.com\">\n            <svg class=\"header-manning-big-logo\" width=\"192\" height=\"40\" viewBox=\"0 0 193 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path class=\"_manning-m\" style=\"cursor: pointer;\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7.38169 0H30.1614V24.4825C31.4665 16.4146 32.5868 8.16121 33.7995 0H56.5803V40H35.0829V5.68287C33.3279 17.042 31.636 28.4699 30.0549 40H8.6683V4.26049C6.35371 16.077 4.2934 28.1412 2.03097 40H0C2.43629 26.7888 4.85956 13.5632 7.27303 0.32867C7.26299 0.169887 7.25674 0.0188754 7.38171 0\" fill=\"#333333\"/>\n                <path class=\"_manning-word\" d=\"M188.807 21C185.188 21 183.378 24.1597 183.378 30.4763C183.378 36.8233 185.288 40 189.116 40C190.295 40 191.267 39.7723 192.037 39.3193V34.2421C192.037 31.1633 190.944 29.6257 188.757 29.6257C188.448 29.6257 188.151 29.651 187.861 29.6981V31.739C187.946 31.7239 188.091 31.7153 188.297 31.7153C188.705 31.7153 188.996 31.8524 189.166 32.1261C189.388 32.468 189.5 33.1026 189.5 34.0222V37.9091C189.432 37.926 189.34 37.9341 189.218 37.9341C187.153 37.9341 186.12 35.4464 186.12 30.4763C186.12 25.5365 187.185 23.0685 189.321 23.0685C189.644 23.0685 190.046 23.1169 190.525 23.2121V21.2212C189.98 21.0738 189.406 21 188.807 21ZM78 21.1238V39.8749H80.6108V29.8693L82.3531 34.8003H83.529L85.27 29.8693V39.8749H87.9126V30.4993V21.1238H86.6037L82.939 30.8897L79.3061 21.1238L78 21.1238ZM114.84 21.1238V39.8749H117.454V29.1899L121.884 39.8749H123.192V21.1238H120.552V31.8852L116.148 21.1238L114.84 21.1238ZM133.492 21.1238V39.8749H136.107V29.1899L140.538 39.8749H141.844V21.1238H139.204V31.8852L134.8 21.1238L133.492 21.1238ZM152.143 21.1238V39.8749H154.862V21.1238L152.143 21.1238ZM165.136 21.1238V39.8749H167.748V29.1899L172.181 39.8749H173.487V21.1238H170.848V31.8852L166.442 21.1238L165.136 21.1238ZM98.6811 21.1251L95.6839 39.8749H98.0939L98.5551 36.5489H101.268L101.756 39.8749H104.292L101.297 21.1251H98.6811ZM99.911 26.6394L100.989 34.483H98.8362L99.911 26.6394Z\" fill=\"#333333\"/>\n            </svg>\n        </a>\n    </section>\n    <section class=\"header-mid-container\">\n         <div class=\"header-search-container show-on-manning-online-discussions-page header-additional-search-container hidden\">\n            <div class='additional-search-selector-container'>\n                 <select id=\"additional-search-select\">\n                     <option value='all'>all</option>\n                     <option value='software engineering'>software engineering</option>\n                     <option value='data science'>data science</option>\n                     <option value='operations'>operations</option>\n                     <option value='discussions'>discussions</option>\n                     <option value='library'>library</option>\n                     <option value='dashboard'>dashboard</option>\n                 </select>\n             </div>\n            <input type=\"text\" id=\"search-additional-input\" placeholder=\"search\" autocomplete=\"off\" spellcheck=\"false\"/>\n            <button id=\"search-additional-button\">\n               <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                 <path d=\"M15.8928 14.0717L12.4 10.5789C12.3315 10.5104 12.2384 10.472 12.1414 10.472H11.3904C12.2925 9.36672 12.8342 7.95552 12.8342 6.41728C12.8342 2.87296 9.96096 0 6.41728 0C2.87296 0 0 2.87296 0 6.41728C0 9.9616 2.87296 12.8346 6.41728 12.8346C7.9552 12.8346 9.3664 12.2928 10.4717 11.3907V12.1418C10.4717 12.2387 10.5101 12.3318 10.5786 12.4003L14.0717 15.8931C14.2144 16.0358 14.4458 16.0358 14.5888 15.8931L15.8928 14.5888C15.9613 14.5203 16 14.4272 16 14.3302C16 14.2333 15.9613 14.1402 15.8928 14.0717ZM6.41728 10.4723C4.1776 10.4723 2.36192 8.65696 2.36192 6.41728C2.36192 4.1776 4.1776 2.36192 6.41728 2.36192C8.65696 2.36192 10.4723 4.17728 10.4723 6.41696C10.4723 8.65664 8.65664 10.4723 6.41728 10.4723Z\" fill=\"currentColor\"/>\n               </svg>\n            </button>\n            <button id=\"search-additional-close\" class=\"close-search-icon\">\n                 <i class='fa fa-times'/>\n            </button>\n        </div>\n        <div class=\"header-search-container show-on-all-pages header-main-search-container\">\n            <div class='search-categories-selector-container'></div>\n            <input type=\"text\" id=\"search-input\" placeholder=\"search for books and inside books...\" autocomplete=\"off\" spellcheck=\"false\"/>\n            <i class=\"fa fa-times close-search-icon\"></i>\n            <button>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M15.8928 14.0717L12.4 10.5789C12.3315 10.5104 12.2384 10.472 12.1414 10.472H11.3904C12.2925 9.36672 12.8342 7.95552 12.8342 6.41728C12.8342 2.87296 9.96096 0 6.41728 0C2.87296 0 0 2.87296 0 6.41728C0 9.9616 2.87296 12.8346 6.41728 12.8346C7.9552 12.8346 9.3664 12.2928 10.4717 11.3907V12.1418C10.4717 12.2387 10.5101 12.3318 10.5786 12.4003L14.0717 15.8931C14.2144 16.0358 14.4458 16.0358 14.5888 15.8931L15.8928 14.5888C15.9613 14.5203 16 14.4272 16 14.3302C16 14.2333 15.9613 14.1402 15.8928 14.0717ZM6.41728 10.4723C4.1776 10.4723 2.36192 8.65696 2.36192 6.41728C2.36192 4.1776 4.1776 2.36192 6.41728 2.36192C8.65696 2.36192 10.4723 4.17728 10.4723 6.41696C10.4723 8.65664 8.65664 10.4723 6.41728 10.4723Z\" fill=\"currentColor\"/>\n                </svg>\n            </button>\n            <div class='search-autocomplete-container'></div>\n        </div>\n        <div class=\"show-on-all-pages hide-on-all-subscriber-pages hide-on-edit-page header-item-container browse-item-container header-item-with-label\">\n            <span class=\"header-icon\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 27.79 28\">\n                    <defs>\n                        <style>.cls-1 {fill:currentColor;fill-rule:evenodd;}</style>\n                    </defs>\n                    <path class=\"cls-1\" d=\"M27.66,24.16l-7-18.73a2,2,0,0,0-2.57-1.18l-3.26,1.2a2,2,0,0,0-.87.64V2a2,2,0,0,0-2-2H8A2,2,0,0,0,6,2V7H2A2,2,0,0,0,0,9V26a2,2,0,0,0,2,2H6a1.87,1.87,0,0,0,1-.28A1.91,1.91,0,0,0,8,28h4a2,2,0,0,0,2-2V8.81l6.7,17.93a2,2,0,0,0,2.58,1.19l3.26-1.2A2,2,0,0,0,27.66,24.16ZM2,26V9H6V26Zm10,0H8V9s0-.06,0-.09V2h4Zm10.58.05-7-18.73,3.26-1.2,7,18.73Z\"/>\n                </svg>\n                <span class=\"header-icon-label\">browse</span>\n            </span>\n        </div>\n        <div class=\"header-item-container show-on-edit-page header-item-with-label index-button-container\" data-title=\"index terms\" data-tooltip aria-haspopup=\"true\">\n            <div class=\"header-index-button header-icon\">\n            <svg width=\"20\" height=\"29\" viewBox=\"0 0 20 29\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.44442 20.9034C9.22283 20.1332 10.4758 20.1322 11.2555 20.9012L17.4601 27.0205L17.4601 2.93386H2.27235V27.0099L8.44442 20.9034ZM16.0394 28.3964C17.2967 29.6364 19.4601 28.7663 19.4601 27.0205V2.93386C19.4601 1.85431 18.5646 0.979165 17.4601 0.979165H2.27235C1.16778 0.979165 0.272352 1.85431 0.272352 2.93386V27.0099C0.272352 28.7571 2.43884 29.6266 3.69519 28.3836L9.85109 22.2931L16.0394 28.3964Z\" fill=\"currentColor\"/>\n            </svg>\n                <span class=\"header-icon-label\">index</span>\n            </div>\n        </div>\n        <div class=\"show-on-all-logged-in-pages hide-on-edit-page header-item-container my-titles-item-container header-item-with-label hide-on-all-subscriber-pages\">\n            <div class=\"header-icon books-button\">\n                <svg width=\"30\" height=\"28\" viewBox=\"0 0 30 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.5707 9.17014C16.5688 9.17014 18.1885 7.56187 18.1885 5.57798C18.1885 3.59409 16.5688 1.98582 14.5707 1.98582C12.5727 1.98582 10.9529 3.59409 10.9529 5.57798C10.9529 7.56187 12.5727 9.17014 14.5707 9.17014ZM20.1885 5.57798C20.1885 8.65861 17.6734 11.156 14.5707 11.156C11.4681 11.156 8.95291 8.65861 8.95291 5.57798C8.95291 2.49735 11.4681 0 14.5707 0C17.6734 0 20.1885 2.49735 20.1885 5.57798Z\" fill=\"currentColor\"/>\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.30493 20.1943C7.04506 18.6539 5.75 16.8404 3.73011 16.5651C2.46404 16.3928 1.24391 16.9521 0.784966 17.915C0.0448406 19.4553 1.33837 21.2746 3.36667 21.546C4.62586 21.7164 5.84752 21.1515 6.30493 20.1943ZM3.53973 17.9423C2.72638 17.8317 2.18766 18.2216 2.05041 18.5096L2.04853 18.5135C1.93132 18.7575 1.93937 19.0643 2.18136 19.4046C2.43056 19.7551 2.90625 20.0817 3.55367 20.1684L3.55576 20.1687C4.35785 20.2772 4.90268 19.8859 5.04008 19.5984L5.04137 19.5957C5.15842 19.3521 5.15038 19.0467 4.90882 18.707C4.6597 18.3566 4.18448 18.0302 3.54004 17.9423\" fill=\"currentColor\"/>\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M28.5088 18.6714C28.3741 16.97 26.3393 16.0424 24.4514 16.8068C23.2682 17.2861 22.4931 18.3762 22.5806 19.4379C22.7153 21.1393 24.7516 22.0727 26.6449 21.3008C27.8212 20.8232 28.5947 19.7275 28.5088 18.6714ZM24.98 18.0939C24.2199 18.402 23.9498 19.0071 23.9759 19.3246L23.9763 19.329C23.9976 19.5984 24.1591 19.8601 24.54 20.0347C24.9323 20.2145 25.5088 20.2613 26.1131 20.0149L26.115 20.0141C26.8643 19.7099 27.1391 19.1006 27.1133 18.7833L27.1131 18.7804C27.0918 18.5113 26.931 18.2508 26.5508 18.0765C26.1586 17.8968 25.5824 17.8501 24.98 18.0939Z\" fill=\"currentColor\"/>\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M20.6 13.9007C21.8 13.9007 23 14.1986 24.2 14.6951V16.9207C24.2815 16.8796 24.3654 16.8416 24.4514 16.8067C24.9707 16.5965 25.5011 16.5142 26 16.5409V13.7022C26 13.5036 25.9 13.4043 25.8 13.305C24.2 12.4114 22.4 11.9149 20.6 11.9149C18.6 11.9149 16.7 12.5107 14.8 13.6029C14.7 13.6029 14.6 13.7022 14.6 13.7022C14.6 13.7022 14.4 13.7022 14.4 13.6029C12.5 12.5107 10.5 11.9149 8.6 11.9149C6.7 11.9149 5 12.4114 3.2 13.305C3.1 13.4043 3 13.5036 3 13.7022V16.5455C3.23809 16.5259 3.48322 16.5317 3.73011 16.5653C4.19766 16.629 4.62637 16.7752 5 16.9812V14.6951C6.2 14.1986 7.4 13.9007 8.6 13.9007C10.2 13.9007 11.8 14.3972 13.4 15.2908C13.8 15.4894 14.2 15.5887 14.7 15.5887C15.2 15.5887 15.6 15.4894 16 15.2908C17.4 14.3972 19 13.9007 20.6 13.9007ZM5 21.3519C4.50962 21.5484 3.94206 21.6241 3.36667 21.5462C3.24155 21.5294 3.11923 21.5068 3 21.4787V24.0284V27.0071C3 27.305 3.2 27.4043 3.4 27.4043H3.6C5.2 26.7093 6.8 26.3121 8.5 26.3121C10.6 26.3121 12.6 26.9078 14.5 28C16.4 26.9078 18.4 26.3121 20.5 26.3121C22.2 26.3121 23.8 26.7093 25.4 27.4043H25.6C25.8 27.4043 26 27.2057 26 27.0071V24.0284V21.4985C25.3646 21.6317 24.7391 21.586 24.2 21.3964V23.9291V24.7234C23 24.4256 21.8 24.227 20.6 24.227C18.5 24.227 16.5 24.7234 14.6 25.6171C12.7 24.7234 10.6 24.227 8.6 24.227C7.4 24.227 6.2 24.4256 5 24.7234V23.9291V21.3519Z\" fill=\"currentColor\"/>\n                </svg>\n                <span class=\"header-icon-label\">my titles</span>\n                <div class=\"header-icon-notification wish-list-notification hidden\">\n                    <i class=\"fal fa-heart\"></i>\n                </div>\n            </div>\n        </div>\n        <div class=\"show-on-all-subscriber-pages hide-on-edit-page header-item-container dashboard-item-container header-item-with-label\">\n            <a class=\"header-icon dashboard-button\" href=\"").concat(GlobalStateInfo/* GlobalStateInfo.getSubscriptionsLink */.UU.getSubscriptionsLink(), "\">\n                <svg width=\"30\" height=\"28\" viewBox=\"0 0 36 38\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M18.5737 5.30664C18.2408 5.03125 17.7592 5.03125 17.4263 5.30664L6.42629 14.4066C6.21962 14.5776 6.09998 14.8319 6.09998 15.1001V29.4001C6.09998 30.3111 6.43968 31.195 7.06023 31.8551C7.68254 32.517 8.53887 32.9001 9.44442 32.9001H14C14.497 32.9001 14.9 32.4972 14.9 32.0001V19.9001H21.1V32.0001C21.1 32.4972 21.5029 32.9001 22 32.9001H26.5555C27.4611 32.9001 28.3174 32.517 28.9397 31.8551C29.5603 31.195 29.9 30.3111 29.9 29.4001V15.1001C29.9 14.8319 29.7803 14.5776 29.5737 14.4066L18.5737 5.30664ZM22.9 31.1001H26.5555C26.9466 31.1001 27.3338 30.9354 27.6283 30.6221C27.9246 30.3069 28.1 29.8683 28.1 29.4001V15.5236L18 7.16815L7.89998 15.5236V29.4001C7.89998 29.8683 8.07535 30.3069 8.37165 30.6221C8.66618 30.9354 9.05335 31.1001 9.44442 31.1001H13.1V19.0001C13.1 18.503 13.5029 18.1001 14 18.1001H22C22.497 18.1001 22.9 18.503 22.9 19.0001V31.1001Z\" fill=\"currentColor\"/>\n                </svg>\n                <span class=\"header-icon-label\">home</span>\n            </a>\n        </div>\n        <div class=\"header-item-container show-on-review-report show-on-logged-in-review-page-non-reviewer header-item-with-label\" data-title=\"filter reviews\" data-tooltip aria-haspopup=\"true\">\n            <div class=\"review-filter-menu-button header-icon\">\n                <i class=\"fal fa-filter\"></i>\n                <span class=\"header-icon-label\">filter</span>\n            </div>\n        </div>\n    </section>\n    <section class=\"header-right-icons-container\">\n        <div class=\"header-shopping-cart-button-container hide-on-edit-page show-on-all-pages header-item-container hide-on-review-page header-item-with-label\">\n            <div class=\"shopping-cart-button header-icon\">\n                <svg width=\"32\" height=\"28\" viewBox=\"0 0 32 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <g clip-path=\"url(#clip0)\">\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.2555 25.7607C14.5331 23.963 13.0066 22.4429 11.2152 22.7141C10.0924 22.8844 9.1778 23.799 9.00749 24.9218C8.72995 26.7195 10.2564 28.246 12.0541 27.9684C13.1706 27.7981 14.0852 26.8772 14.2555 25.7607ZM12.8678 25.5399C12.9939 24.6947 12.2811 23.9819 11.4359 24.108C10.9061 24.1837 10.4771 24.6127 10.4014 25.1488C10.269 25.9941 10.9881 26.7131 11.8333 26.5807C12.3568 26.4987 12.7858 26.0634 12.8678 25.5399Z\" fill=\"currentColor\"/>\n                        <path d=\"M10.0538 21.4841C8.72922 21.4841 8.65353 20.0396 8.65353 19.9766C8.63461 19.8189 6.89367 6.9385 6.81167 6.16896C6.71075 5.23541 5.6132 4.59203 5.56274 4.56679L1.21672 2.5294C0.144405 1.96801 -0.101597 1.18585 0.0308657 0.63708C0.125482 0.258617 0.396714 0 0.705792 0C0.787793 0 0.876101 0.0189232 0.964409 0.0567695C5.17166 2.0374 8.81753 3.75941 8.96891 4.69295C9.12661 5.68957 9.41676 8.13066 9.41676 8.14958L9.4483 8.42712H29.9926C30.5603 8.42712 30.945 8.57851 31.1469 8.86866C31.5569 9.46159 31.1721 10.5213 31.1658 10.5339L27.8921 20.2541C27.8732 20.3424 27.6398 21.4841 26.5422 21.4841H10.0538ZM10.7603 18.9863H26.1953L28.7121 10.4645H9.6943L10.7603 18.9863Z\" fill=\"currentColor\"/>\n                        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M25.849 25.7608C26.1266 23.9631 24.6001 22.4366 22.8024 22.7142C21.6859 22.8908 20.7713 23.7991 20.601 24.9156C20.3234 26.7069 21.8436 28.2334 23.6413 27.9622C24.7641 27.7919 25.6787 26.8773 25.849 25.7608ZM24.4614 25.5399C24.5875 24.6947 23.8748 23.9819 23.0295 24.108C22.506 24.1837 22.0708 24.6127 21.9951 25.1488C21.8626 25.9941 22.5817 26.7131 23.4269 26.5807C23.9505 26.4987 24.3794 26.0634 24.4614 25.5399Z\" fill=\"currentColor\"/>\n                    </g>\n                    <defs>\n                        <clipPath id=\"clip0\">\n                            <rect width=\"31.3368\" height=\"28\" fill=\"white\"/>\n                        </clipPath>\n                    </defs>\n                </svg>            \n                <span class=\"header-icon-label\">cart</span>\n            </div>\n            <div class=\"header-icon-notification hidden\"></div>\n        </div>\n        <!--<div class=\"header-site-menu-button-container hide-on-edit-page show-on-all-pages header-item-container hide-on-review-page header-item-with-label\">\n            <div class=\"site-button header-icon\">\n                <svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M3.5 6.625C1.77411 6.625 0.375 5.22589 0.375 3.5C0.375 1.77411 1.77411 0.375 3.5 0.375C5.22589 0.375 6.625 1.77411 6.625 3.5C6.625 5.22589 5.22589 6.625 3.5 6.625ZM14 27.625C12.2741 27.625 10.875 26.2259 10.875 24.5C10.875 22.7741 12.2741 21.375 14 21.375C15.7259 21.375 17.125 22.7741 17.125 24.5C17.125 26.2259 15.7259 27.625 14 27.625ZM3.5 27.625C1.77411 27.625 0.375 26.2259 0.375 24.5C0.375 22.7741 1.77411 21.375 3.5 21.375C5.22589 21.375 6.625 22.7741 6.625 24.5C6.625 26.2259 5.22589 27.625 3.5 27.625ZM3.5 17.125C1.77411 17.125 0.375 15.7259 0.375 14C0.375 12.2741 1.77411 10.875 3.5 10.875C5.22589 10.875 6.625 12.2741 6.625 14C6.625 15.7259 5.22589 17.125 3.5 17.125ZM14 17.125C12.2741 17.125 10.875 15.7259 10.875 14C10.875 12.2741 12.2741 10.875 14 10.875C15.7259 10.875 17.125 12.2741 17.125 14C17.125 15.7259 15.7259 17.125 14 17.125ZM21.375 3.5C21.375 1.77411 22.7741 0.375 24.5 0.375C26.2259 0.375 27.625 1.77411 27.625 3.5C27.625 5.22589 26.2259 6.625 24.5 6.625C22.7741 6.625 21.375 5.22589 21.375 3.5ZM14 6.625C12.2741 6.625 10.875 5.22589 10.875 3.5C10.875 1.77411 12.2741 0.375 14 0.375C15.7259 0.375 17.125 1.77411 17.125 3.5C17.125 5.22589 15.7259 6.625 14 6.625ZM24.5 17.125C22.7741 17.125 21.375 15.7259 21.375 14C21.375 12.2741 22.7741 10.875 24.5 10.875C26.2259 10.875 27.625 12.2741 27.625 14C27.625 15.7259 26.2259 17.125 24.5 17.125ZM24.5 27.625C22.7741 27.625 21.375 26.2259 21.375 24.5C21.375 22.7741 22.7741 21.375 24.5 21.375C26.2259 21.375 27.625 22.7741 27.625 24.5C27.625 26.2259 26.2259 27.625 24.5 27.625Z\" fill=\"#828282\" stroke=\"white\" stroke-width=\"0.75\"/>\n                </svg>\n                <span class=\"header-icon-label\">browse</span>\n            </div>\n        </div>-->\n        <div class=\"header-sign-in-button-container show-on-all-not-logged-in-pages header-item-container header-item-with-label\">\n            <div class=\"header-icon\"> \n                <svg class=\"avatar-icon\" width=\"22\" height=\"30\" viewBox=\"0 0 22 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.0503 3.15739C8.57031 2.66025 5.71847 5.54102 6.14142 9.09382L6.14288 9.10608L6.14281 9.10609C6.38912 11.4051 8.29151 13.3237 10.7068 13.5736L10.7164 13.5746L10.7259 13.5757C14.1535 13.9937 17.068 11.1652 16.6576 7.65433C16.3178 5.31573 14.3858 3.40828 12.0869 3.16197L12.0686 3.16L12.0503 3.15739ZM12.3291 1.07592C7.4196 0.386074 3.48311 4.49739 4.05542 9.33598C4.41147 12.6311 7.10307 15.3074 10.4811 15.6614C15.2455 16.2365 19.3224 12.2742 18.7414 7.39382L18.74 7.38162L18.7382 7.36945C18.274 4.11966 15.6177 1.43722 12.3291 1.07592Z\" fill=\"currentColor\"/>\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.3921 16.8559C16.4921 16.2344 17.7592 16.4075 18.6721 17.1683L18.6965 17.1886L18.7196 17.2103C20.6274 19.0059 21.75 21.4813 21.75 24.275C21.75 25.2619 21.2671 26.0629 20.5982 26.6639C19.9445 27.2511 19.0715 27.6915 18.1244 28.0225C16.2242 28.6863 13.7603 29 11.35 29C8.93957 29 6.47573 28.6863 4.57551 28.0225C3.62836 27.6915 2.7554 27.2511 2.10175 26.6639C1.43283 26.0629 0.949951 25.2619 0.949951 24.275C0.949951 21.487 2.06871 19.0079 4.08191 17.2084C4.95575 16.3588 6.35997 16.2646 7.40762 16.8558C8.54564 17.4662 9.9693 17.825 11.4 17.825C12.8305 17.825 14.2541 17.4662 15.3921 16.8559ZM17.3065 18.7643C17.0281 18.5441 16.7105 18.5211 16.4209 18.6866L16.4094 18.6932L16.3978 18.6995C14.9374 19.4858 13.1652 19.925 11.4 19.925C9.63474 19.925 7.86249 19.4858 6.40215 18.6995L6.39049 18.6932L6.379 18.6866C6.03783 18.4917 5.66684 18.593 5.54241 18.7174L5.5206 18.7392L5.49753 18.7597C3.92361 20.1588 3.04995 22.0723 3.04995 24.275C3.04995 24.513 3.15144 24.7839 3.50519 25.1017C3.87419 25.4332 4.46217 25.7584 5.26814 26.04C6.87417 26.6011 9.08533 26.9 11.35 26.9C13.6146 26.9 15.8257 26.6011 17.4318 26.04C18.2377 25.7584 18.8257 25.4332 19.1947 25.1017C19.5485 24.7839 19.65 24.513 19.65 24.275C19.65 22.0815 18.7828 20.1666 17.3065 18.7643Z\" fill=\"currentColor\"/>\n                </svg>\n                <span class=\"header-icon-label\">sign in</span>\n            </div>\n        </div>\n        <div class=\"header-settings-button-container show-on-all-logged-in-pages header-item-container header-item-with-label\">\n            <div class=\"header-icon settings-button lb-avatar-container\">\n                <svg class=\"avatar-icon\" width=\"22\" height=\"30\" viewBox=\"0 0 22 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.0503 3.15739C8.57031 2.66025 5.71847 5.54102 6.14142 9.09382L6.14288 9.10608L6.14281 9.10609C6.38912 11.4051 8.29151 13.3237 10.7068 13.5736L10.7164 13.5746L10.7259 13.5757C14.1535 13.9937 17.068 11.1652 16.6576 7.65433C16.3178 5.31573 14.3858 3.40828 12.0869 3.16197L12.0686 3.16L12.0503 3.15739ZM12.3291 1.07592C7.4196 0.386074 3.48311 4.49739 4.05542 9.33598C4.41147 12.6311 7.10307 15.3074 10.4811 15.6614C15.2455 16.2365 19.3224 12.2742 18.7414 7.39382L18.74 7.38162L18.7382 7.36945C18.274 4.11966 15.6177 1.43722 12.3291 1.07592Z\" fill=\"currentColor\"/>\n                    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M15.3921 16.8559C16.4921 16.2344 17.7592 16.4075 18.6721 17.1683L18.6965 17.1886L18.7196 17.2103C20.6274 19.0059 21.75 21.4813 21.75 24.275C21.75 25.2619 21.2671 26.0629 20.5982 26.6639C19.9445 27.2511 19.0715 27.6915 18.1244 28.0225C16.2242 28.6863 13.7603 29 11.35 29C8.93957 29 6.47573 28.6863 4.57551 28.0225C3.62836 27.6915 2.7554 27.2511 2.10175 26.6639C1.43283 26.0629 0.949951 25.2619 0.949951 24.275C0.949951 21.487 2.06871 19.0079 4.08191 17.2084C4.95575 16.3588 6.35997 16.2646 7.40762 16.8558C8.54564 17.4662 9.9693 17.825 11.4 17.825C12.8305 17.825 14.2541 17.4662 15.3921 16.8559ZM17.3065 18.7643C17.0281 18.5441 16.7105 18.5211 16.4209 18.6866L16.4094 18.6932L16.3978 18.6995C14.9374 19.4858 13.1652 19.925 11.4 19.925C9.63474 19.925 7.86249 19.4858 6.40215 18.6995L6.39049 18.6932L6.379 18.6866C6.03783 18.4917 5.66684 18.593 5.54241 18.7174L5.5206 18.7392L5.49753 18.7597C3.92361 20.1588 3.04995 22.0723 3.04995 24.275C3.04995 24.513 3.15144 24.7839 3.50519 25.1017C3.87419 25.4332 4.46217 25.7584 5.26814 26.04C6.87417 26.6011 9.08533 26.9 11.35 26.9C13.6146 26.9 15.8257 26.6011 17.4318 26.04C18.2377 25.7584 18.8257 25.4332 19.1947 25.1017C19.5485 24.7839 19.65 24.513 19.65 24.275C19.65 22.0815 18.7828 20.1666 17.3065 18.7643Z\" fill=\"currentColor\"/>\n                </svg>\n                \n                <svg class=\"settings-menu-dots-icon\" width=\"12\" height=\"28\" viewBox=\"0 0 12 28\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M5.96662 19.1169C7.60505 19.1169 8.93325 20.4451 8.93325 22.0836C8.93325 23.722 7.60505 25.0502 5.96662 25.0502C4.3282 25.0502 3 23.722 3 22.0836C3 20.4451 4.3282 19.1169 5.96662 19.1169Z\" fill=\"currentColor\"/>\n                    <path d=\"M5.96662 11.0835C7.60505 11.0835 8.93325 12.4117 8.93325 14.0501C8.93325 15.6885 7.60505 17.0167 5.96662 17.0167C4.3282 17.0167 3 15.6885 3 14.0501C3 12.4117 4.3282 11.0835 5.96662 11.0835Z\" fill=\"currentColor\"/>\n                    <path d=\"M5.96662 3.05006C7.60505 3.05006 8.93325 4.37826 8.93325 6.01668C8.93325 7.6551 7.60505 8.9833 5.96662 8.9833C4.3282 8.9833 3 7.6551 3 6.01668C3 4.37826 4.3282 3.05006 5.96662 3.05006Z\" fill=\"currentColor\"/>\n                </svg>\n\n                <span class=\"user-initials-container header-icon-label\">&nbsp;</span>\n                <span class=\"header-icon-notification hidden\"></span>\n                <span class=\"header-icon-label settings-more-label\">more</span>\n            </div>\n        </div>\n    </section>\n</nav>\n<div id=\"header-browse-container\" class=\"collapsed\">\n    <a class=\"header-browse-link\" href=\"https://www.manning.com/catalog\">all <span class=\"hideable-label\">&nbsp;products</span></a>\n    <a class=\"header-browse-link\" href=\"https://www.manning.com/meap-catalog\">MEAP</a>\n    <a class=\"header-browse-link\" href=\"https://livebook.manning.com/\">liveBook</a>\n    <a class=\"header-browse-link\" href=\"https://livevideo.manning.com/\">liveVideo</a>\n    <a class=\"header-browse-link\" href=\"https://liveproject.manning.com/\">liveProject</a>\n    <a class=\"header-browse-link\" href=\"https://www.manning.com/liveaudio-landing\">liveAudio</a>\n    <a class=\"header-browse-link\" href=\"https://freecontent.manning.com/\">free <span class=\"hideable-label\">&nbsp;content</span></a>\n</div>\n<div id=\"header-notification-container\" class=\"hidden\"></div>\n<div id=\"header-site-wide-promo-container\" class=\"hidden\"></div>\n<div id=\"review-structure-menu-container\" class=\"show-on-review-report\" data-title=\"review structure\" data-tooltip aria-haspopup=\"true\">\n    <div class=\"review-structure-menu-button header-icon\">\n        <i class=\"fal fa-bars\"></i>\n    </div>\n</div>\n<div id=\"toc-icon-container\" class=\"show-on-book-page toc-menu-button\">\n    <i class=\"fa fa-bars\" style=\"font-size:24px !important;\"></i>\n</div>\n<div id=\"book-additional-commands-container\" class=\"show-on-book-page hide-on-edit-page\">\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"3.92322\" cy=\"11.825\" r=\"2.97339\" fill=\"currentColor\"/>\n        <circle cx=\"11.975\" cy=\"11.825\" r=\"2.97339\" fill=\"currentColor\"/>\n        <circle cx=\"20.0266\" cy=\"11.825\" r=\"2.97339\" fill=\"currentColor\"/>\n    </svg>\n    <div class=\"header-icon-notification disappear\"></div>\n</div>");
var FOOTER_CONTENT_HTML = /*html*/ "<div style=\"overflow: hidden; position: relative;\">\n<div id=\"add-to-cart-stripe\" class=\"disappear hidden\">\n    <span class=\"add-to-cart-stripe-message\">add to cart</span>\n    <i class=\"fal fa-times close-icon\" aria-hidden=\"true\"></i>\n    <span class=\"add-to-cart-stripe-icon-container\">\n        <i class=\"fal fa-shopping-cart\" aria-hidden=\"true\"></i>\n    </span>\n</div>\n</div>\n<div id=\"footer-promo-container\" class=\"hidden\">\n</div>\n<div class=\"main-footer-wrapper\">\n<div class=\"row\">\n    <div class=\"large-12 columns\">\n        <div class=\"footer-content-wrapper\">\n            <a class=\"previous-element-link invisible footer-item\">\n                <i class=\"fa fa-chevron-left\"></i>\n                <span class=\"book-element-label\"></span>\n            </a>\n            <div class=\"footer-item copyright-book-title-container\">\n                <span class=\"copyright-label text-label\">&copy; ".concat(new Date().getFullYear(), " Manning Publications Co.</span>\n                <span class=\"footer-book-title-label hidden\">\n                    <i class=\"fa fa-plus reading-list-icon\" title=\"edit in reading list\" aria-haspopup=\"true\"></i>\n                    <i class=\"fa fa-heart wish-list-icon\" title=\"add/remove from wish list\" aria-haspopup=\"true\"></i>\n                    <span class=\"book-title-label-text\"></span>\n                </span>\n            </div>\n            \n            <a class=\"next-element-link invisible footer-item\">\n                <span class=\"book-element-label\"></span>\n                <i class=\"fa fa-chevron-right\"></i>\n            </a>\n        </div>\n    </div>\n</div>\n</div>");
var CommonPageFiller = new CommonPageFillerClass();

;// CONCATENATED MODULE: ./src/ts/pages/epubPreview/EpubPreviewPageManager.ts

var EpubPreviewPageManagerClass = /** @class */ (function () {
    function EpubPreviewPageManagerClass() {
    }
    EpubPreviewPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var EpubPreviewPage = _a.EpubPreviewPage;
            $(document).trigger("pageAppCodeLoaded");
            EpubPreviewPage.initialize();
        });
    };
    EpubPreviewPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var EpubPreviewPage = _a.EpubPreviewPage;
            return EpubPreviewPage.clean();
        });
    };
    EpubPreviewPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    EpubPreviewPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | epubPage */[__webpack_require__.e(9710), __webpack_require__.e(7299), __webpack_require__.e(4360)]).then(__webpack_require__.bind(__webpack_require__, 75846));
    };
    return EpubPreviewPageManagerClass;
}());
var EpubPreviewPageManager = new EpubPreviewPageManagerClass();

// EXTERNAL MODULE: ./src/ts/features/search/SearchModule.ts
var SearchModule = __webpack_require__(73608);
// EXTERNAL MODULE: ./src/ts/services/userService/UserService.ts
var UserService = __webpack_require__(70296);
;// CONCATENATED MODULE: ./src/ts/managers/MarketingEmailSubscriptionManager.tsx







var SubscriptionType;
(function (SubscriptionType) {
    SubscriptionType[SubscriptionType["WishList"] = 0] = "WishList";
    SubscriptionType[SubscriptionType["Tokens"] = 1] = "Tokens";
    SubscriptionType[SubscriptionType["FreePreview"] = 2] = "FreePreview";
})(SubscriptionType || (SubscriptionType = {}));
var MARKETING_SUBSCRIPTION_FORM_HTML = /*html*/ "<form id=\"marketing-subscription-form\" class=\"hidden\">\n    <div class=\"marketing-subscription-title-container\">Sign up to our mailing list for exclusive discounts and updates on this and other Manning products.</div>\n    <div class=\"marketing-subscription-email-input-container\">\n        <input type=\"email\" placeholder=\"email\" required/>\n        <button type=\"submit\" class=\"marketing-subscription-confirm\">subscribe</button>\n    </div>\n    <div class=\"marketing-subscription-close-button\"><i class=\"fal fa-times\"></i></div>\n</form>";
var MarketingEmailSubscriptionManagerClass = /** @class */ (function () {
    function MarketingEmailSubscriptionManagerClass() {
        var _this = this;
        this.handleFormSubmission = this.handleFormSubmission.bind(this);
        $(document).on("wishListAdd", function (e, productId) {
            setTimeout(function () {
                _this.handleWishListAdd(productId);
            }, 1000);
        })
            .on("unlockSectionSubsectionSuccess unlockBookElementSuccess unlockParagraphSuccess", function () {
            _this.handleTokenUnlockSuccess();
        })
            .on("halfWayThroughFreePreview", function () { return _this.handleHalfWayThroughFreePreview(); });
        $(document.body).append(MARKETING_SUBSCRIPTION_FORM_HTML);
        $("#marketing-subscription-form .marketing-subscription-close-button").on("click", function () { return _this.hideSubscribeForm(); });
        $("#marketing-subscription-form").on("submit", this.handleFormSubmission);
    }
    MarketingEmailSubscriptionManagerClass.prototype.initialize = function () { };
    MarketingEmailSubscriptionManagerClass.prototype.handleHalfWayThroughFreePreview = function () {
        this.productId = GlobalStateInfo/* GlobalStateInfo.book */.UU.book && GlobalStateInfo/* GlobalStateInfo.book.manningId */.UU.book.manningId;
        this.subscriptionType = SubscriptionType.FreePreview;
        this.showMarketingSubscriptionFormIfNecessary();
    };
    MarketingEmailSubscriptionManagerClass.prototype.handleTokenUnlockSuccess = function () {
        this.productId = GlobalStateInfo/* GlobalStateInfo.book */.UU.book && GlobalStateInfo/* GlobalStateInfo.book.manningId */.UU.book.manningId;
        this.subscriptionType = SubscriptionType.Tokens;
        this.showMarketingSubscriptionFormIfNecessary();
    };
    MarketingEmailSubscriptionManagerClass.prototype.handleWishListAdd = function (productId) {
        this.productId = productId;
        this.subscriptionType = SubscriptionType.WishList;
        this.showMarketingSubscriptionFormIfNecessary();
    };
    MarketingEmailSubscriptionManagerClass.prototype.handleFormSubmission = function (e) {
        e.preventDefault();
        this.sendMarketingSubscription($("#marketing-subscription-form input").val());
        this.hideSubscribeForm();
        return false;
    };
    MarketingEmailSubscriptionManagerClass.prototype.sendMarketingSubscription = function (email) {
        $(document).trigger("marketingEmailSubscription", ["submitted", this.subscriptionType]);
        WebUtils/* default.getFromOurBackend */.Z.getFromOurBackend(WebUtils/* default.getAbsoluteUrl */.Z.getAbsoluteUrl(this.getAppropriateRoute()), function (data) {
            SettingsProvider/* default.set */.Z.set("email-subscription-given", true);
            $(document).trigger("requestNotification", "Thank you!");
        }, function (error) { }, {
            bookId: this.productId,
            email: email
        }, false);
    };
    MarketingEmailSubscriptionManagerClass.prototype.getAppropriateRoute = function () {
        switch (this.subscriptionType) {
            case SubscriptionType.FreePreview:
                return "/api/marketingSubscription/createFreePreviewEmailSubscription";
            case SubscriptionType.Tokens:
                return "/api/marketingSubscription/createTokensEmailSubscription";
            case SubscriptionType.WishList:
                return "/api/marketingSubscription/createWishListEmailSubscription";
        }
    };
    MarketingEmailSubscriptionManagerClass.prototype.showMarketingSubscriptionFormIfNecessary = function () {
        if (!AuthProvider/* AuthProvider.isCurrentlyLoggedIn */.H.isCurrentlyLoggedIn()) {
            return;
        }
        if (SettingsProvider/* default.get */.Z.get("email-subscription-offered")) {
            return;
        }
        $(document).trigger("marketingEmailSubscription", ["offered", this.subscriptionType]);
        SettingsProvider/* default.set */.Z.set("email-subscription-offered", true);
        UserService/* UserService.getUserEmail */.K.getUserEmail().then(function (email) {
            $("#marketing-subscription-form input").val(email || "");
        });
        $("#marketing-subscription-form").removeClass("hidden");
        EventUtils/* default.setTimeout */.Z.setTimeout(function () {
            if (!DeviceUtils/* default.isTouchDevice */.Z.isTouchDevice()) {
                $("#marketing-subscription-form input").focus();
            }
            $("#marketing-subscription-form").addClass("show");
        }, 16);
    };
    MarketingEmailSubscriptionManagerClass.prototype.hideSubscribeForm = function () {
        $("#marketing-subscription-form").removeClass("show");
        EventUtils/* default.setTimeout */.Z.setTimeout(function () {
            $("#marketing-subscription-form").addClass("hidden");
            $("#marketing-subscription-form input").val("");
        }, 250);
    };
    return MarketingEmailSubscriptionManagerClass;
}());
var MarketingEmailSubscriptionManager = new MarketingEmailSubscriptionManagerClass();

// EXTERNAL MODULE: ./src/ts/modules/DeviceSyncModule.ts
var modules_DeviceSyncModule = __webpack_require__(72988);
;// CONCATENATED MODULE: ./src/ts/features/bookEnchancements/progressBar/ProgressBarModule.ts

var ProgressBarModuleClass = /** @class */ (function () {
    function ProgressBarModuleClass() {
    }
    ProgressBarModuleClass.prototype.initialize = function () {
        this.getProgressBarSource().then(function (_a) {
            var ProgressBar = _a.ProgressBar;
            return ProgressBar.initialize();
        });
    };
    ProgressBarModuleClass.prototype.getProgressBarSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ProgressBarModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | progressBarModule */ 9946).then(__webpack_require__.bind(__webpack_require__, 76318));
    };
    return ProgressBarModuleClass;
}());
var ProgressBarModule = new ProgressBarModuleClass();

// EXTERNAL MODULE: ./src/ts/components/text/Progress.ts
var Progress = __webpack_require__(67596);
;// CONCATENATED MODULE: ./src/ts/pages/video/VideoPageManager.ts

var VideoPageManagerClass = /** @class */ (function () {
    function VideoPageManagerClass() {
    }
    VideoPageManagerClass.prototype.load = function (slug) {
        if (slug === void 0) { slug = ""; }
        this.getSource().then(function (_a) {
            var VideoPage = _a.VideoPage;
            VideoPage.initialize(slug);
        });
    };
    VideoPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var VideoPage = _a.VideoPage;
            $(document).trigger("pageAppCodeLoaded");
            VideoPage.clean();
        });
    };
    VideoPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    VideoPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | videoPage */[__webpack_require__.e(9710), __webpack_require__.e(229), __webpack_require__.e(4015)]).then(__webpack_require__.bind(__webpack_require__, 62904));
    };
    return VideoPageManagerClass;
}());
var VideoPageManager = new VideoPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/reviewReport/ReviewReportModule.ts

var ReviewReportModuleClass = /** @class */ (function () {
    function ReviewReportModuleClass() {
    }
    ReviewReportModuleClass.prototype.load = function (bookShortNameOrSlug, reviewVersion) {
        this.getSource().then(function (_a) {
            var ReviewReportPage = _a.ReviewReportPage;
            ReviewReportPage.initalize(bookShortNameOrSlug, reviewVersion);
        });
    };
    ReviewReportModuleClass.prototype.clean = function () {
        if (this.sourcePromise != null) {
            this.sourcePromise.then(function (_a) {
                var ReviewReportPage = _a.ReviewReportPage;
                ReviewReportPage.clean();
            });
        }
    };
    ReviewReportModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ReviewReportModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | review-report */[__webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(3326), __webpack_require__.e(9502), __webpack_require__.e(2805), __webpack_require__.e(2813), __webpack_require__.e(4697), __webpack_require__.e(2453)]).then(__webpack_require__.bind(__webpack_require__, 39688));
    };
    return ReviewReportModuleClass;
}());
var ReviewReportModule = new ReviewReportModuleClass();

// EXTERNAL MODULE: ./src/ts/modules/ActivityModule.ts
var ActivityModule = __webpack_require__(70933);
;// CONCATENATED MODULE: ./src/ts/features/onboarding/promoSpinner/PromoSpinnerModule.ts




var PromoSpinnerModuleClass = /** @class */ (function () {
    function PromoSpinnerModuleClass() {
    }
    PromoSpinnerModuleClass.prototype.initialize = function () {
        var _this = this;
        if (DeviceUtils/* default.isApp */.Z.isApp()) {
            return;
        }
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                EventUtils/* default.onUserHasInteracted */.Z.onUserHasInteracted(function () {
                    setTimeout(function () { return _this.show(); }, _this.timeout);
                });
            }
        });
    };
    PromoSpinnerModuleClass.prototype.show = function () {
        this.getSource().then(function (_a) {
            var PromoSpinnerManager = _a.PromoSpinnerManager;
            return PromoSpinnerManager.show();
        });
    };
    PromoSpinnerModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    PromoSpinnerModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | promoSpinner */ 2863).then(__webpack_require__.bind(__webpack_require__, 47089));
    };
    return PromoSpinnerModuleClass;
}());
var PromoSpinnerModule = new PromoSpinnerModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/concept/ConceptModule.ts

var ConceptModuleClass = /** @class */ (function () {
    function ConceptModuleClass() {
    }
    ConceptModuleClass.prototype.load = function (category, concept) {
        this.getSource().then(function (_a) {
            var ConceptPage = _a.ConceptPage;
            $(document).trigger("pageAppCodeLoaded");
            ConceptPage.initialize(category, concept);
        });
    };
    ConceptModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ConceptModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | conceptPage */[__webpack_require__.e(9710), __webpack_require__.e(877)]).then(__webpack_require__.bind(__webpack_require__, 12428));
    };
    return ConceptModuleClass;
}());
var ConceptModule = new ConceptModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/scrapbook/StandaloneScrapbookModule.ts

var StandaloneScrapbookModuleClass = /** @class */ (function () {
    function StandaloneScrapbookModuleClass() {
    }
    StandaloneScrapbookModuleClass.prototype.loadScrapbookItem = function (userId, scrapbookItemId) {
        this.getSource().then(function (_a) {
            var ScrapbookPage = _a.ScrapbookPage;
            $(document).trigger("pageAppCodeLoaded");
            ScrapbookPage.initializeScrapbookItemScrapbook(userId, scrapbookItemId);
        });
    };
    StandaloneScrapbookModuleClass.prototype.load = function (userId, scrapbookId) {
        this.getSource().then(function (_a) {
            var ScrapbookPage = _a.ScrapbookPage;
            $(document).trigger("pageAppCodeLoaded");
            ScrapbookPage.initialize(userId, scrapbookId);
        });
    };
    StandaloneScrapbookModuleClass.prototype.clean = function () {
        if (this.sourcePromise == null) {
            return;
        }
        this.getSource().then(function (_a) {
            var ScrapbookPage = _a.ScrapbookPage;
            return ScrapbookPage.clean();
        });
    };
    StandaloneScrapbookModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    StandaloneScrapbookModuleClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | scrapbookPage */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7213), __webpack_require__.e(2465), __webpack_require__.e(528), __webpack_require__.e(1029), __webpack_require__.e(5675), __webpack_require__.e(9624)]).then(__webpack_require__.bind(__webpack_require__, 89025));
    };
    return StandaloneScrapbookModuleClass;
}());
var StandaloneScrapbookModule = new StandaloneScrapbookModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/manning-online/ManningOnlinePageManager.ts

var ManningOnlinePageManagerClass = /** @class */ (function () {
    function ManningOnlinePageManagerClass() {
    }
    ManningOnlinePageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var ManningOnlinePage = _a.ManningOnlinePage;
            ManningOnlinePage.initialize();
        });
    };
    ManningOnlinePageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var ManningOnlinePage = _a.ManningOnlinePage;
            ManningOnlinePage.clean();
        });
    };
    ManningOnlinePageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ManningOnlinePageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | manningOnlinePage */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7213), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(3326), __webpack_require__.e(9502), __webpack_require__.e(5557), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(8784), __webpack_require__.e(6486), __webpack_require__.e(2465), __webpack_require__.e(688), __webpack_require__.e(1851), __webpack_require__.e(3006), __webpack_require__.e(6663), __webpack_require__.e(2782), __webpack_require__.e(528), __webpack_require__.e(1353), __webpack_require__.e(1355), __webpack_require__.e(7953), __webpack_require__.e(1809), __webpack_require__.e(6244), __webpack_require__.e(4945), __webpack_require__.e(1029), __webpack_require__.e(7343)]).then(__webpack_require__.bind(__webpack_require__, 39068));
    };
    return ManningOnlinePageManagerClass;
}());
var ManningOnlinePageManager = new ManningOnlinePageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/manning-online/ManningOnlineBetaPageManager.ts

var ManningOnlineBetaPageManagerClass = /** @class */ (function () {
    function ManningOnlineBetaPageManagerClass() {
    }
    ManningOnlineBetaPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var ManningOnlineBetaPage = _a.ManningOnlineBetaPage;
            ManningOnlineBetaPage.initialize();
        });
    };
    ManningOnlineBetaPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var ManningOnlineBetaPage = _a.ManningOnlineBetaPage;
            ManningOnlineBetaPage.clean();
        });
    };
    ManningOnlineBetaPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ManningOnlineBetaPageManagerClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | manningOnlineBetaPage */ 3247).then(__webpack_require__.bind(__webpack_require__, 25413));
    };
    return ManningOnlineBetaPageManagerClass;
}());
var ManningOnlineBetaPageManager = new ManningOnlineBetaPageManagerClass();

// EXTERNAL MODULE: ./src/ts/modules/UserProfileModule.ts
var UserProfileModule = __webpack_require__(68651);
;// CONCATENATED MODULE: ./src/ts/features/menus/siteMenu/SiteMenuModal.ts

var SiteMenuModuleClass = /** @class */ (function () {
    function SiteMenuModuleClass() {
    }
    SiteMenuModuleClass.prototype.initialize = function () {
        this.getSource().then(function (_a) {
            var SiteMenu = _a.SiteMenu;
            SiteMenu.initialize();
        });
    };
    SiteMenuModuleClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            DynamicCodeLoader/* DynamicCodeLoader.loadVelocityCode */.j.loadVelocityCode();
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    SiteMenuModuleClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | siteMenu */ 497).then(__webpack_require__.bind(__webpack_require__, 9554));
    };
    return SiteMenuModuleClass;
}());
var SiteMenuModule = new SiteMenuModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/manning-online/ManningOnlineCorporateManager.ts

var ManningOnlineCorporateManagerClass = /** @class */ (function () {
    function ManningOnlineCorporateManagerClass() {
    }
    ManningOnlineCorporateManagerClass.prototype.load = function (subscriptionId) {
        this.getSource().then(function (_a) {
            var ManningOnlineCorporatePage = _a.ManningOnlineCorporatePage;
            ManningOnlineCorporatePage.initialize(subscriptionId);
        });
    };
    ManningOnlineCorporateManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var ManningOnlineCorporatePage = _a.ManningOnlineCorporatePage;
            ManningOnlineCorporatePage.clean();
        });
    };
    ManningOnlineCorporateManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ManningOnlineCorporateManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | manningOnlineCorporate */[__webpack_require__.e(7034), __webpack_require__.e(6706), __webpack_require__.e(9502), __webpack_require__.e(6486), __webpack_require__.e(4491), __webpack_require__.e(2813), __webpack_require__.e(4523), __webpack_require__.e(8166)]).then(__webpack_require__.bind(__webpack_require__, 9209));
    };
    return ManningOnlineCorporateManagerClass;
}());
var ManningOnlineCorporateManager = new ManningOnlineCorporateManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/manning-online/ManningOnlineSurveyPageManager.tsx

var ManningOnlineSurveyPageManagerClass = /** @class */ (function () {
    function ManningOnlineSurveyPageManagerClass() {
    }
    ManningOnlineSurveyPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var ManningOnlineSurveyPage = _a.ManningOnlineSurveyPage;
            ManningOnlineSurveyPage.initialize();
        });
    };
    ManningOnlineSurveyPageManagerClass.prototype.loadNotify = function () {
        this.getSource().then(function (_a) {
            var ManningOnlineSurveyPage = _a.ManningOnlineSurveyPage;
            ManningOnlineSurveyPage.initializeNotifyPage();
        });
    };
    ManningOnlineSurveyPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var ManningOnlineSurveyPage = _a.ManningOnlineSurveyPage;
            ManningOnlineSurveyPage.clean();
        });
    };
    ManningOnlineSurveyPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    ManningOnlineSurveyPageManagerClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | manningOnlineSurveyPage */ 8500).then(__webpack_require__.bind(__webpack_require__, 98497));
    };
    return ManningOnlineSurveyPageManagerClass;
}());
var ManningOnlineSurveyPageManager = new ManningOnlineSurveyPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/demoDev/DemoDevPageManager.ts

var DemoDevPageManagerClass = /** @class */ (function () {
    function DemoDevPageManagerClass() {
    }
    DemoDevPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var DemoDevPage = _a.DemoDevPage;
            DemoDevPage.initialize();
        });
    };
    DemoDevPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var DemoDevPage = _a.DemoDevPage;
            DemoDevPage.clean();
        });
    };
    DemoDevPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    DemoDevPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | demoDev */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(6486), __webpack_require__.e(1851), __webpack_require__.e(6927), __webpack_require__.e(3610), __webpack_require__.e(1678), __webpack_require__.e(2566), __webpack_require__.e(7735), __webpack_require__.e(2074), __webpack_require__.e(1134)]).then(__webpack_require__.bind(__webpack_require__, 59270));
    };
    return DemoDevPageManagerClass;
}());
var DemoDevPageManager = new DemoDevPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/discussions-v2/DiscussionsV2PageManager.ts

var DiscussionsV2PageManagerClass = /** @class */ (function () {
    function DiscussionsV2PageManagerClass() {
    }
    DiscussionsV2PageManagerClass.prototype.load = function (data) {
        this.getSource().then(function (module) {
            console.log('loadDiscussionsV2Page', data);
            module.DiscussionsV2Page.initialize();
        });
    };
    DiscussionsV2PageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var DiscussionsV2Page = _a.DiscussionsV2Page;
            DiscussionsV2Page.clean();
        });
    };
    DiscussionsV2PageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    DiscussionsV2PageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | DiscussionsV2Page */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7213), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(3326), __webpack_require__.e(9502), __webpack_require__.e(5557), __webpack_require__.e(1389), __webpack_require__.e(8784), __webpack_require__.e(5788), __webpack_require__.e(4491), __webpack_require__.e(4858), __webpack_require__.e(3006), __webpack_require__.e(3861), __webpack_require__.e(3954), __webpack_require__.e(55), __webpack_require__.e(82), __webpack_require__.e(4841)]).then(__webpack_require__.bind(__webpack_require__, 27775));
    };
    return DiscussionsV2PageManagerClass;
}());
var DiscussionsV2PageManager_DiscussionsV2PageManager = new DiscussionsV2PageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/flashcards/FCardsPageManager.ts

var FCardsPageManagerClass = /** @class */ (function () {
    function FCardsPageManagerClass() {
    }
    FCardsPageManagerClass.prototype.load = function (routeId, isCollection) {
        this.getSource().then(function (_a) {
            var FCardsPage = _a.FCardsPage;
            FCardsPage.initialize(routeId, isCollection);
        });
    };
    FCardsPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var FCardsPage = _a.FCardsPage;
            FCardsPage.clean();
        });
    };
    FCardsPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    FCardsPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | FCardsPage */[__webpack_require__.e(6927), __webpack_require__.e(2566), __webpack_require__.e(2009)]).then(__webpack_require__.bind(__webpack_require__, 98758));
    };
    return FCardsPageManagerClass;
}());
var FCardsPageManager = new FCardsPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/livetest/LiveTestPageManager.ts

var LiveTestPageManagerClass = /** @class */ (function () {
    function LiveTestPageManagerClass() {
    }
    LiveTestPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var LiveTestPage = _a.LiveTestPage;
            LiveTestPage.initialize();
        });
    };
    LiveTestPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var LiveTestPage = _a.LiveTestPage;
            LiveTestPage.clean();
        });
    };
    LiveTestPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    LiveTestPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | Score */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(3326), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(6486), __webpack_require__.e(688), __webpack_require__.e(1851), __webpack_require__.e(2782), __webpack_require__.e(2181), __webpack_require__.e(7735), __webpack_require__.e(6879)]).then(__webpack_require__.bind(__webpack_require__, 95236));
    };
    return LiveTestPageManagerClass;
}());
var LiveTestPageManager = new LiveTestPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/leaderboard/LeaderboardPageManager.ts

var LeaderboardPageManagerClass = /** @class */ (function () {
    function LeaderboardPageManagerClass() {
    }
    LeaderboardPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var LeaderboardPage = _a.LeaderboardPage;
            LeaderboardPage.initialize();
        });
    };
    LeaderboardPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var LeaderboardPage = _a.LeaderboardPage;
            LeaderboardPage.clean();
        });
    };
    LeaderboardPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    LeaderboardPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | Score */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(3326), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(6486), __webpack_require__.e(688), __webpack_require__.e(1851), __webpack_require__.e(2782), __webpack_require__.e(2181), __webpack_require__.e(7735), __webpack_require__.e(6879)]).then(__webpack_require__.bind(__webpack_require__, 1600));
    };
    return LeaderboardPageManagerClass;
}());
var LeaderboardPageManager = new LeaderboardPageManagerClass();

// EXTERNAL MODULE: ./src/ts/modules/MainMenuModule.ts + 1 modules
var MainMenuModule = __webpack_require__(68993);
;// CONCATENATED MODULE: ./src/ts/managers/SearchConfigManager.ts

var SearchConfigPageManagerClass = /** @class */ (function () {
    function SearchConfigPageManagerClass() {
    }
    SearchConfigPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var SearchConfigPage = _a.SearchConfigPage;
            $(document).trigger("pageAppCodeLoaded");
            SearchConfigPage.initialize();
        });
    };
    SearchConfigPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var SearchConfigPage = _a.SearchConfigPage;
            return SearchConfigPage.clean();
        });
    };
    SearchConfigPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    SearchConfigPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | searchConfigPage */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(7213), __webpack_require__.e(5557), __webpack_require__.e(3861), __webpack_require__.e(6663), __webpack_require__.e(4221), __webpack_require__.e(7227), __webpack_require__.e(5601)]).then(__webpack_require__.bind(__webpack_require__, 44789));
    };
    return SearchConfigPageManagerClass;
}());
var SearchConfigPageManager = new SearchConfigPageManagerClass();

// EXTERNAL MODULE: ./src/ts/features/discussions/DiscussionModule.ts
var DiscussionModule = __webpack_require__(76043);
;// CONCATENATED MODULE: ./src/ts/pages/printBook/PrintBookPageManager.ts

var PrintBookPageManagerClass = /** @class */ (function () {
    function PrintBookPageManagerClass() {
    }
    PrintBookPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var PrintBookPage = _a.PrintBookPage;
            PrintBookPage.initialize();
        });
    };
    PrintBookPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var PrintBookPage = _a.PrintBookPage;
            return PrintBookPage.clean();
        });
    };
    PrintBookPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    PrintBookPageManagerClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | printBookPage */ 9739).then(__webpack_require__.bind(__webpack_require__, 36693));
    };
    return PrintBookPageManagerClass;
}());
var PrintBookPageManager = new PrintBookPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/pdfPreview/PdfPreviewPageManager.ts


var PdfPreviewPageManagerClass = /** @class */ (function () {
    function PdfPreviewPageManagerClass() {
    }
    PdfPreviewPageManagerClass.prototype.load = function () {
        var _this = this;
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data || !data.loggedIn || !data.userDetails) {
                return;
            }
            if (data.userDetails.isAdmin
                || data.userDetails.email == "jomaras+pdfbuilder@gmail.com") {
                _this.getSource().then(function (_a) {
                    var PdfPreviewPage = _a.PdfPreviewPage;
                    $(document).trigger("pageAppCodeLoaded");
                    PdfPreviewPage.initialize();
                });
            }
        });
    };
    PdfPreviewPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var PdfPreviewPage = _a.PdfPreviewPage;
            return PdfPreviewPage.clean();
        });
    };
    PdfPreviewPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    PdfPreviewPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | pdfPreviewPage */[__webpack_require__.e(9710), __webpack_require__.e(168)]).then(__webpack_require__.bind(__webpack_require__, 72085));
    };
    return PdfPreviewPageManagerClass;
}());
var PdfPreviewPageManager = new PdfPreviewPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/livetest/TestYourselfPageManager.ts

var TestYourselfPageManagerClass = /** @class */ (function () {
    function TestYourselfPageManagerClass() {
    }
    TestYourselfPageManagerClass.prototype.load = function () {
        this.getSource().then(function (_a) {
            var TestYourselfPage = _a.TestYourselfPage;
            TestYourselfPage.initialize();
        });
    };
    TestYourselfPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var TestYourselfPage = _a.TestYourselfPage;
            TestYourselfPage.clean();
        });
    };
    TestYourselfPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    TestYourselfPageManagerClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | Score */[__webpack_require__.e(7034), __webpack_require__.e(611), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(7147), __webpack_require__.e(6706), __webpack_require__.e(8114), __webpack_require__.e(3326), __webpack_require__.e(8758), __webpack_require__.e(3318), __webpack_require__.e(6486), __webpack_require__.e(688), __webpack_require__.e(1851), __webpack_require__.e(2782), __webpack_require__.e(2181), __webpack_require__.e(7735), __webpack_require__.e(6879)]).then(__webpack_require__.bind(__webpack_require__, 44920));
    };
    return TestYourselfPageManagerClass;
}());
var TestYourselfPageManager = new TestYourselfPageManagerClass();

// EXTERNAL MODULE: ./src/ts/utils/ReactUtils.ts
var ReactUtils = __webpack_require__(90605);
// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(67294);
;// CONCATENATED MODULE: ./src/ts/pages/livetest/LiveTestBooksPageManager.ts


var LiveTestBooksPageManagerClass = /** @class */ (function () {
    function LiveTestBooksPageManagerClass() {
        this.$mainPageContent = $("#main-page-content");
    }
    LiveTestBooksPageManagerClass.prototype.load = function () {
        var _this = this;
        this.clean();
        // Dynamically import the component
        this.getSource().then(function (_a) {
            var LiveTestBooksPage = _a.default;
            _this.root = ReactUtils/* ReactUtils.createRoot */.O.createRoot(_this.$mainPageContent[0]);
            _this.root.render(react.createElement(LiveTestBooksPage));
        });
    };
    LiveTestBooksPageManagerClass.prototype.clean = function () {
        if (this.root) {
            this.root.unmount();
            this.root = null;
        }
    };
    LiveTestBooksPageManagerClass.prototype.getSource = function () {
        return Promise.all(/* import() | LiveTestBooksPage */[__webpack_require__.e(602), __webpack_require__.e(8743)]).then(__webpack_require__.bind(__webpack_require__, 34893));
    };
    return LiveTestBooksPageManagerClass;
}());
var LiveTestBooksPageManager = new LiveTestBooksPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/livetest/LiveTestBookPageManager.ts


var LiveTestBookPageManagerClass = /** @class */ (function () {
    function LiveTestBookPageManagerClass() {
        this.$mainPageContent = $("#main-page-content");
    }
    LiveTestBookPageManagerClass.prototype.load = function (slug) {
        var _this = this;
        this.clean();
        // Dynamically import the component
        this.getSource().then(function (_a) {
            var LiveTestBookPage = _a.default;
            _this.root = ReactUtils/* ReactUtils.createRoot */.O.createRoot(_this.$mainPageContent[0]);
            _this.root.render(react.createElement(LiveTestBookPage, { slug: slug }));
        });
    };
    LiveTestBookPageManagerClass.prototype.clean = function () {
        if (this.root) {
            this.root.unmount();
            this.root = null;
        }
    };
    LiveTestBookPageManagerClass.prototype.getSource = function () {
        return __webpack_require__.e(/* import() | LiveTestBookPage */ 602).then(__webpack_require__.bind(__webpack_require__, 27426));
    };
    return LiveTestBookPageManagerClass;
}());
var LiveTestBookPageManager = new LiveTestBookPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/videoDigest/VideoDigestPageManager.ts


var VideoDigestPageManagerClass = /** @class */ (function () {
    function VideoDigestPageManagerClass() {
    }
    VideoDigestPageManagerClass.prototype.load = function (bookShortNameOrSlug, bookElementShortName, additional) {
        var currentTranslateXOffset = BookViewDOMUtils/* default.getCurrentMainContentTranslateX */.Z.getCurrentMainContentTranslateX();
        $("html, body").scrollTop(0);
        BookViewDOMUtils/* default.translateMainContent */.Z.translateMainContent(currentTranslateXOffset);
        this.getSource().then(function (_a) {
            var VideoDigestPage = _a.VideoDigestPage;
            VideoDigestPage.initialize(bookShortNameOrSlug, bookElementShortName, additional);
        });
    };
    VideoDigestPageManagerClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.sourcePromise.then(function (_a) {
            var VideoDigestPage = _a.VideoDigestPage;
            return VideoDigestPage.clean();
        });
    };
    VideoDigestPageManagerClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    VideoDigestPageManagerClass.prototype.constructSourcePromise = function () {
        return __webpack_require__.e(/* import() | videoDigestPage */ 3078).then(__webpack_require__.bind(__webpack_require__, 36376));
    };
    return VideoDigestPageManagerClass;
}());
var VideoDigestPageManager = new VideoDigestPageManagerClass();

;// CONCATENATED MODULE: ./src/ts/pages/premadeSearch/PremadeSearchModule.ts




var PremadeSearchModuleClass = /** @class */ (function () {
    function PremadeSearchModuleClass() {
    }
    PremadeSearchModuleClass.prototype.initialize = function () {
        var _this = this;
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                LoginModule/* LoginModule.requestLogin */.r.requestLogin("", "");
            }
            else {
                AuthProvider/* AuthProvider.isCurrentUserAdmin */.H.isCurrentUserAdmin().then(function (isAdmin) {
                    if (!isAdmin) {
                        WebUtils/* default.navigateToLocation */.Z.navigateToLocation("./");
                        return;
                    }
                    _this.getPremadeSearchManagerSource().then(function (_a) {
                        var PremadeSearchManager = _a.PremadeSearchManager;
                        PremadeSearchManager.initialize();
                    });
                }).catch(function (e) {
                    WebUtils/* default.navigateToLocation */.Z.navigateToLocation("./");
                });
            }
        });
    };
    PremadeSearchModuleClass.prototype.clean = function () {
    };
    PremadeSearchModuleClass.prototype.getPremadeSearchManagerSource = function () {
        if (!this.premadeSearchManagerSourcePromise) {
            this.premadeSearchManagerSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructPremadeSearchManagerSourcePromise);
        }
        return this.premadeSearchManagerSourcePromise;
    };
    PremadeSearchModuleClass.prototype.constructPremadeSearchManagerSourcePromise = function () {
        return Promise.all(/* import() | premadeSearchManager */[__webpack_require__.e(3253), __webpack_require__.e(605)]).then(__webpack_require__.bind(__webpack_require__, 28804));
    };
    return PremadeSearchModuleClass;
}());
var PremadeSearchModule = new PremadeSearchModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/wikiTermInspector/WikiTermInspectorModule.ts

var WikiTermInspectorModuleClass = /** @class */ (function () {
    function WikiTermInspectorModuleClass() {
    }
    WikiTermInspectorModuleClass.prototype.initialize = function () {
        /*AuthProvider.isLoggedIn().then(data => {
            if(!data.loggedIn){
                LoginModule.requestLogin("", "");
            } else {
                AuthProvider.isCurrentUserAdmin().then(isAdmin => {
                    if(!isAdmin){
                        WebUtils.navigateToLocation("./");
                        return;
                    }*/
        this.getWikiTermInspectorManagerSource().then(function (_a) {
            var WikiTermInspectorManager = _a.WikiTermInspectorManager;
            WikiTermInspectorManager.initialize();
        });
        /*}).catch(e => {
            WebUtils.navigateToLocation("./");
        });
    }
});*/
    };
    WikiTermInspectorModuleClass.prototype.initializeCategoryWiki = function (context) {
        this.getWikiTermInspectorManagerSource().then(function (_a) {
            var WikiTermInspectorManager = _a.WikiTermInspectorManager;
            WikiTermInspectorManager.initializeCategoryWiki(context.params.category, context.params.lemma);
        });
    };
    WikiTermInspectorModuleClass.prototype.clean = function () {
    };
    WikiTermInspectorModuleClass.prototype.getWikiTermInspectorManagerSource = function () {
        if (!this.wikiTermInspectorManagerSourcePromise) {
            this.wikiTermInspectorManagerSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructWikiTermInspectorManagerSourcePromise);
        }
        return this.wikiTermInspectorManagerSourcePromise;
    };
    WikiTermInspectorModuleClass.prototype.constructWikiTermInspectorManagerSourcePromise = function () {
        return Promise.all(/* import() | wikiTermInspectorManager */[__webpack_require__.e(7034), __webpack_require__.e(9927), __webpack_require__.e(1110), __webpack_require__.e(5995), __webpack_require__.e(7651)]).then(__webpack_require__.bind(__webpack_require__, 66758));
    };
    return WikiTermInspectorModuleClass;
}());
var WikiTermInspectorModule = new WikiTermInspectorModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/browsableAnimations/BrowsableAnimationsModule.ts
// import { LoginModule } from '../../modules/LoginModule';
// import { AuthProvider } from '../../services/authService/AuthProvider';

// import WebUtils from '../../utils/WebUtils';
var BrowsableAnimationsModuleClass = /** @class */ (function () {
    function BrowsableAnimationsModuleClass() {
    }
    BrowsableAnimationsModuleClass.prototype.initialize = function (context) {
        /*AuthProvider.isLoggedIn().then(data => {
            if(!data.loggedIn){
                LoginModule.requestLogin("", "");
            } else {
                AuthProvider.isCurrentUserAdmin().then(isAdmin => {
                    if(!isAdmin){
                        WebUtils.navigateToLocation("./");
                        return;
                    }*/
        this.getWikiTermInspectorManagerSource().then(function (_a) {
            var BrowsableAnimationsManager = _a.BrowsableAnimationsManager;
            BrowsableAnimationsManager.initialize((context === null || context === void 0 ? void 0 : context.params) || {});
        });
        /*}).catch(e => {
            WebUtils.navigateToLocation("./");
        });
    }
});*/
    };
    BrowsableAnimationsModuleClass.prototype.clean = function () {
    };
    BrowsableAnimationsModuleClass.prototype.getWikiTermInspectorManagerSource = function () {
        if (!this.browsableAnimationsManagerSourcePromise) {
            this.browsableAnimationsManagerSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructBrowsableAnimationsManagerSourcePromise);
        }
        return this.browsableAnimationsManagerSourcePromise;
    };
    BrowsableAnimationsModuleClass.prototype.constructBrowsableAnimationsManagerSourcePromise = function () {
        return Promise.all(/* import() | browsableAnimations */[__webpack_require__.e(7299), __webpack_require__.e(1221), __webpack_require__.e(3761), __webpack_require__.e(1928)]).then(__webpack_require__.bind(__webpack_require__, 83124));
    };
    return BrowsableAnimationsModuleClass;
}());
var BrowsableAnimationsModule = new BrowsableAnimationsModuleClass();

;// CONCATENATED MODULE: ./src/ts/pages/videoEditionExperiments/VideoEditionExperimentsModule.ts




var VideoEditionExperimentsClass = /** @class */ (function () {
    function VideoEditionExperimentsClass() {
        // TODO: This should be fetched from somewhere else.
        this.bookShortName = "lanham2";
        this.bookElementShortName = "chapter-1";
        this.meapVersion = 0;
        this.reviewVersion = 0;
    }
    VideoEditionExperimentsClass.prototype.load = function (book, bookElement) {
        book = book || this.bookShortName;
        bookElement = bookElement || this.bookElementShortName;
        Promise.all([
            this.getSource(),
            BookContentProvider/* BookContentProvider.getBookElement */.$.getBookElement(book, bookElement, this.meapVersion, this.reviewVersion),
            this.getTimeoutPromise(),
        ]).then(function (_a) {
            var VideoEditionsExperimentsPage = _a[0].VideoEditionsExperimentsPage, bookContent = _a[1];
            VideoEditionsExperimentsPage.initialize(bookContent.book, bookContent.bookElement);
        });
    };
    VideoEditionExperimentsClass.prototype.clean = function () {
        if (!this.sourcePromise) {
            return;
        }
        this.getSource().then(function (_a) {
            var VideoEditionsExperimentsPage = _a.VideoEditionsExperimentsPage;
            VideoEditionsExperimentsPage.clean();
        });
    };
    VideoEditionExperimentsClass.prototype.getSource = function () {
        if (!this.sourcePromise) {
            this.sourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructSourcePromise);
        }
        return this.sourcePromise;
    };
    VideoEditionExperimentsClass.prototype.constructSourcePromise = function () {
        return Promise.all(/* import() | videoEditionsExperiments */[__webpack_require__.e(9927), __webpack_require__.e(7299), __webpack_require__.e(1221), __webpack_require__.e(7500)]).then(__webpack_require__.bind(__webpack_require__, 99403));
    };
    VideoEditionExperimentsClass.prototype.getTimeoutPromise = function () {
        if (!DeviceUtils/* default.isApp */.Z.isApp()) {
            return Promise.resolve();
        }
        return new Promise(function (resolve, reject) {
            EventUtils/* default.setTimeout */.Z.setTimeout(function () { return resolve(); }, 200);
        });
    };
    return VideoEditionExperimentsClass;
}());
var VideoEditionExperimentsModule = new VideoEditionExperimentsClass();

;// CONCATENATED MODULE: ./src/ts/pages/inDesignPreview/InDesignPreviewModule.ts

var InDesignPreviewModuleClass = /** @class */ (function () {
    function InDesignPreviewModuleClass() {
    }
    InDesignPreviewModuleClass.prototype.initialize = function (context) {
        this.getInDesignManagerSource().then(function (_a) {
            var InDesignPreviewManager = _a.InDesignPreviewManager;
            InDesignPreviewManager.initialize((context === null || context === void 0 ? void 0 : context.params) || {});
        });
    };
    InDesignPreviewModuleClass.prototype.clean = function () {
    };
    InDesignPreviewModuleClass.prototype.getInDesignManagerSource = function () {
        if (!this.inDesignManagerSourcePromise) {
            this.inDesignManagerSourcePromise = DynamicCodeLoader/* DynamicCodeLoader.importWebpackModuleWithRetry */.j.importWebpackModuleWithRetry(this.constructInDesignManagerSourcePromise);
        }
        return this.inDesignManagerSourcePromise;
    };
    InDesignPreviewModuleClass.prototype.constructInDesignManagerSourcePromise = function () {
        return Promise.all(/* import() | inDesignPreview */[__webpack_require__.e(9710), __webpack_require__.e(7549)]).then(__webpack_require__.bind(__webpack_require__, 80039));
    };
    return InDesignPreviewModuleClass;
}());
var InDesignPreviewModule = new InDesignPreviewModuleClass();

;// CONCATENATED MODULE: ./src/ts/main.ts



































































var $document = $(document);
var IS_ON_DEVICE =  false || undefined;
var livebookLastAccess = LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("LIVEBOOK_LAST_ACCESS");
LocalStorageUtils/* LocalStorageUtils.setItem */.f.setItem("LIVEBOOK_LAST_ACCESS", Date.now());
Analytics/* default.initializeAnalyticsIfNecessary */.Z.initializeAnalyticsIfNecessary();
ActivityModule/* ActivityModule.initialize */.a.initialize();
(function loadIconFonts() {
    function insertIconFonts() {
        $('<link>').appendTo('head').attr({
            type: 'text/css',
            rel: 'stylesheet',
            href: "".concat(WebUtils/* default.getLivebookCdn */.Z.getLivebookCdn(), "vendor/fontawesome-5/css/all.min.css"),
        }).on("load", function () {
            $(document.body).addClass("icon-fonts-loaded");
        });
    }
    if (DeviceUtils/* default.isGoogleMobileScreenSize */.Z.isGoogleMobileScreenSize() && !livebookLastAccess) {
        EventUtils/* default.onUserHasInteracted */.Z.onUserHasInteracted(function () { return insertIconFonts(); }, true);
    }
    else {
        insertIconFonts();
    }
}());
(function loadOldNightModeSettings() {
    try {
        var settingsString = LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("settings");
        if (!settingsString) {
            return;
        }
        var settings = JSON.parse(settingsString);
        if (settings && settings["night-mode"]) {
            $(document.body).toggleClass("night-mode", true);
            $(document.documentElement).toggleClass("night-mode", true);
        }
    }
    catch (e) {
        console.log(e);
    }
})();
DeviceUtils/* default.loadDeviceInfo */.Z.loadDeviceInfo().then(function (deviceInfo) {
    $("body").addClass(deviceInfo.platformString);
    $("body").toggleClass("touch-device", DeviceUtils/* default.isTouchDevice */.Z.isTouchDevice());
    MainMenuModule/* MainMenuModule.initialize */.H.initialize();
    SiteMenuModule.initialize();
    if (ValueUtils/* ValueUtils.containsAtLeastOneOf */.d.containsAtLeastOneOf(document.location.hash || document.location.pathname, ["token-ledger", "token-modal", "token-cashout", "get-tokens"])) {
        $(document).trigger("requestNotification", "loading token data ...");
        MicropurchaseModule/* MicropurchaseModule.load */.i.load();
    }
    Footer/* default.initialize */.Z.initialize();
    Header/* Header.initialize */.h.initialize();
    MarketingEmailSubscriptionManager.initialize();
    AuthManager/* AuthManager.initialize */.E.initialize();
    HelpInfoFeedbackModule/* HelpInfoFeedbackModule.initialize */.G.initialize();
    //GeoMapModule.initialize();
    SearchModule/* SearchModule.initialize */.t.initialize();
    ShoppingCartModule/* ShoppingCartModule.initialize */.f.initialize();
    BackButton.initialize();
    PromoSpinnerModule.initialize();
    if (IS_ON_DEVICE) {
        modules_DeviceSyncModule/* DeviceSyncModule.initializeDownloadManager */.e.initializeDownloadManager();
        modules_DeviceSyncModule/* DeviceSyncModule.initilizeOfflineOperationsModal */.e.initilizeOfflineOperationsModal();
        if (false) {}
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                LoginModule/* LoginModule.requestOpenModal */.r.requestOpenModal("", "", "", LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("email"));
            }
        });
    }
    AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
        if (data.loggedIn) {
            if (GlobalStateInfo/* GlobalStateInfo.isSubscriptionBetaTester */.UU.isSubscriptionBetaTester(data.userDetails)) {
                $(".books-button").on("click", function () {
                    $(document).trigger("searchHideRequested");
                    page("/manning-online");
                });
                $(".books-button .header-icon-label").text("dashboard");
            }
            if (data.userDetails) {
                if (GlobalStateInfo/* GlobalStateInfo.getDiscussionsVersion */.UU.getDiscussionsVersion() === GlobalStateInfo/* __DISCUSSIONS_V1__ */.g5) {
                    DiscussionModule/* DiscussionModule.initialize */.R.initialize();
                    setTimeout(function () {
                        if (AuthProvider/* AuthProvider.isCurrentlyLoggedIn */.H.isCurrentlyLoggedIn()) {
                            DiscussionModule/* DiscussionModule.loadIfNotLoaded */.R.loadIfNotLoaded(GlobalStateInfo/* GlobalStateInfo.bookElement */.UU.bookElement != null ? GlobalStateInfo/* GlobalStateInfo.bookElement.shortName */.UU.bookElement.shortName : "");
                        }
                    }, 8000);
                }
            }
        }
        else {
            DynamicCodeLoader/* DynamicCodeLoader.loadGoogleSigninClient */.j.loadGoogleSigninClient().then(function () {
                //None of the events are usefull
                /*const win = window as any;

                if(win.google != null && win.google.accounts != null
                && win.google.accounts.id != null && win.google.accounts.id.prompt != null){
                    win.google.accounts.id.prompt(notification => {
                        if (notification.isDisplayed()) {
                            UserActionTrackerModule.processGenericAction("google_sign_in", "popup_displayed");
                        }
                        else if (notification.isSkippedMoment()) {
                            UserActionTrackerModule.processGenericAction("google_sign_in", "popup_skipped");
                        }
                        else if (notification.isNotDisplayed()) {
                            UserActionTrackerModule.processGenericAction("google_sign_in", "popup_not_displayed");
                        }
                    });
                }
                else {
                    UserActionTrackerModule.processGenericAction("google_sign_in", "client_sign_in_loaded");
                }*/
            });
        }
    });
});
var lastRefreshTime = Date.now();
var numberOfPageChanges = 0;
-handleRouting();
CommonPageFiller.insertNecessaryElements();
Header/* Header.fillWithNewBrowseHeader */.h.fillWithNewBrowseHeader();
Header/* Header.updateBrowseLinksAccordingToUserSubscriptionStatus */.h.updateBrowseLinksAccordingToUserSubscriptionStatus();
Header/* Header.registerEvents */.h.registerEvents();
Footer/* default.registerEvents */.Z.registerEvents();
function handleRouting() {
    page(RouteUtils/* RouteUtils.meapElementRoute */.D.meapElementRoute, function (context) { return loadBookPage(context); });
    page(RouteUtils/* RouteUtils.reviewElementRoute */.D.reviewElementRoute, function (context) { return loadBookPage(context); });
    page(RouteUtils/* RouteUtils.bookElementRoute */.D.bookElementRoute, function (context) { return loadBookPage(context); });
    page(RouteUtils/* RouteUtils.digestMeapElementRoute */.D.digestMeapElementRoute, function (context) { return loadDigestBookPage(context); });
    page(RouteUtils/* RouteUtils.digestBookElementRoute */.D.digestBookElementRoute, function (context) { return loadDigestBookPage(context); });
    page(RouteUtils/* RouteUtils.videoDigestBookElementRoute */.D.videoDigestBookElementRoute, function (context) { return loadVideoDigestBookPage(context); });
    page("/liveTestResults", function (context) { return loadLiveTestResultsPage(context); });
    page("/premadeSearch", function (context) { return loadPremadeSearch(context); });
    page("/wiki-term-inspector", function (context) { return loadWikiTermInspector(context); });
    page(RouteUtils/* RouteUtils.exerciseSuiteRoute */.D.exerciseSuiteRoute, function (context) { return loadExerciseSuitePage(context); });
    page(RouteUtils/* RouteUtils.videoRoute */.D.videoRoute, function (context) { return loadVideoPage(context); });
    page(RouteUtils/* RouteUtils.reviewReportRoute */.D.reviewReportRoute, function (context) { return loadReviewReportPage(context); });
    page(RouteUtils/* RouteUtils.conceptRoute */.D.conceptRoute, function (context) { return loadConceptsPage(context); });
    page(RouteUtils/* RouteUtils.scrapbookRoute */.D.scrapbookRoute, function (context) { return loadScrapbookPage(context); });
    page(RouteUtils/* RouteUtils.scrapbookItemRoute */.D.scrapbookItemRoute, function (context) { return loadScrapbookItemPage(context); });
    page(RouteUtils/* RouteUtils.liveCardsRoute */.D.liveCardsRoute, function (context) { return loadLiveCardsPage(context); });
    page(RouteUtils/* RouteUtils.liveCardsUnsubscribeRoute */.D.liveCardsUnsubscribeRoute, function (context) { return loadLiveCardsUnsubscribePage(context); });
    page(RouteUtils/* RouteUtils.liveCardsDeckRoute */.D.liveCardsDeckRoute, function (context) { return loadLiveCardsDeckPage(context); });
    page(RouteUtils/* RouteUtils.liveCardsCollectionRoute */.D.liveCardsCollectionRoute, function (context) { return loadLiveCardCollection(context); });
    page(RouteUtils/* RouteUtils.liveCardsSpacedLearningRoute */.D.liveCardsSpacedLearningRoute, function (context) { return loadLiveCardsSpacedLearning(context); });
    page(RouteUtils/* RouteUtils.liveCardsCollectionsRoute */.D.liveCardsCollectionsRoute, function (context) { return loadLiveCardsCollections(context); });
    page(RouteUtils/* RouteUtils.discussionsV2Route */.D.discussionsV2Route, function (context) { return loadDiscussionsV2Page(context); });
    page("/discussions", function (context) { return loadDiscussionsV2Page(context); });
    page("/discussion", function (context) { return loadDiscussionsV2Page(context); });
    // page(RouteUtils.discussionsV2ProductRoute, context => loadDiscussionsV2Product(context));
    // page(RouteUtils.discussionsV2ThreadRoute, context => loadDiscussionsV2Thread(context));
    // page(RouteUtils.discussionsV2ThreadNewRoute, context => loadDiscussionsV2ThreadNew(context));
    page("/", function () { return loadDefaultOrLastBeforeClose(); });
    page(RouteUtils/* RouteUtils.catalogRoute */.D.catalogRoute, function (context) { return loadCatalog(context); });
    page("/library", function (context) { return loadUserLibrary(context); });
    page("/print-book", function (context) { return loadPrintBookPage(context); });
    page("/exercise-examples", function (context) { return loadExerciseSuitePage(context); });
    page("/manning-online", function (context) { return loadManningOnline(context); });
    page(RouteUtils/* RouteUtils.manningOnlineCorporateRoute */.D.manningOnlineCorporateRoute, function (context) { return loadManningOnlineCorporate(context); });
    page(RouteUtils/* RouteUtils.wikiCategoryTermRoute */.D.wikiCategoryTermRoute, function (context) { return loadWikiCategoryTermRoute(context); });
    page(RouteUtils/* RouteUtils.browsableAnimationsRoute */.D.browsableAnimationsRoute, function (context) { return loadBrowsableAnimationsEditor(context); });
    page(RouteUtils/* RouteUtils.inDesignPreviewRoute */.D.inDesignPreviewRoute, function (context) { return loadInDesignPreview(context); });
    page("/reading-list", function (context) { return loadManningOnline(context); });
    page("/manning-online-beta", function (context) { return loadManningOnlineBetaPage(context); });
    page("/manning-online-survey", function (context) { return loadManningOnlineSurveyPage(context); });
    page("/manning-online-notify", function (context) { return loadManningOnlineNotifyPage(context); });
    page("/landing-page", function () { return loadLandingPage(); });
    page("/try-it", function (_) { return loadTryItsPage(); });
    page("/search-config", function (_) { return loadSearchConfig(); });
    page("/demo-dev", function (context) { return loadDemoDevPage(context); });
    page("/livetest/book/:slug", function (context) { return loadLiveTestBookPage(context); });
    page("/livetest/books", function (context) { return loadLiveTestBooksPage(context); });
    page("/livetest", function (context) { return loadTestYourselfPage(context); });
    page(RouteUtils/* RouteUtils.videoEditionExperimentsRoute */.D.videoEditionExperimentsRoute, function (context) { return loadVideoEditionExperiments(context); });
    page("/user-leaderboard", function (context) { return loadUserLeaderboardPage(context); });
    page("/test-scoring-leaderboard", function (context) { return loadUserLeaderboardPage(context); });
    page("/sitemap", function (ctx) {
        document.location = ctx.path;
    });
    page("epub-preview", function () { return loadEpubPreview(); });
    page("pdf-preview", function () { return loadPdfPreview(); });
    page(RouteUtils/* RouteUtils.editorRoute */.D.editorRoute, function (context) { return loadEditorPage(context); });
    page(RouteUtils/* RouteUtils.meapEditorRoute */.D.meapEditorRoute, function (context) { return loadEditorPage(context); });
    page(RouteUtils/* RouteUtils.reviewEditorRoute */.D.reviewEditorRoute, function (context) { return loadEditorPage(context); });
    page('*', function () { return setTimeout(function () { return guessRoute(); }, 50); });
    page({ hashbang: !!IS_ON_DEVICE, dispatch: false });
    if (document.location.hash
        || document.location.pathname != "/") {
        if (false) {}
        else {
            guessRoute();
        }
    }
    else if (document.location.href.indexOf("_escaped_fragment_=") != -1) {
        guessRoute();
    }
    else {
        loadDefaultOrLastBeforeClose();
    }
    processGeneralAdditionalUrlCommands();
}
function getCurrentPath() {
    var path = "";
    try {
        if (document.location.pathname.indexOf("/book/") != -1) {
            path = document.location.pathname;
        }
        else {
            path = document.location.hash || (document.location.pathname != "/" ? document.location.pathname : "") || document.location.search || "";
        }
        path = path.replace("?_escaped_fragment_=/", "").replace("#%21/", "#!/").replace("#!//", "").replace("#!/", "").replace("#!book", "book");
        if (path.startsWith("/")) {
            path = path.substring(1);
        }
    }
    catch (e) {
        return "";
    }
    return path;
}
function guessRoute(currentPath) {
    var path = currentPath || getCurrentPath();
    var rootPage = "index.html";
    if (path.indexOf(rootPage) >= 0) {
        path = path.substring(path.lastIndexOf(rootPage) + rootPage.length);
        path = path.replace("//", "/");
        if (path.startsWith("/")) {
            path = path.substring(1);
        }
    }
    if (path.startsWith("catalog")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.catalogRoute */.D.catalogRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadCatalog({ params: linkRouteData });
            return;
        }
    }
    else if (path.startsWith("library")) {
        loadUserLibrary();
    }
    else if (path.startsWith("print-book")) {
        loadPrintBookPage();
    }
    else if (path.startsWith("liveTestResults")) {
        loadLiveTestResultsPage();
    }
    else if (path.startsWith("premadeSearch")) {
        loadPremadeSearch();
    }
    else if (path.startsWith("wiki-term-inspector")) {
        loadWikiTermInspector();
    }
    else if (path.startsWith("livetest")) {
        if (path.endsWith('/')) {
            path = path.slice(0, -1);
        }
        if (path === "livetest") {
            loadTestYourselfPage();
        }
        else if (path === "livetest/books") {
            loadLiveTestBooksPage();
        }
        else if (path.startsWith("livetest/book/")) {
            var slug = path.substring("livetest/book/".length);
            loadLiveTestBookPage({ params: { slug: slug } });
        }
        else {
            loadTestYourselfPage();
        }
    }
    else if (path.startsWith("wiki/categories")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.wikiCategoryTermRoute */.D.wikiCategoryTermRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadWikiCategoryTermRoute({ params: linkRouteData });
            return;
        }
    }
    else if (path.startsWith("livecards")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.liveCardsRoute */.D.liveCardsRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadLiveCardsPage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.liveCardsCollectionsRoute */.D.liveCardsCollectionsRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadLiveCardsCollections({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.liveCardsSpacedLearningRoute */.D.liveCardsSpacedLearningRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadLiveCardsSpacedLearning({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.liveCardsUnsubscribeRoute */.D.liveCardsUnsubscribeRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadLiveCardsUnsubscribePage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.liveCardsDeckRoute */.D.liveCardsDeckRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadLiveCardsDeckPage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.liveCardsCollectionRoute */.D.liveCardsCollectionRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadLiveCardCollection({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if ((path.endsWith("forum")
        || path.endsWith("forum/")
        || path.endsWith("discussions")
        || path.endsWith("discussion")) && path.indexOf("/book/") == -1 && !path.startsWith("book/")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.discussionsV2ForumRoute */.D.discussionsV2ForumRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadDiscussionsV2Page({ params: linkRouteData });
            return;
        }
        else {
            loadDiscussionsV2Page({ params: linkRouteData });
        }
    }
    else if (path.endsWith("forum/ai-coding") || path.endsWith("forum/ai-coding/")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.discussionsV2ForumAiCodingRoute */.D.discussionsV2ForumAiCodingRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadDiscussionsV2Page({ params: linkRouteData });
            return;
        }
        else {
            loadDefault();
        }
    }
    else if (path.endsWith("forum/video-approval") || path.endsWith("forum/video-approval/")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.discussionsV2ForumVideoApprovalRoute */.D.discussionsV2ForumVideoApprovalRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadDiscussionsV2Page({ params: linkRouteData });
            return;
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("dsc-v2")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.discussionsV2Route */.D.discussionsV2Route, {});
        if (route.match("/" + path, linkRouteData)) {
            loadDiscussionsV2Page({ params: linkRouteData });
            return;
        }
        // route = new page.Route(RouteUtils.discussionsV2ProductRoute);
        // if(route.match("/" + path, linkRouteData)){
        //     loadDiscussionsV2Product({ params: linkRouteData});
        //     return;
        // }
        // route = new page.Route(RouteUtils.discussionsV2ThreadRoute);
        // if(route.match("/" + path, linkRouteData)){
        //     loadDiscussionsV2Thread({ params: linkRouteData});
        //     return;
        // } 
        // route = new page.Route(RouteUtils.discussionsV2ThreadNewRoute);
        // if(route.match("/" + path, linkRouteData)){
        //     loadDiscussionsV2ThreadNew({ params: linkRouteData});
        //     return;
        // }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("book")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.meapElementRoute */.D.meapElementRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadBookPage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.reviewElementRoute */.D.reviewElementRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadBookPage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.bookElementRoute */.D.bookElementRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadBookPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("digest")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.digestMeapElementRoute */.D.digestMeapElementRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadDigest({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.digestBookElementRoute */.D.digestBookElementRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadDigest({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("video-digest")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.videoDigestBookElementRoute */.D.videoDigestBookElementRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadVideoDigestBookPage({ params: linkRouteData });
            return;
        }
    }
    else if (path.startsWith("manning-online-beta")) {
        loadManningOnlineBetaPage();
    }
    else if (path.startsWith("manning-online-survey")) {
        loadManningOnlineSurveyPage();
    }
    else if (path.startsWith("manning-online-notify")) {
        loadManningOnlineNotifyPage();
    }
    else if (path.startsWith("demo-dev")) {
        loadDemoDevPage();
    }
    else if (path.startsWith("livetest")) {
        loadLiveTestPage();
    }
    else if (path.startsWith("user-leaderboard")) {
        loadUserLeaderboardPage();
    }
    else if (path.startsWith("video-edition-experiments")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.videoEditionExperimentsRoute */.D.videoEditionExperimentsRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadVideoEditionExperiments({ params: linkRouteData });
        }
    }
    else if (path.startsWith("test-scoring-leaderboard")) {
        loadTestScoringLeaderboardPage();
    }
    else if (path.startsWith("manning-online-corporate")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.manningOnlineCorporateRoute */.D.manningOnlineCorporateRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadManningOnlineCorporate({ params: linkRouteData });
        }
    }
    else if (path.startsWith("manning-online")
        || path.startsWith("reading-list")) {
        loadManningOnline();
    }
    else if (path.startsWith("exercise-examples")) {
        loadExerciseSuitePage();
    }
    else if (path.startsWith("exercise-suite")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.exerciseSuiteRoute */.D.exerciseSuiteRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadExerciseSuitePage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("video")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.videoRoute */.D.videoRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadVideoPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("review-report")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.reviewReportRoute */.D.reviewReportRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadReviewReportPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("concept")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.conceptRoute */.D.conceptRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadConceptsPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("notebook")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.scrapbookRoute */.D.scrapbookRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadScrapbookPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("scrapbook-item")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.scrapbookItemRoute */.D.scrapbookItemRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadScrapbookItemPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("try-it")) {
        loadTryItsPage();
    }
    else if (path.startsWith("search-config")) {
        loadSearchConfig();
    }
    else if (path.startsWith("epub-preview")) {
        loadEpubPreview();
    }
    else if (path.startsWith("browsable-animations")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.browsableAnimationsRoute */.D.browsableAnimationsRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadBrowsableAnimationsEditor({ params: linkRouteData });
            return;
        }
        else {
            loadBrowsableAnimationsEditor();
        }
    }
    else if (path.startsWith("in-design-preview")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.inDesignPreviewRoute */.D.inDesignPreviewRoute, {});
        if (route.match("/" + path, linkRouteData)) {
            loadInDesignPreview({ params: linkRouteData });
            return;
        }
        else {
            loadInDesignPreview();
        }
    }
    else if (path.startsWith("pdf-preview")) {
        loadPdfPreview();
    }
    else if (path.startsWith("edit")) {
        var linkRouteData = {};
        var route = new page.Route(RouteUtils/* RouteUtils.meapEditorRoute */.D.meapEditorRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadEditorPage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.reviewEditorRoute */.D.reviewEditorRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadEditorPage({ params: linkRouteData });
            return;
        }
        route = new page.Route(RouteUtils/* RouteUtils.editorRoute */.D.editorRoute);
        if (route.match("/" + path, linkRouteData)) {
            loadEditorPage({ params: linkRouteData });
        }
        else {
            loadDefault();
        }
    }
    else if (path.startsWith("profile")) {
        loadDefault();
        $document.trigger("requestNotification", "opening user profile menu ...");
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (data.loggedIn) {
                UserProfileModule/* UserProfileModule.showUserProfileModal */.Y.showUserProfileModal(path.startsWith("profile-beta"));
            }
            else {
                LoginModule/* LoginModule.requestOpenModal */.r.requestOpenModal("signin", "sign in to view your profile", "profile", LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("email"));
            }
        });
    }
    else if (path.startsWith("signin")) {
        document.location.hash = "";
        loadDefault();
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                LoginModule/* LoginModule.requestOpenModal */.r.requestOpenModal("signin", "sign in to complete your registration", "registration", LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("email"));
            }
        }).catch(function (e) {
            LoginModule/* LoginModule.requestOpenModal */.r.requestOpenModal("signin", "sign in to complete your registration", "registration", LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("email"));
        });
    }
    else if (path.startsWith("simple-signin")) {
        document.location.hash = "";
        loadDefault();
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!data.loggedIn) {
                LoginModule/* LoginModule.requestOpenModal */.r.requestOpenModal("signin", "enter new password to complete the registration", "registration", LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("email"));
            }
        }).catch(function (e) {
            LoginModule/* LoginModule.requestOpenModal */.r.requestOpenModal("signin", "enter new password to complete the registration", "registration", LocalStorageUtils/* LocalStorageUtils.getItem */.f.getItem("email"));
        });
    }
    else if (path.startsWith("sitemap")) {
        loadSitemapPage();
    }
    else {
        loadDefault();
    }
}
function loadDefaultOrLastBeforeClose() {
    if (false) {}
    else {
        loadDefault();
    }
}
function loadDefault() {
    loadLandingPage();
}
function loadLandingPage() {
    var host = document.location.host;
    if (host == "subscription-qa.manning.com"
        || host == "subscription.manning.com") {
        loadManningOnline();
        return;
    }
    checkForNewPageLoad("#!/landing-page");
    cleanWholePage();
    LandingPageManager.load();
    AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
        if (data.loggedIn) {
            if (!GlobalStateInfo/* GlobalStateInfo.isSubscriptionBetaTester */.UU.isSubscriptionBetaTester(data.userDetails)) {
                BooksMenuModule/* BooksMenuModule.initialize */.z.initialize();
            }
        }
    });
    $document.trigger("pageLoaded");
}
function getUrlFromContext(context) {
    if (!context || !context.params.book) {
        return "";
    }
    var url = "book/".concat(context.params.book, "/").concat(context.params.bookElement || "");
    if (context.params.reviewVersion) {
        url += "/r-".concat(context.params.reviewVersion);
    }
    else if (context.params.meapVersion) {
        url += "/v-".concat(context.params.meapVersion);
    }
    return url;
}
function loadDigest(context) {
    var currentBookData = RouteUtils/* RouteUtils.getCurrentRouteInfo */.D.getCurrentRouteInfo();
    checkForNewPageLoad(getUrlFromContext(context));
    cleanWholePage();
    loadDigestBookPage(context);
    numberOfPageChanges++;
    $document.trigger("pageLoaded");
}
function loadBookPage(context) {
    var currentBookData = RouteUtils/* RouteUtils.getCurrentRouteInfo */.D.getCurrentRouteInfo();
    checkForNewPageLoad(getUrlFromContext(context));
    if (currentBookData && currentBookData.book === context.params.book && context.params.bookElement) {
        cleanContent();
    }
    else {
        cleanWholePage();
    }
    if (context.params.reviewVersion) {
        AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
            if (!!data.loggedIn) {
                loadTargetBookPage(context);
            }
            else {
                LoginModule/* LoginModule.requestLogin */.r.requestLogin("", "");
            }
        });
    }
    else {
        if (!AuthProvider/* AuthProvider.isCurrentlyLoggedIn */.H.isCurrentlyLoggedIn() && WebUtils/* default.hasSsoCookie */.Z.hasSsoCookie()) {
            AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
                loadTargetBookPage(context);
            });
        }
        else {
            loadTargetBookPage(context);
        }
    }
    numberOfPageChanges++;
    $document.trigger("pageLoaded");
}
function loadVideoDigestBookPage(context) {
    var additional = context.params.additional;
    if (!additional && document.location.hash) {
        try {
            var hash = document.location.hash;
            if (hash.indexOf("#") == 0) {
                hash = hash.substring(1);
            }
            additional = hash;
        }
        catch (e) {
            console.log(e);
        }
    }
    VideoDigestPageManager.load(context.params.book, context.params.bookElement, context.params.additional);
}
function loadDigestBookPage(context) {
    var additional = context.params.additional;
    if (!additional && document.location.hash) {
        try {
            var hash = document.location.hash;
            if (hash.indexOf("#") == 0) {
                hash = hash.substring(1);
            }
            additional = hash;
        }
        catch (e) {
            console.log(e);
        }
    }
    DigestPageManager.load(context.params.book, (context.params.bookElement || "").replace(/^search-/, ""), context.params.meapVersion, additional);
}
function loadTargetBookPage(context) {
    if (document.location.search.indexOf("review-form") >= 0) {
        GlobalStateInfo/* GlobalStateInfo.shouldImmediatelyOpenBookReview */.UU.shouldImmediatelyOpenBookReview = true;
    }
    var additional = context.params.additional;
    if (!additional && document.location.hash) {
        try {
            var hash = document.location.hash;
            if (hash.indexOf("#") == 0) {
                hash = hash.substring(1);
            }
            additional = hash;
        }
        catch (e) {
            console.log(e);
        }
    }
    BookPageManager.load(context.params.book, (context.params.bookElement || "").replace(/^search-/, ""), context.params.meapVersion, context.params.reviewVersion, additional);
}
function loadManningOnlineCorporate(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    if (context && context.params
        && context.params.id && ValueUtils/* ValueUtils.isNumber */.d.isNumber(context.params.id)) {
        ManningOnlineCorporateManager.load(+context.params.id);
        $document.trigger("pageLoaded");
    }
    else {
        loadManningOnline();
    }
}
function loadManningOnline(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    ManningOnlinePageManager.load();
    $document.trigger("pageLoaded");
}
function loadManningOnlineNotifyPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    ManningOnlineSurveyPageManager.loadNotify();
    $document.trigger("pageLoaded");
}
function loadManningOnlineSurveyPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    ManningOnlineSurveyPageManager.load();
    $document.trigger("pageLoaded");
}
function loadManningOnlineBetaPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    ManningOnlineBetaPageManager.load();
    $document.trigger("pageLoaded");
}
function loadDemoDevPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    DemoDevPageManager.load();
    $document.trigger("pageLoaded");
}
function loadLiveTestPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    LiveTestPageManager.load();
    $document.trigger("pageLoaded");
}
function loadTestYourselfPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    TestYourselfPageManager.load();
    $document.trigger("pageLoaded");
}
function loadLiveTestBooksPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    LiveTestBooksPageManager.load();
    $document.trigger("pageLoaded");
}
function loadLiveTestBookPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    var slug = context.params.slug;
    LiveTestBookPageManager.load(slug);
    $document.trigger("pageLoaded");
}
function loadVideoEditionExperiments(context) {
    var _a, _b;
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    VideoEditionExperimentsModule.load((_a = context === null || context === void 0 ? void 0 : context.params) === null || _a === void 0 ? void 0 : _a.book, (_b = context === null || context === void 0 ? void 0 : context.params) === null || _b === void 0 ? void 0 : _b.bookElement);
    $document.trigger("pageLoaded");
}
function loadUserLeaderboardPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    LeaderboardPageManager.load();
    $document.trigger("pageLoaded");
}
function loadTestScoringLeaderboardPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    LeaderboardPageManager.load();
    $document.trigger("pageLoaded");
}
function loadExerciseSuitePage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    ExercisesPageManager.load(context != null && context.params != null ? context.params.exerciseSuite : "");
    $document.trigger("pageLoaded");
}
function loadLiveTestResultsPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    LiveTestResultsPageManager.load();
    $document.trigger("pageLoaded");
}
function loadInDesignPreview(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    InDesignPreviewModule.initialize(context);
    $document.trigger("pageLoaded");
}
function loadBrowsableAnimationsEditor(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    BrowsableAnimationsModule.initialize(context);
    $document.trigger("pageLoaded");
}
function loadWikiCategoryTermRoute(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    var existingWikiTermInspector = document.getElementById("wiki-term-inspector");
    if (existingWikiTermInspector == null
        || !context || !context.params
        || existingWikiTermInspector.getAttribute("data-category") != context.params.category
        || existingWikiTermInspector.getAttribute("data-lemma") != context.params.lemma
        || existingWikiTermInspector.getAttribute("data-server-side") != "true") {
        cleanWholePage();
    }
    WikiTermInspectorModule.initializeCategoryWiki(context);
    $document.trigger("pageLoaded");
}
function loadWikiTermInspector(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    WikiTermInspectorModule.initialize();
    $document.trigger("pageLoaded");
}
function loadPremadeSearch(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    PremadeSearchModule.initialize();
    $document.trigger("pageLoaded");
}
function loadReviewReportPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    if (context != null && context.params != null && context.params.book) {
        ReviewReportModule.load((context != null && context.params != null ? context.params.book : ""), context.params.reviewVersion);
    }
    else {
        loadDefault();
    }
    $document.trigger("pageLoaded");
}
function loadConceptsPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    if (context != null && context.params != null && context.params.category && context.params.concept) {
        ConceptModule.load(context.params.category, context.params.concept);
    }
    else {
        loadDefault();
    }
    $document.trigger("pageLoaded");
}
function loadScrapbookItemPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    if (context != null && context.params != null && context.params.path) {
        var _a = atob(context.params.path).split("/"), userId = _a[0], scrapbookItemId = _a[1];
        scrapbookItemId = scrapbookItemId.replace("scrapbookItem-", "");
        StandaloneScrapbookModule.loadScrapbookItem(userId, scrapbookItemId);
    }
    else {
        loadDefault();
    }
    $document.trigger("pageLoaded");
}
function loadLiveCardsPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    var isCollection = false;
    FCardsPageManager.load(context, isCollection);
    $document.trigger("pageLoaded");
}
function loadLiveCardsSpacedLearning(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    var isCollection = true;
    FCardsPageManager.load(context, isCollection);
    $document.trigger("pageLoaded");
}
function loadLiveCardsUnsubscribePage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    var isCollection = false;
    FCardsPageManager.load(context, isCollection);
    $document.trigger("pageLoaded");
}
function loadLiveCardsDeckPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    var isCollection = false;
    FCardsPageManager.load(context, isCollection);
    $document.trigger("pageLoaded");
}
function loadLiveCardsCollections(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    console.log("loadLiveCardsCollections", context);
}
function loadLiveCardCollection(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    var isCollection = true;
    FCardsPageManager.load(context, isCollection);
    $document.trigger("pageLoaded");
}
function loadDiscussionsV2Page(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    console.log('loadDiscussionsV2Page');
    DiscussionsV2PageManager_DiscussionsV2PageManager.load(context);
    $document.trigger("pageLoaded");
}
function loadDiscussionsV2Product(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    console.log('loadDiscussionsV2Product');
    DiscussionsV2PageManager.load(context);
    $document.trigger("pageLoaded");
}
function loadDiscussionsV2Thread(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    console.log('loadDiscussionsV2Thread');
    DiscussionsV2PageManager.load(context);
    $document.trigger("pageLoaded");
}
function loadDiscussionsV2ThreadNew(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    console.log('loadDiscussionsV2ThreadNew');
    DiscussionsV2PageManager.load(context);
    $document.trigger("pageLoaded");
}
function loadScrapbookPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    if (context != null && context.params != null && context.params.path) {
        var _a = atob(context.params.path).split("/"), userId = _a[0], scrapbookId = _a[1];
        StandaloneScrapbookModule.load(userId, scrapbookId);
    }
    else {
        loadDefault();
    }
    $document.trigger("pageLoaded");
}
function loadVideoPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    if (context != null && context.params != null && context.params.book) {
        VideoPageManager.load((context != null && context.params != null ? context.params.book : ""));
    }
    else {
        loadDefault();
    }
    $document.trigger("pageLoaded");
}
function loadSearchConfig() {
    checkForNewPageLoad("try-it");
    cleanWholePage();
    SearchConfigPageManager.load();
    $document.trigger("pageLoaded");
}
function loadTryItsPage() {
    checkForNewPageLoad("try-it");
    cleanWholePage();
    TryItPageManager.load();
    $document.trigger("pageLoaded");
}
function loadPdfPreview() {
    checkForNewPageLoad("pdf-preview");
    cleanWholePage();
    PdfPreviewPageManager.load();
    $document.trigger("pageLoaded");
}
function loadEpubPreview() {
    checkForNewPageLoad("epub-preview");
    cleanWholePage();
    EpubPreviewPageManager.load();
    $document.trigger("pageLoaded");
}
function loadSitemapPage() {
    checkForNewPageLoad("sitemap");
    $document.trigger("sitemapPageCodeLoaded");
}
function loadEditorPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    EditorPageManager.load(context.params.book, (context.params.bookElement || "").replace(/^search-/, ""), context.params.meapVersion, context.params.reviewVersion);
    $document.trigger("pageLoaded");
}
function loadPrintBookPage(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    PrintBookPageManager.load();
    $document.trigger("pageLoaded");
}
function loadUserLibrary(context) {
    AuthProvider/* AuthProvider.isLoggedIn */.H.isLoggedIn().then(function (data) {
        if (!!data.loggedIn) {
            if (data.userDetails.isBetaUser) {
                loadManningOnline(context);
            }
            else {
                checkForNewPageLoad("library");
                cleanWholePage();
                LibraryPageManager.load();
                $document.trigger("pageLoaded");
            }
        }
        else {
            page("/");
        }
    });
}
function loadCatalog(context) {
    checkForNewPageLoad(context && context.canonicalPath);
    cleanWholePage();
    CatalogPageManager.load(context && context.params && context.params.category);
    $document.trigger("pageLoaded");
}
function processGeneralAdditionalUrlCommands() {
    if (WebUtils/* default.isAdditionalInstruction */.Z.isAdditionalInstruction("openShoppingCart")) {
        WebUtils/* default.removeAdditionalInstruction */.Z.removeAdditionalInstruction();
        setTimeout(function () { return ShoppingCartModule/* ShoppingCartModule.requestMenuOpen */.f.requestMenuOpen(); }, 400);
    }
}
function cleanWholePage() {
    cleanContent();
    cleanBookContent();
    LibraryPageManager.clean();
    BookPageManager.clean();
    DigestPageManager.clean();
    LandingPageManager.clean();
    CatalogPageManager.clean();
    ExercisesPageManager.clean();
    VideoPageManager.clean();
    ReviewReportModule.clean();
    MicropurchaseModule/* MicropurchaseModule.clean */.i.clean();
    TryItPageManager.clean();
    EditorPageManager.clean();
    Header/* Header.hideBrowseHeader */.h.hideBrowseHeader();
    StandaloneScrapbookModule.clean();
    ManningOnlinePageManager.clean();
    ManningOnlineCorporateManager.clean();
    DiscussionsV2PageManager_DiscussionsV2PageManager.clean();
    PrintBookPageManager.clean();
    LiveTestBooksPageManager.clean();
    LiveTestBookPageManager.clean();
    $(document).trigger("requestTocIndexMenuClose");
}
function cleanContent() {
    EventUtils/* default.clearTimers */.Z.clearTimers();
    LibraryPageManager.clean();
    BookPageManager.partialClean();
    DigestPageManager.partialClean();
    CatalogPageManager.clean();
    NotificationsManager/* default.hideNotification */.Z.hideNotification();
    Header/* Header.hideBrowseHeader */.h.hideBrowseHeader();
}
function checkForNewPageLoad(newLocation, alwaysRefresh) {
    if (newLocation === void 0) { newLocation = ""; }
    GlobalStateInfo/* GlobalStateInfo.addToVisitHistory */.UU.addToVisitHistory(newLocation);
    if (!IS_ON_DEVICE) {
        if (Date.now() - lastRefreshTime > GlobalStateInfo/* GlobalStateInfo.refreshDataAfter */.UU.refreshDataAfter
            || numberOfPageChanges > 15
            || alwaysRefresh) {
            lastRefreshTime = Date.now();
            if (newLocation) {
                if (newLocation.indexOf("book/") == 0) {
                    newLocation = "/" + newLocation;
                }
                location.href = newLocation;
                return;
            }
            WebUtils/* default.reloadPage */.Z.reloadPage();
        }
    }
}
function cleanBookContent() {
    if ($("#main-page-content .backend-main-page-content").length == 0) {
        GlobalStateInfo/* GlobalStateInfo.setNewMainPageContent */.UU.setNewMainPageContent("<div class=\"book-content-loader loader\"></div>");
    }
}
function onOnline() {
    $(document.body).addClass("online").removeClass("offline");
    DeviceSyncModule.synchronizeUserCreatedData();
}
function onOffline() {
    $(document.body).removeClass("online").addClass("offline");
}
if (IS_ON_DEVICE) {
    if (DeviceUtils/* default.isConnected */.Z.isConnected()) {
        $(document.body).addClass("online").removeClass("offline");
        modules_DeviceSyncModule/* DeviceSyncModule.synchronizeUserCreatedData */.e.synchronizeUserCreatedData();
    }
    else {
        $(document.body).removeClass("online").addClass("offline");
    }
    if (false) {}
    else if (false) {}
    (function createBaseTag() {
        var base = document.createElement("base");
        base.setAttribute("href", document.location.href);
        document.head.appendChild(base);
    }());
    modules_DeviceSyncModule/* DeviceSyncModule.initializeUpdateManager */.e.initializeUpdateManager();
    $(document).trigger("requestBookUpdates");
}

})();

/******/ })()
;
//# sourceMappingURL=app.js.map